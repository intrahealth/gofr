(function(e){function t(t){for(var r,s,n=t[0],c=t[1],l=t[2],u=0,d=[];u<n.length;u++)s=n[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);h&&h(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,s=1;s<a.length;s++){var n=a[s];0!==o[n]&&(r=!1)}r&&(i.splice(t--,1),e=c(c.s=a[0]))}return e}var r={},s={app:0},o={app:0},i=[];function n(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-0779b602":"72e05f01","chunk-08a9b5b7":"91845eb4","chunk-19a7ffa0":"2932fe0a","chunk-1b3d2af8":"6da47763","chunk-1f83e9dc":"d1817db1","chunk-2d0af298":"07cd8ebc","chunk-2d0afa68":"7e89d0be","chunk-2d0b8b5d":"72ae6dc5","chunk-2d0da301":"4c7af4a9","chunk-2d0f083f":"069e95d2","chunk-2d210a08":"0f8a48ae","chunk-2d216051":"42cc9149","chunk-2f5db3ea":"593919fc","chunk-32294727":"d2a8fdfe","chunk-5369b150":"ac37709e","chunk-53797504":"3877b748","chunk-53cb3a14":"1dd800d1","chunk-549ed7a0":"1e8a3480","chunk-5cafeba1":"dd3d0612","chunk-5e700835":"59f7abc4","chunk-5e71a7f0":"846756e5","chunk-63fba70c":"435344e8","chunk-67c19840":"47cf2ee0","chunk-fdba1cee":"46b4c6a9","chunk-69088730":"75ba9cac","chunk-69e0cc28":"665e101e","chunk-69e4563a":"50817003","chunk-72162224":"886598a3","chunk-2d0c17b7":"9bc8668f","chunk-2d0e2c53":"86b16eb8","chunk-748c7801":"9856bd6e","chunk-77a0b274":"98635bfc","chunk-78a0fc3a":"cda456ce","chunk-7da34f76":"b2a92769","chunk-2d0b9df2":"d675ef1a","chunk-2d0c2116":"7a87d876","chunk-2d0e6654":"78e4f678","chunk-2d0efc9d":"12dddc87","chunk-570203e5":"ee7333c3","chunk-d3e34a68":"bb61cc25","chunk-2d0c913f":"1d7ad8c3","chunk-69cd279c":"4400525e","chunk-69cd8b49":"8a792f00"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={"chunk-32294727":1,"chunk-53cb3a14":1,"chunk-549ed7a0":1,"chunk-72162224":1,"chunk-748c7801":1,"chunk-7da34f76":1,"chunk-570203e5":1};s[e]?t.push(s[e]):0!==s[e]&&a[e]&&t.push(s[e]=new Promise((function(t,a){for(var r="css/"+({}[e]||e)+"."+{"chunk-0779b602":"31d6cfe0","chunk-08a9b5b7":"31d6cfe0","chunk-19a7ffa0":"31d6cfe0","chunk-1b3d2af8":"31d6cfe0","chunk-1f83e9dc":"31d6cfe0","chunk-2d0af298":"31d6cfe0","chunk-2d0afa68":"31d6cfe0","chunk-2d0b8b5d":"31d6cfe0","chunk-2d0da301":"31d6cfe0","chunk-2d0f083f":"31d6cfe0","chunk-2d210a08":"31d6cfe0","chunk-2d216051":"31d6cfe0","chunk-2f5db3ea":"31d6cfe0","chunk-32294727":"a5c908f7","chunk-5369b150":"31d6cfe0","chunk-53797504":"31d6cfe0","chunk-53cb3a14":"2976e3dc","chunk-549ed7a0":"2976e3dc","chunk-5cafeba1":"31d6cfe0","chunk-5e700835":"31d6cfe0","chunk-5e71a7f0":"31d6cfe0","chunk-63fba70c":"31d6cfe0","chunk-67c19840":"31d6cfe0","chunk-fdba1cee":"31d6cfe0","chunk-69088730":"31d6cfe0","chunk-69e0cc28":"31d6cfe0","chunk-69e4563a":"31d6cfe0","chunk-72162224":"7cb64c1b","chunk-2d0c17b7":"31d6cfe0","chunk-2d0e2c53":"31d6cfe0","chunk-748c7801":"50dbc238","chunk-77a0b274":"31d6cfe0","chunk-78a0fc3a":"31d6cfe0","chunk-7da34f76":"76a811a3","chunk-2d0b9df2":"31d6cfe0","chunk-2d0c2116":"31d6cfe0","chunk-2d0e6654":"31d6cfe0","chunk-2d0efc9d":"31d6cfe0","chunk-570203e5":"2976e3dc","chunk-d3e34a68":"31d6cfe0","chunk-2d0c913f":"31d6cfe0","chunk-69cd279c":"31d6cfe0","chunk-69cd8b49":"31d6cfe0"}[e]+".css",o=c.p+r,i=document.getElementsByTagName("link"),n=0;n<i.length;n++){var l=i[n],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===r||u===o))return t()}var d=document.getElementsByTagName("style");for(n=0;n<d.length;n++){l=d[n],u=l.getAttribute("data-href");if(u===r||u===o)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete s[e],h.parentNode.removeChild(h),a(i)},h.href=o;var v=document.getElementsByTagName("head")[0];v.appendChild(h)})).then((function(){s[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,a){r=o[e]=[t,a]}));t.push(r[2]=i);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=n(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(h);var a=o[e];if(0!==a){if(a){var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",d.name="ChunkLoadError",d.type=r,d.request=s,a[1](d)}o[e]=void 0}};var h=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(a,r,function(t){return e[t]}.bind(null,r));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var h=u;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},2966:function(e,t,a){},"336e":function(e,t,a){"use strict";a("2966")},"49f8":function(e,t,a){var r={"./en.json":"edd4","./fr.json":"f693"};function s(e){var t=o(e);return a(t)}function o(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=o,e.exports=s,s.id="49f8"},"56d7":function(e,t,a){"use strict";a.r(t),a.d(t,"eventBus",(function(){return Rr}));a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("ac1f"),a("5319"),a("1276"),a("d3b7"),a("4c53"),a("b0c0"),a("7db0");var r=a("a026"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-app-bar",{attrs:{color:"primary",dark:"",app:"","clipped-left":"","clipped-right":""}},[r("v-toolbar-title",{domProps:{textContent:e._s(e.title)}}),r("v-spacer"),e.$keycloak&&e.$keycloak.authenticated||e.$store.state.auth.userID||e.$store.state.config.generalConfig.authDisabled?r("v-toolbar-items",[e.dhisLink?r("v-btn",{attrs:{flat:"",href:e.dhisLink}},[r("img",{attrs:{src:a("754f")}})]):e._e(),r("appMenu")],1):e._e(),r("v-spacer"),r("v-toolbar-items")],1),r("v-main",[r("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.$store.state.dynamicProgress,callback:function(t){e.$set(e.$store.state,"dynamicProgress",t)},expression:"$store.state.dynamicProgress"}},[r("v-card",{attrs:{color:"primary",dark:""}},[r("v-card-text",[e._v(" "+e._s(e.$store.state.progressTitle)+" "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),r("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.$store.state.dialogError,callback:function(t){e.$set(e.$store.state,"dialogError",t)},expression:"$store.state.dialogError"}},[r("v-card",[r("v-toolbar",{attrs:{color:e.$store.state.errorColor,dark:""}},[r("v-toolbar-title",[e._v(" "+e._s(e.$store.state.errorTitle)+" ")]),r("v-spacer"),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.$store.state.dialogError=!1}}},[r("v-icon",[e._v("mdi-close")])],1)],1),r("v-card-text",[e._v(" "+e._s(e.$store.state.errorDescription)+" ")]),r("v-card-actions",[r("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){return e.closeDialogError(t)}}},[e._v("Ok")])],1)],1)],1),r("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.$store.state.initializingApp,callback:function(t){e.$set(e.$store.state,"initializingApp",t)},expression:"$store.state.initializingApp"}},[r("v-card",{attrs:{color:"primary",dark:""}},[r("v-card-text",[e._v(" "+e._s(e.$t("App.initApp"))+" "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),r("v-snackbar",{staticClass:"mt-12",attrs:{app:"",color:e.$store.state.message.type,timeout:e.$store.state.message.timeout,top:"","multi-line":""},model:{value:e.$store.state.message.active,callback:function(t){e.$set(e.$store.state.message,"active",t)},expression:"$store.state.message.active"}},[e._v(" "+e._s(e.$store.state.message.text)+" "),r("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){return e.$store.commit("closeMessage")}}},[r("v-icon",[e._v("mdi-close")])],1)],1),r("v-row",[r("v-col",[Object.keys(e.$store.state.activePair.source1).length>0&&!e.$store.state.denyAccess?[e._v(" "+e._s(e.$t("App.source"))+" 1: "),r("b",[e._v(e._s(e.$store.state.activePair.source1.display))]),e._v(", "+e._s(e.$t("App.source"))+" 2: "),r("b",[e._v(e._s(e.$store.state.activePair.source2.display))]),e._v(", Recon Status: "),"in-progress"===e.$store.state.recoStatus?r("v-icon",{attrs:{small:""}},[e._v("mdi-lock-open-variant-outline")]):r("v-icon",{attrs:{small:""}},[e._v("mdi-lock-outline")]),e._v(" "),r("b",[e._v(e._s(e.$store.state.recoStatus))])]:e._e()],2),r("v-col",{attrs:{cols:"2"}},[r("v-select",{attrs:{items:e.locales},model:{value:e.locale,callback:function(t){e.locale=t},expression:"locale"}})],1)],1),r("center",[r("v-alert",{style:{width:e.$store.state.alert.width},attrs:{type:e.$store.state.alert.type,dismissible:e.$store.state.alert.dismisible,transition:e.$store.state.alert.transition},model:{value:e.$store.state.alert.show,callback:function(t){e.$set(e.$store.state.alert,"show",t)},expression:"$store.state.alert.show"}},[e._v(" "+e._s(e.$store.state.alert.msg)+" ")])],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs4:""}}),r("v-spacer"),r("v-flex",{attrs:{xs1:""}})],1),r("router-view",{key:e.$route.path})],1),r("v-footer",{attrs:{dark:"",color:"primary",fixed:e.fixed,app:""}})],1)},o=[],i=a("53ca"),n=a("b85c"),c=a("5530"),l=(a("99af"),a("b64b"),a("bc3a")),u=a.n(l),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{attrs:{id:"menu"}},[e.$tasksVerification.hasPermissionByName("special","custom","access-facility-reconciliation-mod")?a("li",{staticClass:"parent"},[a("a",{attrs:{href:"#"}},[a("v-icon",[e._v("mdi-spellcheck")]),e._v(" "+e._s(e.$t("App.menu.facilityRecon.msg"))+" ")],1),a("ul",{staticClass:"child"},[e.$tasksVerification.hasPermissionByName("special","custom","manage-data-source")?a("li",{staticClass:"parent"},[a("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"#"}},[a("v-icon",{attrs:{color:"black",left:""}},[e._v("mdi-sync")]),e._v(e._s(e.$t("App.menu.dataSourcesParent.msg"))+" "),a("v-icon",{staticClass:"menuArrow",attrs:{color:"black",small:""}},[e._v("mdi-play")])],1),a("ul",{staticClass:"child"},[e.$tasksVerification.hasPermissionByName("special","custom","add-data-source")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/AddDataSources"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-cloud-upload")]),e._v(" "+e._s(e.$t("App.menu.addDataSources.msg"))+" ")],1)],1)]}}],null,!1,687082157)},[a("span",[e._v(e._s(e.$t("App.menu.addDataSources.tooltip")))])])],1):e._e(),e.$tasksVerification.hasPermissionByName("special","custom","view-data-source")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/ViewDataSources"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-format-list-bulleted-square")]),e._v(e._s(e.$t("App.menu.viewDataSources.msg"))+" ")],1)],1)]}}],null,!1,2993043827)},[a("span",[e._v(e._s(e.$t("App.menu.viewDataSources.tooltip")))])])],1):e._e()],1)]):e._e(),e.$tasksVerification.hasPermissionByName("special","custom","data-source-reconciliation")?a("v-list",{class:{disabledMenu:0===Object.keys(e.$store.state.activePair.source1).length,lastMenu:!0}},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/view",color:"white",disabled:0===Object.keys(e.$store.state.activePair.source1).length}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-format-list-bulleted-square")]),e._v(e._s(e.$t("App.menu.view.msg"))+" ")],1)],1)]}}],null,!1,2044375888)},[a("span",[e._v(e._s(e.$t("App.menu.view.tooltip")))])])],1):e._e(),e.$tasksVerification.hasPermissionByName("special","custom","manage-reconciliations")?a("li",{staticClass:"parent"},[a("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"#"}},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-compare-horizontal")]),e._v(e._s(e.$t("App.menu.reconcile.msg"))+" "),a("v-icon",{staticClass:"menuArrow",attrs:{color:"black",small:""}},[e._v("mdi-play")])],1),a("ul",{staticClass:"child"},[e.$tasksVerification.hasPermissionByName("special","custom","view-source-pair")?a("v-list",{class:{disabledMenu:e.$store.state.dataSources.length<=1||e.$store.state.dataSourcePairs.length<=0,lastMenu:!0}},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/dataSourcesPair",disabled:e.$store.state.dataSources.length<=1&&0===e.$store.state.dataSourcePairs.length}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-numeric-2-box-multiple-outline")]),e._v(e._s(e.$t("App.menu.createPair.msg"))+" ")],1)],1)]}}],null,!1,3764437934)},[a("span",[e._v(e._s(e.$t("App.menu.createPair.tooltip")))])])],1):e._e(),e.$tasksVerification.hasPermissionByName("special","custom","data-source-reconciliation")?a("v-list",{class:{disabledMenu:0===Object.keys(e.$store.state.activePair.source1).length,lastMenu:!0}},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/scores",disabled:0===Object.keys(e.$store.state.activePair.source1).length}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-book-search")]),e._v(e._s(e.$t("App.menu.reconcile.msg"))+" ")],1)],1)]}}],null,!1,3226277521)},[a("span",[e._v(e._s(e.$t("App.menu.reconcile.tooltip")))])])],1):e._e(),e.$tasksVerification.hasPermissionByName("special","custom","view-matching-status")?a("v-list",{class:{disabledMenu:0===Object.keys(e.$store.state.activePair.source1).length,lastMenu:!0}},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/recoStatus",disabled:0===Object.keys(e.$store.state.activePair.source1).length}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-view-dashboard")]),e._v(" "+e._s(e.$t("App.menu.recoStatus.msg"))+" ")],1)],1)]}}],null,!1,109277401)},[a("span",[e._v(e._s(e.$t("App.menu.recoStatus.tooltip")))])])],1):e._e()],1)]):e._e()],1)]):e._e(),e.$tasksVerification.hasPermissionByName("special","custom","access-facility-registry-mod")?a("li",{staticClass:"parent"},[a("a",{attrs:{href:"#"}},[a("v-icon",[e._v("mdi-map-marker")]),e._v(e._s(e.$t("App.menu.facilityRegistry.msg"))+" ")],1),e.$tasksVerification.hasPermissionByName("special","navigation","search-records")?a("ul",{staticClass:"child"},[a("li",{staticClass:"parent"},[a("a",{attrs:{href:"#"}},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-magnify")]),e._v(" "+e._s(e.$t("App.menu.search.msg"))+" "),a("v-icon",{staticClass:"menuArrow",attrs:{color:"black",small:""}},[e._v("mdi-play")])],1),a("ul",{staticClass:"child"},[e.$tasksVerification.hasPermissionByName("special","custom","view-search-facility-page")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/Resource/Search/facility"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-magnify")]),e._v(e._s(e.$t("App.menu.searchFacility.msg"))+" ")],1)],1)]}}],null,!1,2203957888)},[a("span",[e._v(e._s(e.$t("App.menu.searchFacility.tooltip")))])])],1):e._e(),e.$tasksVerification.hasPermissionByName("special","custom","view-search-jurisdiction-page")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/Resource/Search/jurisdiction"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-magnify")]),e._v(e._s(e.$t("App.menu.searchJurisdiction.msg"))+" ")],1)],1)]}}],null,!1,1925631744)},[a("span",[e._v(e._s(e.$t("App.menu.searchJurisdiction.tooltip")))])])],1):e._e(),e.$tasksVerification.hasPermissionByName("special","custom","view-search-organization-page")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/Resource/Search/mcsd-organization"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-magnify")]),e._v(e._s(e.$t("App.menu.searchOrganization.msg"))+" ")],1)],1)]}}],null,!1,2131843924)},[a("span",[e._v(e._s(e.$t("App.menu.searchOrganization.tooltip")))])])],1):e._e(),e.$tasksVerification.hasPermissionByName("special","custom","view-search-service-page")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/Resource/Search/service"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-magnify")]),e._v(e._s(e.$t("App.menu.searchService.msg"))+" ")],1)],1)]}}],null,!1,1542065888)},[a("span",[e._v(e._s(e.$t("App.menu.searchService.tooltip")))])])],1):e._e(),e.$tasksVerification.hasPermissionByName("special","custom","view-add-facility-requests")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/Resource/Search/facility-add-request/process-add-request"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-magnify")]),e._v(e._s(e.$t("App.menu.searchFacilityAddRequest.msg"))+" ")],1)],1)]}}],null,!1,3485559028)},[a("span",[e._v(e._s(e.$t("App.menu.searchFacilityAddRequest.tooltip")))])])],1):e._e(),e.$tasksVerification.hasPermissionByName("special","custom","view-update-facility-requests")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/Resource/Search/facility-update-request/process-update-request"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-magnify")]),e._v(e._s(e.$t("App.menu.searchFacilityUpdateRequest.msg"))+" ")],1)],1)]}}],null,!1,933363556)},[a("span",[e._v(e._s(e.$t("App.menu.searchFacilityUpdateRequest.tooltip")))])])],1):e._e()],1)]),e.$tasksVerification.hasPermissionByName("special","custom","view-add-jurisdiction-page")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/Resource/Add/jurisdiction"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-home-city")]),e._v(e._s(e.$t("App.menu.addJurisdiction.msg"))+" ")],1)],1)]}}],null,!1,286617302)},[a("span",[e._v(e._s(e.$t("App.menu.addJurisdiction.tooltip")))])])],1):e._e(),e.$tasksVerification.hasPermissionByName("special","custom","view-add-facility-page")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/questionnaire/gofr-facility-questionnaire/facility"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-hospital-building")]),e._v(e._s(e.$t("App.menu.addFacility.msg"))+" ")],1)],1)]}}],null,!1,3656909710)},[a("span",[e._v(e._s(e.$t("App.menu.addFacility.tooltip")))])])],1):e._e(),e.$tasksVerification.hasPermissionByName("special","custom","view-add-organization-page")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/questionnaire/gofr-organization-questionnaire/mcsd-organization"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-home-city")]),e._v(e._s(e.$t("App.menu.addOrganization.msg"))+" ")],1)],1)]}}],null,!1,983812558)},[a("span",[e._v(e._s(e.$t("App.menu.addOrganization.tooltip")))])])],1):e._e(),e.$tasksVerification.hasPermissionByName("special","custom","view-add-healthcare-service-page")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/Resource/Add/service"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-room-service")]),e._v(e._s(e.$t("App.menu.addService.msg"))+" ")],1)],1)]}}],null,!1,2194227548)},[a("span",[e._v(e._s(e.$t("App.menu.addService.tooltip")))])])],1):e._e(),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/ViewMap"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-google-maps")]),e._v(e._s(e.$t("App.menu.viewMap.msg"))+" ")],1)],1)]}}],null,!1,3231254354)},[a("span",[e._v(e._s(e.$t("App.menu.viewMap.tooltip")))])])],1),e.$tasksVerification.hasPermissionByName("special","custom","make-facilityregistry-requests")?a("li",{staticClass:"parent"},[a("a",{attrs:{href:"#"}},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-call-made")]),e._v(" "+e._s(e.$t("App.menu.facilityRequests.msg"))+" "),a("v-icon",{staticClass:"menuArrow",attrs:{color:"black",small:""}},[e._v("mdi-play")])],1),a("ul",{staticClass:"child"},[e.$tasksVerification.hasPermissionByName("special","custom","view-request-add-facility-page")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/questionnaire/gofr-facility-add-request-questionnaire/facility-add-request"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-call-made")]),e._v(e._s(e.$t("App.menu.requestNewFacility.msg"))+" ")],1)],1)]}}],null,!1,2821237455)},[a("span",[e._v(e._s(e.$t("App.menu.requestNewFacility.tooltip")))])])],1):e._e(),e.$tasksVerification.hasPermissionByName("special","custom","view-request-update-facility-page")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/Resource/Search/facility?searchAction=send-update-request"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-call-made")]),e._v(e._s(e.$t("App.menu.requestUpdateFacility.msg"))+" ")],1)],1)]}}],null,!1,2328103313)},[a("span",[e._v(e._s(e.$t("App.menu.requestUpdateFacility.tooltip")))])])],1):e._e()],1)]):e._e()],1):e._e()]):e._e(),"keycloak"===e.$store.state.idp?a("li",{staticClass:"parent"},[a("a",{attrs:{href:e.keycloak_account,target:"_blank"}},[a("v-icon",[e._v("mdi-account-outline")]),e._v(e._s(e.$t("App.menu.account.msg"))+" ")],1)]):e.$tasksVerification.hasPermissionByName("special","custom","manage-account")?a("li",{staticClass:"parent"},[a("a",{attrs:{href:"#"}},[a("v-icon",[e._v("mdi-account-outline")]),e._v(e._s(e.$t("App.menu.account.msg"))+" ")],1),a("ul",{staticClass:"child"},[a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.$tasksVerification.hasPermissionByName("special","custom","add-user")?a("v-list-item",e._g({attrs:{to:"/addUser"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-account-outline")]),e._v(e._s(e.$t("App.menu.addUser.msg"))+" ")],1)],1):e._e()]}}])},[a("span",[e._v(e._s(e.$t("App.menu.addUser.tooltip")))])])],1),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.$tasksVerification.hasPermissionByName("special","custom","view-user")?a("v-list-item",e._g({attrs:{to:"/usersList"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-account-outline")]),e._v(e._s(e.$t("App.menu.usersList.msg"))+" ")],1)],1):e._e()]}}])},[a("span",[e._v(e._s(e.$t("App.menu.usersList.tooltip")))])])],1),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.$tasksVerification.hasPermissionByName("special","custom","add-user")?a("v-list-item",e._g({attrs:{to:"/rolesManagement"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-account-outline")]),e._v(e._s(e.$t("App.menu.rolesManagement.msg"))+" ")],1)],1):e._e()]}}])},[a("span",[e._v(e._s(e.$t("App.menu.rolesManagement.tooltip")))])])],1),a("v-list",{staticClass:"lastMenu"},[a("v-list-item",{attrs:{to:"/changePassword"}},[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-account-outline")]),e._v(e._s(e.$t("App.menu.changePassword.msg"))+" ")],1)],1)],1)],1)]):e._e(),e.$tasksVerification.hasPermissionByName("special","custom","view-config-page")?a("li",{staticClass:"parent"},[e.$store.state.denyAccess?e._e():a("v-list-item",{staticClass:"newClass",attrs:{to:"/configure"}},[a("v-list-item-title",[a("v-icon",[e._v("mdi-cog")]),e._v(" "+e._s(e.$t("App.menu.configure.msg"))+" ")],1)],1)],1):e._e(),a("li",{staticClass:"parent"},[e.$store.state.denyAccess||e.$store.state.config.generalConfig.authDisabled||!e.$store.state.auth.userObj?e._e():a("v-list-item",{staticClass:"newClass",attrs:{to:"/logout"}},[a("v-list-item-title",[a("v-icon",[e._v("mdi-logout")]),e._v(" "+e._s(e.$t("App.menu.logout.msg"))+" ")],1)],1)],1)])},h=[],v={computed:{keycloak_account:function(){return this.$store.state.keycloak.baseURL+"/realms/"+this.$store.state.keycloak.realm+"/account"}}},p=v,g=(a("336e"),a("2877")),f=a("6544"),m=a.n(f),y=a("132d"),$=a("8860"),S=a("da13"),b=a("5d23"),x=a("3a2f"),_=Object(g["a"])(p,d,h,!1,null,"02991cce",null),k=_.exports;m()(_,{VIcon:y["a"],VList:$["a"],VListItem:S["a"],VListItemTitle:b["c"],VTooltip:x["a"]});a("fb6a"),a("a15b"),a("d81d"),a("159b");var w={data:function(){return{roles:[],tasks:[]}},computed:{canAddDataset:function(){var e=this;if(this.$store.state.config.generalConfig.reconciliation.singleDataSource){var t,a=0,r=Object(n["a"])(this.$store.state.dataSources);try{var s=function(){var r=t.value;if(r.id===e.$store.state.config.generalConfig.reconciliation.fixSource2To)return"continue";var s=e.$store.state.auth.userID,o=e.$store.state.dhis.user.orgId,i=r.shared.users.find((function(e){return e.id===s})),n=r.owner.id===s,c=!0===r.shareToAll.activated,l=!1;if(r.owner.orgId&&r.owner.orgId===o&&(l=!0),!n&&!i&&!c&&!l)return"continue";a++};for(r.s();!(t=r.n()).done;)s()}catch(o){r.e(o)}finally{r.f()}return!(a>=1)||(this.datasetLimitWarn=!0,!1)}return!0}},methods:{flattenExtension:function(e){var t,a={},r=Object(n["a"])(e);try{for(r.s();!(t=r.n()).done;){for(var s=t.value,o="",i=0,c=Object.keys(s);i<c.length;i++){var l=c[i];"url"!==l&&(o=s[l])}a[s.url]?Array.isArray(a[s.url])?a[s.url].push(o):a[s.url]=[a[s.url],o]:Array.isArray(o)?a[s.url]=[o]:a[s.url]=o}}catch(u){r.e(u)}finally{r.f()}return a},getCodeSystem:function(e,t){u.a.get("/FR/getCodeSystem",{params:{codeSystemType:e}}).then((function(e){return t(null,e.data)})).catch((function(e){return console.log(e),t(e,null)}))},getTree:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0;u.a.get("/FR/getTree",{params:{includeBuilding:e,recursive:t}}).then((function(e){if(e.data){var t=!1;return a(t,e.data)}})).catch((function(e){return a(e,[])}))},clearProgress:function(e){u.a.get("/clearProgress/"+e+"/"+this.$store.state.clientId)},getGeneralConfig:function(e){var t=this,a=JSON.stringify(this.$store.state.config.generalConfig);u.a.get("/config/getGeneralConfig?defaultGenerConfig="+a).then((function(a){return a&&(t.$store.state.config.generalConfig=a.data.generalConfig),e()})).catch((function(){return e()}))},toTitleCase:function(e){return e.toLowerCase().split(" ").map((function(e){return e.replace(e[0],e[0].toUpperCase())})).join("").toLowerCase()},translateDataHeader:function(e,t){var a=this.$store.state.config.userConfig.reconciliation.useCSVHeader,r=this.$store.state.levelMapping;if(!a||a&&r[e]["level"+t]==="level"+t)return"Level "+t;if(Object.keys(this.$store.state.levelMapping[e]).length>0){var s,o=this.$store.state.levelMapping[e],i=1;for(var n in o)0===n.indexOf("level")&&i++;"source1"===e&&(s=this.$store.state.totalSource1Levels),"source2"===e&&(s=this.$store.state.totalSource2Levels),s--;var c=i-s;t+=c;var l=this.$store.state.levelMapping[e]["level"+t];return l&&"null"!==l&&"undefined"!==l&&"false"!==l?l:this.$store.state.levelMapping[e]["facility"]}return"Level "+t},getActiveDataSourcePair:function(){var e,t=this,a={};return this.$store.state.dataSourcePairs.forEach((function(r){r.user.id===t.$store.state.auth.userID&&"active"===r.status&&(a=r),Object.keys(a).length>0?e=void 0:r.user.id!==t.$store.state.auth.userID&&r.activeUsers.find((function(e){return e.id===t.$store.state.auth.userID}))&&(e=r)})),e&&(a=e),a},getDatasourceOwner:function(){var e={source1Owner:"",source2Owner:""};return this.$store.state.activePair.source1.hasOwnProperty("userID")&&(e.source1Owner=this.$store.state.activePair.source1.userID),this.$store.state.activePair.source2.hasOwnProperty("userID")&&(e.source2Owner=this.$store.state.activePair.source2.userID),e},getLimitOrgIdOnActivePair:function(){var e=this,t={source1LimitOrgId:[],source2LimitOrgId:[]},a=this.$store.state.dataSources.find((function(t){return t.id===e.$store.state.activePair.source1.id})),r=this.$store.state.dataSources.find((function(t){return t.id===e.$store.state.activePair.source2.id}));if(a&&a.hasOwnProperty("userID")&&a.userID!==this.$store.state.auth.userID){var s=a.sharedUsers.find((function(t){return t.id===e.$store.state.auth.userID}));s&&s.limits.length>0?t.source1LimitOrgId=s.limits:a.shareToAll.activated&&a.shareToAll.limitByUserLocation&&this.$store.state.dhis.user.orgId&&(t.source1LimitOrgId=[this.$store.state.dhis.user.orgId])}if(r&&r.hasOwnProperty("userID")&&r.userID!==this.$store.state.auth.userID){var o=r.sharedUsers.find((function(t){return t.id===e.$store.state.auth.userID}));o&&o.limits.length>0?t.source2LimitOrgId=o.limits:r.shareToAll.activated&&r.shareToAll.limitByUserLocation&&this.$store.state.dhis.user.orgId&&(t.source2LimitOrgId=[this.$store.state.dhis.user.orgId])}return t},getLimitOrgIdOnDataSource:function(e){var t=this,a=[];if(e&&e.hasOwnProperty("userID")&&e.userID!==this.$store.state.auth.userID){var r=e.sharedUsers.find((function(e){return e.id===t.$store.state.auth.userID}));r&&r.limits.length>0?a=r.limits:e.shareToAll.activated&&e.shareToAll.limitByUserLocation&&this.$store.state.dhis.user.orgId&&(a=[this.$store.state.dhis.user.orgId])}return a},getRoles:function(){var e=this;u.a.get("/getRoles").then((function(t){var a,r=Object(n["a"])(t.data);try{for(r.s();!(a=r.n()).done;){var s=a.value;e.roles.push({text:s.name,value:s.id,tasks:s.tasks})}}catch(o){r.e(o)}finally{r.f()}})).catch((function(e){console.log(e.response)}))},getTasks:function(){var e=this;u.a.get("/getTasks").then((function(t){e.tasks=t.data})).catch((function(e){console.log(e.response)}))},saveConfiguration:function(e,t){var a,r=this,s=this.$store.state.auth.userID,o=new FormData;o.append("config",JSON.stringify(this.$store.state.config)),o.append("userID",s),a="generalConfig"===e?"/config/updateGeneralConfig":"/config/updateUserConfig/".concat(this.$store.state.auth.userID),u.a.post(a,o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){"useCSVHeader"===t&&Rr.$emit("changeCSVHeaderNames"),"authDisabled"===t&&r.$router.push({name:"Logout"})}))},setDHIS2Credentials:function(){this.$store.state.auth.userID="";var e=location.href.split("api");return!(e.length<2)&&(this.$store.state.dhis.host=location.href.split("api").shift(),u.a.defaults.params={authDisabled:!0},!0)}}},P=u.a.CancelToken,D={mixins:[w],data:function(){return{loadingSource2Unmatched:!1,loadingSource1Unmatched:!1,topTree:""}},methods:{scoreProgressCheckTimeout:function(){this.$store.state.scoresProgressData.scoreProgressTitle="Server is busy with automatching, please be patient",clearInterval(this.$store.state.scoresProgressData.progressReqTimer);var e=parseInt(this.$store.state.scoresProgressData.scoreProgressPercent);100!==e||100===e&&"last"!==this.$store.state.scoresProgressData.stage?(this.$store.state.scoresProgressData.requestCancelled=!0,this.$store.state.scoresProgressData.cancelTokenSource.cancel("Cancelling request."),this.checkScoreProgress()):this.$store.state.scoresProgressData.scoreProgressTitle="Please be patient, waiting for server response"},scoreSavingProgressCheckTimeout:function(){clearInterval(this.$store.state.scoreSavingProgressData.progressReqTimer),this.$store.state.scoreSavingProgressData.requestCancelled=!0,this.$store.state.scoreSavingProgressData.cancelTokenSource.cancel("Cancelling request."),this.checkScoreSavingStatus(),this.saveProgressTimedout=!0},checkScoreProgress:function(){var e,t=this;this.$store.state.scoresProgressData.cancelTokenSource=P.source();var a=parseInt(this.$store.state.scoresProgressData.scoreProgressPercent);e=a>96?402382:1e4,this.$store.state.scoresProgressData.progressReqTimer=setInterval(this.scoreProgressCheckTimeout,e);var r=this.$store.state.clientId;u.a.get("/progress/scoreResults/"+r,{cancelToken:this.$store.state.scoresProgressData.cancelTokenSource.token}).then((function(e){if(clearInterval(t.$store.state.scoresProgressData.progressReqTimer),!e.data||!(e.data.status||e.data.percent||e.data.error||0!==t.$store.state.scoreResults.length))return t.$store.state.scoresProgressData.scoreDialog=!1,t.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status",t.$store.state.errorTitle="An error has occured",t.$store.state.errorDescription="An error has occured while reaching out to server, please click recalculate scores to restart automatch",t.$store.state.errorColor="error",t.$store.state.dialogError=!0,t.clearProgress("scoreResults"),t.$store.state.scoreSavingProgressData.savingMatches=!0,void t.checkScoreSavingStatus();if(null===e.data.status&&null===e.data.percent&&null===e.data.error&&t.$store.state.scoreResults.length>0)return t.$store.state.scoresProgressData.scoreDialog=!1,t.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status",t.clearProgress("scoreResults"),t.$store.state.scoreSavingProgressData.savingMatches=!0,void t.checkScoreSavingStatus();if(t.$store.state.scoresProgressData.scoreProgressTitle=e.data.status,e.data.percent&&("percent"!==t.$store.state.scoresProgressData.progressType&&(t.$store.state.scoresProgressData.progressType="percent"),t.$store.state.scoresProgressData.scoreProgressPercent=e.data.percent,t.$store.state.scoresProgressData.stage=e.data.stage),"Done"===e.data.status&&0===t.$store.state.scoreResults.length){t.clearProgress("scoreResults"),t.$store.state.scoreSavingProgressData.savingMatches=!0,t.checkScoreSavingStatus(),t.loadingSource1Unmatched=!1,t.loadingSource2Unmatched=!1;var a=e.data.responseData;t.$store.state.source2UnMatched=a.source2Unmatched,t.$store.state.source1UnMatched=[],t.$store.state.matchedContent=[],t.$store.state.noMatchContent=[],t.$store.state.ignoreContent=[],t.$store.state.flagged=[],t.$store.state.scoreResults=a.scoreResults,t.$store.state.source2TotalRecords=a.source2TotalRecords,t.$store.state.source2TotalAllRecords=a.source2TotalAllRecords,t.$store.state.totalAllMapped=a.totalAllMapped,t.$store.state.totalAllFlagged=a.totalAllFlagged,t.$store.state.totalAllNoMatch=a.totalAllNoMatch,t.$store.state.totalAllIgnore=a.totalAllIgnore,t.$store.state.source1TotalAllNotMapped=a.source1TotalAllNotMapped,t.$store.state.source1TotalAllRecords=a.source1TotalAllRecords;var r,s=Object(n["a"])(t.$store.state.scoreResults);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(o.source1.hasOwnProperty("tag")&&"flagged"===o.source1.tag)t.$store.state.flagged.push({source1Name:o.source1.name,source1Id:o.source1.id,source1IdHierarchy:o.source1.source1IdHierarchy,source1Parents:o.source1.parents,source2Name:o.exactMatch.name,source2Id:o.exactMatch.id,source2IdHierarchy:o.exactMatch.source2IdHierarchy,mappedParentName:o.exactMatch.mappedParentName,source2Parents:o.exactMatch.parents,flagComment:o.source1.flagComment});else if(o.source1.hasOwnProperty("tag")&&"noMatch"===o.source1.tag){var i=o.source1.parents;t.$store.state.noMatchContent.push({source1Name:o.source1.name,source1Id:o.source1.id,parents:i})}else if(o.source1.hasOwnProperty("tag")&&"ignore"===o.source1.tag){var c=o.source1.parents;t.$store.state.ignoreContent.push({source1Name:o.source1.name,source1Id:o.source1.id,parents:c})}else if(Object.keys(o.exactMatch).length>0)t.$store.state.matchedContent.push({source1Name:o.source1.name,source1Id:o.source1.id,source1Parents:o.source1.parents,source2Name:o.exactMatch.name,source2Id:o.exactMatch.id,source2IdHierarchy:o.exactMatch.source2IdHierarchy,mappedParentName:o.exactMatch.mappedParentName,source2Parents:o.exactMatch.parents,matchComments:o.exactMatch.matchComments});else{for(var l=t.topTree,u=o.source1.parents.length-1;u>=0;u--)l[o.source1.parents[u]]||(l[o.source1.parents[u]]={}),l=l[o.source1.parents[u]];t.$store.state.source1UnMatched.push({name:o.source1.name,id:o.source1.id,parents:o.source1.parents})}}}catch(d){s.e(d)}finally{s.f()}t.$store.state.source1Parents=t.topTree,t.$store.state.scoresProgressData.scoreDialog=!1,t.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status"}else t.checkScoreProgress()})).catch((function(){t.$store.state.scoresProgressData.requestCancelled?t.$store.state.scoresProgressData.requestCancelled=!1:(clearInterval(t.$store.state.scoresProgressData.progressReqTimer),t.checkScoreProgress())}))},checkScoreSavingStatus:function(){var e=this;this.$store.state.scoreSavingProgressData.cancelTokenSource=P.source(),this.$store.state.scoreSavingProgressData.progressReqTimer=setInterval(this.scoreSavingProgressCheckTimeout,1e4);var t=this.$store.state.clientId;u.a.get("/progress/scoreSavingStatus/"+t,{cancelToken:this.$store.state.scoreSavingProgressData.cancelTokenSource.token}).then((function(t){return clearInterval(e.$store.state.scoreSavingProgressData.progressReqTimer),t.data&&(t.data.status||t.data.percent||t.data.error||!e.$store.state.scoreSavingProgressData.savingMatches)?t.data.status||t.data.percent||t.data.error||e.$store.state.scoreSavingProgressData.savingMatches?(t.data.percent&&(e.$store.state.scoreSavingProgressData.percent=t.data.percent),void(100===t.data.percent?(e.$store.state.scoreSavingProgressData.savingMatches=!1,e.$store.state.scoreSavingProgressData.percent=0,e.clearProgress("scoreSavingStatus")):e.checkScoreSavingStatus())):(e.$store.state.scoreSavingProgressData.savingMatches=!1,e.$store.state.scoreSavingProgressData.percent=0,void e.clearProgress("scoreSavingStatus")):(e.$store.state.errorTitle="An error has occured",e.$store.state.errorDescription="An error has occured while checking saving status",e.$store.state.errorColor="error",e.$store.state.dialogError=!0,e.$store.state.scoreSavingProgressData.savingMatches=!1,e.$store.state.scoreSavingProgressData.percent=0,void e.clearProgress("scoreSavingStatus"))})).catch((function(){e.$store.state.scoreSavingProgressData.requestCancelled?e.$store.state.scoreSavingProgressData.requestCancelled=!1:(clearInterval(e.$store.state.scoreSavingProgressData.progressReqTimer),e.checkScoreSavingStatus())}))},getScores:function(e){var t=this;e||(e=!1);var a=this.getSource1(),r=this.getSource2(),s=this.getDatasourceOwner();if(this.$store.state.source1UnMatched=[],this.$store.state.source2UnMatched=[],this.$store.state.matchedContent=[],this.$store.state.noMatchContent=[],this.$store.state.ignoreContent=[],this.$store.state.flagged=[],this.$store.state.source1TotalAllRecords=0,this.$store.state.totalAllMapped=0,this.$store.state.totalAllFlagged=0,this.$store.state.totalAllNoMatch=0,this.$store.state.totalAllIgnore=0,this.$store.state.source2TotalRecords=0,this.$store.state.scoreResults=[],a&&r){this.loadingSource1Unmatched=!0,this.loadingSource2Unmatched=!0,this.$store.state.scoresProgressData.scoreDialog=!0,this.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status",this.$store.state.scoresProgressData.progressType="indeterminate";var o=this.$store.state.recoLevel,i=this.$store.state.totalSource1Levels,n=this.$store.state.totalSource2Levels,c=this.$store.state.clientId;this.topTree=this.$store.state.source1Parents.slice(0,this.$store.state.source1Parents.length),this.$store.state.levelArray=[];for(var l=1;l<this.$store.state.totalSource1Levels;l++){var d=void 0;l+1>this.$store.state.recoLevel||(d=this.translateDataHeader("source1",l),this.$store.state.levelArray.push({text:d,value:l+1}))}var h=this.$store.state.activePair.userID,v=s.source1Owner,p=s.source2Owner,g=this.getLimitOrgIdOnActivePair().source1LimitOrgId,f=this.getLimitOrgIdOnActivePair().source2LimitOrgId,m=JSON.stringify(this.$store.state.config.generalConfig.reconciliation.parentConstraint),y="source1=".concat(a,"&source2=").concat(r,"&source1Owner=").concat(v,"&source2Owner=").concat(p,"&source1LimitOrgId=").concat(g,"&source2LimitOrgId=").concat(f,"&totalSource1Levels=").concat(i,"&totalSource2Levels=").concat(n);y+="&recoLevel=".concat(o,"&clientId=").concat(c,"&userID=").concat(h,"&parentConstraint=")+m+"&getPotential="+e,u.a.get("/match/reconcile/?"+y).then((function(){t.checkScoreProgress()}))}},getSource1:function(){var e=this.$store.state.activePair.source1.display;return e&&(e=this.toTitleCase(e)),e},getSource2:function(){var e=this.$store.state.activePair.source2.display;return e&&(e=this.toTitleCase(e)),e},getSource1Name:function(){return this.$store.state.activePair.source1.display},getSource2Name:function(){return this.$store.state.activePair.source2.display}},created:function(){var e=this;Rr.$on("changeCSVHeaderNames",(function(){e.$store.state.levelArray=[];for(var t=1;t<e.$store.state.totalSource1Levels;t++){var a=void 0;t+1>e.$store.state.recoLevel||(a=e.translateDataHeader("source1",t),e.$store.state.levelArray.push({text:a,value:t+1}))}}))}},C={methods:{createDatasourcePair:function(e,t){var a=this;if(0===Object.keys(e).length||0===Object.keys(t).length)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source");if(e.name===t.name&&e.source===t.source)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",void(this.$store.state.errorDescription="Data source pair of the same data source is not allowed, change one of the source");this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Creating Data Source Pair";var r=null;this.$store.state.activePair.hasOwnProperty("shared")&&-1!==this.$store.state.activePair.activeUsers.indexOf(this.$store.state.auth.userID)&&(r=this.$store.state.activePair.id);var s=!1;this.$store.state.dhis.user.orgId&&this.$store.state.config.generalConfig.reconciliation.singlePair&&(s=!0),r||(r=!1);var o=new FormData;o.append("source1",JSON.stringify(e)),o.append("source2",JSON.stringify(t)),o.append("userID",this.$store.state.auth.userID),o.append("orgId",this.$store.state.dhis.user.orgId),o.append("singlePair",s),o.append("activePairID",r),u.a.post("/datasource/createSourcePair",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){a.$store.state.levelMapping.source1=JSON.parse(e.data.levelMapping1),a.$store.state.levelMapping.source2=JSON.parse(e.data.levelMapping2),Rr.$emit("getDataSourcePair"),a.$store.state.dynamicProgress=!1})).catch((function(e){a.alertError=!0,a.$store.state.dialogError=!0,e.response&&e.response.data&&e.response.data.error?(a.$store.state.errorDescription=e.response.data.error,a.$store.state.errorTitle="Pair was not created",a.alertMsg=e.response.data.error):a.alertMsg="Something went wrong while saving data source pairs.",a.$store.state.dynamicProgress=!1,console.log(e)}))},activateSharedPair:function(e){var t=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Activating Shared Data Source Pair";var a=new FormData;a.append("pairID",e),a.append("userID",this.$store.state.auth.userID),u.a.post("/datasource/activateSharedPair",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){Rr.$emit("getDataSourcePair"),t.$store.state.dynamicProgress=!1})).catch((function(e){t.alertError=!0,t.alertMsg="Something went wrong while activating data source pair",t.$store.state.dynamicProgress=!1,console.log(e.response.data)}))},activatePair:function(){var e=this;this.activeDataSourcePair.userID!==this.$store.state.auth.userID?this.activateSharedPair(this.activeDataSourcePair.id):(this.source1=this.$store.state.dataSources.find((function(t){return t.id===e.activeDataSourcePair.source1.id})),this.source2=this.$store.state.dataSources.find((function(t){return t.id===e.activeDataSourcePair.source2.id})),this.createDatasourcePair(this.source1,this.source2))}}},T=a("9612"),A=a("2f62"),I=(a("3ca3"),a("ddb0"),a("8c4f")),O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("center",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}}),a("v-flex",{attrs:{xs6:""}},[a("v-alert",{attrs:{type:"error",value:e.authStatus}},[e._v(" Authentication Failed ")])],1)],1),a("v-card",{attrs:{width:"430px",hover:""}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{color:"white"},attrs:{color:"primary"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs2:"","text-xs-left":""}},[a("v-icon",{attrs:{"x-large":"",color:"white"}},[e._v("mdi-lock")])],1),a("v-flex",{attrs:{xs9:"","text-xs-right":""}},[a("b",[e._v("Login")])])],1)],1)],1),a("v-card-text",[a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.usernameErrors,filled:"",color:"deep-purple",label:"Username"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.authenticate()},blur:function(t){return e.$v.username.$touch()},change:function(t){return e.$v.username.$touch()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,filled:"",type:"password",color:"deep-purple",label:"Password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.authenticate()},blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-card-actions",[a("v-toolbar",[e.$store.state.config.generalConfig.selfRegistration.enabled?a("v-btn",{attrs:{color:"primary"},on:{click:e.displaySignup}},[e._v("Signup")]):e._e(),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"primary",depressed:""},on:{click:function(t){return e.authenticate()}}},[e._v("Login")])],1)],1)],1)],1)],1)},L=[],V=a("b5ae"),N={validations:{username:{required:V["required"]},password:{required:V["required"]}},data:function(){return{username:"",password:"",authStatus:!1,signupEnabled:!1}},methods:{authenticate:function(){var e=this;u.a.post("/auth/login/",{username:this.username,password:this.password}).then((function(t){e.$store.state.auth.username=e.username,e.$store.state.auth.userObj=t.data.userObj,e.$store.state.auth.userID=t.data.userObj.resource.id,t.data.userObj?(e.$store.state.clientId=T["a"].v4(),e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,Rr.$emit("getUserConfig")):e.authStatus=!0})).catch((function(t){t.hasOwnProperty("response")&&console.log(t.response.data.error),e.authStatus=!0}))},displaySignup:function(){this.$router.push({name:"Signup"})}},computed:{usernameErrors:function(){var e=[];return this.$v.username.$dirty?(!this.$v.username.required&&e.push("Username is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e}},beforeCreate:function(){this.$store.state.config.generalConfig.authDisabled&&(this.$store.state.clientId=T["a"].v4(),this.$store.state.initializingApp=!0,this.$store.state.denyAccess=!1,this.$router.push({name:"DHIS2Auth"}))}},R=N,M=a("0798"),U=a("8336"),F=a("b0af"),E=a("99d9"),q=a("a523"),j=a("0e8f"),H=a("4bd4"),B=a("a722"),G=a("2fa4"),W=a("8654"),z=a("71d9"),J=Object(g["a"])(R,O,L,!1,null,null,null),Y=J.exports;m()(J,{VAlert:M["a"],VBtn:U["a"],VCard:F["a"],VCardActions:E["a"],VCardText:E["c"],VCardTitle:E["d"],VContainer:q["a"],VFlex:j["a"],VForm:H["a"],VIcon:y["a"],VLayout:B["a"],VSpacer:G["a"],VTextField:W["a"],VToolbar:z["a"]});var K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}})},X=[],Z=a("2b27"),Q=a.n(Z),ee={mounted:function(){this.$store.state.auth.userID="","keycloak"===this.$store.state.idp?this.$keycloak.logout():(u()({method:"GET",url:"/auth/logout"}).catch((function(e){console.error(e)})),this.$router.push("login")),this.$store.state.auth.username="",this.$store.state.auth.userObj={},Q.a.remove("userObj")}},te=ee,ae=Object(g["a"])(te,K,X,!1,null,null,null),re=ae.exports;m()(ae,{VContainer:q["a"]});var se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-alert",{staticStyle:{width:"900px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-alert",{staticStyle:{width:"900px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"1500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",text:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Create Account")])],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.firstnameErrors,filled:"",color:"deep-purple",label:"First Name"},on:{blur:function(t){return e.$v.firstname.$touch()},change:function(t){return e.$v.firstname.$touch()}},model:{value:e.firstname,callback:function(t){e.firstname=t},expression:"firstname"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.surnameErrors,filled:"",color:"deep-purple",label:"Surname"},on:{blur:function(t){return e.$v.surname.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}})],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Middle Names"},model:{value:e.othername,callback:function(t){e.othername=t},expression:"othername"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.phoneErrors,filled:"",color:"deep-purple",label:"Phone"},on:{blur:e.validatePhone,change:e.validatePhone,input:e.validatePhone},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.emailErrors,filled:"",color:"deep-purple",label:"Email*"},on:{blur:e.validateEmail,change:e.validateEmail,input:e.validateEmail},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.usernameErrors,filled:"",color:"deep-purple",label:"Username"},on:{blur:function(t){return e.$v.username.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",filled:"",color:"deep-purple",label:"Password"},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.retype_passwordErrors,type:"password",filled:"",color:"deep-purple",label:"Re-type Password"},on:{blur:function(t){return e.$v.retype_password.$touch()},change:function(t){return e.$v.retype_password.$touch()}},model:{value:e.retype_password,callback:function(t){e.retype_password=t},expression:"retype_password"}})],1)],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(t){return e.$refs.form.reset()}}},[a("v-icon",[e._v("mdi-close")]),e._v("Clear ")],1),a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:e.displayLogin}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-lock")]),e._v("Back To Login ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.signup()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("Add ")],1)],1)],1)],1),a("v-spacer")],1)],1)},oe=[],ie={validations:{username:{required:V["required"]},retype_password:{required:V["required"]},password:{required:V["required"]},firstname:{required:V["required"]},surname:{required:V["required"]},phone:{required:V["required"]},email:{required:V["required"]}},data:function(){return{firstname:"",othername:"",surname:"",phone:"",email:"",username:"",password:"",retype_password:"",customFields:[],phoneErrors:[],emailErrors:[],alertFail:!1,alertSuccess:!1,alertMsg:""}},methods:{validateEmail:function(){if(this.emailErrors=[],!this.email)return this.emailErrors.push("Email is required"),!1;var e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.test(this.email)?void 0:(this.emailErrors.push("Invalid Email"),!1)},validatePhone:function(){if(this.phoneErrors=[],!this.phone)return this.phoneErrors.push("Phone is required");var e=/^[+]?[\s./0-9]*[(]?[0-9]{1,4}[)]?[-\s./0-9]*$/g;return e.test(this.phone)?void 0:this.phoneErrors.push("Invalid phone number")},signup:function(){var e=this;this.password!==this.retype_password&&(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",this.$store.state.errorDescription="Password mismatch"),this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Creating Account";var t=new FormData;for(var a in t.append("firstName",this.firstname),t.append("otherName",this.othername),t.append("surname",this.surname),t.append("phone",this.phone),t.append("email",this.email),t.append("password",this.password),t.append("userName",this.username),this.$store.state.config.generalConfig.selfRegistration.requiresApproval&&t.append("status","Pending"),this.customFields)t.append(a,this.customFields[a]);u.a.post("/addUser/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var t=Object.keys(e.$v.$params),a=0,r=t;a<r.length;a++){var s=r[a];e.$v[s].$reset()}e.$refs.form.reset(),e.$store.state.dynamicProgress=!1,e.alertSuccess=!0,e.$store.state.config.generalConfig.selfRegistration.requiresApproval?e.alertMsg="Account created and waiting for approval, you will receive an email once approved":e.alertMsg="Account created successfully"})).catch((function(t){e.$store.state.dynamicProgress=!1,e.alertFail=!0,e.alertMsg="This account was not added, try different username",console.log(t.response.data.error)}))},displayLogin:function(){this.$router.push({name:"Login"})}},computed:{codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},firstnameErrors:function(){var e=[];return this.$v.firstname.$dirty?(!this.$v.firstname.required&&e.push("First Name is required"),e):e},surnameErrors:function(){var e=[];return this.$v.surname.$dirty?(!this.$v.surname.required&&e.push("Surname is required"),e):e},usernameErrors:function(){var e=[];return this.$v.username.$dirty?(!this.$v.username.required&&e.push("Username is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e},retype_passwordErrors:function(){var e=[];return this.$v.retype_password.$dirty?(!this.$v.retype_password.required&&e.push("Re-type Password"),e):e}}},ne=ie,ce=a("ce7e"),le=a("afd9"),ue=Object(g["a"])(ne,se,oe,!1,null,null,null),de=ue.exports;m()(ue,{VAlert:M["a"],VBtn:U["a"],VCard:F["a"],VCardActions:E["a"],VCardTitle:E["d"],VContainer:q["a"],VDivider:ce["a"],VFlex:j["a"],VForm:H["a"],VIcon:y["a"],VLayout:B["a"],VSpacer:G["a"],VSystemBar:le["a"],VTextField:W["a"],VToolbar:z["a"]});var he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.autoDisableSingleDatasourceDialog,callback:function(t){e.autoDisableSingleDatasourceDialog=t},expression:"autoDisableSingleDatasourceDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v(" Disabling Single Data Source Limit ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.autoDisableSingleDatasource("cancel")}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" Disabling limiting reconciliation to be done against one choosen data source will also disable the single data source limit, click OK to proceed ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){return e.autoDisableSingleDatasource("cancel")}}},[e._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){return e.autoDisableSingleDatasource("ok")}}},[e._v("Ok")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"620px"},model:{value:e.defineSuperuserRole,callback:function(t){e.defineSuperuserRole=t},expression:"defineSuperuserRole"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" DHIS2 superuser role that can be an administrator of GOFR ")])],1),a("v-card-text",[a("v-select",{attrs:{label:"Superuser Role Name","item-text":"displayName","item-value":"id",loading:e.loadingDhis2Roles,required:"",items:e.dhis2Roles},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.adminRole,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"adminRole",t)},expression:"$store.state.config.generalConfig.externalAuth.adminRole"}})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",disabled:!e.$store.state.config.generalConfig.externalAuth.adminRole||0===e.dhis2Roles.length},on:{click:function(t){return e.saveConfiguration("generalConfig","authDisabled")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(" Save ")],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"800px"},model:{value:e.selectDatasourceDialog,callback:function(t){e.selectDatasourceDialog=t},expression:"selectDatasourceDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Select datasource to fix source 2 ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchDatasource,callback:function(t){e.searchDatasource=t},expression:"searchDatasource"}}),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeDatasourceDialog(t)}}},[a("v-icon",[e._v("mdi-close")])],1)],1),e._v(" This lists only those datasets that have been shared to all users "),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.dataSourceHeaders,items:e.sharedToAllDatasets,dark:"",search:e.searchDatasource},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.fixSource2To,callback:function(t){e.fixSource2To=t},expression:"fixSource2To"}},[a("td",[a("v-radio",{attrs:{value:r.id,color:"blue"}})],1)]),a("td",[e._v(e._s(r.name))]),a("td",[e._v(e._s(r.userID.userName))]),a("td",[e._v(" "+e._s(r.createdTime)+" ")])],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},on:{click:e.closeDatasourceDialog}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v(" Cancel ")],1),a("v-spacer"),a("v-btn",{attrs:{color:"primary",disabled:!e.fixSource2To||0===e.sharedToAllDatasets.length},on:{click:e.savefixSource2To}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(" Save ")],1)],1)],1)],1),a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("b",[e._v("System Configurations")])]),a("v-card-text",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" User Configurations ")]),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-switch",{attrs:{color:"primary",label:"Apply user defined headers when reconciling"},on:{change:function(t){return e.saveConfiguration("userConfig","useCSVHeader")}},model:{value:e.$store.state.config.userConfig.reconciliation.useCSVHeader,callback:function(t){e.$set(e.$store.state.config.userConfig.reconciliation,"useCSVHeader",t)},expression:"$store.state.config.userConfig.reconciliation.useCSVHeader"}})],1),a("v-flex",[a("v-autocomplete",{attrs:{items:e.$store.state.dataSources,"item-text":"display","item-value":"name",label:"Facility Registry Datasource"},on:{change:function(t){return e.saveConfiguration("userConfig","useCSVHeader")}},model:{value:e.$store.state.config.userConfig.FRDatasource,callback:function(t){e.$set(e.$store.state.config.userConfig,"FRDatasource",t)},expression:"$store.state.config.userConfig.FRDatasource"}})],1)],1)],1)],1),a("v-divider"),a("v-divider"),a("v-divider"),e.$tasksVerification.hasPermissionByName("special","custom","change-admin-config")?a("v-card",[a("v-card-title",[e._v(" Admin Configurations ")]),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",{scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.$store.state.config.generalConfig.reconciliation.fixSource2?[e._v(" Source2 Limited To: "),a("v-chip",[e._v(e._s(e.fixedSource2To))]),a("v-tooltip",{attrs:{top:""}},[a("v-btn",e._g({attrs:{fab:"",dark:"",color:"primary",small:""},on:{click:e.displayDatasourceDialog}},r),[a("v-icon",{attrs:{dark:""}},[e._v("mdi-format-list-bulleted")])],1),a("span",[e._v("Change dataset")])],1)]:e._e()]}}],null,!1,1188442032)},[a("v-switch",{attrs:{color:"primary",label:"Perform match based on parent constraint"},on:{change:function(t){return e.saveConfiguration("generalConfig","parentConstraint")}},model:{value:e.$store.state.config.generalConfig.reconciliation.parentConstraint.enabled,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation.parentConstraint,"enabled",t)},expression:"$store.state.config.generalConfig.reconciliation.parentConstraint.enabled"}}),e.$store.state.config.generalConfig.reconciliation.parentConstraint.enabled?e._e():a("v-card",{staticStyle:{"margin-left":"100px"},attrs:{color:"grey lighten-3"}},[a("v-checkbox",{attrs:{color:"primary",label:"Automatch By ID",disabled:""},on:{change:function(t){return e.saveConfiguration("generalConfig","parConstrIdAuto")}},model:{value:e.$store.state.config.generalConfig.reconciliation.parentConstraint.idAutoMatch,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation.parentConstraint,"idAutoMatch",t)},expression:"$store.state.config.generalConfig.reconciliation.parentConstraint.idAutoMatch"}}),a("v-checkbox",{attrs:{color:"primary",label:"Automatch By Name (when parents differ)"},on:{change:function(t){return e.saveConfiguration("generalConfig","parConstrNameAuto")}},model:{value:e.$store.state.config.generalConfig.reconciliation.parentConstraint.nameAutoMatch,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation.parentConstraint,"nameAutoMatch",t)},expression:"$store.state.config.generalConfig.reconciliation.parentConstraint.nameAutoMatch"}})],1),a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Choose ways datasets can be added ")]),a("v-card-text",[a("v-checkbox",{attrs:{label:"CSV Upload",value:"CSV Upload"},on:{change:function(t){return e.checkDatasetsAdditionWays("upload")}},model:{value:e.$store.state.config.generalConfig.datasetsAdditionWays,callback:function(t){e.$set(e.$store.state.config.generalConfig,"datasetsAdditionWays",t)},expression:"$store.state.config.generalConfig.datasetsAdditionWays"}}),a("v-checkbox",{attrs:{label:"Remote Servers Sync",value:"Remote Servers Sync"},on:{change:function(t){return e.checkDatasetsAdditionWays("remote")}},model:{value:e.$store.state.config.generalConfig.datasetsAdditionWays,callback:function(t){e.$set(e.$store.state.config.generalConfig,"datasetsAdditionWays",t)},expression:"$store.state.config.generalConfig.datasetsAdditionWays"}}),a("v-checkbox",{attrs:{label:"Blank Datasource",value:"Blank Datasource"},on:{change:function(t){return e.checkDatasetsAdditionWays("blank")}},model:{value:e.$store.state.config.generalConfig.datasetsAdditionWays,callback:function(t){e.$set(e.$store.state.config.generalConfig,"datasetsAdditionWays",t)},expression:"$store.state.config.generalConfig.datasetsAdditionWays"}})],1)],1),a("v-switch",{attrs:{color:"primary",label:"Allow non admin users to share datasets will all users"},on:{change:function(t){return e.saveConfiguration("generalConfig","allowShareToAllForNonAdmin")}},model:{value:e.$store.state.config.generalConfig.allowShareToAllForNonAdmin,callback:function(t){e.$set(e.$store.state.config.generalConfig,"allowShareToAllForNonAdmin",t)},expression:"$store.state.config.generalConfig.allowShareToAllForNonAdmin"}}),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-switch",e._g({attrs:{color:"primary",label:"Select a data source to serve as Source 2 for all reconciliation"},on:{change:e.displayDatasourceDialog},model:{value:e.$store.state.config.generalConfig.reconciliation.fixSource2,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation,"fixSource2",t)},expression:"$store.state.config.generalConfig.reconciliation.fixSource2"}},r))]}}],null,!1,2609954683)},[a("span",[e._v("This will limit users to perform reconciliations against the chosen data source")])]),a("v-switch",{attrs:{color:"primary",label:"Single data source per user"},on:{change:e.singleDatasource},model:{value:e.$store.state.config.generalConfig.reconciliation.singleDataSource,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation,"singleDataSource",t)},expression:"$store.state.config.generalConfig.reconciliation.singleDataSource"}}),e.$store.state.dhis.user.orgId?a("v-switch",{attrs:{color:"primary",label:"Single data source pair per org unit"},on:{change:function(t){return e.saveConfiguration("generalConfig","singlePair")}},model:{value:e.$store.state.config.generalConfig.reconciliation.singlePair,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation,"singlePair",t)},expression:"$store.state.config.generalConfig.reconciliation.singlePair"}}):e._e()],1),a("v-flex",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" GOFR Authentication ")]),a("v-card-text",[a("v-switch",{attrs:{color:"primary",label:"Disable Authentication"},on:{change:e.disableGOFRAuth},model:{value:e.$store.state.config.generalConfig.authDisabled,callback:function(t){e.$set(e.$store.state.config.generalConfig,"authDisabled",t)},expression:"$store.state.config.generalConfig.authDisabled"}}),e.$store.state.config.generalConfig.authDisabled?a("v-card",{staticStyle:{"margin-left":"100px"},attrs:{color:"grey lighten-3"}},[e._v(" External Authentication Method "),a("v-radio-group",{on:{change:function(t){return e.saveConfiguration("generalConfig","useDhis2Auth")}},model:{value:e.$store.state.config.generalConfig.authMethod,callback:function(t){e.$set(e.$store.state.config.generalConfig,"authMethod",t)},expression:"$store.state.config.generalConfig.authMethod"}},[a("v-radio",{attrs:{label:"dhis2",value:"dhis2",disabled:""}}),a("v-radio",{attrs:{label:"iHRIS",value:"iHRIS",disabled:""}})],1),a("v-select",{staticStyle:{width:"350px"},attrs:{label:"Superuser Role Name","item-text":"displayName","item-value":"id",loading:e.loadingDhis2Roles,required:"",items:e.dhis2Roles},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.adminRole,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"adminRole",t)},expression:"$store.state.config.generalConfig.externalAuth.adminRole"}}),e.$store.state.config.generalConfig.authMethod?a("v-checkbox",{attrs:{label:"Pull org units"},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.pullOrgUnits,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"pullOrgUnits",t)},expression:"$store.state.config.generalConfig.externalAuth.pullOrgUnits"}}):e._e(),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-checkbox",{attrs:{label:"Share orgs with other users"},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.shareOrgUnits,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"shareOrgUnits",t)},expression:"$store.state.config.generalConfig.externalAuth.shareOrgUnits"}}):e._e(),e.$store.state.config.generalConfig.externalAuth.shareOrgUnits&&e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-checkbox",{attrs:{label:"Limit orgs sharing by user orgid"},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.shareByOrgId,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"shareByOrgId",t)},expression:"$store.state.config.generalConfig.externalAuth.shareByOrgId"}}):e._e(),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",label:"Dataset Name","error-messages":e.datasetNameErrors,required:""},on:{blur:e.ensureNameUnique,input:e.ensureNameUnique},model:{value:e.$store.state.config.generalConfig.externalAuth.datasetName,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"datasetName",t)},expression:"$store.state.config.generalConfig.externalAuth.datasetName"}}):e._e(),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",label:"Username",required:""},model:{value:e.$store.state.config.generalConfig.externalAuth.userName,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"userName",t)},expression:"$store.state.config.generalConfig.externalAuth.userName"}}):e._e(),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",label:"Password",type:"password",required:""},model:{value:e.$store.state.config.generalConfig.externalAuth.password,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"password",t)},expression:"$store.state.config.generalConfig.externalAuth.password"}}):e._e(),a("v-flex",{attrs:{xs3:""}},[e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-btn",{attrs:{color:"primary",disabled:e.datasetNameErrors.length>0||!e.$store.state.config.generalConfig.externalAuth.datasetName,small:"",round:""},on:{click:e.pullOrgUnits}},[e._v("start pulling")]):e._e()],1)],1):e._e()],1)],1)],1),a("v-divider"),a("v-flex",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Self Registration ")]),a("v-card-text",[a("v-switch",{attrs:{color:"primary",label:"Enable self registration"},on:{change:function(t){return e.saveConfiguration("generalConfig","selfRegistration")}},model:{value:e.$store.state.config.generalConfig.selfRegistration.enabled,callback:function(t){e.$set(e.$store.state.config.generalConfig.selfRegistration,"enabled",t)},expression:"$store.state.config.generalConfig.selfRegistration.enabled"}}),a("v-switch",{attrs:{color:"primary",label:"Requires Admin Approval Of Self Registration"},on:{change:function(t){return e.saveConfiguration("generalConfig","selfRegistration")}},model:{value:e.$store.state.config.generalConfig.selfRegistration.requiresApproval,callback:function(t){e.$set(e.$store.state.config.generalConfig.selfRegistration,"requiresApproval",t)},expression:"$store.state.config.generalConfig.selfRegistration.requiresApproval"}})],1)],1)],1),a("v-divider"),a("v-flex",{attrs:{xs1:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Cron Jobs ")]),a("v-card-text",[e._v(" Autosync Below Remote Datasets "),a("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",name:"cron_time",label:"Cron Time"},on:{blur:function(t){return e.saveConfiguration("generalConfig","datasetsAutosyncTime")}},model:{value:e.$store.state.config.generalConfig.datasetsAutosyncTime,callback:function(t){e.$set(e.$store.state.config.generalConfig,"datasetsAutosyncTime",t)},expression:"$store.state.config.generalConfig.datasetsAutosyncTime"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.cronDataSourceHeaders,items:e.remoteDatasets,"hide-default-footer":"","pagination.sync":"pagination"},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.display))]),a("td",[e._v(e._s(r.owner))]),a("td",[e._v(" "+e._s(r.createdTime)+" ")]),a("td",[e._v(" "+e._s(r.lastUpdate)+" ")]),a("td",[a("v-switch",{attrs:{color:"primary"},on:{change:function(t){return e.controlDatasetsCronjobs(r)}},model:{value:e.datasetsAutosyncState[r.id],callback:function(t){e.$set(e.datasetsAutosyncState,r.id,t)},expression:"datasetsAutosyncState[item.id]"}})],1)])]}}],null,!1,946053802)})],1)],1)],1),a("v-flex",{attrs:{xs1:""}},[a("v-card",{attrs:{color:"grey lighten-3"}},[a("v-card-text",[e._v(" SMTP Configuration For Email Notifications ")]),a("v-card-actions",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-text-field",{attrs:{label:"SMTP Host",filled:""},model:{value:e.smtp.host,callback:function(t){e.$set(e.smtp,"host",t)},expression:"smtp.host"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"SMTP Port",filled:""},model:{value:e.smtp.port,callback:function(t){e.$set(e.smtp,"port",t)},expression:"smtp.port"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"SMTP Username",filled:""},model:{value:e.smtp.username,callback:function(t){e.$set(e.smtp,"username",t)},expression:"smtp.username"}})],1),a("v-flex",[a("v-text-field",{attrs:{type:"password",label:"SMTP Password",autocomplete:"new-password",filled:""},model:{value:e.smtp.password,callback:function(t){e.$set(e.smtp,"password",t)},expression:"smtp.password"}})],1),a("v-flex",[a("v-switch",{attrs:{color:"primary",label:"SMTP Secured"},model:{value:e.smtp.secured,callback:function(t){e.$set(e.smtp,"secured",t)},expression:"smtp.secured"}})],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs1:""}},[a("v-btn",{attrs:{color:"primary"},on:{click:e.saveSMTP}},[a("v-icon",[e._v("mdi-content-save")]),e._v("Save ")],1)],1)],1)],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs1:""}},[a("v-switch",{attrs:{color:"primary",label:"Enable Endpoint Notification when reconciliation is done"},on:{change:function(t){return e.saveConfiguration("generalConfig","recoProgressNotification")}},model:{value:e.$store.state.config.generalConfig.recoProgressNotification.enabled,callback:function(t){e.$set(e.$store.state.config.generalConfig.recoProgressNotification,"enabled",t)},expression:"$store.state.config.generalConfig.recoProgressNotification.enabled"}}),e.$store.state.config.generalConfig.recoProgressNotification.enabled?a("v-card",{staticStyle:{"margin-left":"100px"},attrs:{color:"grey lighten-3"}},[a("v-card-text",[e._v(" End point to send notification when reconciliation is done ")]),a("v-card-actions",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-text-field",{attrs:{label:"End point URL",filled:""},model:{value:e.notification_endpoint,callback:function(t){e.notification_endpoint=t},expression:"notification_endpoint"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"End point Username",filled:""},model:{value:e.notification_username,callback:function(t){e.notification_username=t},expression:"notification_username"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"End point Password",filled:""},model:{value:e.notification_password,callback:function(t){e.notification_password=t},expression:"notification_password"}})],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs1:""}},[a("v-btn",{attrs:{color:"primary"},on:{click:e.recoProgressNotificationChanged}},[a("v-icon",[e._v("mdi-content-save")]),e._v("Save ")],1)],1)],1)],1)],1)],1)],1):e._e()],1)],1)],1)],1):e._e()],1)],1),a("appRemoteSync",{attrs:{syncType:"dhisSync",serverName:e.$store.state.config.generalConfig.externalAuth.datasetName,userID:e.$store.state.auth.userID,sourceOwner:e.$store.state.auth.userID,mode:"full"}})],1)},ve=[],pe=a("2909"),ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("app-syncProgress",{attrs:{syncProgrIndeter:e.syncProgrIndeter,syncStatus:e.syncStatus,syncProgrPercent:e.syncProgrPercent,syncPercent:e.syncPercent}})],1)},fe=[],me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.syncProgrIndeter,callback:function(t){e.syncProgrIndeter=t},expression:"syncProgrIndeter"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" "+e._s(e.syncStatus)+" "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"270"},model:{value:e.syncProgrPercent,callback:function(t){e.syncProgrPercent=t},expression:"syncProgrPercent"}},[a("v-card",{attrs:{color:"white",dark:""}},[a("v-card-text",[a("center",[a("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.syncStatus))]),a("br"),a("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.syncPercent,color:"primary"}},[a("v-avatar",{attrs:{color:"indigo",size:"50px"}},[a("span",{staticClass:"white--text"},[a("b",[e._v(e._s(e.syncPercent)+"%")])])])],1)],1)],1)],1)],1)],1)},ye=[],$e={props:["syncProgrIndeter","syncStatus","syncProgrPercent","syncPercent"]},Se=$e,be=a("8212"),xe=a("169a"),_e=a("490a"),ke=a("8e36"),we=Object(g["a"])(Se,me,ye,!1,null,null,null),Pe=we.exports;m()(we,{VAvatar:be["a"],VCard:F["a"],VCardText:E["c"],VContainer:q["a"],VDialog:xe["a"],VProgressCircular:_e["a"],VProgressLinear:ke["a"]});var De={props:["id","syncType","serverName","host","username","password","userID","mode"],data:function(){return{syncProgrIndeter:!1,syncStatus:"Waiting for sync status",syncPercent:null,syncProgrPercent:!1,syncProgressTimer:"",syncRunning:!1}},methods:{sync:function(){var e=this,t=this.mode;t||(t="full");var a=new FormData,r=this.$store.state.clientId;a.append("id",this.id),a.append("name",this.serverName),a.append("host",this.host),a.append("username",this.username),a.append("password",this.password),a.append("userID",this.userID),a.append("clientId",r),a.append("mode",t),this.syncRunning=!0,this.syncProgrIndeter=!0,u.a.post("/"+this.syncType+"/",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.syncProgressTimer=setInterval(e.checkSyncProgress,1e3)})).catch((function(t){e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.response.data.error+". cross check host,user and password",clearInterval(e.syncProgressTimer),console.log(t.response.data.error)}))},checkSyncProgress:function(){var e,t=this,a=this.$store.state.clientId;"dhisSync"===this.syncType?e="dhisSyncRequest":"fhirSync"===this.syncType&&(e="fhirSyncRequest"),u.a.get("/progress/"+e+"/"+a).then((function(e){return null===e.data||void 0===e.data||!1===e.data?(t.$store.state.uploadRunning=!1,t.syncProgrIndeter=!1,t.syncProgrPercent=!1,void clearInterval(t.syncProgressTimer)):null!==e.data.error?(t.$store.state.uploadRunning=!1,t.syncProgrIndeter=!1,t.syncProgrPercent=!1,t.$store.state.dialogError=!0,t.$store.state.errorTitle="Error",t.$store.state.errorDescription=e.data.error,clearInterval(t.syncProgressTimer),void console.log(e.data.error)):null===e.data.status?(t.$store.state.uploadRunning=!1,t.syncProgrIndeter=!1,t.syncProgrPercent=!1,void clearInterval(t.syncProgressTimer)):(t.syncStatus=e.data.status,e.data.percent&&(t.syncProgrPercent||(t.syncProgrIndeter=!1,t.syncProgrPercent=!0),t.syncPercent=e.data.percent),void("Done"===e.data.status&&(t.syncStatus="Waiting for sync status",clearInterval(t.syncProgressTimer),t.syncProgrPercent=!1,t.$store.state.uploadRunning=!1,Rr.$emit("getDataSources"))))})).catch((function(e){t.$store.state.dialogError=!0,t.$store.state.errorTitle="Error",console.log(e.response.data.error+". cross check host,user and password"),t.$store.state.errorDescription=e.response.data.error+". cross check host,user and password",clearInterval(t.syncProgressTimer)}))}},created:function(){Rr.$on("runRemoteSync",this.sync)},beforeDestroy:function(){Rr.$off("runRemoteSync",this.sync)},components:{appSyncProgress:Pe}},Ce=De,Te=Object(g["a"])(Ce,ge,fe,!1,null,null,null),Ae=Te.exports;m()(Te,{VContainer:q["a"]});var Ie={mixins:[w],validations:{facility:{required:V["required"]},code:{required:V["required"]},uploadName:{required:V["required"]}},data:function(){return{smtp:{host:"",port:"",username:"",password:"",secured:!0},autoDisableSingleDatasourceDialog:!1,selectDatasourceDialog:!1,fixSource2To:"",searchDatasource:"",dataSourceHeaders:[{sortable:!1},{text:"Source Name",align:"left",value:"name"},{text:"Owner",value:"owner",sortable:!1},{text:"Created Time",value:"createdTime"}],cronDataSourceHeaders:[{text:"Source Name",align:"left",value:"name"},{text:"Owner",value:"owner",sortable:!1},{text:"Created Time",value:"createdTime"},{text:"Last Updated Time",value:"createdTime"},{text:"Enabled",value:"enabled"}],datasetsAutosyncState:{},useCSVHeader:!1,moreFields:!1,fieldLabel:"",fieldName:"",required:"No",requiredText:["Yes","No"],notification_endpoint:"",notification_username:"",notification_password:"",dhis2Roles:[],loadingDhis2Roles:!1,datasetNameErrors:[],defineSuperuserRole:!1}},methods:{controlDatasetsCronjobs:function(e){var t=new FormData;t.append("id",e.id),t.append("enabled",this.datasetsAutosyncState[e.id]),u.a.post("/datasource/updateDatasetAutosync",t)},checkDatasetsAdditionWays:function(e){var t;0===this.$store.state.config.generalConfig.datasetsAdditionWays.length?(this.$store.state.errorTitle="Cant disable both ways",this.$store.state.errorDescription="There must be atleast one way of adding a dataset",this.$store.state.dialogError=!0,"remote"===e?t="Remote Servers Sync":"upload"===e?t="CSV Upload":"blank"===e&&(t="Blank Datasource"),this.$store.state.config.generalConfig.datasetsAdditionWays.push(t)):this.saveConfiguration("generalConfig","datasetsAdditionWays")},autoDisableSingleDatasource:function(e){"ok"===e?(this.$store.state.config.generalConfig.reconciliation.singleDataSource=!1,this.saveConfiguration("generalConfig","fixSource2"),this.saveConfiguration("generalConfig","singleDataSource")):"cancel"===e&&(this.$store.state.config.generalConfig.reconciliation.fixSource2=!0),this.autoDisableSingleDatasourceDialog=!1},singleDatasource:function(){var e=this;this.$store.state.config.generalConfig.reconciliation.singleDataSource?this.$store.state.config.generalConfig.reconciliation.fixSource2To&&this.$store.state.config.generalConfig.reconciliation.fixSource2?this.saveConfiguration("generalConfig","singleDataSource"):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",this.$store.state.errorColor="error",this.$store.state.errorDescription="This feature can only be enabled if there is a defined datasource to serve as Source 2 for all reconciliation",setTimeout((function(){e.$store.state.config.generalConfig.reconciliation.singleDataSource=!1}))):this.saveConfiguration("generalConfig","singleDataSource")},displayDatasourceDialog:function(){!0===this.$store.state.config.generalConfig.reconciliation.fixSource2?(this.fixSource2To=this.$store.state.config.generalConfig.reconciliation.fixSource2To,this.selectDatasourceDialog=!0,this.saveConfiguration("generalConfig","fixSource2")):this.$store.state.config.generalConfig.reconciliation.singleDataSource?this.autoDisableSingleDatasourceDialog=!0:this.saveConfiguration("generalConfig","fixSource2")},closeDatasourceDialog:function(){this.selectDatasourceDialog=!1,this.$store.state.config.generalConfig.reconciliation.fixSource2To||(this.$store.state.config.generalConfig.reconciliation.fixSource2=!1,this.saveConfiguration("generalConfig","fixSource2"))},savefixSource2To:function(){this.$store.state.config.generalConfig.reconciliation.fixSource2To=this.fixSource2To,this.saveConfiguration("generalConfig","fixSource2To"),this.selectDatasourceDialog=!1},disableGOFRAuth:function(){var e=this;if(this.$store.state.config.generalConfig.authDisabled){if(this.$store.state.config.generalConfig.authDisabled){var t=this.setDHIS2Credentials();if(!t)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",this.$store.state.errorColor="error",this.$store.state.errorDescription="App doesnt appear to be running inside DHIS2, cant disable authentication",void setTimeout((function(){e.$store.state.config.generalConfig.authDisabled=!1}));this.loadingDhis2Roles=!0,this.getDHIS2Roles((function(t){e.loadingDhis2Roles=!1,e.dhis2Roles=Object(pe["a"])(t.data.userRoles)})),this.defineSuperuserRole=!0}}else this.saveConfiguration("generalConfig","authDisabled")},recoProgressNotificationChanged:function(){this.$store.state.config.generalConfig.hasOwnProperty("recoProgressNotification")||(this.$store.state.config.generalConfig.recoProgressNotification={}),this.$store.state.config.generalConfig.recoProgressNotification.url=this.notification_endpoint,this.$store.state.config.generalConfig.recoProgressNotification.username=this.notification_username,this.$store.state.config.generalConfig.recoProgressNotification.password=this.notification_password,this.saveConfiguration("generalConfig")},saveSMTP:function(){this.$store.state.config.generalConfig.smtp.host=this.smtp.host,this.$store.state.config.generalConfig.smtp.port=this.smtp.port,this.$store.state.config.generalConfig.smtp.username=this.smtp.username,this.$store.state.config.generalConfig.smtp.password=this.smtp.password,this.$store.state.config.generalConfig.smtp.secured=this.smtp.secured,this.saveConfiguration("generalConfig","smtp"),this.$store.state.dialogError=!0,this.$store.state.errorColor="primary",this.$store.state.errorTitle="Info",this.$store.state.errorDescription="SMTP saved"},pullOrgUnits:function(){this.saveConfiguration("generalConfig","externalAuth");var e=new FormData;e.append("host",this.$store.state.dhis.host),e.append("sourceType","DHIS2"),e.append("source","syncServer"),e.append("shareToAll",this.$store.state.config.generalConfig.externalAuth.shareOrgUnits),e.append("limitByUserLocation",this.$store.state.config.generalConfig.externalAuth.shareByOrgId),e.append("username",this.$store.state.config.generalConfig.externalAuth.userName),e.append("password",this.$store.state.config.generalConfig.externalAuth.password),e.append("name",this.$store.state.config.generalConfig.externalAuth.datasetName),e.append("userID",this.$store.state.auth.userID),u.a.post("/addDataSource",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){Rr.$emit("runRemoteSync")}))},getDHIS2Roles:function(e){var t=this.$store.state.dhis.dev.auth;""===t.username&&(t=""),u.a.get(this.$store.state.dhis.host+"api/userRoles",{auth:t}).then((function(t){e(t)}))},ensureNameUnique:function(){if(this.datasetNameErrors=[],""===this.$store.state.config.generalConfig.externalAuth.datasetName)return this.datasetNameErrors.push("Dataset name is required");var e,t=Object(n["a"])(this.$store.state.dataSources);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a.name===this.uploadName)return this.datasetNameErrors.push("This Name Exists"),!1}}catch(r){t.e(r)}finally{t.f()}}},created:function(){var e=this;this.smtp.host=this.$store.state.config.generalConfig.smtp.host,this.smtp.port=this.$store.state.config.generalConfig.smtp.port,this.smtp.username=this.$store.state.config.generalConfig.smtp.username,this.smtp.password=this.$store.state.config.generalConfig.smtp.password,this.smtp.secured=this.$store.state.config.generalConfig.smtp.secured,this.$store.state.config.generalConfig.authDisabled&&"dhis2"===this.$store.state.config.generalConfig.authMethod&&(this.loadingDhis2Roles=!0,this.getDHIS2Roles((function(t){e.loadingDhis2Roles=!1,e.dhis2Roles=Object(pe["a"])(t.data.userRoles)}))),this.$store.state.config.generalConfig.hasOwnProperty("recoProgressNotification")&&(this.notification_endpoint=this.$store.state.config.generalConfig.recoProgressNotification.url,this.notification_username=this.$store.state.config.generalConfig.recoProgressNotification.username,this.notification_password=this.$store.state.config.generalConfig.recoProgressNotification.password);var t,a=Object(n["a"])(this.$store.state.dataSources);try{for(a.s();!(t=a.n()).done;){var r=t.value;"syncServer"===r.source&&(r.autoSync?this.datasetsAutosyncState[r.id]=!0:this.datasetsAutosyncState[r.id]=!1)}}catch(s){a.e(s)}finally{a.f()}},computed:{fixedSource2To:function(){var e,t="",a=Object(n["a"])(this.$store.state.dataSources);try{for(a.s();!(e=a.n()).done;){var r=e.value;r.id===this.$store.state.config.generalConfig.reconciliation.fixSource2To&&(t=r)}}catch(s){a.e(s)}finally{a.f()}return t.name},sharedToAllDatasets:function(){var e,t=[],a=Object(n["a"])(this.$store.state.dataSources);try{for(a.s();!(e=a.n()).done;){var r=e.value;r.shareToAll&&r.shareToAll.activated,t.push(r)}}catch(s){a.e(s)}finally{a.f()}return t},remoteDatasets:function(){var e,t=[],a=Object(n["a"])(this.$store.state.dataSources);try{for(a.s();!(e=a.n()).done;){var r=e.value;"syncServer"===r.source&&t.push(r)}}catch(s){a.e(s)}finally{a.f()}return t}},beforeCreate:function(){if(this.$store.state.config.generalConfig.hasOwnProperty("authMethod")||this.$set(this.$store.state.config.generalConfig,"authMethod","dhis2"),!this.$store.state.config.generalConfig.hasOwnProperty("externalAuth")){var e={pullOrgUnits:!0,shareOrgUnits:!1,shareByOrgId:!1,datasetName:"",adminRole:""};this.$set(this.$store.state.config.generalConfig,"externalAuth",e)}},components:{appRemoteSync:Ae}},Oe=Ie,Le=a("c6a6"),Ve=a("ac7c"),Ne=a("cc20"),Re=a("8fea"),Me=a("67b6"),Ue=a("43a6"),Fe=a("b974"),Ee=a("b73d"),qe=a("2a7f"),je=Object(g["a"])(Oe,he,ve,!1,null,null,null),He=je.exports;m()(je,{VAutocomplete:Le["a"],VBtn:U["a"],VCard:F["a"],VCardActions:E["a"],VCardText:E["c"],VCardTitle:E["d"],VCheckbox:Ve["a"],VChip:Ne["a"],VContainer:q["a"],VDataTable:Re["a"],VDialog:xe["a"],VDivider:ce["a"],VFlex:j["a"],VIcon:y["a"],VLayout:B["a"],VProgressLinear:ke["a"],VRadio:Me["a"],VRadioGroup:Ue["a"],VSelect:Fe["a"],VSpacer:G["a"],VSwitch:Ee["a"],VTextField:W["a"],VToolbar:z["a"],VToolbarTitle:qe["b"],VTooltip:x["a"]});var Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{persistent:"",overlay:!1,"max-width":"500px",transition:"dialog-transition"},model:{value:e.approveUserDialog,callback:function(t){e.approveUserDialog=t},expression:"approveUserDialog"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-spacer"),a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.approveUserDialog=!1}}},[e._v("mdi-close")])],1),a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" User "+e._s(e.user.userName)+" ")]),a("v-card-text",[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{x5:""}},[e._v(" "+e._s(e.user.firstName)+" ")]),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[e._v(" "+e._s(e.user.surname)+" ")])],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{x5:""}},[e._v(" "+e._s(e.user.phone)+" ")]),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[e._v(" "+e._s(e.user.email)+" ")])],1)],1),a("v-flex",[a("v-select",{attrs:{required:"",items:e.roles,"single-line":"",clearable:"","error-messages":e.roleErrors,filled:"",label:"Role"},on:{blur:function(t){return e.$v.role.$touch()},change:function(t){return e.$v.role.$touch()}},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}})],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},on:{click:function(t){return e.changeStatus("Rejected")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v("Reject ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.changeStatus("Active")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-check-circle")]),e._v("Approve ")],1)],1)],1)],1),a("center",[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v(" "+e._s(e.alertMsg)+" ")])],1),a("v-card",{staticClass:"mx-auto",attrs:{color:"cyan lighten-5",width:"1500px"}},[a("v-card-title",{attrs:{"primary-title":"",width:"1000"}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v(" Users List "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUsers,callback:function(t){e.searchUsers=t},expression:"searchUsers"}})],1)],1),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.usersHeader,items:e.users,search:e.searchUsers,dark:"",loading:e.$store.state.loadingusers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("td",[e._v(e._s(r.firstName))]),a("td",[e._v(e._s(r.surname))]),a("td",[e._v(e._s(r.otherName))]),a("td",[e._v(e._s(r.phone))]),a("td",[e._v(e._s(r.email))]),a("td",[e._v(e._s(r.userName))]),r.role?a("td",[e._v(e._s(r.role.name))]):a("td"),a("td",[e._v(e._s(r.status))]),"Pending"===r.status||"Rejected"===r.status?a("td",[a("v-btn",{attrs:{color:"success",small:""},on:{click:function(t){return e.displayApprovalDialog(r)}}},[e._v("Approve/Reject")])],1):a("td",["Active"===r.status?a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(t){return e.accountAction("Inactive",r)}}},[e._v("Deactivate")]):a("v-btn",{attrs:{small:"",color:"success"},on:{click:function(t){return e.accountAction("Active",r)}}},[e._v("Activate")]),e._v(" | "),a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(t){return e.accountAction("reset",r)}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-refresh")]),e._v(" Reset Password ")],1)],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)],1)],1)},Ge=[],We={mixins:[w],validations:{role:{required:V["required"]}},data:function(){return{usersHeader:[{text:"Firstname",value:"firstName"},{text:"Surname",value:"surname"},{text:"Othername",value:"otherName"},{text:"Phone",value:"phone"},{text:"Email",value:"email"},{text:"User Name",value:"username"},{text:"Role",value:"role"},{text:"Status",value:"status"}],users:[],user:{},role:"",approveUserDialog:!1,loadingUsers:!1,searchUsers:"",alertSuccess:!1,alertFail:!1,alertMsg:""}},methods:{displayApprovalDialog:function(e){this.user=e,this.approveUserDialog=!0},changeStatus:function(e){var t=this,a=new FormData;a.append("role",this.role),a.append("status",e),a.append("id",this.user.id),u.a.post("/processUserAccoutRequest/",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){t.approveUserDialog=!1,t.$store.state.errorTitle="Info",t.$store.state.errorDescription="This request was processed successfully",t.$store.state.dialogError=!0,t.getUsers()})).catch((function(e){t.approveUserDialog=!1,t.$store.state.errorTitle="Error",t.$store.state.errorDescription="An error occured while processing this request, please retry",t.$store.state.dialogError=!0,console.log(e.response.data.error)}))},getUsers:function(){var e=this,t=new FormData;t.append("username",this.username),t.append("password",this.password),this.users=[],this.loadingUsers=!0,u.a.get("/users/getUsers/").then((function(t){e.loadingUsers=!1,e.users=t.data})).catch((function(t){e.loadingUsers=!1,t.hasOwnProperty("response")&&console.log(t.response.data.error)}))},accountAction:function(e,t){var a=this,r=t.id,s=new FormData;s.append("id",r),"Active"===e||"Inactive"===e?(s.append("status",e),u.a.post("/changeAccountStatus",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){a.alertSuccess=!0,"Active"===e?a.alertMsg="Account activated successfully":"Inactive"===e&&(a.alertMsg="Account deactivated successfully"),a.getUsers()})).catch((function(e){console.log(JSON.stringify(e)),a.alertFail=!0,a.alertMsg="Action failed"}))):"reset"===e&&(s.append("surname",t.surname),u.a.post("/resetPassword",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){a.alertSuccess=!0,a.alertMsg="Password reseted successfully",a.getUsers()})).catch((function(e){console.log(JSON.stringify(e)),a.alertFail=!0,a.alertMsg="Action failed"})))}},computed:{roleErrors:function(){var e=[];return this.$v.role.$dirty?(!this.$v.role.required&&e.push("Role is required"),e):e}},created:function(){this.getUsers(),this.getRoles()}},ze=We,Je=Object(g["a"])(ze,Be,Ge,!1,null,null,null),Ye=Je.exports;m()(Je,{VAlert:M["a"],VBtn:U["a"],VCard:F["a"],VCardActions:E["a"],VCardText:E["c"],VCardTitle:E["d"],VContainer:q["a"],VDataTable:Re["a"],VDialog:xe["a"],VFlex:j["a"],VIcon:y["a"],VLayout:B["a"],VProgressLinear:ke["a"],VSelect:Fe["a"],VSpacer:G["a"],VTextField:W["a"],VToolbar:z["a"]});var Ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Add New User")])],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.firstnameErrors,filled:"",color:"deep-purple",label:"First Name*"},on:{blur:function(t){return e.$v.firstName.$touch()},change:function(t){return e.$v.firstName.$touch()}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Middle Names"},model:{value:e.otherName,callback:function(t){e.otherName=t},expression:"otherName"}}),a("v-text-field",{attrs:{required:"","error-messages":e.surnameErrors,filled:"",color:"deep-purple",label:"Surname*"},on:{blur:function(t){return e.$v.surname.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}}),a("v-text-field",{attrs:{required:"","error-messages":e.phoneErrors,filled:"",color:"deep-purple",label:"Phone*"},on:{blur:e.validatePhone,change:e.validatePhone,input:e.validatePhone},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),a("v-text-field",{attrs:{required:"","error-messages":e.emailErrors,filled:"",color:"deep-purple",label:"Email*"},on:{blur:e.validateEmail,change:e.validateEmail,input:e.validateEmail},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{required:"","error-messages":e.usernameErrors,filled:"",color:"deep-purple",label:"Username*"},on:{blur:function(t){return e.$v.userName.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",filled:"",color:"deep-purple",label:"Password*"},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{required:"","error-messages":e.retype_passwordErrors,type:"password",filled:"",color:"deep-purple",label:"Re-type Password*"},on:{blur:function(t){return e.$v.retype_password.$touch()},change:function(t){return e.$v.retype_password.$touch()}},model:{value:e.retype_password,callback:function(t){e.retype_password=t},expression:"retype_password"}}),a("v-select",{attrs:{required:"",items:e.roles,"single-line":"",clearable:"","error-messages":e.roleErrors,filled:"",label:"Role*"},on:{blur:function(t){return e.$v.role.$touch()},change:function(t){return e.$v.role.$touch()}},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}})],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[a("v-icon",[e._v("mdi-close")]),e._v("Clear ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addUser()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-web")]),e._v("Add ")],1)],1)],1)],1),a("v-spacer")],1)],1)},Xe=[],Ze={mixins:[w],validations:{userName:{required:V["required"]},retype_password:{required:V["required"]},password:{required:V["required"]},role:{required:V["required"]},firstName:{required:V["required"]},surname:{required:V["required"]},phone:{required:V["required"]},email:{required:V["required"]}},data:function(){return{firstName:"",otherName:"",surname:"",phone:"",email:"",userName:"",password:"",retype_password:"",role:"",customFields:[],phoneErrors:[],emailErrors:[]}},methods:{validateEmail:function(){if(this.emailErrors=[],!this.email)return this.emailErrors.push("Email is required"),!1;var e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.test(this.email)?void 0:(this.emailErrors.push("Invalid Email"),!1)},validatePhone:function(){if(this.phoneErrors=[],!this.phone)return this.phoneErrors.push("Phone is required");var e=/^[+]?[\s./0-9]*[(]?[0-9]{1,4}[)]?[-\s./0-9]*$/g;return e.test(this.phone)?void 0:this.phoneErrors.push("Invalid phone number")},addUser:function(){var e=this;if(this.password!==this.retype_password)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",void(this.$store.state.errorDescription="Password mismatch");this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Saving User";var t=new FormData;t.append("firstName",this.firstName),t.append("otherName",this.otherName),t.append("password",this.password),t.append("userName",this.userName),t.append("surname",this.surname),t.append("phone",this.phone),t.append("email",this.email),t.append("role",this.role),u.a.post("/addUser/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="User added successfully",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1})).catch((function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="This user was not added, ensure userName is not used",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t.response.data.error)}))}},computed:{codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},firstnameErrors:function(){var e=[];return this.$v.firstName.$dirty?(!this.$v.firstName.required&&e.push("First Name is required"),e):e},surnameErrors:function(){var e=[];return this.$v.surname.$dirty?(!this.$v.surname.required&&e.push("Surname is required"),e):e},usernameErrors:function(){var e=[];return this.$v.userName.$dirty?(!this.$v.userName.required&&e.push("Username is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e},retype_passwordErrors:function(){var e=[];return this.$v.retype_password.$dirty?(!this.$v.retype_password.required&&e.push("Re-type Password"),e):e},roleErrors:function(){var e=[];return this.$v.role.$dirty?(!this.$v.role.required&&e.push("Role is required"),e):e}},created:function(){this.getRoles()}},Qe=Ze,et=Object(g["a"])(Qe,Ke,Xe,!1,null,null,null),tt=et.exports;m()(et,{VBtn:U["a"],VCard:F["a"],VCardActions:E["a"],VCardTitle:E["d"],VContainer:q["a"],VDivider:ce["a"],VFlex:j["a"],VForm:H["a"],VIcon:y["a"],VLayout:B["a"],VSelect:Fe["a"],VSpacer:G["a"],VSystemBar:le["a"],VTextField:W["a"],VToolbar:z["a"]});var at=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[e._v(" Select role to edit tasks "),a("v-select",{attrs:{required:"",items:e.roles,"single-line":"",filled:"",label:"Select Role"},on:{change:e.roleSelected}}),e.role.value?a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Tasks assigned to role "+e._s(e.role.text)+" ")]),a("v-card-text",[a("v-data-table",{attrs:{items:e.tasks,height:"10px","hide-default-footer":""},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[a("v-checkbox",{attrs:{value:r.id},model:{value:e.role.tasks,callback:function(t){e.$set(e.role,"tasks",t)},expression:"role.tasks"}})],1),a("td",[e._v(e._s(r.display))])])]}}],null,!1,1175055491)})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:e.saveRole}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(" Save ")],1)],1)],1):e._e()],1)},rt=[],st={mixins:[w],data:function(){return{role:{},task:""}},methods:{roleSelected:function(e){this.role=this.roles.find((function(t){return t.value===e}))},saveRole:function(){var e=this;this.$store.state.progressTitle="Updating role",this.$store.state.dynamicProgress=!0;var t=new FormData;t.append("role",JSON.stringify(this.role)),u.a.post("/updateRole",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Info",e.$store.state.errorColor="primary",e.$store.state.errorDescription="Role ".concat(e.role.text," updated successfully"),e.getRoles()})).catch((function(t){e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorColor="error",e.$store.state.errorDescription="An error has occured while updating role ".concat(e.role.text),console.log(t)}))}},created:function(){this.getRoles(),this.getTasks()}},ot=st,it=Object(g["a"])(ot,at,rt,!1,null,null,null),nt=it.exports;m()(it,{VBtn:U["a"],VCard:F["a"],VCardActions:E["a"],VCardText:E["c"],VCardTitle:E["d"],VCheckbox:Ve["a"],VContainer:q["a"],VDataTable:Re["a"],VIcon:y["a"],VSelect:Fe["a"],VSpacer:G["a"]});var ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",filled:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Change Password")])],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.oldPasswordErrors,type:"password",filled:"",color:"deep-purple",label:"Old Password"},on:{blur:function(t){return e.$v.oldPassword.$touch()},change:function(t){return e.$v.oldPassword.$touch()}},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}}),a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",filled:"",color:"deep-purple",label:"Password"},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{required:"","error-messages":e.retype_passwordErrors,type:"password",filled:"",color:"deep-purple",label:"Re-type Password"},on:{blur:function(t){return e.$v.retype_password.$touch()},change:function(t){return e.$v.retype_password.$touch()}},model:{value:e.retype_password,callback:function(t){e.retype_password=t},expression:"retype_password"}})],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{filled:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[a("v-icon",[e._v("mdi-close")]),e._v("Clear ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.verifyPassword()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-find-replace")]),e._v("Change ")],1)],1)],1)],1),a("v-spacer")],1)],1)},lt=[],ut={validations:{retype_password:{required:V["required"]},password:{required:V["required"]},oldPassword:{required:V["required"]}},data:function(){return{oldPassword:"",password:"",retype_password:""}},methods:{changePassword:function(){var e=this;if(this.password!==this.retype_password)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",void(this.$store.state.errorDescription="Password mismatch");this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Changing Password";var t=new FormData;t.append("password",this.password),t.append("id",this.$store.state.auth.userID),u.a.post("/changePassword/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="Password changed successfully!",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1})).catch((function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="Password change failed!",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t.response.data.error)}))},verifyPassword:function(){var e=this,t=new FormData;t.append("username",this.$store.state.auth.username),t.append("password",this.oldPassword),u.a.post("/authenticate/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){t.data.userID?e.changePassword():(e.alertFail=!0,e.alertMsg="Wrong Old Password")})).catch((function(e){console.log(JSON.stringify(e))}))}},computed:{oldPasswordErrors:function(){var e=[];return this.$v.oldPassword.$dirty?(!this.$v.oldPassword.required&&e.push("Old Password is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e},retype_passwordErrors:function(){var e=[];return this.$v.retype_password.$dirty?(!this.$v.retype_password.required&&e.push("Re-type Password"),e):e}}},dt=ut,ht=Object(g["a"])(dt,ct,lt,!1,null,null,null),vt=ht.exports;m()(ht,{VBtn:U["a"],VCard:F["a"],VCardActions:E["a"],VCardTitle:E["d"],VContainer:q["a"],VDivider:ce["a"],VFlex:j["a"],VForm:H["a"],VIcon:y["a"],VLayout:B["a"],VSpacer:G["a"],VSystemBar:le["a"],VTextField:W["a"],VToolbar:z["a"]});var pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" About this page ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" This page let you load data from various sources into the app for reconciliation "),a("v-list",[e._v("1. Select to add remote source if you have a DHIS2 or FHIR server that you want to use its data on this app")]),a("v-list",[e._v("2. Select Upload CSV if you have a CSV file and want to upload its data on the app")]),a("v-list",[e._v("3. The system requires CSV data to have atleast 2 levels above facility")]),a("v-list",[e._v("4. Level 1 is the highest level on the hierarchy i.e Country")]),a("v-list",[e._v(" 5. Base URL under remote sources section refer to the URL i.e http://localhost:3447/fhir and not http://localhost:3447/fhir/Location. Same applies to DHIS2 base URL ")])],1)],1)],1),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v(" Choose way to add data source ")]),a("v-spacer")],1),a("v-card-text",[a("v-radio-group",{attrs:{row:""},on:{change:e.sourceSelected},model:{value:e.dataSource,callback:function(t){e.dataSource=t},expression:"dataSource"}},[e.canUseUploadWay?a("v-radio",{attrs:{disabled:!e.canAddDataset,color:"primary",label:"Upload CSV",value:"upload"}}):e._e(),e.canUseRemoteWay?a("v-radio",{attrs:{disabled:!e.canAddDataset,color:"primary",label:"Remote Source",value:"remote"}}):e._e(),e.canUseBlankWay?a("v-radio",{attrs:{disabled:!e.canAddDataset,color:"primary",label:"Blank Source",value:"blank"}}):e._e()],1)],1)],1)],1),a("v-spacer"),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){e.helpDialog=!0}}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}])},[a("span",[e._v("Help")])])],1),a("v-flex",{attrs:{xs12:""}},[e.addDataSource?a(e.selectedComponent,{tag:"component"}):e._e()],1)],1),a("appDialogs",{attrs:{datasetLimitWarn:e.datasetLimitWarn},on:{limitWarnStateChange:e.limitWarnStateChange}})],1)},gt=[],ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Information ")])],1),a("v-card-text",[e._v(" Data uploaded successfully ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.closeDialog("FacilityReconView")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-format-list-bulleted-square")]),e._v(" View Data ")],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"1050px"},model:{value:e.invalidRows,callback:function(t){e.invalidRows=t},expression:"invalidRows"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-close-circle")]),e._v("Data Upload was not successful,review below invalid rows in your CSV ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeInvalidRows()}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.invalidRowsHeader,items:e.invalidRowsContent,light:""},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.invalidRowsHeader,(function(r){return a("td",{key:r.value},[e._v(e._s(t.item[r.value]))])}))}}])})],1)],1)],1),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.confirmUpload,callback:function(t){e.confirmUpload=t},expression:"confirmUpload"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Warning ")])],1),a("v-card-text",[e._v(" You are about to upload CSV data into the app, click proceed to upload ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.confirmUpload=!1}}},[e._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.performExtraCheck(t)}}},[e._v("Proceed")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.errorDialog,callback:function(t){e.errorDialog=t},expression:"errorDialog"}},[a("v-card",[a("v-card-title",[e._v(" "+e._s(e.errorTitle)+" ")]),a("v-card-text",[e._v(" "+e._s(e.errorContent)+" ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.errorDialog=!1}}},[e._v("Ok")])],1)],1)],1),a("v-dialog",{attrs:{transition:"scale-transition",persistent:"",width:"300"},model:{value:e.uploadPrepaProgr,callback:function(t){e.uploadPrepaProgr=t},expression:"uploadPrepaProgr"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" "+e._s(e.uploadStatus)+" "),e.fileUploadPercentage?a("v-progress-linear",{staticClass:"mb-0",attrs:{color:"white"},model:{value:e.fileUploadPercentage,callback:function(t){e.fileUploadPercentage=t},expression:"fileUploadPercentage"}}):a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("v-dialog",{attrs:{transition:"scale-transition",persistent:"",width:"270"},model:{value:e.percentDialog,callback:function(t){e.percentDialog=t},expression:"percentDialog"}},[a("v-card",{attrs:{color:"white",dark:""}},[a("v-card-text",[a("center",[a("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.uploadStatus))]),a("br"),a("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.uploadPercent,color:"primary"}},[a("v-avatar",{attrs:{color:"indigo",size:"50px"}},[a("span",{staticClass:"white--text"},[a("b",[e._v(e._s(e.uploadPercent)+"%")])])])],1)],1)],1)],1)],1),e.$store.state.denyAccess?e._e():a("v-slide-y-transition",{attrs:{mode:"out-in"}},[a("v-stepper",{model:{value:e.e1,callback:function(t){e.e1=t},expression:"e1"}},[a("v-stepper-header",[a("v-stepper-step",{attrs:{step:"1",complete:e.e1>1}},[e._v("Upload CSV")]),a("v-divider"),a("v-stepper-step",{attrs:{step:"2",complete:e.e1>2}},[e._v("Map Headers")]),a("v-btn",{attrs:{icon:""},nativeOn:{click:function(t){return e.closeUploadWindow()}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-stepper-items",[a("v-stepper-content",{attrs:{step:"1"}},[a("v-card",{staticClass:"mb-5"},[a("v-card-title",[e._v("Upload CSV (utf-8 only) - "),a("b",[e._v("Select a CSV file and upload")])]),a("v-card-text",[a("v-text-field",{attrs:{label:"Enter Unique Name For Your Data","error-messages":e.uploadNameErrors,required:""},on:{blur:e.ensureNameUnique,input:e.ensureNameUnique},model:{value:e.uploadName,callback:function(t){e.uploadName=t},expression:"uploadName"}}),a("input",{attrs:{type:"file"},on:{change:e.fileSelected}}),a("br"),a("br"),a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Advanced Options ")]),a("v-card-text",[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.$store.state.dhis.user.orgId?a("v-checkbox",e._g({attrs:{disabled:e.shareWithAll,color:"primary",label:"Share with other users of the same org unit as yours"},model:{value:e.shareToSameOrgid,callback:function(t){e.shareToSameOrgid=t},expression:"shareToSameOrgid"}},r)):e._e()]}}],null,!1,1162473824)},[a("span",[e._v(" Share this dataset with all other users that are on the same org unit as you ")])]),e.$store.state.config.generalConfig.allowShareToAllForNonAdmin||"Admin"===e.$store.state.auth.role?a("v-checkbox",{attrs:{color:"primary",label:"Share with all other users"},on:{change:e.sharingOptions},model:{value:e.shareWithAll,callback:function(t){e.shareWithAll=t},expression:"shareWithAll"}}):e._e(),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.shareWithAll&&e.$store.state.dhis.user.orgId?a("v-checkbox",e._g({attrs:{color:"primary",label:"Limit orgs sharing by user orgid"},model:{value:e.limitShareByOrgId,callback:function(t){e.limitShareByOrgId=t},expression:"limitShareByOrgId"}},r)):e._e()]}}],null,!1,1150100143)},[a("span",[e._v(" if activated, other users will see locations (including location children) that has the same location id as their location id ")])])],1)],1)],1)],1),e.uploadedFileName&&e.uploadName&&0===e.uploadNameErrors.length?a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.e1=2}}},[e._v("Continue")]):a("v-btn",{attrs:{color:"primary",disabled:""},nativeOn:{click:function(t){e.e1=2}}},[e._v("Continue")])],1),a("v-stepper-content",{attrs:{step:"2"}},[a("b",[e._v("Map an appropriate CSV header against those on the app.")]),a("v-layout",{ref:"form",attrs:{row:"",wrap:""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Facility*")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemFacility,"error-messages":e.facilityErrors,label:"Select",required:"","single-line":"",clearable:""},on:{blur:function(t){return e.$v.facility.$touch()},change:function(t){return e.$v.facility.$touch()}},model:{value:e.facility,callback:function(t){e.facility=t},expression:"facility"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Code*")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemCode,"error-messages":e.codeErrors,label:"Select",required:"","single-line":"",clearable:""},on:{blur:function(t){return e.$v.code.$touch()},change:function(t){return e.$v.code.$touch()}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Latitude")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLat,label:"Select","single-line":"",clearable:""},model:{value:e.lat,callback:function(t){e.lat=t},expression:"lat"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Longitude")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLong,label:"Select","single-line":"",clearable:""},model:{value:e.long,callback:function(t){e.long=t},expression:"long"}})],1),[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 1")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel1,label:"Select","single-line":"",clearable:""},model:{value:e.level1,callback:function(t){e.level1=t},expression:"level1"}})],1)],[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 2")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel2,label:"Select","single-line":"",clearable:""},model:{value:e.level2,callback:function(t){e.level2=t},expression:"level2"}})],1)],e.showLevel3?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 3")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel3,label:"Select","single-line":"",clearable:""},model:{value:e.level3,callback:function(t){e.level3=t},expression:"level3"}})],1)]:e._e(),e.showLevel4?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 4")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel4,label:"Select","single-line":"",clearable:""},model:{value:e.level4,callback:function(t){e.level4=t},expression:"level4"}})],1)]:e._e(),e.showLevel5?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 5")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel5,label:"Select","single-line":"",clearable:""},model:{value:e.level5,callback:function(t){e.level5=t},expression:"level5"}})],1)]:e._e(),e.showLevel6?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 6")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel6,label:"Select","single-line":"",clearable:""},model:{value:e.level6,callback:function(t){e.level6=t},expression:"level6"}})],1)]:e._e(),e.showLevel7?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 7")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel7,label:"Select","single-line":"",clearable:""},model:{value:e.level7,callback:function(t){e.level7=t},expression:"level7"}})],1)]:e._e()],2),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs1:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.showLevel7?e._e():a("v-btn",e._g({staticClass:"mx-14",attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:e.showMoreLevel}},r),[a("v-icon",{attrs:{dark:""}},[e._v(" mdi-plus ")])],1)]}}],null,!1,1697189859)},[a("span",[e._v("Add More Level")])])],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.e1=1}}},[e._v("Go Back")])],1),a("v-spacer"),a("v-flex",{attrs:{xs1:""}},[a("v-btn",{attrs:{color:"primary",disabled:e.$v.$invalid},nativeOn:{click:function(t){e.confirmUpload=!0}}},[e._v("Upload")])],1)],1)],1)],1)],1)],1)],1)},mt=[],yt=(a("07ac"),a("4de4"),{data:function(){return{name:"",host:"",username:"",password:"",sourceType:"",limitShareByOrgId:!1,shareWithAll:!1,shareToSameOrgid:!0,invalidCharacters:['"',"/","\\","."]}},methods:{sharingOptions:function(){this.shareWithAll&&(this.shareToSameOrgid=!1)},addDataSource:function(e,t,a){var r=this,s=new FormData,o=this.$store.state.clientId;s.append("host",this.host),s.append("sourceType",this.sourceType),s.append("source",e),s.append("orgId",this.$store.state.dhis.user.orgId),s.append("shareToSameOrgid",this.shareToSameOrgid),s.append("shareToAll",this.shareWithAll),s.append("limitByUserLocation",this.limitShareByOrgId),s.append("username",this.username),s.append("password",this.password),s.append("name",this.name),s.append("clientId",o),s.append("partitionID",t),s.append("levelData",a),s.append("userID",this.$store.state.auth.userID);var i=this.$store.state.dataSources.find((function(e){return e.host===r.host}));u.a.post("/datasource/addSource",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){Rr.$emit("dataSourceSaved"),Rr.$emit("dataSourceAddedSuccessfully"),Rr.$emit("getDataSources"),i?(i.name=r.name,i.username=r.username,i.password=e.data.password,i.sourceType=r.sourceType):r.$store.state.dataSources.push({name:r.name,host:r.host,sourceType:r.sourceType,source:"syncServer",username:r.username,password:e.data.password})})).catch((function(e){console.log(e),Rr.$emit("remoteServerFailedAdd")}))}}}),$t={mixins:[yt,w],data:function(){return{partitionID:"",levelData:"",datasetLimitWarn:!1,errorDialog:!1,errorTitle:"",errorContent:"",dialog:!1,fileUploadPercentage:"",percentDialog:!1,uploadPrepaProgr:!1,UploadProgressTimer:"",uploadStatus:"1/3 Uploading CSV to the server",uploadPercent:null,uploadName:"",uploadNameErrors:[],confirmUpload:!1,confirmTitle:"",confirmMsg:"",file:"",uploadedFileName:"",e1:1,facility:null,code:null,lat:null,long:null,level1:null,level2:null,level3:null,level4:null,level5:null,level6:null,level7:null,showLevel3:!1,showLevel4:!1,showLevel5:!1,showLevel6:!1,showLevel7:!1,uploadedHeaders:[],mappedHeaders:[],invalidRowsHeader:[],invalidRowsContent:[],invalidRows:!1,valid:!1}},validations:{facility:{required:V["required"]},code:{required:V["required"]},uploadName:{required:V["required"]}},methods:{fileSelected:function(e){this.uploadedFileName=e.target.files[0]["name"],"text/csv"===e.target.files[0]["type"]||"application/vnd.ms-excel"===e.target.files[0]["type"]&&"csv"===e.target.files[0].name.slice(-3).toLowerCase()||(this.errorDialog=!0,this.errorTitle="Error",this.errorContent="Wrong file type uploaded,Only CSV format is supported",this.uploadedFileName=""),this.file=e.target.files[0];var t=new FileReader;t.addEventListener("load",function(){var e=t.result,a=e.split(/\r\n|\n/),r=a[0];this.uploadedHeaders=r.split(",")}.bind(this),!1),t.readAsText(e.target.files[0],"utf-8")},ensureNameUnique:function(){if(this.uploadNameErrors=[],""===this.uploadName)return this.uploadNameErrors.push("Upload name is required");if(this.uploadName.length>35)return this.uploadNameErrors.push("Name must not exceed 35 characters");var e,t=Object(n["a"])(this.invalidCharacters);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(-1!==this.uploadName.indexOf(a))return this.uploadNameErrors.push("Name is invalid")}}catch(i){t.e(i)}finally{t.f()}var r,s=Object(n["a"])(this.$store.state.dataSources);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(o.display.toLowerCase()===this.uploadName.toLowerCase())return this.uploadNameErrors.push("This Name Exists"),!1}}catch(i){s.e(i)}finally{s.f()}},confirmSubmit:function(){this.confirmUpload=!0},checkUploadProgress:function(){var e=this,t=this.$store.state.clientId;u.a.get("/progress/uploadProgress/"+t).then((function(t){return t.data&&(t.data.status||t.data.percent||t.data.error)?null!==t.data.error?(e.$store.state.uploadRunning=!1,e.uploadPrepaProgr=!1,e.percentDialog=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.data.error,void console.log(t.data.error)):(e.uploadStatus=t.data.status,t.data.percent&&(e.percentDialog||(e.uploadPrepaProgr=!1,e.percentDialog=!0),e.uploadPercent=t.data.percent),void("Done"===t.data.status||t.data.status>=100?(e.clearProgress("uploadProgress"),e.addDataSource("upload",e.partitionID,e.levelData),clearInterval(e.UploadProgressTimer),e.$store.state.recoLevel=2,e.percentDialog=!1,e.dialog=!0,e.$store.state.uploadRunning=!1):e.checkUploadProgress())):(e.$store.state.uploadRunning=!1,e.uploadPrepaProgr=!1,e.percentDialog=!1,e.$store.state.errorTitle="An error has occured",e.$store.state.errorDescription="You should delete this data source from view data source page then re-upload",e.$store.state.errorColor="error",void(e.$store.state.dialogError=!0))})).catch((function(t){console.log(t),e.checkUploadProgress()}))},performExtraCheck:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Performing extra validations",this.getGeneralConfig((function(){e.datasetLimitWarn=!1,e.$store.state.dynamicProgress=!1,e.canAddDataset?e.submitCSV():(e.confirmUpload=!1,e.datasetLimitWarn=!0)}))},submitCSV:function(){var e=this,t=new FormData;t.append("file",this.file),t.append("csvName",this.uploadName),t.append("facility",this.facility),t.append("code",this.code),t.append("lat",this.lat),t.append("long",this.long),t.append("level1",this.level1),t.append("level2",this.level2),t.append("level3",this.level3),t.append("level4",this.level4),t.append("level5",this.level5),t.append("level6",this.level6),t.append("level7",this.level7),t.append("clientId",this.$store.state.clientId),t.append("userID",this.$store.state.auth.userID),this.confirmUpload=!1,this.$store.state.uploadRunning=!0,this.uploadPrepaProgr=!0,this.host="",this.sourceType="upload",this.username="",this.password="",this.name=this.uploadName,u.a.post("/uploadCSV",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){this.fileUploadPercentage=parseInt(Math.round(100*e.loaded/e.total)),100===this.fileUploadPercentage&&(this.fileUploadPercentage="",this.uploadStatus="2/3 Validating CSV Data")}.bind(this)}).then((function(t){var a=t.data.partitionID,r=t.data.levelData;e.partitionID=a,e.levelData=r,e.checkUploadProgress()})).catch((function(t){if(Array.isArray(t.response.data.error)){e.invalidRows=!0;for(var a=0;a<t.response.data.error.length;a++){if(0===a){for(var r=Object.keys(t.response.data.error[a].data),s=0,o=r;s<o.length;s++){var i=o[s];e.invalidRowsHeader.push({text:i,value:i})}e.invalidRowsHeader.push({text:"Reason",value:"reason"})}var n=Object.values(t.response.data.error[a].data),c={};for(var l in n)c[e.invalidRowsHeader[l].value]=n[l];c["reason"]=t.response.data.error[a].reason,e.invalidRowsContent.push(c)}}else e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.response.data.error+". Reload page and retry";e.$store.state.uploadRunning=!1,e.uploadPrepaProgr=!1,e.percentDialog=!1,clearInterval(e.UploadProgressTimer)}))},closeInvalidRows:function(){this.invalidRows=!1,this.invalidRowsHeader=[],this.invalidRowsContent=[],this.e1=1},closeDialog:function(e){this.$router.push({name:e}),this.dialog=!1},closeUploadWindow:function(){Rr.$emit("dataSourceSaved")},showMoreLevel:function(){this.showLevel3?this.showLevel4?this.showLevel5?this.showLevel6?this.showLevel7||(this.showLevel7=!0):this.showLevel6=!0:this.showLevel5=!0:this.showLevel4=!0:this.showLevel3=!0}},computed:{facilityErrors:function(){var e=[];return this.$v.facility.$dirty?(!this.$v.facility.required&&e.push("Facility is required"),e):e},codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},filteredItemFacility:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemCode:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLat:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLong:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLevel1:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLevel2:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLevel3:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLevel4:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLevel5:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level6&&t!==e.level7}))},filteredItemLevel6:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level7}))},filteredItemLevel7:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6}))}},created:function(){this.$store.state.uploadProgressData.percentDialog&&(this.percentDialog=this.$store.state.uploadProgressData.percentDialog),this.$store.state.uploadProgressData.uploadPrepaProgr&&(this.uploadPrepaProgr=this.$store.state.uploadProgressData.uploadPrepaProgr),this.$store.state.uploadProgressData.UploadProgressTimer&&(this.UploadProgressTimer=this.$store.state.uploadProgressData.UploadProgressTimer),this.$store.state.uploadProgressData.uploadStatus&&(this.uploadStatus=this.$store.state.uploadProgressData.uploadStatus),this.$store.state.uploadProgressData.uploadPercent&&(this.uploadPercent=this.$store.state.uploadProgressData.uploadPercent)},destroyed:function(){this.$store.state.uploadProgressData.dialog=this.dialog,this.$store.state.uploadProgressData.percentDialog=this.percentDialog,this.$store.state.uploadProgressData.uploadPrepaProgr=this.uploadPrepaProgr,this.$store.state.uploadProgressData.UploadProgressTimer=this.UploadProgressTimer,this.$store.state.uploadProgressData.uploadStatus=this.uploadStatus,this.$store.state.uploadProgressData.uploadPercent=this.uploadPercent}},St=$t,bt=(a("d13b"),a("0789")),xt=a("7e85"),_t=a("e516"),kt=a("9c54"),wt=a("56a4"),Pt=a("e0c7"),Dt=Object(g["a"])(St,ft,mt,!1,null,"047941a7",null),Ct=Dt.exports;m()(Dt,{VAvatar:be["a"],VBtn:U["a"],VCard:F["a"],VCardActions:E["a"],VCardText:E["c"],VCardTitle:E["d"],VCheckbox:Ve["a"],VContainer:q["a"],VDataTable:Re["a"],VDialog:xe["a"],VDivider:ce["a"],VFlex:j["a"],VIcon:y["a"],VLayout:B["a"],VProgressCircular:_e["a"],VProgressLinear:ke["a"],VSelect:Fe["a"],VSlideYTransition:bt["f"],VSpacer:G["a"],VStepper:xt["a"],VStepperContent:_t["a"],VStepperHeader:kt["a"],VStepperItems:kt["b"],VStepperStep:wt["a"],VSubheader:Pt["a"],VTextField:W["a"],VToolbar:z["a"],VToolbarTitle:qe["b"],VTooltip:x["a"]});var Tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",text:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Add New Remote Source")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.close()}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-select",{attrs:{items:e.$store.state.remoteDataSources,required:"",label:"Source Type"},model:{value:e.sourceType,callback:function(t){e.sourceType=t},expression:"sourceType"}}),a("v-text-field",{attrs:{filled:"",required:"","error-messages":e.nameErrors,color:"deep-purple",label:"Source Name"},on:{blur:e.ensureNameUnique,input:e.ensureNameUnique},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-text-field",{attrs:{filled:"",required:"",color:"deep-purple",label:"Base URL"},model:{value:e.host,callback:function(t){e.host=t},expression:"host"}}),a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{staticStyle:{"min-height":"96px"},attrs:{filled:"",color:"deep-purple",label:"Password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),[a("v-tooltip",{attrs:{top:""}},[e.$store.state.dhis.user.orgId?a("v-checkbox",{attrs:{slot:"activator",disabled:e.shareWithAll,color:"primary",label:"Share with other users of the same org unit as yours"},slot:"activator",model:{value:e.shareToSameOrgid,callback:function(t){e.shareToSameOrgid=t},expression:"shareToSameOrgid"}}):e._e(),a("span",[e._v(" Share this dataset with all other users that are on the same org unit as you ")])],1),e.$store.state.config.generalConfig.allowShareToAllForNonAdmin||"Admin"===e.$store.state.auth.role?a("v-checkbox",{attrs:{color:"primary",label:"Share with all other users"},on:{change:e.sharingOptions},model:{value:e.shareWithAll,callback:function(t){e.shareWithAll=t},expression:"shareWithAll"}}):e._e(),a("v-tooltip",{attrs:{top:""}},[e.shareWithAll&&e.$store.state.dhis.user.orgId?a("v-checkbox",{attrs:{slot:"activator",color:"primary",label:"Limit orgs sharing by user orgid"},slot:"activator",model:{value:e.limitShareByOrgId,callback:function(t){e.limitShareByOrgId=t},expression:"limitShareByOrgId"}}):e._e(),a("span",[e._v(" if activated, other users will see locations (including location children) that has the same location id as their location id ")])],1)]],2),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:e.performExtraCheck}},[e._v(" Add ")])],1)],1)],1),a("v-spacer")],1)],1)},At=[],It={mixins:[yt,w],validations:{host:{required:V["required"]},name:{required:V["required"]},sourceType:{required:V["required"]}},data:function(){return{datasetLimitWarn:!1,nameErrors:[]}},methods:{close:function(){Rr.$emit("dataSourceSaved")},performExtraCheck:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Performing extra validations",this.getGeneralConfig((function(){e.datasetLimitWarn=!1,e.$store.state.dynamicProgress=!1,e.canAddDataset?e.addDataSource("syncServer",""):e.datasetLimitWarn=!0}))},ensureNameUnique:function(){if(this.nameErrors=[],""===this.name)return this.nameErrors.push("Name is required");if(this.name.length>35)return this.nameErrors.push("Name must not exceed 35 characters");var e,t=Object(n["a"])(this.invalidCharacters);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(-1!==this.name.indexOf(a))return this.nameErrors.push("Name is invalid")}}catch(i){t.e(i)}finally{t.f()}var r,s=Object(n["a"])(this.$store.state.dataSources);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(o.display===this.name)return this.nameErrors.push("This Name Exists"),!1}}catch(i){s.e(i)}finally{s.f()}}}},Ot=It,Lt=Object(g["a"])(Ot,Tt,At,!1,null,null,null),Vt=Lt.exports;m()(Lt,{VBtn:U["a"],VCard:F["a"],VCardActions:E["a"],VCardTitle:E["d"],VCheckbox:Ve["a"],VContainer:q["a"],VDivider:ce["a"],VFlex:j["a"],VForm:H["a"],VIcon:y["a"],VLayout:B["a"],VSelect:Fe["a"],VSpacer:G["a"],VSystemBar:le["a"],VTextField:W["a"],VToolbar:z["a"],VTooltip:x["a"]});var Nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",text:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Add Blank Source")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.close()}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-text-field",{attrs:{filled:"",required:"","error-messages":e.nameErrors,color:"deep-purple",label:"Source Name"},on:{blur:e.ensureNameUnique,input:e.ensureNameUnique},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("v-flex",[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.$store.state.dhis.user.orgId?a("v-checkbox",e._g({attrs:{disabled:e.shareWithAll,color:"primary",label:"Share with other users of the same org unit as yours"},model:{value:e.shareToSameOrgid,callback:function(t){e.shareToSameOrgid=t},expression:"shareToSameOrgid"}},r)):e._e()]}}])},[a("span",[e._v(" Share this dataset with all other users that are on the same org unit as you ")])])],1),a("v-flex",[e.$store.state.config.generalConfig.allowShareToAllForNonAdmin||"Admin"===e.$store.state.auth.role?a("v-checkbox",{attrs:{color:"primary",label:"Share with all other users"},on:{change:e.sharingOptions},model:{value:e.shareWithAll,callback:function(t){e.shareWithAll=t},expression:"shareWithAll"}}):e._e()],1),a("v-flex",[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.shareWithAll&&e.$store.state.dhis.user.orgId?a("v-checkbox",e._g({attrs:{color:"primary",label:"Limit orgs sharing by user orgid"},model:{value:e.limitShareByOrgId,callback:function(t){e.limitShareByOrgId=t},expression:"limitShareByOrgId"}},r)):e._e()]}}])},[a("span",[e._v(" if activated, other users will see locations (including location children) that has the same location id as their location id ")])])],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:e.performExtraCheck}},[e._v(" Add ")])],1)],1)],1),a("v-spacer")],1)],1)},Rt=[],Mt={mixins:[yt,w],validations:{name:{required:V["required"]}},data:function(){return{datasetLimitWarn:!1,nameErrors:[]}},methods:{close:function(){Rr.$emit("dataSourceSaved")},performExtraCheck:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Performing extra validations",this.getGeneralConfig((function(){e.datasetLimitWarn=!1,e.$store.state.dynamicProgress=!1,e.canAddDataset?e.addDataSource("blank",""):e.datasetLimitWarn=!0}))},ensureNameUnique:function(){if(this.nameErrors=[],""===this.name)return this.nameErrors.push("Name is required");if(this.name.length>35)return this.nameErrors.push("Name must not exceed 35 characters");var e,t=Object(n["a"])(this.invalidCharacters);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(-1!==this.name.indexOf(a))return this.nameErrors.push("Name is invalid")}}catch(i){t.e(i)}finally{t.f()}var r,s=Object(n["a"])(this.$store.state.dataSources);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(o.display===this.name)return this.nameErrors.push("This Name Exists"),!1}}catch(i){s.e(i)}finally{s.f()}}}},Ut=Mt,Ft=Object(g["a"])(Ut,Nt,Rt,!1,null,null,null),Et=Ft.exports;m()(Ft,{VBtn:U["a"],VCard:F["a"],VCardActions:E["a"],VCardTitle:E["d"],VCheckbox:Ve["a"],VContainer:q["a"],VDivider:ce["a"],VFlex:j["a"],VForm:H["a"],VIcon:y["a"],VLayout:B["a"],VSpacer:G["a"],VTextField:W["a"],VToolbar:z["a"],VTooltip:x["a"]});var qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}},[a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"770px",transition:"dialog-transition"},model:{value:e.datasetLimit,callback:function(t){e.datasetLimit=t},expression:"datasetLimit"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("info")]),e._v(" Datasets limit Warning ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.datasetLimit=!1}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",[e._v(" You cant add more datasets as you have reached the datasets limit, contact system administrator for help ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.datasetLimit=!1}}},[e._v("Ok")])],1)],1)],1)],1)},jt=[],Ht={props:["datasetLimitWarn"],computed:{datasetLimit:{get:function(){return this.datasetLimitWarn},set:function(e){this.$emit("limitWarnStateChange",e)}}}},Bt=Ht,Gt=Object(g["a"])(Bt,qt,jt,!1,null,null,null),Wt=Gt.exports;m()(Gt,{VBtn:U["a"],VCard:F["a"],VCardActions:E["a"],VCardText:E["c"],VContainer:q["a"],VDialog:xe["a"],VIcon:y["a"],VSpacer:G["a"],VToolbar:z["a"],VToolbarTitle:qe["b"]});var zt={mixins:[w],data:function(){return{helpDialog:!1,datasetLimitWarn:!1,selectedComponent:"",dataSources:[{text:"Upload CSV",value:"upload"},{text:"Remote Source",value:"remote"}],dataSource:"",addDataSource:!0,alertSuccess:!1,alertError:!1,alertMsg:"",blankName:""}},methods:{limitWarnStateChange:function(e){this.datasetLimitWarn=e},sourceSelected:function(e){this.addDataSource=!0,"upload"===e?this.selectedComponent="FacilityReconUpload":"remote"===e?this.selectedComponent="FacilityReconRemoteSources":"blank"===e&&(this.selectedComponent="AddBlankSource")}},computed:{canUseUploadWay:function(){return-1!==this.$store.state.config.generalConfig.datasetsAdditionWays.indexOf("CSV Upload")},canUseRemoteWay:function(){return-1!==this.$store.state.config.generalConfig.datasetsAdditionWays.indexOf("Remote Servers Sync")},canUseBlankWay:function(){return-1!==this.$store.state.config.generalConfig.datasetsAdditionWays.indexOf("Blank Datasource")}},components:{FacilityReconUpload:Ct,FacilityReconRemoteSources:Vt,AddBlankSource:Et,appDialogs:Wt},created:function(){var e=this;Rr.$on("dataSourceSaved",(function(){e.addDataSource=!1,e.dataSource=""})),Rr.$on("dataSourceAddedSuccessfully",(function(){e.alertSuccess=!0,e.alertMsg="Data Source Added Successfully",setTimeout((function(){e.alertSuccess=!1}),3e3)})),Rr.$on("remoteServerFailedAdd",(function(){e.alertError=!0,e.alertMsg="Data Source Failed To Be Added"}))}},Jt=zt,Yt=Object(g["a"])(Jt,pt,gt,!1,null,null,null),Kt=Yt.exports;m()(Yt,{VAlert:M["a"],VBtn:U["a"],VCard:F["a"],VCardText:E["c"],VCardTitle:E["d"],VContainer:q["a"],VDialog:xe["a"],VFlex:j["a"],VIcon:y["a"],VLayout:B["a"],VList:$["a"],VRadio:Me["a"],VRadioGroup:Ue["a"],VSpacer:G["a"],VToolbar:z["a"],VToolbarTitle:qe["b"],VTooltip:x["a"]});var Xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{width:"630px"},model:{value:e.deleteConfirm,callback:function(t){e.deleteConfirm=t},expression:"deleteConfirm"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v(" This will delete the datasource "+e._s(e.server.name)+" from the database ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.deleteConfirm=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e.loadingPairs||e.pairs.length>0?a("label",[e._v(" Below data source pairs (mapping) will also be deleted "),a("v-data-table",{attrs:{headers:e.pairsHeaders,items:e.pairs,"hide-default-footer":"",loading:e.loadingPairs},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name)+" - "+e._s(t.item.source2Name))]),a("td",[e._v(e._s(t.item.owner))])]}}],null,!1,815489092)})],1):a("label",[e._v(" There is no any data source pair (mapping) associated with this data source"),a("br")]),a("br"),a("b",[e._v("Do you want to proceed and delete?")])]),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.deleteConfirm=!1}}},[e._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"success"},on:{click:e.deleteDataSource}},[e._v("Yes")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",{attrs:{width:"530px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Editing "+e._s(e.server.host)+" ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.editDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"Name",disabled:""},model:{value:e.server.display,callback:function(t){e.$set(e.server,"display",t)},expression:"server.display"}})],1),a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"Host"},model:{value:e.server.host,callback:function(t){e.$set(e.server,"host",t)},expression:"server.host"}})],1),a("v-flex",{attrs:{xs1:""}},[a("v-select",{attrs:{items:e.$store.state.remoteDataSources,label:"Source Type"},model:{value:e.server.sourceType,callback:function(t){e.$set(e.server,"sourceType",t)},expression:"server.sourceType"}})],1),a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"User Name"},model:{value:e.server.username,callback:function(t){e.$set(e.server,"username",t)},expression:"server.username"}})],1),a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"Password",type:"password"},model:{value:e.server.password,callback:function(t){e.$set(e.server,"password",t)},expression:"server.password"}})],1)],1)],1),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"error"},nativeOn:{click:function(t){e.editDialog=!1}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("cancel")]),e._v("Cancel ")],1),a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.saveEdit("match")}}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Save ")],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.shareDialog,callback:function(t){e.shareDialog=t},expression:"shareDialog"}},[a("v-card",{attrs:{width:"530px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Sharing "+e._s(e.shareSource.display)+" ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.shareDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e.loadingLocationTree?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("p",[a("liquor-tree",{ref:"locationTree",attrs:{data:e.locationTree,options:{}},on:{"node:selected":e.locationSelected}})],1)])],a("v-icon",{attrs:{small:""}},[e._v("mdi-lock")]),e._v(" Limiting Sharing to: "),a("b",[e._v(e._s(e.limitLocationName))]),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUsers,callback:function(t){e.searchUsers=t},expression:"searchUsers"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.usersHeader,items:e.users,search:e.searchUsers,"item-key":"id"},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[r.userName!==e.$store.state.auth.username?a("tr",[a("td",[a("v-checkbox",{attrs:{value:r.id},model:{value:e.sharedUsers,callback:function(t){e.sharedUsers=t},expression:"sharedUsers"}})],1),a("td",[e._v(e._s(r.userName))]),a("td",[e._v(e._s(r.fullName))])]):e._e()]}}])})],2),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"error",disabled:e.loadingLocationTree},nativeOn:{click:function(t){e.shareDialog=!1}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("mdi-cancel")]),e._v("Cancel ")],1),a("v-spacer"),a("v-btn",{attrs:{color:"primary",disabled:e.loadingLocationTree},nativeOn:{click:function(t){return e.share("","saveShare")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-share")]),e._v("Share ")],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" About this page ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" This page let you visualize various data sets you have added into the app as well as synchronize remote servers with the app "),a("v-list",[e._v("1. Use Force Full Sync to fetch all data from the remote server and update the app")]),a("v-list",[e._v("2. Use Sync (Update) to pull updated records from the remote server and update the app")]),a("v-list",[e._v("3. You may proceed to the 'Data Source Pair' page after you have added atleast two data sources")]),a("v-list",[e._v("4. You may come back to this page and add more sources at any time")])],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){e.helpDialog=!0}}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}])},[a("span",[e._v("Help")])])],1)],1),a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v(" "+e._s(e.alertMsg)+" ")])],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",[a("v-card",{attrs:{color:"cyan lighten-5"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v(" Remote Sources ")])],1),a("v-card-actions",[e.remoteServers.length>0?a("v-btn",{attrs:{color:"primary",rounded:""},on:{click:function(t){return e.sync("full")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-sync")]),e._v("Force Full Sync ")],1):a("v-btn",{attrs:{color:"primary",rounded:"",disabled:""},on:{click:function(t){return e.sync("full")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-sync")]),e._v("Force Full Sync ")],1),e.remoteServers.length>0?a("v-btn",{attrs:{color:"primary lighten-1",rounded:""},on:{click:function(t){return e.sync("update")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-sync")]),e._v("Sync (Update) ")],1):a("v-btn",{attrs:{color:"primary lighten-1",rounded:"",disabled:""},on:{click:function(t){return e.sync("update")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-sync")]),e._v("Sync (Update) ")],1),a("v-spacer"),e.remoteServers.length>0?a("v-btn",{attrs:{color:"success",rounded:""},on:{click:e.editDataSource}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-pencil")]),e._v("Edit ")],1):a("v-btn",{attrs:{color:"success",rounded:"",disabled:""},on:{click:e.editDataSource}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-pencil")]),e._v("Edit ")],1),e.remoteServers.length>0?a("v-btn",{attrs:{color:"error",rounded:""},on:{click:e.validateDelete}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v("Delete ")],1):a("v-btn",{attrs:{color:"error",rounded:"",disabled:""},on:{click:e.validateDelete}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v("Delete ")],1)],1),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.syncServersHeader,items:e.remoteServers,dark:"",loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.server,callback:function(t){e.server=t},expression:"server"}},[a("td",[a("v-radio",{attrs:{value:r,color:"blue"}})],1)]),a("td",[e._v(e._s(r.display))]),a("td",[e._v(e._s(r.host))]),a("td",[e._v(e._s(r.sourceType))]),a("td",[e._v(e._s(r.username))]),r.username?a("td",[e._v("*****")]):a("td"),a("td",[e._v(e._s(r.lastUpdate))]),a("td",[e._v(e._s(r.owner))]),a("td",[e._v(" "+e._s(e._f("mergeUsers")(r.sharedUsers))+" ")]),a("td",[e._v(" "+e._s(r.createdTime)+" ")]),r.userID===e.$store.state.auth.userID?a("td",[a("v-btn",{attrs:{color:"success",text:""},on:{click:function(t){return e.share(r,"showDialog")}}},[a("v-icon",[e._v("mdi-share-variant-outline")]),e._v(" Share ")],1)],1):e._e()],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v(" Uploaded Sources ")])],1),a("v-card-actions",[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.uploadedSources.length>0?a("v-btn",e._g({attrs:{color:"success",rounded:""},on:{click:e.exportCSV}},r),[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-document-multiple")]),e._v("Export ")],1):a("v-btn",e._g({attrs:{color:"success",rounded:"",disabled:""},on:{click:e.exportCSV}},r),[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-document-multiple")]),e._v("Export ")],1)]}}])},[a("span",[e._v("Export Original CSV")])]),a("v-spacer"),e.uploadedSources.length>0?a("v-btn",{attrs:{color:"error",rounded:""},on:{click:e.validateDelete}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v("Delete ")],1):a("v-btn",{attrs:{color:"error",rounded:"",disabled:""},on:{click:e.validateDelete}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v("Delete ")],1)],1),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.uploadSourcesHeader,items:e.uploadedSources,dark:"",loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.server,callback:function(t){e.server=t},expression:"server"}},[a("td",[a("v-radio",{attrs:{value:r,color:"blue"}})],1)]),a("td",[e._v(e._s(r.display))]),a("td",[e._v(e._s(r.owner))]),a("td",[e._v(" "+e._s(e._f("mergeUsers")(r.sharedUsers))+" ")]),a("td",[e._v(" "+e._s(r.createdTime)+" ")]),r.userID===e.$store.state.auth.userID?a("td",[a("v-btn",{attrs:{color:"success",text:""},on:{click:function(t){return e.share(r,"showDialog")}}},[a("v-icon",[e._v("mdi-share-variant-outline")]),e._v(" Share ")],1)],1):e._e()],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)],1)],1),a("v-spacer")],1),e.server.name?a("appRemoteSync",{attrs:{syncType:e.syncType,id:e.server.id,host:e.server.host,username:e.server.username,password:e.server.password,serverName:e.server.name,userID:e.$store.state.auth.userID,sourceOwner:e.server.userID,mode:e.mode}}):e._e()],1)},Zt=[],Qt=(a("2b3d"),a("25ea")),ea={mixins:[w],data:function(){return{syncType:"",mode:"",loadingPairs:!1,pairs:[],pairsHeaders:[{text:"Pair Name",value:"name"},{text:"Owner",value:"owner"}],helpDialog:!1,deleteConfirm:!1,editDialog:!1,server:{name:"",userID:{}},shareDialog:!1,shareSource:{},users:[],sharedUsers:[],limitLocationId:"",limitLocationName:"No limit",locationTree:[],loadingLocationTree:!1,searchUsers:"",syncServersHeader:[{sortable:!1},{text:"Source Name",value:"name"},{text:"Base URL",value:"host"},{text:"Source Type",value:"sourceType"},{text:"User Name",value:"username"},{text:"Password",value:"password"},{text:"Last Sync",value:"lastsync"},{text:"Owner",value:"owner",sortable:!1},{text:"Shared To",value:"shareStatus"},{text:"Created Time",value:"createdTime"}],uploadSourcesHeader:[{sortable:!1},{text:"Source Name",align:"left",value:"name"},{text:"Owner",value:"owner",sortable:!1},{text:"Shared To",value:"shareStatus"},{text:"Created Time",value:"createdTime"}],dataSources:[{text:"Upload CSV",value:"upload"},{text:"Remote Source",value:"remote"}],usersHeader:[{sortable:!1},{text:"Username",value:"userName",sortable:!0},{text:"Fullname",value:"fullName",sortable:!0}],dataSource:"",addDataSource:!0,syncProgrIndeter:!1,syncProgrPercent:!1,syncStatus:"Waiting for sync status",syncPercent:null,syncProgressTimer:"",syncRunning:!1,alertSuccess:!1,alertError:!1,alertMsg:""}},filters:{mergeUsers:function(e){if(!e||0===e.length)return"";var t,a="",r=0,s=Object(n["a"])(e);try{for(s.s();!(t=s.n()).done;){var o=t.value;if(r++,r>5){a+="...";break}a?a+=","+o.name:a=o.name}}catch(i){s.e(i)}finally{s.f()}return a}},methods:{sourceSelected:function(e){this.addDataSource=!0,"upload"===e?this.selectedComponent="FacilityReconUpload":"remote"===e&&(this.selectedComponent="FacilityReconRemoteSources")},editDataSource:function(){return this.server.name?this.server.userID!==this.$store.state.auth.userID?(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="You are not the owner of this data source, ask the owner to edit any details")):void("upload"!==this.server.source&&(this.editDialog=!0)):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source"))},saveEdit:function(){var e=this,t=new FormData,a=this.$store.state.clientId;t.append("host",this.server.host),t.append("sourceType",this.server.sourceType),t.append("source",this.server.source),t.append("username",this.server.username),t.append("password",this.server.password),t.append("userID",this.server.userID),t.append("display",this.server.display),t.append("id","Basic/"+this.server.id),t.append("clientId",a),this.editDialog=!1,u.a.post("/datasource/editSource",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.server.password=t.data.password}))},validateDelete:function(){return this.server.name?this.server.userID!==this.$store.state.auth.userID&&"Admin"!==this.$store.state.auth.role?(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="You are not the owner of this data source, ask the owner to remove you from the share")):(this.getPairsToDelete(),void(this.deleteConfirm=!0)):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source"))},deleteDataSource:function(){var e=this;this.deleteConfirm=!1,u.a.delete("/datasource/deleteDataSource/".concat(this.server.id)).then((function(){e.server={},Rr.$emit("getDataSources")}))},getPairsToDelete:function(){var e=this;this.loadingPairs=!0,u.a.get("/datasource/getPairForSource/"+this.server.id).then((function(t){e.loadingPairs=!1,e.pairs=t.data})).catch((function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config)}))},share:function(e,t){var a=this;if("showDialog"===t)this.limitLocationId="",this.limitLocationName="No limit",this.sharedUsers=[],this.shareSource=e,this.getLocationTree(),e.hasOwnProperty("shared")&&e.shared.users.length>0&&e.shared.users.forEach((function(e){a.sharedUsers.push(e.id)})),this.shareDialog=!0;else if("saveShare"===t){if(0===this.sharedUsers.length)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select atleast one user");var r=new FormData;r.append("shareSource",this.shareSource.id),r.append("users",JSON.stringify(this.sharedUsers)),r.append("userID",this.$store.state.auth.userID),r.append("role",this.$store.state.auth.role),r.append("orgId",this.$store.state.dhis.user.orgId),r.append("limitLocationId",this.limitLocationId),this.$store.state.loadingServers=!0,this.shareDialog=!1,u.a.post("/datasource/shareSource",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){a.$store.state.loadingServers=!1,Rr.$emit("getDataSources")})).catch((function(e){console.log(e),a.$store.state.loadingServers=!1}))}},locationSelected:function(e){this.limitLocationId=e.id,"parent"!==e.id?this.limitLocationName=e.data.text:(this.limitLocationName="No limit",this.limitLocationId="")},getLocationTree:function(){var e=this,t=this.shareSource.userID;this.loadingLocationTree=!0;var a=this.toTitleCase(this.shareSource.name);u.a.get("/getTree/"+a+"/"+t).then((function(t){t.data&&(e.locationTree=[{text:"Select location to limit sharing",id:"parent",children:t.data}]),e.loadingLocationTree=!1}))},getUsers:function(){var e=this;u.a.get("/users/getUsers").then((function(t){e.users=t.data}))},exportCSV:function(){var e=this;if(!this.server.name)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source");var t=this.server.userID;u.a.get("/getUploadedCSV/"+t+"/"+this.server.name).then((function(t){var a=new Blob([t.data]);if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(a,"".concat(e.server.name,".csv"));else{var r=window.document.createElement("a");r.href=window.URL.createObjectURL(a,{type:"text/plain"}),r.download="".concat(e.server.name,".csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}})).catch((function(t){e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.response.data}))},sync:function(e){return this.server.name?this.server.userID!==this.$store.state.auth.userID?(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Only data source owner can run the sync")):void("upload"!==this.server.source&&(this.mode=e,"DHIS2"===this.server.sourceType?this.syncType="dhisSync":"FHIR"===this.server.sourceType&&(this.syncType="fhirSync"),setTimeout((function(){Rr.$emit("runRemoteSync")}),100))):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source"))}},computed:{remoteServers:function(){var e,t=[],a=Object(n["a"])(this.$store.state.dataSources);try{for(a.s();!(e=a.n()).done;){var r=e.value;"syncServer"===r.source&&t.push(r)}}catch(s){a.e(s)}finally{a.f()}return t},uploadedSources:function(){var e,t=[],a=Object(n["a"])(this.$store.state.dataSources);try{for(a.s();!(e=a.n()).done;){var r=e.value;"upload"!==r.source&&"blank"!==r.source||t.push(r)}}catch(s){a.e(s)}finally{a.f()}return t}},components:{appRemoteSync:Ae,"liquor-tree":Qt["a"]},created:function(){var e=this;this.getUsers(),Rr.$on("dataSourceSaved",(function(){e.addDataSource=!1,e.dataSource=""})),Rr.$on("dataSourceAddedSuccessfully",(function(){e.alertSuccess=!0,e.alertMsg="Data Source Added Successfully",setTimeout((function(){e.alertSuccess=!1}),3e3)})),Rr.$on("remoteServerFailedAdd",(function(){e.alertError=!0,e.alertMsg="Data Source Failed To Be Added"}))}},ta=ea,aa=Object(g["a"])(ta,Xt,Zt,!1,null,null,null),ra=aa.exports;m()(aa,{VAlert:M["a"],VBtn:U["a"],VCard:F["a"],VCardActions:E["a"],VCardText:E["c"],VCardTitle:E["d"],VCheckbox:Ve["a"],VContainer:q["a"],VDataTable:Re["a"],VDialog:xe["a"],VFlex:j["a"],VIcon:y["a"],VLayout:B["a"],VList:$["a"],VProgressLinear:ke["a"],VRadio:Me["a"],VRadioGroup:Ue["a"],VSelect:Fe["a"],VSpacer:G["a"],VTextField:W["a"],VToolbar:z["a"],VToolbarTitle:qe["b"],VTooltip:x["a"]});var sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("center",[a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.confirmPairDeleteDialog,callback:function(t){e.confirmPairDeleteDialog=t},expression:"confirmPairDeleteDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v(" Confirm deleting ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.confirmPairDeleteDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" Are you sure you want to delete this data source pair ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.confirmPairDeleteDialog=!1}}},[e._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){return e.deletePair(t)}}},[e._v("Ok")])],1)],1)],1),a("v-alert",{staticStyle:{width:"1000px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-alert",{staticStyle:{width:"1000px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"770px",transition:"dialog-transition"},model:{value:e.pairLimitWarn,callback:function(t){e.pairLimitWarn=t},expression:"pairLimitWarn"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" Pair creation limit ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.pairLimitWarn=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" You cant create more pairs as this account is limited to one pair only at a time. ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.pairLimitWarn=!1}}},[e._v("Ok")])],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"770px",transition:"dialog-transition"},model:{value:e.mapSourcePairLevels,callback:function(t){e.mapSourcePairLevels=t},expression:"mapSourcePairLevels"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" Data sources has different level counts, please map Levels to proceed ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeLevelMappingDialog(t)}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-data-table",{attrs:{headers:e.pairLevelsMappingHeader,items:e.source1Levels},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.text))]),a("td",[e.pairLevelsMapping[r.value]?[e._v(" "+e._s(e.$store.state.levelMapping.source2[e.pairLevelsMapping[r.value]])+" "),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.clearMappingSelection(r.value)}}},[e._v("mdi-close")])]:a("v-select",{attrs:{items:e.source2Levels,clearable:""},on:{change:function(t){return e.mappingSelected(r.value)}},model:{value:e.pairLevelsMapping[r.value],callback:function(t){e.$set(e.pairLevelsMapping,r.value,t)},expression:"pairLevelsMapping[item.value]"}})],2)])]}}])})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"error",rounded:""},on:{click:e.closeLevelMappingDialog}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v(" Cancel ")],1),a("v-spacer"),a("v-btn",{attrs:{color:"primary",rounded:""}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v("Save Mapping ")],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" About this page ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" This page let you choose a pair of data sources to use for reconciliation "),a("v-list",[e._v("1. Source 1 is the source while source 2 is the target")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.shareDialog,callback:function(t){e.shareDialog=t},expression:"shareDialog"}},[a("v-card",{attrs:{width:"530px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Sharing "),e.sharePair.hasOwnProperty("source1")?[e._v(e._s(e.sharePair.source1.display)+" - "+e._s(e.sharePair.source2.display))]:e._e()],2),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.shareDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUsers,callback:function(t){e.searchUsers=t},expression:"searchUsers"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.usersHeader,items:e.users,search:e.searchUsers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[r.userName!==e.$store.state.auth.username?a("tr",[a("td",[a("v-checkbox",{attrs:{value:r.id},model:{value:e.sharedUsers,callback:function(t){e.sharedUsers=t},expression:"sharedUsers"}})],1),a("td",[e._v(e._s(r.userName))]),a("td",[e._v(e._s(r.fullName))])]):e._e()]}}])})],1),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"error"},nativeOn:{click:function(t){e.shareDialog=!1}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("mdi-cancel")]),e._v("Cancel ")],1),a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.share("","saveShare")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-share-variant-outline")]),e._v("Share ")],1)],1)],1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs11:""}},[e._v(" Create/Choose a pair of data sources to use for reconciliation. Source 1 is the source while source 2 is the target ")]),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){e.helpDialog=!0}}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}])},[a("span",[e._v("Help")])])],1)],1),a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-card",{staticStyle:{width:"1000px"},attrs:{color:"cyan lighten-5"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white lighten-2"}},[e._v(" Create Data Source Pair ")])],1),a("v-card-text",{staticStyle:{float:"center"}},[a("v-row",[a("v-col",[a("v-data-table",{attrs:{headers:e.source1Headers,items:e.$store.state.dataSources,loading:e.$store.state.loadingServers,dark:""},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.source1,callback:function(t){e.source1=t},expression:"source1"}},[a("td",[a("v-radio",{attrs:{value:r,color:"blue"}})],1)]),a("td",[e._v(e._s(r.display))])],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),a("v-col",[a("v-data-table",{attrs:{headers:e.source2Headers,items:e.dataSources2,"item-key":"id",loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.source2,callback:function(t){e.source2=t},expression:"source2"}},[a("td",[a("v-radio",{attrs:{value:r,color:"blue"}})],1)]),a("td",[e._v(e._s(r.display))])],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{disabled:!e.pairSelected,color:"error",rounded:""},on:{click:e.reset}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-refresh")]),e._v(" Reset ")],1),a("v-spacer"),a("v-btn",{attrs:{disabled:!e.canCreatePair||!e.pairSelected,color:"primary",rounded:""},on:{click:e.checkLevels}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(" Save ")],1)],1)],1)],1),a("v-flex",[a("v-card",{staticStyle:{width:"1000px"},attrs:{color:"cyan lighten-4"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white lighten-2"}},[e._v(" Existing Data Source Pairs "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchPairs,callback:function(t){e.searchPairs=t},expression:"searchPairs"}})],1)],1),a("v-card-text",{staticStyle:{float:"center"}},[a("v-data-table",{attrs:{headers:e.sourcePairHeaders,items:e.$store.state.dataSourcePairs,search:e.searchPairs,loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.source1.display)+" - "+e._s(r.source2.display))]),a("td",[e._v(e._s(r.user.name))]),a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.activeDataSourcePair,callback:function(t){e.activeDataSourcePair=t},expression:"activeDataSourcePair"}},[a("td",[a("v-radio",{attrs:{value:r,color:"blue"}})],1)]),a("td",[e._v(" "+e._s(e._f("mergeUsers")(r.sharedUsers))+" ")]),r.user.id===e.$store.state.auth.userID?a("td",[a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.share(r,"showDialog")}}},[a("v-icon",[e._v("mdi-share-variant-outline")]),e._v("Share ")],1)],1):e._e()],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),a("v-card-actions",[a("v-btn",{attrs:{disabled:!e.canDeletePair,color:"error",rounded:""},on:{click:e.confirmDeletePair}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v("Delete Pair ")],1),a("v-spacer"),a("v-btn",{attrs:{disabled:!e.canActivatePair,color:"primary",rounded:""},on:{click:e.activatePair}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v("Activate Pair ")],1)],1)],1)],1)],1)],1)],1)},oa=[],ia={mixins:[w,C],data:function(){return{confirmPairDeleteDialog:!1,helpDialog:!1,alertSuccess:!1,alertError:!1,alertMsg:"",pairLimitWarn:!1,shareDialog:!1,mapSourcePairLevels:!1,pairLevelsMapping:{},sharePair:{},source1:{},source2:{},searchPairs:"",searchSources:"",searchUsers:"",users:[],sharedUsers:[],activeDataSourcePair:{},pairLevelsMappingHeader:[{text:"Source 1 Levels",value:"headerSource1Levels",sortable:!1},{text:"Source 2 Levels",value:"headerSource1Levels",sortable:!1}],source1Headers:[{sortable:!1},{text:"Source 1",value:"headerSource1",sortable:!1}],source2Headers:[{sortable:!1},{text:"Source 2",value:"headerSource2",sortable:!1}],sourcePairHeaders:[{text:"Pair",value:"pair"},{text:"Owner",value:"owner",sortable:!1},{text:"Active",value:"active"},{text:"Shared To",value:"shareStatus"}],usersHeader:[{},{text:"Username",value:"username",sortable:!0},{text:"Full Name",value:"fname",sortable:!0}],source1Levels:[],source2Levels:[]}},filters:{mergeUsers:function(e){if(!e||0===e.length)return"";var t,a="",r=0,s=Object(n["a"])(e);try{for(s.s();!(t=s.n()).done;){var o=t.value;if(r++,r>5){a+="...";break}a?a+=","+o.name:a=o.name}}catch(i){s.e(i)}finally{s.f()}return a}},methods:{confirmDeletePair:function(){this.confirmPairDeleteDialog=!0},deletePair:function(){var e=this;this.confirmPairDeleteDialog=!1;var t="pairId=".concat(this.activeDataSourcePair.id,"&userID=").concat(this.$store.state.auth.userID,"&pairOwner=").concat(this.activeDataSourcePair.user.id,"&source1Name=").concat(this.activeDataSourcePair.source1.name,"&source2Name=").concat(this.activeDataSourcePair.source2.name);u.a.delete("/datasource/deleteSourcePair?"+t).then((function(){e.$store.state.errorTitle="Pair Deletion",e.$store.state.errorDescription="Pair deleted successfully",e.$store.state.dialogError=!0,setTimeout((function(){Rr.$emit("getDataSourcePair")}),500)})).catch((function(t){e.$store.state.errorTitle="Pair Deletion",e.$store.state.errorDescription="An error occured while deleting pair, please retry",e.$store.state.errorColor="error",e.$store.state.dialogError=!0,console.log(JSON.stringify(t))}))},reset:function(){var e=this;this.source1={},this.source2={},this.activeDataSourcePair={},this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Reseting Data Source Pairs";var t=this.$store.state.auth.userID;u.a.get("/datasource/resetDataSourcePair/"+t).then((function(){Rr.$emit("getDataSourcePair"),e.$store.state.dynamicProgress=!1,e.alertSuccess=!0,e.alertMsg="Data Source Pair Reseted Successfully"})).catch((function(t){e.alertError=!0,e.alertMsg="Something went wrong while reseting data source pairs",console.log(t)}))},checkLevels:function(){var e=this;this.pairLevelsMapping={};var t=JSON.stringify({source1LimitOrgId:this.getLimitOrgIdOnDataSource(this.source1),source2LimitOrgId:this.getLimitOrgIdOnDataSource(this.source2)});u.a.get("/datasource/countLevels?source1Id=".concat(this.source1.id,"&source1DB=").concat(this.source1.name,"&source2Id=").concat(this.source2.id,"&source2DB=").concat(this.source2.name,"&sourcesLimitOrgId=").concat(t)).then((function(t){return 1===t.data.totalSource1Levels?(e.$store.state.errorTitle="No data for you",e.$store.state.errorDescription="Cant create this pair, "+e.source1.name+" has no data for you",void(e.$store.state.dialogError=!0)):1===t.data.totalSource2Levels?(e.$store.state.errorTitle="No data for you",e.$store.state.errorDescription="Cant create this pair, "+e.source2.name+" has no data for you",void(e.$store.state.dialogError=!0)):void(t.data.totalSource1Levels>t.data.totalSource2Levels?(e.$store.state.errorTitle="Levels mismatch",e.$store.state.errorDescription="Make sure source1 has the same or less levels as source2",e.$store.state.dialogError=!0):e.createDatasourcePair(e.source1,e.source2))}))},mappingSelected:function(e){var t=this;this.source2Levels=this.source2Levels.filter((function(a){return a.value!==t.pairLevelsMapping[e]}))},clearMappingSelection:function(e){this.source2Levels.push({text:this.$store.state.levelMapping.source2[this.pairLevelsMapping[e]],value:this.pairLevelsMapping[e]});var t,a=Object.keys(this.pairLevelsMapping),r=a.filter((function(t){return t!==e})),s={},o=Object(n["a"])(r);try{for(o.s();!(t=o.n()).done;){var i=t.value;s[i]=this.pairLevelsMapping[i]}}catch(c){o.e(c)}finally{o.f()}this.pairLevelsMapping=s},closeLevelMappingDialog:function(){for(var e in this.pairLevelsMapping)this.source2Levels.push({text:this.$store.state.levelMapping.source2[this.pairLevelsMapping[e]],value:this.pairLevelsMapping[e]});this.mapSourcePairLevels=!1},share:function(e,t){var a=this;if("showDialog"===t)this.sharedUsers=[],this.sharePair=e,e.hasOwnProperty("sharedUsers")&&e.sharedUsers.length>0&&e.sharedUsers.forEach((function(e){a.sharedUsers.push(e.id)})),this.shareDialog=!0;else if("saveShare"===t){if(0===this.sharedUsers.length)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select atleast one user");var r=new FormData;r.append("sharePair",this.sharePair.id),r.append("users",JSON.stringify(this.sharedUsers)),r.append("userID",this.$store.state.auth.userID),r.append("orgId",this.$store.state.dhis.user.orgId),this.$store.state.loadingServers=!0,this.shareDialog=!1,u.a.post("/datasource/shareSourcePair",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){a.$store.state.loadingServers=!1,a.$store.state.dataSourcePairs=e.data})).catch((function(e){console.log(e),a.$store.state.loadingServers=!1}))}},getUsers:function(){var e=this;u.a.get("/users/getUsers").then((function(t){e.users=t.data}))}},computed:{dataSources2:function(){if(this.$store.state.config.generalConfig.reconciliation.fixSource2){var e,t="",a=Object(n["a"])(this.$store.state.dataSources);try{for(a.s();!(e=a.n()).done;){var r=e.value;r.id===this.$store.state.config.generalConfig.reconciliation.fixSource2To&&(t=r)}}catch(s){a.e(s)}finally{a.f()}return[t]}return this.$store.state.dataSources},canCreatePair:function(){return!this.$store.state.dhis.user.orgId||!this.$store.state.config.generalConfig.reconciliation.singlePair||0===this.$store.state.dataSourcePairs.length},pairSelected:function(){return!(!this.source1.id||!this.source2.id)},canDeletePair:function(){return!!this.activeDataSourcePair.id&&this.activeDataSourcePair.user.id===this.$store.state.auth.userID},canActivatePair:function(){return!(0===this.$store.state.dataSourcePairs.length||!this.activeDataSourcePair.id)}},created:function(){var e=this;for(var t in this.canCreatePair||(this.pairLimitWarn=!0),this.getUsers(),this.source1=this.$store.state.dataSources.find((function(t){return t.id===e.$store.state.activePair.source1.id})),this.source2=this.$store.state.dataSources.find((function(t){return t.id===e.$store.state.activePair.source2.id})),this.activeDataSourcePair=this.getActiveDataSourcePair(),this.source1||(this.source1={}),this.source2||(this.source2={}),this.$store.state.levelMapping.source2)"code"!==t&&this.source2Levels.push({text:this.$store.state.levelMapping.source2[t],value:t});for(var a in this.$store.state.levelMapping.source1)"code"!==a&&this.source1Levels.push({text:this.$store.state.levelMapping.source1[a],value:a})}},na=ia,ca=a("62ad"),la=a("0fd9"),ua=Object(g["a"])(na,sa,oa,!1,null,null,null),da=ua.exports;m()(ua,{VAlert:M["a"],VBtn:U["a"],VCard:F["a"],VCardActions:E["a"],VCardText:E["c"],VCardTitle:E["d"],VCheckbox:Ve["a"],VCol:ca["a"],VContainer:q["a"],VDataTable:Re["a"],VDialog:xe["a"],VFlex:j["a"],VIcon:y["a"],VLayout:B["a"],VList:$["a"],VProgressLinear:ke["a"],VRadio:Me["a"],VRadioGroup:Ue["a"],VRow:la["a"],VSelect:Fe["a"],VSpacer:G["a"],VTextField:W["a"],VToolbar:z["a"],VToolbarTitle:qe["b"],VTooltip:x["a"]});var ha=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[e.$store.state.uploadRunning?[a("br"),a("br"),a("br"),a("v-alert",{attrs:{type:"info",value:!0}},[a("b",[e._v("Wait for upload to finish ...")]),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)]:e._e(),!e.$store.state.denyAccess&!e.$store.state.uploadRunning?[a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" About this page ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" This page let you view dat you have uploaded or synchronized from a remote server "),a("v-list",[e._v("1. Use the tree to filter grid data")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",{attrs:{height:"500px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Edit Location ")]),a("v-spacer"),a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.editDialog=!1}}},[e._v("close")])],1),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-text-field",{attrs:{"error-messages":e.editLocationNameErrors,required:"",label:"Facility"},on:{blur:function(t){return e.$v.editLocationName.$touch()},change:function(t){return e.$v.editLocationName.$touch()}},model:{value:e.editLocationName,callback:function(t){e.editLocationName=t},expression:"editLocationName"}})],1),a("v-flex",[a("v-select",{attrs:{items:e.editParents,filled:"",label:"Parent"},model:{value:e.editLocationParent,callback:function(t){e.editLocationParent=t},expression:"editLocationParent"}})],1)],1)],1)],1),a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-toolbar",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:"","text-sm-left":""}},[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.editDialog=!1}}},[a("v-icon",{attrs:{left:""}},[e._v("cancel")]),e._v(" Cancel ")],1)],1),a("v-flex",{attrs:{xs6:"","text-sm-right":""}},[a("v-btn",{attrs:{color:"primary",disabled:e.$v.$invalid,dark:""},on:{click:function(t){return e.saveEdit()}}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Save ")],1)],1)],1)],1)],1)],1)],1),a("v-row",[a("v-spacer"),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){e.helpDialog=!0}}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}],null,!1,3148663098)},[a("span",[e._v("Help")])])],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[e._v("Source 1 Data Tree")])]),e.loadingSource1Tree?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("p",[a("liquor-tree",{ref:"source1Tree",attrs:{data:e.source1Tree,options:{}},on:{"node:selected":e.source1NodeSelected}})],1)])]],2)],1),a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[e._v("Source 2 Data Tree")])]),e.loadingSource2Tree?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("p",[a("liquor-tree",{ref:"source2Tree",attrs:{data:e.source2Tree,options:{}},on:{"node:selected":e.source2NodeSelected}})],1)])]],2)],1),a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[e._v("Source 1 Data Grid")])]),e.loadingSource1Grid?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source1GridHeader,items:e.source1Grid,search:e.searchSource1,options:e.source1Pagination,"server-items-length":e.totalSource1Records,loading:e.loadingSource1,"hide-default-footer":""},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.source1GridHeader,(function(r,s){return a("td",{key:r.value+1,staticStyle:{"white-space":"nowrap",overflow:"hidden"}},[0===s&&e.isDataset1Owner?[a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.edit(t.item,"source1")}}},[e._v("edit")])]:[e._v(" "+e._s(t.item[r.value])+" ")]],2)}))}}],null,!1,3981747529)})],1),a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:e.source1Pages},model:{value:e.source1Pagination.page,callback:function(t){e.$set(e.source1Pagination,"page",t)},expression:"source1Pagination.page"}})],1)]],2)],1),a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[e._v("Source 2 Data Grid")])]),e.loadingSource2Grid?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source2GridHeader,items:e.source2Grid,search:e.searchSource2,options:e.source2Pagination,"server-items-length":e.totalSource2Records,loading:e.loadingSource2,"hide-default-footer":""},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.source2GridHeader,(function(r,s){return a("td",{key:r.value+2,staticStyle:{"white-space":"nowrap",overflow:"hidden"}},[0===s&&e.isDataset2Owner?[a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.edit(t.item,"source2")}}},[e._v("edit")])]:[e._v(" "+e._s(t.item[r.value])+" ")]],2)}))}}],null,!1,1816420105)})],1),a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:e.source2Pages},model:{value:e.source2Pagination.page,callback:function(t){e.$set(e.source2Pagination,"page",t)},expression:"source2Pagination.page"}})],1)]],2)],1)],1),a("br"),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs1:"",xl10:""}},[a("v-btn",{attrs:{color:"primary",dark:""},on:{click:function(t){return e.$router.push({name:"FacilityReconScores"})}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-find")]),e._v(" Reconcile ")],1)],1)],1)]:e._e()],2)},va=[],pa={validations:{editLocationName:{required:V["required"]}},mixins:[D,w],data:function(){return{deleteSource:{name:"",value:""},editDialog:!1,editLocationName:"",editLocationId:"",editParents:[],editLocationParent:"",editSource:"",helpDialog:!1,lastLevel:[],headerText:{level2:"Level 1",level3:"Level 2",level4:"Level 3",level5:"Level 4",level6:"Level 5",level7:"Level 6",level8:"Level 7",level9:"Level 8",level10:"Level 9",facility:"Facility",latitude:"Latitude",longitude:"Longitude"},headers:[{text:"Level 1",value:"level1"},{text:"Level 2",value:"level2"},{text:"Level 3",value:"level3"},{text:"Level 4",value:"level4"},{text:"Facility",value:"facility"},{text:"Latitude",value:"latitude"},{text:"Longitude",value:"longitude"}],searchSource1:"",searchSource2:"",filterSource1:{text:"",level:""},filterSource2:{text:"",level:""},source2Pagination:{rowsPerPage:20},source1Pagination:{rowsPerPage:20},loadingSource1:!1,loadingSource2:!1,totalSource1Records:0,totalSource2Records:0,source2Grid:[],source1Grid:[],source1Tree:[],source2Tree:[],source1Start:1,source2Start:1,source1Count:10,source2Count:10,loadingSource1Tree:!1,loadingSource2Tree:!1,loadingSource1Grid:!1,loadingSource2Grid:!1,currentSource2Pagination:{},currentSource1Pagination:{},source1SelNodeId:!1,source2SelNodeId:!1,sourceOwner:""}},methods:{edit:function(e,t){var a=this.getDatasourceOwner();"source1"===t?(this.sourceOwner=a.source1Owner,this.editSource=this.source1):"source2"===t&&(this.sourceOwner=a.source1Owner,this.editSource=this.source2),this.editLocationName=e.facility,this.editLocationId=e.id,this.editDialog=!0;var r=Object.keys(this.source2GridHeader).length,s=this.source2GridHeader[r-1].value;this.editLocationParent=e[s+"id"];var o=s.replace("level","");this.getLevelData(o)},saveEdit:function(){var e=this,t=new FormData;t.append("sourceOwner",this.sourceOwner),t.append("source",this.editSource),t.append("locationId",this.editLocationId),t.append("locationName",this.editLocationName),t.append("locationParent",this.editLocationParent),u.a.post("/editLocation",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.editDialog=!1,e.getSource1Grid(!1),e.getSource2Grid(!1),e.getTree()})).catch((function(e){console.log(JSON.stringify(e))}))},getLevelData:function(e){var t=this;u.a.get("/getLevelData/"+this.editSource+"/"+this.sourceOwner+"/"+e).then((function(e){t.editParents=e.data}))},getSource1Grid:function(e){var t=this;if(this.source1){this.loadingSource1=!0,e||(e=""),this.loadingSource1Grid=!0;var a=this.getDatasourceOwner().source1Owner,r=this.getLimitOrgIdOnActivePair().source1LimitOrgId,s=this.$store.state.activePair.userID,o="/hierarchy?source=".concat(this.source1,"&start=").concat(this.source1Start,"&count=").concat(this.source1Count,"&id=").concat(e,"&userID=").concat(s,"&sourceOwner=").concat(a,"&sourceLimitOrgId=").concat(r);u.a.get(o).then((function(e){if(t.loadingSource1Grid=!1,e.data){var a=t.source1Pagination,r=a.sortBy,s=a.descending;t.source1Pagination.sortBy&&(e.data.tree=e.data.grid.sort((function(e,t){var a=e[r],o=t[r];return s?a<o?1:a>o?-1:0:a<o?-1:a>o?1:0}))),t.source1Grid=e.data.grid,t.totalSource1Records=e.data.total,t.source1Pagination.totalItems=e.data.total,t.currentSource1Pagination=Object.assign({},t.source1Pagination),t.currentSource1Pagination.hasOwnProperty("descending")||(t.currentSource1Pagination.descending=!1),t.currentSource1Pagination.hasOwnProperty("page")||(t.currentSource1Pagination.page=1),t.currentSource1Pagination.hasOwnProperty("sortBy")||(t.currentSource1Pagination.sortBy="facility"),t.currentSource1Pagination.hasOwnProperty("totalItems")||(t.currentSource1Pagination.totalItems=e.data.total)}t.loadingSource1=!1}))}},getSource2Grid:function(e){var t=this;if(this.source2){e||(e=""),this.loadingSource2=!0,this.loadingSource2Grid=!0;var a=this.getDatasourceOwner().source2Owner,r=this.getLimitOrgIdOnActivePair().source2LimitOrgId,s=this.$store.state.activePair.userID,o="/hierarchy?source=".concat(this.source2,"&start=").concat(this.source2Start,"&count=").concat(this.source2Count,"&id=").concat(e,"&userID=").concat(s,"&sourceOwner=").concat(a,"&sourceLimitOrgId=").concat(r);u.a.get(o).then((function(e){if(t.loadingSource2Grid=!1,e.data){var a=t.source2Pagination,r=a.sortBy,s=a.descending;t.source2Pagination.sortBy&&(e.data.tree=e.data.grid.sort((function(e,t){var a=e[r],o=t[r];return s?a<o?1:a>o?-1:0:a<o?-1:a>o?1:0}))),t.source2Grid=e.data.grid,t.totalSource2Records=e.data.total,t.source2Pagination.totalItems=e.data.total,t.currentSource2Pagination=Object.assign({},t.source2Pagination),t.currentSource2Pagination.hasOwnProperty("descending")||(t.currentSource2Pagination.descending=!1),t.currentSource2Pagination.hasOwnProperty("page")||(t.currentSource2Pagination.page=1),t.currentSource2Pagination.hasOwnProperty("sortBy")||(t.currentSource2Pagination.sortBy="facility"),t.currentSource2Pagination.hasOwnProperty("totalItems")||(t.currentSource2Pagination.totalItems=e.data.total)}t.loadingSource2=!1}))}},getTree:function(){var e=this;if(this.source1&&this.source2){var t=this.getDatasourceOwner().source2Owner,a=this.getLimitOrgIdOnActivePair().source2LimitOrgId;this.loadingSource2Tree=!0,u.a.get("/getTree/"+this.source2+"/"+t+"/"+a).then((function(t){e.loadingSource2Tree=!1,t.data&&(e.source2Tree=t.data)}));var r=this.getDatasourceOwner().source1Owner,s=this.getLimitOrgIdOnActivePair().source1LimitOrgId;this.loadingSource1Tree=!0,u.a.get("/getTree/"+this.source1+"/"+r+"/"+s).then((function(t){e.loadingSource1Tree=!1,t.data&&(e.source1Tree=t.data)}))}},source1NodeSelected:function(e){this.source1SelNodeId=e.id,this.getSource1Grid(e.id)},source2NodeSelected:function(e){this.source2SelNodeId=e.id,this.getSource2Grid(e.id)}},computed:{isDataset1Owner:function(){var e=this.getDatasourceOwner().source1Owner,t=this.$store.state.auth.userID;return e===t},isDataset2Owner:function(){var e=this.getDatasourceOwner().source2Owner,t=this.$store.state.auth.userID;return e===t},source2GridHeader:function(){var e=[];this.isDataset2Owner&&e.push({text:"",value:"",sortable:!1});var t={};if(this.source2Grid&&this.source2Grid.length>0)for(var a in this.source2Grid)(t.length>0&&this.source2Grid[a].length>Object.keys(t).length||0===Object.keys(t).length)&&(t=this.source2Grid[a]);for(var r in t)this.headerText[r]&&e.push({text:this.headerText[r],value:r});return e},source1GridHeader:function(){var e=[];this.isDataset1Owner&&e.push({text:"",value:"",sortable:!1});var t={};if(this.source1Grid&&this.source1Grid.length>0)for(var a in this.source1Grid)(t.length>0&&this.source1Grid[a].length>Object.keys(t).length||0===Object.keys(t).length)&&(t=this.source1Grid[a]);if(this.source1Grid&&this.source1Grid.length>0)for(var r in this.source1Grid[0])this.headerText[r]&&e.push({text:this.headerText[r],value:r});return e},source2Pages:function(){return null==this.source2Pagination.rowsPerPage||null==this.source2Pagination.totalItems?0:Math.ceil(this.source2Pagination.totalItems/this.source2Count)},source1Pages:function(){return null==this.source1Pagination.rowsPerPage||null==this.source1Pagination.totalItems?0:Math.ceil(this.source1Pagination.totalItems/this.source1Count)},source1:function(){var e=this.$store.state.activePair.source1.name;return e&&(e=this.toTitleCase(e)),e},source2:function(){var e=this.$store.state.activePair.source2.name;return e&&(e=this.toTitleCase(e)),e},editLocationNameErrors:function(){var e=[];return this.$v.editLocationName.$dirty?(!this.$v.editLocationName.required&&e.push("Facility Name is required"),e):e}},watch:{source1Pagination:{handler:function(){if(this.currentSource1Pagination.sortBy!==this.source1Pagination.sortBy||this.currentSource1Pagination.descending!==this.source1Pagination.descending||this.currentSource1Pagination.page!==this.source1Pagination.page){var e=this.source1Pagination.page-1;this.source1Start=e*this.source1Count+1,this.getSource1Grid(this.source1SelNodeId)}},deep:!0},source2Pagination:{handler:function(){if(this.currentSource2Pagination.sortBy!==this.source2Pagination.sortBy||this.currentSource2Pagination.descending!==this.source2Pagination.descending||this.currentSource2Pagination.page!==this.source2Pagination.page){var e=this.source2Pagination.page-1;this.source2Start=e*this.source2Count+1,this.getSource2Grid(this.source2SelNodeId)}},deep:!0}},mounted:function(){this.getSource1Grid(!1),this.getSource2Grid(!1),this.getTree()},components:{"liquor-tree":Qt["a"]}},ga=pa,fa=(a("9003"),a("891e")),ma=Object(g["a"])(ga,ha,va,!1,null,"22019834",null),ya=ma.exports;m()(ma,{VAlert:M["a"],VBtn:U["a"],VCard:F["a"],VCardText:E["c"],VCardTitle:E["d"],VContainer:q["a"],VDataTable:Re["a"],VDialog:xe["a"],VFlex:j["a"],VIcon:y["a"],VLayout:B["a"],VList:$["a"],VPagination:fa["a"],VProgressLinear:ke["a"],VRow:la["a"],VSelect:Fe["a"],VSpacer:G["a"],VTextField:W["a"],VToolbar:z["a"],VToolbarTitle:qe["b"],VTooltip:x["a"]});var $a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[e.$store.state.uploadRunning?[a("br"),a("br"),a("br"),a("v-alert",{attrs:{type:"info",value:!0}},[a("b",[e._v("Wait for upload to finish ...")]),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)]:e._e(),!e.$store.state.denyAccess&!e.$store.state.uploadRunning?a("v-container",{attrs:{fluid:"","grid-list-lg":""}},[a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"350"},model:{value:e.$store.state.scoresProgressData.scoreDialog,callback:function(t){e.$set(e.$store.state.scoresProgressData,"scoreDialog",t)},expression:"$store.state.scoresProgressData.scoreDialog"}},[a("v-card",{attrs:{color:"white",dark:""}},[a("v-card-text",[a("center",[a("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.$store.state.scoresProgressData.scoreProgressTitle))]),a("br"),"percent"==e.$store.state.scoresProgressData.progressType?a("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.$store.state.scoresProgressData.scoreProgressPercent,color:"primary"}},[a("v-avatar",{attrs:{color:"indigo",size:"50px"}},[a("span",{staticClass:"white--text"},[a("b",[e._v(e._s(e.$store.state.scoresProgressData.scoreProgressPercent)+"%")])])])],1):e._e(),"indeterminate"==e.$store.state.scoresProgressData.progressType?a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"red"}}):e._e()],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"500px"},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.alertTitle)+" ")])],1),a("v-card-text",[e._v(" "+e._s(e.alertText)+" ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"success"},on:{click:function(t){e.alert=!1}}},[e._v("OK")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"500px"},model:{value:e.flagCommentDialog,callback:function(t){e.flagCommentDialog=t},expression:"flagCommentDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Add comment for this flag if any ")])],1),a("v-card-text",[a("v-textarea",{attrs:{"auto-grow":"",filled:"",color:"deep-purple",label:"Flag Comment",rows:"1"},model:{value:e.flagComment,callback:function(t){e.flagComment=t},expression:"flagComment"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"success"},on:{click:e.saveMatch}},[e._v("Continue")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition",width:e.dialogWidth,height:"auto"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{attrs:{width:e.dialogWidth,height:"auto"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Matching "+e._s(e.selectedSource1Name)+" "+e._s(e.dialogWidth)+" ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",color:"yellow"},model:{value:e.searchPotential,callback:function(t){e.searchPotential=t},expression:"searchPotential"}}),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.back(t)}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-title",[e._v(" Parents: "),a("b",[e._v(e._s(e._f("joinParentsAndReverse")(e.selectedSource1Parents)))]),a("v-spacer"),e.$store.state.recoLevel==e.$store.state.totalSource1Levels?[e._v(" Latitude: "),a("b",[e._v(e._s(e.selectedSource1Lat))]),a("v-spacer"),e._v(" Longitude: "),a("b",[e._v(e._s(e.selectedSource1Long))]),a("v-spacer")]:e._e()],2),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.potentialHeaders,items:e.allPotentialMatches,search:e.searchPotential},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[a("v-row",[a("v-col",{attrs:{md:"4"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{color:"error",small:""},nativeOn:{click:function(t){return e.match("flag",r.id,r.name,r.source2IdHierarchy,r.mappedParentName)}}},s),[a("v-icon",{attrs:{dark:"",left:""}},[e._v("mdi-bell")]),e._v("Flag ")],1)]}}],null,!0)},[a("span",[e._v("Mark the selected item as a match to be reviewed")])])],1),a("v-col",{attrs:{md:"4"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{color:"primary",small:"",dark:""},nativeOn:{click:function(t){return e.match("match",r.id,r.name,r.source2IdHierarchy)}}},s),[a("v-icon",{attrs:{left:""}},[e._v("mdi-thumb-up")]),e._v("Save Match ")],1)]}}],null,!0)},[a("span",[e._v("Save the selected item as a match")])])],1)],1)],1),a("td",[e._v(e._s(r.name))]),a("td",[e._v(e._s(r.id))]),a("td",[e._v(e._s(e._f("joinParentsAndReverse")(r.parents)))]),e.$store.state.recoLevel==e.$store.state.totalSource1Levels?a("td",[e._v(e._s(r.geoDistance))]):e._e(),a("td",[e._v(e._s(r.score))]),a("td",[e._v(e._s(e.potentialMatchComment(r)))])])]}}],null,!1,357144023)},[a("template",{slot:"headers"},[a("tr",[e._l(e.potentialHeaders,(function(t){return["Score"==t.text?a("th",{key:t.text,staticClass:"column sortable active",attrs:{align:"left"},on:{click:function(a){return e.changeSort(t.value)}}},["up"==e.sort_arrow?a("v-icon",{attrs:{small:""}},[e._v("mdi-arrow-up")]):a("v-icon",{attrs:{small:""}},[e._v("mdi-arrow-down")]),e._v(" "+e._s(t.text)+" "),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{icon:""}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}],null,!0)},[a("span",[e._v("The lower the score, the better the match")])])],1):a("th",{key:t.text,attrs:{align:"left"}},[e._v(" "+e._s(t.text)+" ")])]}))],2)])],2)],1),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-row",[a("v-col",{attrs:{justify:"1"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{color:"green",dark:""},nativeOn:{click:function(t){return e.noMatch("nomatch")}}},r),[a("v-icon",{attrs:{left:""}},[e._v("mdi-thumb-down")]),e._v("No Match ")],1)]}}],null,!1,3434304218)},[a("span",[e._v("Save this Source 1 location as having no match")])])],1),a("v-col",{attrs:{justify:"1"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{color:"error",dark:""},nativeOn:{click:function(t){return e.noMatch("ignore")}}},r),[a("v-icon",{attrs:{left:""}},[e._v("mdi-thumb-down")]),e._v("Ignore ")],1)]}}],null,!1,577440601)},[a("span",[e._v("Mark this source 1 location as being ignored")])])],1),a("v-col",{attrs:{justify:"5"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.potentialAvailable?a("v-btn",e._g({staticStyle:{color:"white"},attrs:{color:"teal darken-6"},on:{click:function(t){e.showAllPotential=!e.showAllPotential}}},r),[e.showAllPotential?[e._v("Show Scored Suggestions")]:[a("v-icon",{attrs:{left:""}},[e._v("mdi-eye")]),e._v(" Show All Suggestions ")]],2):e._e()]}}],null,!1,2440108326)},[e.showAllPotential?a("span",[e._v("Limit to only scored suggestions")]):a("span",[e._v("See all possible choices ignoring the score")])])],1),a("v-col",{attrs:{justify:"7"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticStyle:{color:"white"},attrs:{color:"orange darken-2"},nativeOn:{click:function(t){return e.back(t)}}},r),[a("v-icon",{attrs:{dark:"",left:""}},[e._v("mdi-arrow-left")]),e._v("Back ")],1)]}}],null,!1,2568067178)},[a("span",[e._v("Return without saving")])])],1)],1)],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("appRecoExport")],1),a("v-spacer"),a("v-flex",{attrs:{xs2:""}},[a("b",[e._v("Reconciling "+e._s(e.currentLevelText))])]),a("v-spacer"),a("v-flex",{attrs:{xs1:"",sm2:"",md2:"",right:""}},[a("v-select",{attrs:{items:e.$store.state.levelArray,"item-value":e.$store.state.levelArray.value,"item-name":e.$store.state.levelArray.text,label:"Level","single-line":""},on:{change:e.levelChanged},model:{value:e.$store.state.recoLevel,callback:function(t){e.$set(e.$store.state,"recoLevel",t)},expression:"$store.state.recoLevel"}})],1),a("v-flex",{attrs:{xs2:""}},[e.$store.state.scoreSavingProgressData.savingMatches?[e._v(" Saving matches for "+e._s(e.translateDataHeader("source1",e.$store.state.recoLevel-1))+" "),e.saveProgressTimedout?a("v-progress-linear",{attrs:{indeterminate:"",color:"red"}}):a("v-progress-linear",{attrs:{color:"error",width:"20",height:"20",value:e.$store.state.scoreSavingProgressData.percent}},[a("center",[a("span",{staticClass:"green--text"},[a("b",[e._v(e._s(e.$store.state.scoreSavingProgressData.percent)+"%")])])])],1)]:[[a("v-btn",{attrs:{color:"primary",dark:"",rounded:""},on:{click:function(t){return e.getScores(!1)}}},[a("v-icon",[e._v("mdi-repeat-once")]),e._v(" Recalculate Scores ")],1)]]],2),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){e.helpDialog=!0}}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}],null,!1,3148663098)},[a("span",[e._v("Help")])])],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" About this page ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" This page let you map source 1 data with those in source2 "),a("v-list",[e._v(" 1. Source 1 refer to the data source name selected as source 1 under data source pair section ")]),a("v-list",[e._v(" 2. Source 2 refer to the data source name selected as source 2 under data source pair section ")]),a("v-list",[e._v(" 3. After breaking a match, you will need to recalculate scores for the app to load potential matches of the broken location ")]),a("v-list",[e._v(" 4. FLAGGED Locations are the locations that will need to be reviewed before they are saved as matches ")]),a("v-list",[e._v(" 5. NO MATCHES - these are locations that do not matches anything from source 2 ")])],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs2:"",right:""}},[a("div",{staticStyle:{"border-style":"solid","border-color":"green","text-align":"center"}},[a("b",[e._v("Source 1 Reconciliation Status")]),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("b",[e._v("Matched")])]),a("v-flex",{attrs:{"align-center":""}},[a("center",[a("b",[e._v(e._s(e.source1TotalMatched)+"/"+e._s(e.source1TotalRecords))])])],1),a("v-flex",[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentMatched,color:"green"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentMatched)+"%")])])],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v("Unmatched")])]),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.source1TotalUnMatched)+"/"+e._s(e.source1TotalRecords))])])],1),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentUnMatched,color:"red"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentUnMatched)+"%")])])],1)],1)],1)],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v("Flagged")])]),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.totalFlagged)+"/"+e._s(e.source1TotalRecords))])])],1),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentFlagged,color:"orange"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentFlagged)+"%")])])],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v("No Match")])]),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.source1TotalNoMatch)+"/"+e._s(e.source1TotalRecords))])])],1),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentNoMatch,color:"red"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentNoMatch)+"%")])])],1)],1)],1)],1)],1)],1)],1)]),a("v-flex",{attrs:{xs4:"","child-flex":""}},[a("v-card",{attrs:{color:"green lighten-2"}},[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Source 1 Unmatched "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUnmatchedSource1,callback:function(t){e.searchUnmatchedSource1=t},expression:"searchUnmatchedSource1"}})],1),e.loadingSource1Unmatched?[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]:[a("liquor-tree",{key:e.source1TreeUpdate,ref:"source1Tree",attrs:{data:e.source1Tree}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source1GridHeaders,items:e.source1Grid,search:e.searchUnmatchedSource1,light:""},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",["Done"===e.$store.state.recoStatus?a("td",{key:r.id},[e._v(e._s(r.name))]):a("td",{key:r.id,staticStyle:{cursor:"pointer"},on:{click:function(t){return e.getPotentialMatch(r.id)}}},[e._v(e._s(r.name))]),e._l(r.parents,(function(t,s){return a("td",{key:r.id+s},[s!=r.parents.length-1?[e._v(" "+e._s(t)+" ")]:e._e()],2)}))],2)]}}],null,!1,4039369149)})]],2)],1),a("v-flex",{attrs:{xs4:""}},[a("v-card",{attrs:{color:"blue lighten-2",dark:""}},[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Source 2 Unmatched "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUnmatchedSource2,callback:function(t){e.searchUnmatchedSource2=t},expression:"searchUnmatchedSource2"}})],1),e.loadingSource2Unmatched?[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]:[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source1UnmatchedHeaders,items:e.$store.state.source2UnMatched,search:e.searchUnmatchedSource2,light:""},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.name)+" "),a("br"),e._v(" "+e._s(e._f("joinParentsAndReverse")(r.parents)))])])]}}],null,!1,2780787155)})]],2)],1),a("v-flex",{attrs:{xs2:"",right:""}},[a("div",{staticStyle:{"border-style":"solid","border-color":"green","text-align":"center"}},[a("b",[e._v("Source 2 Reconciliation Status")]),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v("Matched")])]),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.source2TotalMatched)+"/"+e._s(e.source2TotalRecords))])])],1),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentMatched,color:"green"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source2PercentMatched)+"%")])])],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Unmatched")])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.source2TotalUnmatched)+"/"+e._s(e.source2TotalRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentUnmatched,color:"red"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source2PercentUnmatched)+"%")])])],1)],1)],1)],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v("Flagged")])]),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.totalFlagged)+"/"+e._s(e.source2TotalRecords))])])],1),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentFlagged,color:"orange"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source2PercentFlagged)+"%")])])],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v("Not in Source 1")])]),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.source2NotInSource1))])])],1),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentNotInSource1,color:"red"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source2PercentNotInSource1)+"%")])])],1)],1)],1)],1)],1)],1)],1)])],1),a("v-layout",{attrs:{column:"",wrap:""}},[a("v-tabs",{attrs:{"icons-and-text":"",centered:"",grow:"",dark:"","background-color":"cyan"}},[a("v-tabs-slider",{attrs:{color:"red"}}),a("v-tab",{key:"match"},[e._v(" MATCHED ("+e._s(e.source1TotalMatched)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-up")])],1),a("v-tab",{key:"nomatch"},[e._v(" NO MATCH ("+e._s(e.source1TotalNoMatch)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-down")])],1),a("v-tab",{key:"ignore"},[e._v(" IGNORED ("+e._s(e.source1TotalIgnore)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-down")])],1),a("v-tab",{key:"flagged"},[e._v(" FLAGGED ("+e._s(e.totalFlagged)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-bell")])],1),a("v-tab-item",{key:"match"},[null!=e.$store.state.matchedContent?[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchMatched,callback:function(t){e.searchMatched=t},expression:"searchMatched"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.matchedHeaders,items:e.$store.state.matchedContent,search:e.searchMatched},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.source1Name))]),a("td",[e._v(e._s(r.source1Id))]),a("td",[e._v(e._s(r.source2Name))]),a("td",[a("v-treeview",{attrs:{items:r.source2IdHierarchy}})],1),r.matchComments?a("td",[e._v(e._s(r.matchComments.join(", ")))]):a("td"),a("td",["Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(t){return e.breakMatch(r.source1Id)}}},[a("v-icon",[e._v("mdi-undo")]),e._v("Break Match ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(t){return e.breakMatch(r.source1Id)}}},[a("v-icon",[e._v("mdi-undo")]),e._v("Break Match ")],1)],1)])]}}],null,!1,1712484571)})]:[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2),a("v-tab-item",{key:"nomatch"},[null!=e.$store.state.noMatchContent?[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchNotMatched,callback:function(t){e.searchNotMatched=t},expression:"searchNotMatched"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.noMatchHeaders,items:e.$store.state.noMatchContent,search:e.searchNotMatched},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.source1Name))]),a("td",[e._v(e._s(r.source1Id))]),a("td",[e._v(e._s(r.parents.join("->")))]),a("td",["Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(t){return e.breakNoMatch(r.source1Id,"nomatch")}}},[a("v-icon",[e._v("mdi-cached")]),e._v("Break No Match ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(t){return e.breakNoMatch(r.source1Id,"nomatch")}}},[a("v-icon",[e._v("mdi-cached")]),e._v("Break No Match ")],1)],1)])]}}],null,!1,1597245691)})]:[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2),a("v-tab-item",{key:"ignore"},[null!=e.$store.state.ignoreContent?[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchIgnore,callback:function(t){e.searchIgnore=t},expression:"searchIgnore"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.noMatchHeaders,items:e.$store.state.ignoreContent,search:e.searchIgnore},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("td",[e._v(e._s(r.source1Name))]),a("td",[e._v(e._s(r.source1Id))]),a("td",[e._v(e._s(r.parents.join("->")))]),a("td",["Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(t){return e.breakNoMatch(r.source1Id,"ignore")}}},[a("v-icon",[e._v("mdi-cached")]),e._v("Break Ignore ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(t){return e.breakNoMatch(r.source1Id,"ignore")}}},[a("v-icon",[e._v("mdi-cached")]),e._v("Break Ignore ")],1)],1)]}}],null,!1,1076527946)})]:[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2),a("v-tab-item",{key:"flagged"},[null!=e.$store.state.flagged?[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchFlagged,callback:function(t){e.searchFlagged=t},expression:"searchFlagged"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.flaggedHeaders,items:e.$store.state.flagged,search:e.searchFlagged},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.source1Name))]),a("td",[e._v(e._s(r.source1Id))]),a("td",[e._v(e._s(r.source2Name))]),a("td",[a("v-treeview",{attrs:{items:r.source2IdHierarchy}})],1),a("td",[e._v(e._s(r.flagComment))]),a("td",["Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"primary",small:""},on:{click:function(t){return e.acceptFlag(r.source1Id)}}},[a("v-icon",[e._v("mdi-thumb-up")]),e._v("Confirm Match ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"primary",small:""},on:{click:function(t){return e.acceptFlag(r.source1Id)}}},[a("v-icon",[e._v("mdi-thumb-up")]),e._v("Confirm Match ")],1),"Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(t){return e.unFlag(r.source1Id)}}},[a("v-icon",[e._v("mdi-cached")]),e._v("Release ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(t){return e.unFlag(r.source1Id)}}},[a("v-icon",[e._v("mdi-cached")]),e._v("Release ")],1)],1)])]}}],null,!1,2054694266)})]:[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2)],1)],1),a("v-layout",["yes"!=e.goNextLevel||e.$store.state.scoreSavingProgressData.savingMatches?e._e():a("v-flex",{attrs:{xs1:"",sm4:"",md2:""}},[a("v-btn",{attrs:{color:"primary",rounded:""},on:{click:function(t){return e.levelChanged(e.$store.state.recoLevel+1)}}},[a("v-icon",[e._v("mdi-forward")]),e._v("Proceed to "+e._s(e.nextLevelText)+" ")],1)],1),"yes"==e.lastLevelDone?a("v-flex",{attrs:{xs1:"",sm4:"",md2:""}},[a("v-btn",{attrs:{color:"primary",rounded:""},on:{click:function(t){return e.$router.push({name:"FacilityRecoStatus"})}}},[a("v-icon",[e._v("mdi-view-dashboard")]),e._v("Reconciliation Status ")],1)],1):e._e()],1)],1):e._e()],2)},Sa=[],ba=(a("a434"),a("b680"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}},[a("v-dialog",{attrs:{persistent:"",width:"620px"},model:{value:e.downloadDialog,callback:function(t){e.downloadDialog=t},expression:"downloadDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Select file type to download ")]),a("v-spacer"),a("v-icon",{on:{click:e.closeDownloadDialog}},[e._v("mdi-close")])],1),a("v-card-text"),a("v-card-actions",[a("v-btn",{attrs:{rounded:"",color:"info"},on:{click:e.downloadMatched}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-multiple-outline")]),e._v(" Matched ")],1),a("v-spacer"),a("v-btn",{attrs:{rounded:"",color:"info"},on:{click:e.downloadSource1Unmatched}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-multiple-outline")]),e._v(" Source1 Unmatched ")],1),a("v-spacer"),a("v-btn",{attrs:{rounded:"",color:"info"},on:{click:e.downloadSource2Unmatched}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-multiple-outline")]),e._v(" Source2 Unmatched ")],1)],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-btn",{attrs:{color:"success",rounded:"",small:""},on:{click:e.csvExport}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-multiple-outline")]),e.loadingCSV?a("v-progress-circular",{attrs:{indeterminate:"",color:"red"}}):e._e(),e._v(" CSV Export ")],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-btn",{attrs:{color:"success",rounded:"",small:""},on:{click:e.fhirExport}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-multiple-outline")]),e.loadingFHIR?a("v-progress-circular",{attrs:{indeterminate:"",color:"red"}}):e._e(),e._v(" FHIR Export ")],1)],1)],1)],1)}),xa=[],_a={mixins:[D,w],data:function(){return{loadingCSV:!1,loadingFHIR:!1,downloadDialog:!1,matchedDownloadData:"",unmatchedSource1DownloadData:"",unmatchedSource2DownloadData:"",downloadType:""}},methods:{closeDownloadDialog:function(){this.downloadDialog=!1,this.matchedDownloadData="",this.unmatchedSource1DownloadData="",this.unmatchedSource2DownloadData=""},matchedLocations:function(e){var t=this.$store.state.activePair.userID,a=this.getSource1(),r=this.getSource2(),s=this.getDatasourceOwner(),o=s.source1Owner,i=s.source2Owner,n=JSON.stringify(this.$store.state.levelMapping.source1),c=JSON.stringify(this.$store.state.levelMapping.source2),l=this.getLimitOrgIdOnActivePair().source1LimitOrgId,d=this.getLimitOrgIdOnActivePair().source2LimitOrgId,h={source1:a,source2:r,source1Owner:o,source2Owner:i,type:e,userID:t,source1LimitOrgId:l,source2LimitOrgId:d,levelMapping1:n,levelMapping2:c};return u.a.get("/match/matchedLocations",{params:h})},unMatchedLocations:function(e){var t=this.$store.state.activePair.userID,a=this.getDatasourceOwner(),r=a.source1Owner,s=a.source2Owner,o=this.$store.state.levelMapping.source1,i=this.$store.state.levelMapping.source2,n=this.getLimitOrgIdOnActivePair().source1LimitOrgId,c=this.getLimitOrgIdOnActivePair().source2LimitOrgId,l=this.getSource1(),d=this.getSource2(),h={source1:l,source2:d,source1Owner:r,source2Owner:s,type:e,userID:t,source1LimitOrgId:n,source2LimitOrgId:c,levelMapping1:o,levelMapping2:i};return u.a.get("/match/unmatchedLocations",{params:h})},csvExport:function(){this.loadingCSV=!0;var e=this;u.a.all([this.matchedLocations("CSV"),this.unMatchedLocations("CSV")]).then(u.a.spread((function(t,a){e.loadingCSV=!1,e.downloadDialog=!0,e.downloadType="csv",e.matchedDownloadData=t.data,e.unmatchedSource1DownloadData=a.data.unmatchedSource1CSV,e.unmatchedSource2DownloadData=a.data.unmatchedSource2CSV})))},fhirExport:function(){this.loadingFHIR=!0;var e=this;u.a.all([this.matchedLocations("FHIR"),this.unMatchedLocations("FHIR")]).then(u.a.spread((function(t,a){e.loadingFHIR=!1,e.downloadDialog=!0,e.downloadType="fhir",e.matchedDownloadData=t.data,e.unmatchedSource1DownloadData=a.data.unmatchedSource1mCSD,e.unmatchedSource2DownloadData=a.data.unmatchedSource2mCSD})))},downloadMatched:function(){var e,t;"fhir"===this.downloadType?(e="json",t="data:text/json;charset=utf-8,",this.matchedDownloadData=JSON.stringify(this.matchedDownloadData)):(e="csv",t="data:text/csv;charset=utf-8,");var a=t+escape(this.matchedDownloadData),r=document.createElement("a");r.setAttribute("href",a),r.setAttribute("download","matched".concat(this.getSource1()).concat(this.getSource2(),".").concat(e)),r.click()},downloadSource1Unmatched:function(){var e,t;"fhir"===this.downloadType?(e="json",t="data:text/json;charset=utf-8,",this.unmatchedSource1DownloadData=JSON.stringify(this.unmatchedSource1DownloadData)):(e="csv",t="data:text/csv;charset=utf-8,");var a=t+escape(this.unmatchedSource1DownloadData),r=document.createElement("a");r.setAttribute("href",a),r.setAttribute("download","unmatched".concat(this.getSource1(),".").concat(e)),r.click()},downloadSource2Unmatched:function(){var e,t;"fhir"===this.downloadType?(e="json",t="data:text/json;charset=utf-8,",this.unmatchedSource2DownloadData=JSON.stringify(this.unmatchedSource2DownloadData)):(e="csv",t="data:text/csv;charset=utf-8,");var a=t+escape(this.unmatchedSource2DownloadData),r=document.createElement("a");r.setAttribute("href",a),r.setAttribute("download","unmatched".concat(this.getSource2(),".").concat(e)),r.click()}}},ka=_a,wa=Object(g["a"])(ka,ba,xa,!1,null,null,null),Pa=wa.exports;m()(wa,{VBtn:U["a"],VCard:F["a"],VCardActions:E["a"],VCardText:E["c"],VContainer:q["a"],VDialog:xe["a"],VFlex:j["a"],VIcon:y["a"],VLayout:B["a"],VProgressCircular:_e["a"],VSpacer:G["a"],VToolbar:z["a"],VToolbarTitle:qe["b"]});var Da={mixins:[D,w],data:function(){return{clientId:"",flagCommentDialog:!1,flagComment:"",helpDialog:!1,type:"",source2Id:"",source2Name:"",sort_arrow:"up",pagination:{sortBy:"score"},recoLevel:0,searchUnmatchedSource2:"",searchUnmatchedSource1:"",searchPotential:"",searchMatched:"",searchNotMatched:"",searchIgnore:"",searchFlagged:"",potentialMatches:[],showAllPotential:!1,alertText:"",alertTitle:"",alert:!1,saveProgressTimedout:!1,source1Parents:{},source1Filter:{text:"",level:""},source1TreeUpdate:0,selectedSource1:{},selectedSource1Name:null,selectedSource1Id:null,selectedSource1Lat:null,selectedSource1Long:null,selectedSource1Parents:[],dialog:!1,dialogWidth:"",source1UnmatchedHeaders:[{text:"Location",value:"name"}],noMatchHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"},{text:"Parents",value:"parents"}],flaggedHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"},{text:"Source 2 Location",value:"source2Name"},{text:"Source 2 ID",value:"source2Id"},{text:"Comment",value:"flagComment"}]}},filters:{removeCountry:function(e){var t=e.slice(0);return t.splice(t.length-1,1),t},joinParents:function(e){return e.join("->")},joinParentsAndReverse:function(e){return Object(pe["a"])(e).reverse().join("->")}},methods:{changeSort:function(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1),this.pagination.descending?this.sort_arrow="mdi-down":this.sort_arrow="mdi-up"},addListener:function(){var e=this,t=function t(){e.$refs&&e.$refs.source1Tree?e.$refs.source1Tree.$on("node:selected",(function(t){e.source1Filter.text=t.data.text;var a=1;while(t.parent)t=t.parent,a++;e.source1Filter.level=a})):setTimeout((function(){t()}),500)};t()},levelChanged:function(e){this.$store.state.recoLevel!==e&&(this.$store.state.recoLevel=e,this.getScores(!1),this.$store.state.recoLevel===this.$store.state.totalSource1Levels?this.dialogWidth="1460px":this.dialogWidth="1190px")},getBuildingPotentialMatches:function(e){var t=this;this.potentialMatches=[];var a=this.getSource1(),r=this.getSource2(),s=this.$store.state.recoLevel,o=this.$store.state.totalSource1Levels,i=this.$store.state.totalSource2Levels;if(this.clientId){var n=this.clientId[this.clientId.length-1];n=parseInt(n),n+=1,this.clientId+=n}else{var c=this.$store.state.clientId[this.$store.state.clientId.length-1];c=parseInt(c),c+=1,this.clientId=this.$store.state.clientId+c}var l=this.getDatasourceOwner(),d=this.$store.state.activePair.userID,h=l.source1Owner,v=l.source2Owner,p=this.getLimitOrgIdOnActivePair().source1LimitOrgId,g=this.getLimitOrgIdOnActivePair().source2LimitOrgId,f=JSON.stringify(this.$store.state.config.generalConfig.reconciliation.parentConstraint),m="id=".concat(e,"&source1=").concat(a,"&source2=").concat(r,"&source1Owner=").concat(h,"&source2Owner=").concat(v,"&source1LimitOrgId=").concat(p,"&source2LimitOrgId=").concat(g,"&totalSource1Levels=").concat(o,"&totalSource2Levels=").concat(i);m+="&recoLevel=".concat(s,"&clientId=").concat(this.clientId,"&userID=").concat(d,"&parentConstraint=")+f+"&getPotential="+!0,this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Getting potential matches from server",u.a.get("/match/reconcile/?"+m).then((function(e){if(t.$store.state.dynamicProgress=!1,e.data){var a=JSON.parse(e.data).responseData.scoreResults;if(a.length>0){var r=a[0],s=r.exactMatch;if(Object.keys(s).length>0)return t.$store.state.dialogError=!0,t.$store.state.errorDescription="This location is already mapped, please recalculate scores to get changes",t.$store.state.errorTitle="Info",void(t.$store.state.errorColor="error");for(var o in t.selectedSource1=r.source1,t.selectedSource1Name=r.source1.name,t.selectedSource1Parents=r.source1.parents,t.selectedSource1Lat=r.source1.lat,t.selectedSource1Long=r.source1.long,t.selectedSource1Id=r.source1.id,r.potentialMatches){var i=function(e){var a=r.potentialMatches[o][e];return c=t.$store.state.matchedContent.find((function(e){return e.source2Id===a.id})),l=t.$store.state.flagged.find((function(e){return e.source2Id===a.id})),c||l?"continue":void t.potentialMatches.push({score:o,name:a.name,id:a.id,source2IdHierarchy:a.source2IdHierarchy,lat:a.lat,long:a.long,geoDistance:a.geoDistance,parents:a.parents,mappedParentName:a.mappedParentName})};for(var n in r.potentialMatches[o]){var c,l;i(n)}}}t.dialog=!0}else t.dialog=!0})).catch((function(e){console.log(e)}))},getJurisdictionPotentialMatches:function(e){var t=this;this.potentialMatches=[],this.showAllPotential=!1;var a,r=Object(n["a"])(this.$store.state.scoreResults);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(s.source1.id===e)for(var o in this.selectedSource1=s.source1,this.selectedSource1Name=s.source1.name,this.selectedSource1Parents=s.source1.parents,this.selectedSource1Lat=s.source1.lat,this.selectedSource1Long=s.source1.long,this.selectedSource1Id=s.source1.id,s.potentialMatches){var i=function(e){var a=s.potentialMatches[o][e];return l=t.$store.state.matchedContent.find((function(e){return e.source2Id===a.id})),u=t.$store.state.flagged.find((function(e){return e.source2Id===a.id})),l||u?"continue":void t.potentialMatches.push({score:o,name:a.name,id:a.id,source2IdHierarchy:a.source2IdHierarchy,lat:a.lat,long:a.long,geoDistance:a.geoDistance,parents:a.parents,mappedParentName:a.mappedParentName})};for(var c in s.potentialMatches[o]){var l,u;i(c)}}}}catch(d){r.e(d)}finally{r.f()}this.dialog=!0},getPotentialMatch:function(e){this.getBuildingPotentialMatches(e)},potentialMatchComment:function(e){var t="";if(this.$store.state.recoLevel===this.$store.state.totalSource1Levels){var a=[],r=[];if(this.selectedSource1.source1IdHierarchy){a.push(this.selectedSource1.source1IdHierarchy[0].id);var s,o=Object(n["a"])(this.selectedSource1.source1IdHierarchy[0].children);try{for(o.s();!(s=o.n()).done;){var i=s.value;a.push(i.id)}}catch(p){o.e(p)}finally{o.f()}}if(e.source2IdHierarchy){r.push(e.source2IdHierarchy[0].id);var c,l=Object(n["a"])(e.source2IdHierarchy[0].children);try{for(l.s();!(c=l.n()).done;){var u=c.value;r.push(u.id)}}catch(p){l.e(p)}finally{l.f()}}var d=a.some((function(e){return r.indexOf(e)>=0}));d||(t&&(t+=", "),t+="ID differ")}e.name.toLowerCase()!==this.selectedSource1.name.toLowerCase()&&(t&&(t+=", "),t+="Names differ");var h=e.mappedParentName,v=this.selectedSource1.parents[0];return v!==h&&(t&&(t+=", "),t+="Parents differ"),t},match:function(e,t,a,r,s){if(this.matchType=e,this.source2Id=t,this.source2Name=a,this.source2IdHierarchy=r,this.mappedParentName=s,null===t)return this.alert=!0,this.alertTitle="Information",void(this.alertText="Select Source 2 Location to match against Source 1 Location");"flag"===e?this.flagCommentDialog=!0:this.saveMatch()},saveMatch:function(){var e=this;this.flagCommentDialog=!1,this.$store.state.progressTitle="Saving match",this.$store.state.dynamicProgress=!0;var t=this.getDatasourceOwner(),a=new FormData;a.append("source1Id",this.selectedSource1Id),a.append("source2Id",this.source2Id),a.append("source1Owner",t.source1Owner),a.append("source2Owner",t.source2Owner),a.append("flagComment",this.flagComment),a.append("source1DB",this.getSource1()),a.append("source2DB",this.getSource2()),a.append("recoLevel",this.$store.state.recoLevel),a.append("totalLevels",this.$store.state.totalSource1Levels),a.append("userID",this.$store.state.activePair.userID),a.append("pairId",this.$store.state.activePair.id),u.a.post("/match/performMatch/"+this.matchType,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.$store.state.dynamicProgress=!1;var a=null;for(var r in e.$store.state.source2UnMatched)e.$store.state.source2UnMatched[r].id===e.source2Id&&(a=e.$store.state.source2UnMatched[r].parents,e.$store.state.source2UnMatched.splice(r,1));for(var s in e.$store.state.source1UnMatched)e.$store.state.source1UnMatched[s].id===e.selectedSource1Id&&("match"===e.matchType?(++e.$store.state.totalAllMapped,e.$store.state.matchedContent.push({source1Name:e.selectedSource1Name,source1Id:e.selectedSource1Id,source1Parents:e.$store.state.source1UnMatched[s].parents,source2Name:e.source2Name,source2Id:e.source2Id,source2IdHierarchy:e.source2IdHierarchy,mappedParentName:e.mappedParentName,source2Parents:a,matchComments:t.data.matchComments})):"flag"===e.matchType&&(++e.$store.state.totalAllFlagged,e.$store.state.flagged.push({source1Name:e.selectedSource1Name,source1Id:e.selectedSource1Id,source1Parents:e.$store.state.source1UnMatched[s].parents,source2Name:e.source2Name,source2Id:e.source2Id,source2IdHierarchy:e.source2IdHierarchy,mappedParentName:e.mappedParentName,source2Parents:a,flagComment:e.flagComment})),e.$store.state.source1UnMatched.splice(s,1));e.flagComment="",e.selectedSource1Id=null,e.selectedSource1Name=null,e.dialog=!1})).catch((function(t){e.flagComment="",e.$store.state.dynamicProgress=!1,e.alert=!0,e.alertTitle="Error",e.alertText=t.response.data.error,e.selectedSource1Id=null,e.selectedSource1Name=null,e.dialog=!1}))},acceptFlag:function(e){var t=this;this.$store.state.progressTitle="Accepting flag",this.$store.state.dynamicProgress=!0;var a=new FormData;a.append("source1Id",e),a.append("pairId",this.$store.state.activePair.id);var r=this.$store.state.activePair.userID;u.a.post("/match/acceptFlag/"+this.getSource1()+"/"+this.getSource2()+"/"+r,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var a in t.$store.state.dynamicProgress=!1,t.$store.state.flagged)t.$store.state.flagged[a].source1Id===e&&(t.$store.state.matchedContent.push({source1Name:t.$store.state.flagged[a].source1Name,source1Id:t.$store.state.flagged[a].source1Id,source1Parents:t.$store.state.flagged[a].source1Parents,source2Name:t.$store.state.flagged[a].source2Name,source2Id:t.$store.state.flagged[a].source2Id,source2IdHierarchy:t.$store.state.flagged[a].source2IdHierarchy,mappedParentName:t.$store.state.flagged[a].mappedParentName,source2Parents:t.$store.state.flagged[a].source2Parents}),t.$store.state.flagged.splice(a,1),++t.$store.state.totalAllMapped,--t.$store.state.totalAllFlagged)})).catch((function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.selectedSource1Id=null,t.selectedSource1Name=null,t.dialog=!1,console.log(e)}))},breakMatch:function(e){var t=this;this.$store.state.progressTitle="Breaking match",this.$store.state.dynamicProgress=!0;var a=new FormData,r=this.$store.state.activePair.userID,s=this.getDatasourceOwner();a.append("source1Id",e),a.append("pairId",this.$store.state.activePair.id),u.a.post("/match/breakMatch/"+this.getSource1()+"/"+this.getSource2()+"/"+s.source1Owner+"/"+s.source2Owner+"/"+r,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var a in t.$store.state.dynamicProgress=!1,t.$store.state.matchedContent)t.$store.state.matchedContent[a].source1Id===e&&(t.$store.state.source1UnMatched.push({name:t.$store.state.matchedContent[a].source1Name,id:t.$store.state.matchedContent[a].source1Id,parents:t.$store.state.matchedContent[a].source1Parents}),t.$store.state.source2UnMatched.push({name:t.$store.state.matchedContent[a].source2Name,id:t.$store.state.matchedContent[a].source2Id,source2IdHierarchy:t.$store.state.matchedContent[a].source2IdHierarchy,mappedParentName:t.$store.state.matchedContent[a].mappedParentName,parents:t.$store.state.matchedContent[a].source2Parents}),t.$store.state.matchedContent.splice(a,1),--t.$store.state.totalAllMapped)})).catch((function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.selectedSource1Id=null,t.selectedSource1Name=null,t.dialog=!1,console.log(e)}))},unFlag:function(e){var t=this;this.$store.state.progressTitle="Unflagging match",this.$store.state.dynamicProgress=!0;var a=new FormData,r=this.$store.state.activePair.userID,s=this.getDatasourceOwner();a.append("source1Id",e),a.append("pairId",this.$store.state.activePair.id),u.a.post("/match/breakMatch/"+this.getSource1()+"/"+this.getSource2()+"/"+s.source1Owner+"/"+s.source2Owner+"/"+r,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var a in t.$store.state.dynamicProgress=!1,t.$store.state.flagged)t.$store.state.flagged[a].source1Id===e&&(t.$store.state.source1UnMatched.push({name:t.$store.state.flagged[a].source1Name,id:t.$store.state.flagged[a].source1Id,parents:t.$store.state.flagged[a].source1Parents}),t.$store.state.source2UnMatched.push({name:t.$store.state.flagged[a].source2Name,id:t.$store.state.flagged[a].source2Id,source2IdHierarchy:t.$store.state.flagged[a].source2IdHierarchy,mappedParentName:t.$store.state.flagged[a].mappedParentName,parents:t.$store.state.flagged[a].source2Parents}),t.$store.state.flagged.splice(a,1),--t.$store.state.totalAllFlagged)})).catch((function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.selectedSource1Id=null,t.selectedSource1Name=null,t.dialog=!1,console.log(e)}))},breakNoMatch:function(e,t){var a=this;this.$store.state.progressTitle="Breaking no match",this.$store.state.dynamicProgress=!0;var r=new FormData;r.append("source1Id",e),r.append("recoLevel",this.$store.state.recoLevel),r.append("totalLevels",this.$store.state.totalSource1Levels),r.append("pairId",this.$store.state.activePair.id);var s=this.$store.state.activePair.userID;u.a.post("/match/breakNoMatch/"+t+"/"+this.getSource1()+"/"+this.getSource2()+"/"+s,r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){if(a.$store.state.dynamicProgress=!1,"nomatch"===t)for(var r in a.$store.state.noMatchContent)a.$store.state.noMatchContent[r].source1Id===e&&(a.$store.state.source1UnMatched.push({name:a.$store.state.noMatchContent[r].source1Name,id:a.$store.state.noMatchContent[r].source1Id,parents:a.$store.state.noMatchContent[r].parents}),a.$store.state.noMatchContent.splice(r,1),--a.$store.state.totalAllNoMatch);else if("ignore"===t)for(var s in a.$store.state.ignoreContent)a.$store.state.ignoreContent[s].source1Id===e&&(a.$store.state.source1UnMatched.push({name:a.$store.state.ignoreContent[s].source1Name,id:a.$store.state.ignoreContent[s].source1Id,parents:a.$store.state.ignoreContent[s].parents}),a.$store.state.ignoreContent.splice(s,1),--a.$store.state.totalAllIgnore)})).catch((function(e){a.$store.state.dynamicProgress=!1,a.alert=!0,a.alertTitle="Error",a.alertText=e.response.data.error,a.selectedSource1Id=null,a.selectedSource1Name=null,a.dialog=!1,console.log(e)}))},noMatch:function(e){var t=this;this.$store.state.progressTitle="Saving as no match",this.$store.state.dynamicProgress=!0;var a=this.$store.state.activePair.userID,r=this.getDatasourceOwner(),s=r.source1Owner,o=r.source2Owner,i=new FormData;i.append("source1Id",this.selectedSource1Id),i.append("recoLevel",this.$store.state.recoLevel),i.append("totalLevels",this.$store.state.totalSource1Levels),i.append("pairId",this.$store.state.activePair.id),u.a.post("/match/noMatch/".concat(e,"/").concat(this.getSource1(),"/").concat(this.getSource2(),"/").concat(s,"/").concat(o,"/").concat(a),i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){if(t.$store.state.dynamicProgress=!1,"nomatch"===e)for(var a in t.$store.state.source1UnMatched)t.$store.state.source1UnMatched[a].id===t.selectedSource1Id&&(t.$store.state.noMatchContent.push({source1Name:t.selectedSource1Name,source1Id:t.selectedSource1Id,parents:t.$store.state.source1UnMatched[a].parents}),++t.$store.state.totalAllNoMatch,t.$store.state.source1UnMatched.splice(a,1));else if("ignore"===e)for(var r in t.$store.state.source1UnMatched)t.$store.state.source1UnMatched[r].id===t.selectedSource1Id&&(t.$store.state.ignoreContent.push({source1Name:t.selectedSource1Name,source1Id:t.selectedSource1Id,parents:t.$store.state.source1UnMatched[r].parents}),++t.$store.state.totalAllIgnore,t.$store.state.source1UnMatched.splice(r,1));t.dialog=!1,t.selectedSource1Id=null,t.selectedSource1Name=null})).catch((function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.dialog=!1,t.selectedSource1Id=null,t.selectedSource1Name=null}))},back:function(){this.searchPotential="",this.dialog=!1}},computed:{nextLevelText:{get:function(){return this.translateDataHeader("source1",this.$store.state.recoLevel)},set:function(){}},currentLevelText:{get:function(){return this.translateDataHeader("source1",this.$store.state.recoLevel-1)},set:function(){}},matchedHeaders:function(){var e=[{text:"Source1 Location",value:"source1Name"},{text:"Source1 ID",value:"source1Id"},{text:"Source2 Location",value:"source2Name"},{text:"Source2 ID",value:"source2Id"},{text:"Match Comment",value:"matchComments"}];return e},source1GridHeaders:function(){var e=[{text:"Location",value:"name"}];if(this.$store.state.source1UnMatched.length>0)for(var t=this.$store.state.source1UnMatched[0].parents.length;t>0;t--)e.push({text:"Level "+t,value:"level"+(t+1)});return e.splice(1,1),e},potentialHeaders:function(){var e=[];return e.push({sortable:!1},{text:"Source 2 Location",value:"name",sortable:!1},{text:"ID",value:"id",sortable:!1},{text:"Parent",value:"source2Parent",sortable:!1}),this.$store.state.recoLevel===this.$store.state.totalSource1Levels&&e.push({text:"Geo Dist (Miles)",value:"geodist",sortable:!1}),e.push({text:"Score",value:"score"}),e.push({text:"Comment",value:"comment",sortable:!1}),e},potentialAvailable:function(){return null!==this.$store.state.source2UnMatched&&this.$store.state.source2UnMatched.length>this.potentialMatches.length},allPotentialMatches:function(){var e=this;if(null!==this.$store.state.source2UnMatched&&this.$store.state.source2UnMatched.length>this.potentialMatches.length&&this.showAllPotential){var t,a=[],r=Object(n["a"])(this.$store.state.source2UnMatched);try{var s=function(){var r=t.value,s=e.potentialMatches.find((function(e){return e.id===r.id}));s||(r.score="N/A",a.push(r))};for(r.s();!(t=r.n()).done;)s()}catch(o){r.e(o)}finally{r.f()}return this.potentialMatches.concat(a)}return this.potentialMatches},source1Tree:function(){this.addListener();var e=function e(t,a){for(var r in t){var s={text:r,children:[]};e(t[r],s.children),0===s.children.length&&delete s.children,a.push(s)}},t=[];return 1===Object.keys(this.$store.state.source1Parents).length&&"null"===Object.keys(this.$store.state.source1Parents)[0]||e(this.$store.state.source1Parents,t),t},source1Grid:function(){var e=this;if(this.$store.state.source1UnMatched.length>0&&""!==this.source1Filter.level){var t=this.$store.state.source1UnMatched[0].parents.length-this.source1Filter.level;return this.$store.state.source1UnMatched.filter((function(a){return a.parents[t]===e.source1Filter.text}))}return this.$store.state.source1UnMatched},goNextLevel:function(){return this.$store.state.recoLevel<this.$store.state.totalSource1Levels&&null!==this.$store.state.source1UnMatched&&0===this.$store.state.source1UnMatched.length&&null!==this.$store.state.flagged&&0===this.$store.state.flagged.length&&null!==this.$store.state.matchedContent&&0!==this.$store.state.matchedContent.length?"yes":"no"},lastLevelDone:function(){return this.$store.state.recoLevel===this.$store.state.totalSource1Levels&&null!==this.$store.state.source1UnMatched&&0===this.$store.state.source1UnMatched.length&&null!==this.$store.state.flagged&&0===this.$store.state.flagged.length?"yes":"no"},source1TotalRecords:function(){return this.$store.state.scoreResults?this.$store.state.scoreResults.length:0},source1TotalMatched:function(){return this.$store.state.matchedContent?this.$store.state.matchedContent.length:0},source1PercentMatched:function(){return 0===this.source1TotalRecords?0:parseFloat((100*this.source1TotalMatched/this.source1TotalRecords).toFixed(1))},source1TotalUnMatched:function(){return this.source1TotalRecords-this.source1TotalMatched},source1PercentUnMatched:function(){return 0===this.source1TotalRecords?0:parseFloat((100*this.source1TotalUnMatched/this.source1TotalRecords).toFixed(1))},totalFlagged:function(){return this.$store.state.flagged?this.$store.state.flagged.length:0},source1PercentFlagged:function(){return 0===this.$store.state.scoreResults.length?0:this.$store.state.flagged?parseFloat((100*this.$store.state.flagged.length/this.$store.state.scoreResults.length).toFixed(1)):0},source1TotalNoMatch:function(){return this.$store.state.noMatchContent?this.$store.state.noMatchContent.length:0},source1TotalIgnore:function(){return this.$store.state.ignoreContent?this.$store.state.ignoreContent.length:0},source1PercentNoMatch:function(){return 0===this.$store.state.scoreResults.length?0:this.$store.state.noMatchContent?parseFloat((100*this.$store.state.noMatchContent.length/this.$store.state.scoreResults.length).toFixed(1)):0},source1PercentIgnore:function(){return 0===this.$store.state.scoreResults.length?0:this.$store.state.ignoreContent?parseFloat((100*this.$store.state.ignoreContent.length/this.$store.state.scoreResults.length).toFixed(1)):0},source2TotalRecords:function(){return this.$store.state.source2TotalRecords?this.$store.state.source2TotalRecords:0},source2TotalUnmatched:function(){return this.source2TotalRecords>0&&this.$store.state.matchedContent?parseInt(this.source2TotalRecords)-parseInt(this.$store.state.matchedContent.length):0},source2PercentUnmatched:function(){return 0===this.$store.state.source2TotalRecords?0:parseFloat((100*this.source2TotalUnmatched/this.$store.state.source2TotalRecords).toFixed(1))},source2PercentFlagged:function(){return 0===this.$store.state.source2TotalRecords?0:this.$store.state.flagged?parseFloat((100*this.$store.state.flagged.length/this.$store.state.source2TotalRecords).toFixed(1)):0},source2TotalMatched:function(){return this.source1TotalMatched},source2PercentMatched:function(){return 0===this.$store.state.source2TotalRecords?0:parseFloat((100*this.source2TotalMatched/this.$store.state.source2TotalRecords).toFixed(1))},source2NotInSource1:function(){var e=this.source2TotalRecords-this.source1TotalRecords;return e<0?0:e},source2PercentNotInSource1:function(){if(0===this.source2NotInSource1)return 0;var e=parseFloat((100*this.source2NotInSource1/this.source2TotalRecords).toFixed(1));return parseFloat(e)}},created:function(){var e=this;this.$store.state.recalculateScores&&(this.$store.state.recalculateScores=!1,this.getScores(!1)),Rr.$on("changeCSVHeaderNames",(function(){var t=e.translateDataHeader("source1",e.$store.state.recoLevel);e.nextLevelText=t,e.currentLevelText=t})),this.addListener(),this.$store.state.recoLevel===this.$store.state.totalSource1Levels?this.dialogWidth="auto":this.dialogWidth="1500px",this.source1TreeUpdate++},components:{"liquor-tree":Qt["a"],appRecoExport:Pa}},Ca=Da,Ta=a("71a3"),Aa=a("c671"),Ia=a("fe57"),Oa=a("9a96"),La=a("a844"),Va=a("eb2a"),Na=Object(g["a"])(Ca,$a,Sa,!1,null,null,null),Ra=Na.exports;m()(Na,{VAlert:M["a"],VAvatar:be["a"],VBtn:U["a"],VCard:F["a"],VCardActions:E["a"],VCardText:E["c"],VCardTitle:E["d"],VCol:ca["a"],VContainer:q["a"],VDataTable:Re["a"],VDialog:xe["a"],VFlex:j["a"],VIcon:y["a"],VLayout:B["a"],VList:$["a"],VProgressCircular:_e["a"],VProgressLinear:ke["a"],VRow:la["a"],VSelect:Fe["a"],VSpacer:G["a"],VTab:Ta["a"],VTabItem:Aa["a"],VTabs:Ia["a"],VTabsSlider:Oa["a"],VTextField:W["a"],VTextarea:La["a"],VToolbar:z["a"],VToolbarTitle:qe["b"],VTooltip:x["a"],VTreeview:Va["a"]});var Ma=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{transition:"scale-transition","hide-overlay":"",persistent:"",width:"350"},model:{value:e.mappingStatusDialog,callback:function(t){e.mappingStatusDialog=t},expression:"mappingStatusDialog"}},[a("v-card",{attrs:{color:"white",dark:""}},[a("v-card-text",[a("center",[a("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.mappingStatusProgressTitle))]),a("br"),"percent"==e.progressType?a("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.mappingStatusProgressPercent,color:"primary"}},[a("v-avatar",{attrs:{color:"indigo",size:"50px"}},[a("span",{staticClass:"white--text"},[a("b",[e._v(e._s(e.mappingStatusProgressPercent)+"%")])])])],1):e._e(),"indeterminate"==e.progressType?a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"red"}}):e._e()],1)],1)],1)],1),a("v-layout",{attrs:{column:""}},[a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" About this page ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" This page let you visualize the mapping status for various levels "),a("v-list",[e._v(" 1. Right boxes shows reconciliation status for a selected level ")]),a("v-list",[e._v(" 2. Left boxes shows reconciliation status for a all levels ")]),a("v-list",[e._v(" 3. The search box let you search locations for a selected level only ")])],1)],1)],1),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-row",[a("v-col",{attrs:{cols:"3"}},[a("appRecoExport")],1),a("v-spacer"),a("v-col",{attrs:{cols:"1"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){e.helpDialog=!0}}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}])},[a("span",[e._v("Help")])])],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"1"}},[a("b",[e._v("All Levels")])]),a("v-spacer"),a("v-col",{attrs:{cols:"1"}},[a("b",[e._v(e._s(e.currentLevelText)+" Only")])])],1),a("v-row",[a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 1 Matched")])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllMapped)+"/"+e._s(e.$store.state.source1TotalAllRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentMapped,color:"yellow"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source1PercentMapped)+"%")])])],1)],1)],1)],1)],1)],1),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 1 No Match")])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllNoMatch)+"/"+e._s(e.$store.state.source1TotalAllRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentNoMatch,color:"yellow"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source1PercentNoMatch)+"%")])])],1)],1)],1)],1)],1)],1),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 1 Flagged")])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllFlagged)+"/"+e._s(e.$store.state.source1TotalAllRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentFlagged,color:"yellow"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source1PercentFlagged)+"%")])])],1)],1)],1)],1)],1)],1),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 2 Matched")])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllMapped)+"/"+e._s(e.$store.state.source2TotalAllRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentMapped,color:"green"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source2PercentMapped)+"%")])])],1)],1)],1)],1)],1)],1),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 2 Flagged")])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllFlagged)+"/"+e._s(e.$store.state.source2TotalAllRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentFlagged,color:"yellow"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source2PercentFlagged)+"%")])])],1)],1)],1)],1)],1)],1),a("v-spacer"),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"cyan","text-color":"black"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 1 Matched")])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.totalMapped)+"/"+e._s(e.totalRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentMappedLevel,color:"yellow"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentMappedLevel)+"%")])])],1)],1)],1)],1)],1)],1),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"cyan","text-color":"black"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 1 No Match")])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.totalNoMatch)+"/"+e._s(e.totalRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentNoMatchLevel,color:"yellow"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentNoMatchLevel)+"%")])])],1)],1)],1)],1)],1)],1),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"cyan","text-color":"black"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 1 Flagged")])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.totalFlagged)+"/"+e._s(e.totalRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentFlagged,color:"yellow"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentFlagged)+"%")])])],1)],1)],1)],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"3"}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchMatched,callback:function(t){e.searchMatched=t},expression:"searchMatched"}})],1),a("v-spacer"),a("v-col",{attrs:{cols:"3"}},[["Done"===e.$store.state.recoStatus||e.$store.state.activePair.userID!==e.$store.state.auth.userID&&!e.$tasksVerification.hasPermissionByName("special","custom","close-matching")?e._e():a("v-btn",{attrs:{color:"success",rounded:""},on:{click:e.markRecoDone}},[a("v-icon",[e._v("mdi-lock")]),e._v("Mark Reconciliation As Done ")],1),"Done"!==e.$store.state.recoStatus||e.$store.state.activePair.userID!==e.$store.state.auth.userID&&!e.$tasksVerification.hasPermissionByName("special","custom","close-matching")?e._e():a("v-btn",{attrs:{color:"success",rounded:""},on:{click:e.markRecoUnDone}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-lock-open-variant")]),e._v("Mark Reconciliation As UnDone ")],1)]],2),a("v-spacer"),a("v-col",[a("v-select",{staticClass:"input-group--focused",attrs:{items:e.locationLevels,"item-value":e.locationLevels.value,"item-name":e.locationLevels.text,label:"Level",height:"1","full-width":"","single-line":""},on:{change:e.levelChanged},model:{value:e.recoLevel,callback:function(t){e.recoLevel=t},expression:"recoLevel"}})],1)],1),a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}}),a("v-spacer"),a("v-flex",{attrs:{xs2:""}}),a("v-spacer"),a("v-flex",{attrs:{xs1:"",sm2:"",md2:"",right:""}})],1)],1),a("v-flex",{attrs:{xs1:""}},[a("v-tabs",{attrs:{"icons-and-text":"",centered:"",grow:"",dark:"","background-color":"cyan"}},[a("v-tabs-slider",{attrs:{color:"red"}}),a("v-tab",{key:"match"},[e._v(" MATCHED ("+e._s(e.totalMapped)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-up")])],1),a("v-tab",{key:"notMapped"},[e._v(" Source 1 Not Mapped ("+e._s(e.totalNotMapped)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-down")])],1),a("v-tab",{key:"nomatch"},[e._v(" Source 1 NO MATCH ("+e._s(e.totalNoMatch)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-down")])],1),a("v-tab",{key:"ignore"},[e._v(" Source 1 IGNORED ("+e._s(e.totalIgnore)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-down")])],1),a("v-tab",{key:"flagged"},[e._v(" FLAGGED ("+e._s(e.totalFlagged)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-bell")])],1),a("v-tab-item",{key:"match"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.matchedHeaders,items:e.mappingData.mapped,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),a("td",[e._v(e._s(t.item.source1Id))]),a("td",[e._v(e._s(t.item.source2Name))]),a("td",[e._v(e._s(t.item.source2Id))])]}}])})],1),a("v-tab-item",{key:"notMapped"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.notMappedHeaders,items:e.mappingData.notMapped,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),a("td",[e._v(e._s(t.item.source1Id))])]}}])})],1),a("v-tab-item",{key:"nomatch"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.noMatchHeaders,items:e.mappingData.noMatch,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),a("td",[e._v(e._s(t.item.source1Id))])]}}])})],1),a("v-tab-item",{key:"ignore"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.noMatchHeaders,items:e.mappingData.ignore,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),a("td",[e._v(e._s(t.item.source1Id))])]}}])})],1),a("v-tab-item",{key:"flagged"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.flaggedHeaders,items:e.mappingData.flagged,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),a("td",[e._v(e._s(t.item.source1Id))]),a("td",[e._v(e._s(t.item.source2Name))]),a("td",[e._v(e._s(t.item.source2Id))])]}}])})],1)],1)],1)],1)],1)},Ua=[],Fa={mixins:[D],data:function(){return{helpDialog:!1,matchedHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"},{text:"Source 2 Location",value:"source2Name"},{text:"Source 2 ID",value:"source2Id"}],noMatchHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"}],notMappedHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"}],flaggedHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"},{text:"Source 2 Location",value:"source2Name"},{text:"Source 2 ID",value:"source2Id"}],searchMatched:"",mappingData:{},recoLevel:2,mappingStatusDialog:!1,mappingStatusProgressTitle:"Waiting for progress status",mappingStatusProgressPercent:0,locationLevels:[]}},methods:{checkMappingStatusProgress:function(){var e=this,t=this.$store.state.clientId;u.a.get("/progress/mappingStatus/"+t).then((function(t){return null===t.data||void 0===t.data||!1===t.data?(e.mappingStatusDialog=!1,e.mappingStatusProgressTitle="Waiting for progress status",void clearInterval(e.mappingStatusProgressTimer)):null===t.data.status&&null===t.data.error&&null===t.data.percent?(e.mappingStatusDialog=!1,clearInterval(e.mappingStatusProgressTimer),void(e.mappingStatusProgressTitle="Waiting for progress status")):(e.mappingStatusProgressTitle=t.data.status,t.data.percent&&("percent"!==e.progressType&&(e.progressType="percent"),e.mappingStatusProgressPercent=t.data.percent),void("Done"===t.data.status&&(e.clearProgress("mappingStatus"),clearInterval(e.mappingStatusProgressTimer),e.mappingStatusDialog=!1,e.mappingStatusProgressTitle="Waiting for progress status")))})).catch((function(e){console.log(e)}))},mappingStatus:function(){var e=this;if(this.source1&&this.source2){this.mappingData={};var t=this.$store.state.clientId,a=this.$store.state.totalSource2Levels,r=this.$store.state.totalSource1Levels,s=this.$store.state.activePair.userID,o=this.getDatasourceOwner(),i=o.source1Owner,n=o.source2Owner,c=this.getLimitOrgIdOnActivePair().source1LimitOrgId,l=this.getLimitOrgIdOnActivePair().source2LimitOrgId;this.mappingStatusDialog=!0,this.progressType="indeterminate";var d="/mappingStatus/".concat(this.source1,"/").concat(this.source2,"/").concat(i,"/").concat(n,"/").concat(this.recoLevel,"/").concat(a,"/").concat(r,"/").concat(t,"/").concat(s,"?source1LimitOrgId=").concat(c,"&source2LimitOrgId=").concat(l);u.a.get(d).then((function(t){e.mappingData=t.data})),this.mappingStatusProgressTimer=setInterval(this.checkMappingStatusProgress,500)}},levelChanged:function(e){this.recoLevel=e,this.mappingStatus()},markRecoDone:function(){var e=this;this.$store.state.progressTitle="Marking reconciliation as Done",this.$store.state.dynamicProgress=!0,u.a.get("/match/markRecoDone/"+this.$store.state.activePair.id).then((function(t){e.$store.state.dynamicProgress=!1,t.data.status&&(e.$store.state.recoStatus=t.data.status),e.$store.state.errorTitle="Reconciliation Done",e.$store.state.errorDescription="Reconciliation is complete, no more changes can be done",e.$store.state.errorColor="primary",e.$store.state.dialogError=!0})).catch((function(t){e.$store.state.dynamicProgress=!1,console.log(t.response.data.error)}))},markRecoUnDone:function(){var e=this;this.$store.state.progressTitle="Marking reconciliation as Un Done",this.$store.state.dynamicProgress=!0,u.a.get("/match/markRecoUnDone/"+this.$store.state.activePair.id).then((function(t){e.$store.state.dynamicProgress=!1,t.data.status&&(e.$store.state.recoStatus=t.data.status),e.$store.state.errorTitle="Reconciliation on progress",e.$store.state.errorDescription="You may continue doing reconciliation now",e.$store.state.errorColor="primary",e.$store.state.dialogError=!0})).catch((function(t){e.$store.state.dynamicProgress=!1,console.log(t.response.data.error)}))}},computed:{currentLevelText:function(){return this.translateDataHeader("source1",this.recoLevel-1)},source1:function(){var e=this.$store.state.activePair.source1.name;return e&&(e=this.toTitleCase(e)),e},source2:function(){var e=this.$store.state.activePair.source2.name;return e&&(e=this.toTitleCase(e)),e},source1PercentMapped:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllMapped/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentMappedLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalMapped/this.totalRecords).toFixed(2))},source1PercentNoMatch:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllNoMatch/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentIgnore:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllIgnore/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentNoMatchLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalNoMatch/this.totalRecords).toFixed(2))},source1PercentIgnoreLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalIgnore/this.totalRecords).toFixed(2))},source1PercentFlagged:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllFlagged/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentFlaggedLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalFlagged/this.totalRecords).toFixed(2))},source1PercentNotMapped:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.source1TotalAllNotMapped/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentNotMappedLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalNotMapped/this.totalRecords).toFixed(2))},source2PercentFlagged:function(){return 0===this.$store.state.source2TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllFlagged/this.$store.state.source2TotalAllRecords).toFixed(2))},source2PercentMapped:function(){return 0===this.$store.state.source2TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllMapped/this.$store.state.source2TotalAllRecords).toFixed(2))},totalMapped:function(){return this.mappingData&&this.mappingData.hasOwnProperty("mapped")?this.mappingData.mapped.length:0},totalNotMapped:function(){return this.mappingData&&this.mappingData.hasOwnProperty("notMapped")?this.mappingData.notMapped.length:0},totalNoMatch:function(){return this.mappingData&&this.mappingData.hasOwnProperty("noMatch")?this.mappingData.noMatch.length:0},totalIgnore:function(){return this.mappingData&&this.mappingData.hasOwnProperty("ignore")?this.mappingData.ignore.length:0},totalFlagged:function(){return this.mappingData&&this.mappingData.hasOwnProperty("flagged")?this.mappingData.flagged.length:0},totalRecords:function(){return this.totalMapped+this.totalNotMapped+this.totalNoMatch+this.totalIgnore+this.totalFlagged}},components:{appRecoExport:Pa},created:function(){this.mappingStatus();for(var e=1;e<this.$store.state.totalSource1Levels;e++){var t=this.translateDataHeader("source1",e);this.locationLevels.push({text:t,value:e+1})}}},Ea=Fa,qa=Object(g["a"])(Ea,Ma,Ua,!1,null,null,null),ja=qa.exports;m()(qa,{VAvatar:be["a"],VBtn:U["a"],VCard:F["a"],VCardText:E["c"],VChip:Ne["a"],VCol:ca["a"],VContainer:q["a"],VDataTable:Re["a"],VDialog:xe["a"],VFlex:j["a"],VIcon:y["a"],VLayout:B["a"],VList:$["a"],VProgressCircular:_e["a"],VProgressLinear:ke["a"],VRow:la["a"],VSelect:Fe["a"],VSpacer:G["a"],VTab:Ta["a"],VTabItem:Aa["a"],VTabs:Ia["a"],VTabsSlider:Oa["a"],VTextField:W["a"],VToolbar:z["a"],VToolbarTitle:qe["b"],VTooltip:x["a"]});var Ha=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}})},Ba=[],Ga={mixins:[w],methods:{getDHIS2UserData:function(e){var t=this,a=this.$store.state.dhis.dev.auth;""===a.username&&(a=""),u.a.get(this.$store.state.dhis.host+"api/me",{auth:a}).then((function(r){var s=r.data.organisationUnits;s.length>0&&(t.$store.state.dhis.user.orgId=s.shift().id,u.a.get(t.$store.state.dhis.host+"api/organisationUnits/"+t.$store.state.dhis.user.orgId,{auth:a}).then((function(a){return t.$store.state.dhis.user.orgName=a.data.displayName,e(r)})))})).catch((function(e){t.$store.state.dialogError=!0,t.$store.state.errorTitle="Error",e.response&&e.response.data&&401===e.response.data.httpStatusCode?(t.$store.state.errorDescription="Unauthorized, ensure that your DHIS2 login is active",t.$router.push({name:"Logout"})):t.$store.state.errorDescription="Unauthorized, please reload the app"}))}},created:function(){var e=this;this.setDHIS2Credentials(),this.getRoles(),this.getDHIS2UserData((function(t){var a,r,s=t.data.userCredentials.userRoles.find((function(t){return t.id===e.$store.state.config.generalConfig.externalAuth.adminRole}));if(s){var o=e.roles.find((function(e){return"Admin"===e.text}));a=o.value,r=o.text}else{var i=e.roles.find((function(e){return"Data Manager"===e.text}));a=i.value,r=i.text}u.a.get("/getUser/"+t.data.userCredentials.username).then((function(s){if(s.data.userID)e.$store.state.auth.username=t.data.userCredentials.username,e.$store.state.auth.userID=s.data.userID,e.$store.state.auth.role=r,e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,Rr.$emit("getUserConfig");else{var o=new FormData;o.append("firstName",t.data.firstName),o.append("otherName",""),o.append("password",t.data.surname),o.append("userName",t.data.userCredentials.username),o.append("surname",t.data.surname),o.append("role",a),u.a.post("/addUser",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){u.a.get("/getUser/"+t.data.userCredentials.username).then((function(a){a.data.userID&&(e.$store.state.auth.username=t.data.userCredentials.username,e.$store.state.auth.userID=a.data.userID,e.$store.state.auth.role=a.data.role,e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,Rr.$emit("getUserConfig"))}))}))}}))}))}},Wa=Ga,za=Object(g["a"])(Wa,Ha,Ba,!1,null,null,null),Ja=za.exports;m()(za,{VContainer:q["a"]});var Ya,Ka=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("gofr-template",{key:e.$route.path},[e._v(" Loading... ")])},Xa=[],Za={name:"fhir-page-view",props:["page","pageId"],data:function(){return{}},created:function(){this.getTemplate(),Ya=this.pageId},methods:{getTemplate:function(){var e=this;u.a.get("/config/page/"+this.page).then((function(t){var s=t.data;"OperationOutcome"===s.resourceType?r["a"].component("gofr-template",{name:"gofr-template",data:function(){return{issues:s.issue}},components:{"gofr-outcome":function(){return Promise.resolve().then(a.bind(null,"5a61"))}},template:'<div><gofr-outcome :issues="issues"></gofr-outcome></div>'}):r["a"].component("gofr-template",{name:"gofr-template",data:function(){return{fhirId:Ya,isEdit:!1,sectionMenu:s.data.sectionMenu,subFields:s.data.subFields,columns:s.data.columns,actions:s.data.actions,links:s.data.links,constraints:s.data.constraints}},components:{"gofr-resource":function(){return a.e("chunk-53cb3a14").then(a.bind(null,"bb89"))},"gofr-codesystem":function(){return a.e("chunk-549ed7a0").then(a.bind(null,"5be8"))},"gofr-section":function(){return a.e("chunk-2d210a08").then(a.bind(null,"b961"))},"gofr-secondary":function(){return a.e("chunk-69e4563a").then(a.bind(null,"c5c2"))},"gofr-array":function(){return a.e("chunk-2d0af298").then(a.bind(null,"0cc2"))},"fhir-extension":function(){return a.e("chunk-2d0da301").then(a.bind(null,"6b10"))},"fhir-reference":function(){return Promise.all([a.e("chunk-67c19840"),a.e("chunk-fdba1cee")]).then(a.bind(null,"99fa"))},"fhir-backbone-element":function(){return a.e("chunk-08a9b5b7").then(a.bind(null,"8142"))},"fhir-string":function(){return a.e("chunk-1b3d2af8").then(a.bind(null,"b78c"))},"fhir-attachment":function(){return a.e("chunk-7da34f76").then(a.bind(null,"ca33"))},"fhir-human-name":function(){return a.e("chunk-0779b602").then(a.bind(null,"89c1"))},"fhir-code":function(){return a.e("chunk-77a0b274").then(a.bind(null,"1131"))},"fhir-date":function(){return Promise.all([a.e("chunk-72162224"),a.e("chunk-2d0e2c53")]).then(a.bind(null,"7fb0"))},"fhir-time":function(){return a.e("chunk-32294727").then(a.bind(null,"1286"))},"fhir-date-time":function(){return Promise.all([a.e("chunk-72162224"),a.e("chunk-2d0c17b7")]).then(a.bind(null,"45dd"))},"fhir-period":function(){return a.e("chunk-78a0fc3a").then(a.bind(null,"4807"))},"fhir-identifier":function(){return a.e("chunk-5e700835").then(a.bind(null,"c408"))},"fhir-contact-point":function(){return a.e("chunk-69e0cc28").then(a.bind(null,"4b80"))},"fhir-address":function(){return a.e("chunk-63fba70c").then(a.bind(null,"b248"))},"fhir-codeable-concept":function(){return a.e("chunk-2d0b8b5d").then(a.bind(null,"309c"))},"fhir-uri":function(){return a.e("chunk-69088730").then(a.bind(null,"6d39"))},"fhir-boolean":function(){return a.e("chunk-5cafeba1").then(a.bind(null,"ff03"))},"fhir-positive-int":function(){return a.e("chunk-19a7ffa0").then(a.bind(null,"b750"))},"fhir-unsigned-int":function(){return a.e("chunk-53797504").then(a.bind(null,"4c52"))},"fhir-integer":function(){return a.e("chunk-5369b150").then(a.bind(null,"eaae"))},"fhir-coding":function(){return a.e("chunk-5e71a7f0").then(a.bind(null,"eee9"))},"fhir-money":function(){return a.e("chunk-1f83e9dc").then(a.bind(null,"a6ba"))},"fhir-decimal":function(){return a.e("chunk-2f5db3ea").then(a.bind(null,"8892"))}},template:s.template,methods:{setEdit:function(e){this.isEdit=e}}}),e.$forceUpdate()})).catch((function(t){console.log(t),r["a"].component("gofr-template",{template:"<div><h1>Error</h1><p>An error occurred trying to load this page</p>.</div>"}),e.$forceUpdate()}))}},components:{},beforeCreate:function(){r["a"].component("gofr-template",{template:"<div>Loading...</div>"})}},Qa=Za,er=Object(g["a"])(Qa,Ka,Xa,!1,null,null,null),tr=er.exports,ar=a("5a61");r["a"].use(I["a"]);var rr=new I["a"]({routes:[{path:"/UsersList",name:"UsersList",component:Ye},{path:"/RolesManagement",name:"RolesManagement",component:nt},{path:"/ChangePassword",name:"ChangePassword",component:vt},{path:"/login",name:"Login",component:Y},{path:"/logout",name:"Logout",component:re},{path:"/Signup",name:"Signup",component:de},{path:"/dhis2Auth",name:"DHIS2Auth",component:Ja},{path:"/Configure",name:"Configure",component:He,beforeEnter:function(e,t,a){var s=r["a"].$tasksVerification.hasPermissionByName("special","custom","view-config-page");if(s)return a();a({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}})}},{path:"/addUser",name:"AddUser",component:tt,beforeEnter:function(e,t,a){var s=r["a"].$tasksVerification.hasPermissionByName("special","custom","add-users");if(s)return a();a({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}})}},{path:"/ViewDataSources",name:"ViewDataSources",component:ra,beforeEnter:function(e,t,a){var s=r["a"].$tasksVerification.hasPermissionByName("special","custom","view-data-source");if(s)return a();a({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}})}},{path:"/AddDataSources",name:"AddDataSources",component:Kt,beforeEnter:function(e,t,a){var s=r["a"].$tasksVerification.hasPermissionByName("special","custom","add-data-source");if(s)return a();a({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}})}},{path:"/dataSourcesPair",name:"DataSourcesPair",component:da,beforeEnter:function(e,t,a){var s=r["a"].$tasksVerification.hasPermissionByName("special","custom","view-source-pair");if(s)return a();a({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}})}},{path:"/view",name:"FacilityReconView",component:ya,beforeEnter:function(e,t,a){var s=r["a"].$tasksVerification.hasPermissionByName("special","custom","data-source-reconciliation");if(s)return a();a({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}})}},{path:"/scores",name:"FacilityReconScores",component:Ra,beforeEnter:function(e,t,a){var s=r["a"].$tasksVerification.hasPermissionByName("special","custom","data-source-reconciliation");if(s)return a();a({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}})}},{path:"/recoStatus",name:"FacilityRecoStatus",component:ja,beforeEnter:function(e,t,a){var s=r["a"].$tasksVerification.hasPermissionByName("special","custom","view-matching-status");if(s)return a();a({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}})}},{path:"/",name:"FacilityReconHome",component:Ra,beforeEnter:function(e,t,a){var s=r["a"].$tasksVerification.hasPermissionByName("special","custom","data-source-reconciliation");if(s)return a();a({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}})}},{path:"/questionnaire/:questionnaire/:page",name:"questionnaire",component:function(){return a.e("chunk-2d0afa68").then(a.bind(null,"0eda"))}},{path:"/ViewMap",name:"ViewMap",component:function(){return a.e("chunk-748c7801").then(a.bind(null,"afb4"))}},{path:"/Resource/View/:page/:id",name:"ResourceView",component:tr,props:function(e){return{page:e.params.page,pageId:e.params.id}}},{path:"/Resource/Add/:page",name:"ResourceAdd",component:function(){return a.e("chunk-2d216051").then(a.bind(null,"c14a"))},props:function(e){return{page:e.params.page}}},{path:"/Resource/Search/:page/:requestAction?",name:"ResourceSearch",component:function(){return a.e("chunk-2d0f083f").then(a.bind(null,"9d64"))},props:function(e){return{page:e.params.page,requestAction:e.params.requestAction}}},{path:"/GofrOutcome",name:"GofrOutcome",component:ar["default"],props:!0}]});rr.beforeEach((function(e,t,a){if(or.state.alert.show=!1,"keycloak"===or.state.idp){if(r["a"].$keycloak.authenticated)return a();if("/Login"===e.path||"/Signup"===e.path||or.state.config.generalConfig.authDisabled)return a();r["a"].$keycloak.logout()}else if(or.state.auth.userObj.resource)a();else{if("/Login"===e.path||"/Signup"===e.path||or.state.config.generalConfig.authDisabled)return a();a({path:"/Login"})}}));var sr=rr;r["a"].use(A["a"]);var or=new A["a"].Store({state:{baseRouterViewKey:0,idp:"",keycloak:{},alert:{width:"800px",show:!1,msg:"",type:"success",dismisible:!0,transition:"scale-transition"},auth:{username:"",userID:"",userObj:{},role:""},levelMapping:{source1:{},source2:{}},config:{userConfig:{reconciliation:{useCSVHeader:!0},FRDatasource:"DEFAULT"},generalConfig:{reconciliation:{parentConstraint:{enabled:!0,idAutoMatch:!0,nameAutoMatch:!1},singlePair:!1,singleDataSource:!1,fixSource2To:null,fixSource2:!1},smtp:{host:"",port:"",username:"",password:"",secured:""},recoProgressNotification:{enabled:!1},allowShareToAllForNonAdmin:!1,selfRegistration:{enabled:!1,requiresApproval:!1},datasetsAdditionWays:["CSV Upload","Remote Servers Sync"],datasetsAutosyncTime:"*/15 * * * *",authDisabled:!1,authMethod:"dhis2",externalAuth:{pullOrgUnits:!0,shareOrgUnits:!0,shareByOrgId:!0,datasetName:null,adminRole:null}}},recoStatus:{status:"in-progress"},recalculateScores:!1,dialogError:!1,errorTitle:"",errorDescription:"",errorColor:"primary",clientId:null,denyAccess:!0,source2Hierarchy:"",source1Hierarchy:"",uploadRunning:!1,dhis:{user:{orgId:"",orgName:""},host:"",dev:{auth:{username:"",password:""}}},dataSourcePairs:[],activePair:{source1:{},source2:{}},source1TotalAllRecords:0,source2TotalAllRecords:0,totalAllMapped:0,totalAllFlagged:0,totalAllNoMatch:0,totalAllIgnore:0,source1TotalAllNotMapped:0,source2TotalRecords:0,recoLevel:2,totalSource1Levels:"",totalSource2Levels:"",matchedContent:[],noMatchContent:[],ignoreContent:[],flagged:[],source1Parents:[],source2UnMatched:[],source1UnMatched:[],scoreResults:[],levelArray:[],scoresProgressData:{scoreDialog:!1,scoreProgressTitle:"Waiting for progress status",stage:"not final",scoreProgressPercent:null,progressType:"",scoreProgressTimer:!1,progressReqTimer:"",requestCancelled:!1,cancelTokenSource:""},scoreSavingProgressData:{percent:null,savingMatches:!1,savingProgressTimer:!1,progressReqTimer:"",requestCancelled:!1,cancelTokenSource:""},uploadProgressData:{},dataSources:[],remoteDataSources:["DHIS2","FHIR"],loadingServers:!1,dynamicProgress:!1,initializingApp:!1,cols:{header:4,content:8},searchAction:"",requestResourceUpdateData:{requestType:"",requestUpdatingResource:""},message:{type:"info",text:null,timeout:5e3,active:!1}},mutations:{setMessage:function(e,t){"string"===typeof t?(e.message.type="info",e.message.timeout=5e3,e.message.text=t,e.message.active=!0):(e.message.type=t.type||"info",e.message.timeout=t.timeout||5e3,e.message.text=t.text,e.message.active=!0)},closeMessage:function(e){e.message.active=!1}}});u.a.interceptors.response.use((function(e){return e}),(function(e){var t=e.response.status;return 403===t?(sr.push({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}}),or.state.initializingApp=!1):401===t&&(sr.push("logout"),or.state.initializingApp=!1),Promise.reject(e)}));var ir={hasPermissionByName:function(e,t,a){var r=or.state.auth.userObj;return!(!r||!r.permissions||0===Object.keys(r.permissions).length)&&(!(!r.permissions["*"]||!r.permissions["*"]["*"])||!!(r.permissions[e][t]||r.permissions["*"]&&r.permissions["*"][t])&&(!a||!!(r.permissions[e][t]["id"]||r.permissions["*"]&&r.permissions["*"][t]&&r.permissions["*"][t]["id"])&&(r.permissions[e][t]["id"][a]?r.permissions[e][t]["id"][a]:!!(r.permissions["*"]&&r.permissions["*"][t]&&r.permissions["*"][t]["id"]&&r.permissions["*"][t]["id"][a])&&r.permissions["*"][t]["id"][a])))}},nr={mixins:[C,D,w],props:["generalConfig"],data:function(){return{items:[{title:"Click Me"},{title:"Click Me"},{title:"Click Me"},{title:"Click Me 2"}],fixed:!1,title:this.$t("App.title"),locale:"en",locales:[{text:"English",value:"en"},{text:"French",value:"fr"}],activeDataSourcePair:{},tasksVerification:ir}},watch:{locale:function(e){this.$i18n.locale=e}},methods:{closeDialogError:function(){this.$store.state.errorColor="primary",this.$store.state.dialogError=!1},renderInitialPage:function(){var e=this,t=this.$store.state.activePair.source1.name,a=this.$store.state.activePair.source2.name;t&&a||!(this.$store.state.dataSources.length>1||this.$store.state.dataSourcePairs.length>0)?t&&a?u.a.get("/uploadAvailable/"+t+"/"+a).then((function(t){e.$store.state.initializingApp=!1,t.data.dataUploaded?(e.$store.state.recalculateScores=!0,e.$router.push({name:"FacilityReconScores"})):e.$router.push({name:"AddDataSources"})})).catch((function(t){console.log(t),e.$router.push({name:"AddDataSources"})})):this.$router.push({name:"AddDataSources"}):this.$router.push({name:"DataSourcesPair"})},getTotalLevels:function(){var e=this,t=this.$store.state.activePair.source1.name,a=this.$store.state.activePair.source2.name,r=this.$store.state.activePair.source1.id,s=this.$store.state.activePair.source2.id;if(!t||!a)return this.$store.state.totalSource1Levels=5,this.$store.state.totalSource2Levels=5,this.$store.state.initializingApp=!1,this.renderInitialPage(),this.$store.state.recoLevel=2,void this.getRecoStatus();var o=JSON.stringify(this.getLimitOrgIdOnActivePair());u.a.get("/datasource/countLevels?source1Id=".concat(r,"&source1DB=").concat(t,"&source2Id=").concat(s,"&source2DB=").concat(a,"&sourcesLimitOrgId=").concat(o)).then((function(t){e.$store.state.levelMapping.source1=t.data.levelMapping.levelMapping1,e.$store.state.levelMapping.source2=t.data.levelMapping.levelMapping2,e.$store.state.totalSource1Levels=t.data.totalSource1Levels,e.$store.state.totalSource2Levels=t.data.totalSource2Levels,e.$store.state.recoLevel=2,e.renderInitialPage(),e.getRecoStatus()})).catch((function(t){console.log(t),e.$store.state.recoLevel=2,e.renderInitialPage(),e.getRecoStatus()}))},getRecoStatus:function(){var e=this;if(0!==Object.keys(this.$store.state.activePair.source1).length&&0!==Object.keys(this.$store.state.activePair.source2).length){var t=this.toTitleCase(this.$store.state.activePair.source1.name),a=this.toTitleCase(this.$store.state.activePair.source2.name),r=this.$store.state.activePair.userID;u.a.get("/match/recoStatus/"+this.$store.state.activePair.id).then((function(s){s.data.status?e.$store.state.recoStatus=s.data.status:u.a.get("/match/markRecoUnDone/"+t+"/"+a+"/"+r).then((function(t){t.data.status&&(e.$store.state.recoStatus=t.data.status)})).catch((function(e){console.log(e.response.data.error)}))})).catch((function(e){console.log(e.response.data.error)}))}},getDataSources:function(){var e=this;this.$store.state.loadingServers=!0,this.$store.state.dataSources=[];var t=this.$store.state.auth.userID,a=this.$store.state.dhis.user.orgId;u.a.get("/datasource/getSource/"+t+"/"+a).then((function(t){e.$store.state.loadingServers=!1,e.$store.state.dataSources=t.data.sources,e.getDataSourcePair()})).catch((function(t){e.$store.state.loadingServers=!1,console.log(t)}))},getUserConfig:function(){var e=this,t=this.$store.state.auth.userID;u.a.get("/config/getUserConfig/"+t).then((function(t){t.data&&(e.$store.state.config.userConfig=Object(c["a"])(Object(c["a"])({},e.$store.state.config.userConfig),t.data)),e.getDataSources()})).catch((function(){e.getDataSources()}))},getDataSourcePair:function(){var e=this;this.$store.state.activePair.source1={},this.$store.state.activePair.source2={};var t=this.$store.state.auth.userID;this.$store.state.initializingApp||(this.$store.state.initializingApp=!0),u.a.get("/datasource/getSourcePair/"+t+"/"+this.$store.state.dhis.user.orgId).then((function(t){e.$store.state.dataSourcePairs=t.data;var a=e.getActiveDataSourcePair();Object.keys(a).length>0&&(e.$store.state.activePair.source1.id=a.source1.id,e.$store.state.activePair.source1.name=a.source1.name,e.$store.state.activePair.source1.display=a.source1.display,e.$store.state.activePair.source1.userID=a.source1.user.id,e.$store.state.activePair.source2.id=a.source2.id,e.$store.state.activePair.source2.name=a.source2.name,e.$store.state.activePair.source2.display=a.source2.display,e.$store.state.activePair.source2.userID=a.source2.user.id,e.$store.state.activePair.id=a.id,e.$store.state.activePair.shared=a.sharedUsers,e.$store.state.activePair.activeUsers=a.activeUsers,e.$store.state.activePair.userID=a.user.id),e.autoActivateDatasourcePair((function(t){t||e.autoCreateDatasourcePair()})),e.getTotalLevels()})).catch((function(t){console.log(JSON.stringify(t)),e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription="An error occured while getting data source pairs, reload the app to retry",e.getTotalLevels()}))},autoCreateDatasourcePair:function(){var e=this;if(this.$store.state.config.generalConfig.reconciliation.singleDataSource){var t=function(){if(Object.keys(e.$store.state.activePair.source1).length>0)return{v:!1};var t,a=e.$store.state.config.generalConfig.reconciliation.fixSource2To,r={},s={},o=e.$store.state.auth.userID,i=e.$store.state.dhis.user.orgId,c=[],l=Object(n["a"])(e.$store.state.dataSources);try{for(l.s();!(t=l.n()).done;){var u=t.value,d=u.shared.users.find((function(e){return e.id===o})),h=u.owner.id===o,v=!0===u.shareToAll.activated,p=!1;u.owner.orgId&&u.owner.orgId===i&&(p=!0),(h||d||v||p)&&(u.id===a?s=u:r=u,c.push(u))}}catch(g){l.e(g)}finally{l.f()}if(c.length>2||0===Object.keys(r).length||0===Object.keys(s).length)return{v:!1};e.createDatasourcePair(r,s)}();if("object"===Object(i["a"])(t))return t.v}},autoActivateDatasourcePair:function(e){if(Object.keys(this.$store.state.activePair.source1).length>0){var t=!1;return e(t)}if(this.$store.state.dataSourcePairs.length>1||0===this.$store.state.dataSourcePairs.length){var a=!1;return e(a)}if(this.$store.state.dhis.user.orgId&&this.$store.state.config.generalConfig.reconciliation.singlePair){this.$store.state.dataSourcePairs.status="active",this.activeDataSourcePair=this.$store.state.dataSourcePairs[0];var r=!0;e(r),this.activatePair()}else{var s=!1;e(s)}}},computed:{dhisLink:function(){return!!this.$store.state.dhis.user.orgId&&window.location.protocol+"//"+window.location.hostname}},components:{appMenu:k},created:function(){var e=this;this.$router.push({name:"AddDataSources"}),this.$store.state.config.generalConfig=this.generalConfig,"keycloak"===this.$store.state.idp?(this.$store.state.clientId=T["a"].v4(),this.$store.state.initializingApp=!0,this.$store.state.denyAccess=!1,this.getUserConfig()):this.$store.state.auth.userObj.resource&&(this.$store.state.config.generalConfig.authDisabled?this.$router.push("login"):u.a.get("/isSessionActive/").then((function(){e.$store.state.clientId=T["a"].v4(),e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,e.getUserConfig()}))),Rr.$on("refreshApp",(function(){e.getDataSources()})),Rr.$on("recalculateScores",(function(){e.$store.state.recalculateScores=!0,e.$router.push({name:"FacilityReconScores"})})),Rr.$on("getDataSources",(function(){e.getDataSources()})),Rr.$on("getUserConfig",(function(){e.getUserConfig()})),Rr.$on("getGeneralConfig",(function(){e.getGeneralConfig()})),Rr.$on("getDataSourcePair",(function(){e.getDataSourcePair()}))},mounted:function(){var e=document.getElementsByTagName("html")[0];e.style.overflowY="auto"},destroyed:function(){var e=document.getElementsByTagName("html")[0];e.style.overflowY=null},name:"App"},cr=nr,lr=a("7496"),ur=a("40dc"),dr=a("553a"),hr=a("f6c4"),vr=a("2db4"),pr=Object(g["a"])(cr,s,o,!1,null,null,null),gr=pr.exports;m()(pr,{VAlert:M["a"],VApp:lr["a"],VAppBar:ur["a"],VBtn:U["a"],VCard:F["a"],VCardActions:E["a"],VCardText:E["c"],VCol:ca["a"],VDialog:xe["a"],VFlex:j["a"],VFooter:dr["a"],VIcon:y["a"],VLayout:B["a"],VMain:hr["a"],VProgressLinear:ke["a"],VRow:la["a"],VSelect:Fe["a"],VSnackbar:vr["a"],VSpacer:G["a"],VToolbar:z["a"],VToolbarItems:qe["a"],VToolbarTitle:qe["b"]});a("466d");var fr=a("a925");function mr(){var e=a("49f8"),t={};return e.keys().forEach((function(a){var r=a.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var s=r[1];t[s]=e(a)}})),t}r["a"].use(fr["a"]);var yr=new fr["a"]({locale:"en",fallbackLocale:"en",messages:mr()}),$r=a("f309");r["a"].use($r["a"],{theme:{primary:"#3F51B5",secondary:"#7986CB",accent:"#9c27b0",error:"#f44336",warning:"#ffeb3b",info:"#2196f3",success:"#4caf50"}});var Sr=new $r["a"]({}),br=a("1dce"),xr=a.n(br),_r=a("2106"),kr=a.n(_r),wr=a("0628"),Pr=a.n(wr),Dr=a("68ad"),Cr=(a("6d93"),a("0551")),Tr=a.n(Cr),Ar=(a("2ca0"),a("caad"),a("2532"),a("0551")),Ir=a("bc3a"),Or={_code_cache:{},_code_loading:{},_setCache:function(e,t){return Or._code_cache[e]=t,Or._code_loading[e]=!1,t},checkConstraints:function(e,t,a,r,s){return new Promise((function(o,i){var c,l=e.split(","),u=[],d=Object(n["a"])(l);try{var h=function(){var e=c.value;if(t[e]){var o=Ar.evaluate(a,t[e].expression);if(e.startsWith("ihris-search")){var i=o.shift(),n=["_elements=id"];while(o.length)n.push(o.shift()+"="+encodeURI(o.shift()));u.push(new Promise((function(a,o){Ir.get("/fhir/"+or.state.config.userConfig.FRDatasource+"/"+i+"?"+n.join("&")).then((function(o){var i=o.data;if(0===i.total)a(!0);else if(s){var n=Ar.evaluate(i.entry,"resource.id");n.includes(s)?a(!0):(r.push(t[e].human),a(!1))}else r.push(t[e].human),a(!1)})).catch((function(e){o(e)}))})))}else o.every(Boolean)?u.push(!0):(r.push(t[e].human),u.push(!1))}};for(d.s();!(c=d.n()).done;)h()}catch(v){d.e(v)}finally{d.f()}Promise.all(u).then((function(e){e.every(Boolean)?o(!0):o(!1)})).catch((function(e){i(e)}))}))},lookup:function(e,t){return e?t?Or.codeLookup(t,e):e.system&&e.code?Or.codeLookup(e.system,e.code):e.reference?Or.resourceLookup(e.reference):/([A-Z]\w*)\/([A-Za-z0-9\-.]{1,64})/.test(e)?Or.resourceLookup(e):new Promise((function(t){return t(e)})):new Promise((function(t){return t(e)}))},resourceLookup:function(e){return new Promise((function(t){var a=e;Or._code_loading[a]?setTimeout((function(){t(Or.resourceLookup(e))}),200):Or._code_cache[a]?t(Or._code_cache[a]):(Or._code_loading[a]=!0,Ir.get("/fhir/"+or.state.config.userConfig.FRDatasource+"/$short-name?reference="+e).then((function(r){var s=r.data;s.display?t(Or._setCache(a,s.display)):(console.log("No display data from reference found ",a,s),t(Or._setCache(a,e)))})).catch((function(r){console.log(r),t(Or._setCache(a,e))})))}))},codeLookup:function(e,t,a){return new Promise((function(r){var s=e+"#"+t;Or._code_loading[s]?setTimeout((function(){r(Or.codeLookup(e,t,a))}),200):Or._code_cache[s]?r(Or._code_cache[s]):(Or._code_loading[s]=!0,Ir.get("/fhir/DEFAULT/$short-name?system="+e+"&code="+t+"&valuset="+a).then((function(e){var a=e.data;a.display?r(Or._setCache(s,a.display)):(console.log("No display data from codesystem found ",s,a),r(Or._setCache(s,t)))})).catch((function(e){console.log(e),r(Or._setCache(s,t))})))}))},pathFieldExpression:function(e){var t=e.substring(e.indexOf(":")+1);return t.includes("-")||t.includes(".")?"`"+t+"`":t},expand:function(e){var t=function(e,t){return e.display===t.display?e.code===t.code?0:e.code<t.code?-1:1:e.display<t.display?-1:1},a=function(e,t){if(e.compose.include){var a,r=Object(n["a"])(e.compose.include);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(s.concept){var o,i=Object(n["a"])(s.concept);try{for(i.s();!(o=i.n()).done;){var c=o.value;c.system=s.system,t.push(c)}}catch(l){i.e(l)}finally{i.f()}}}}catch(l){r.e(l)}finally{r.f()}}};return new Promise((function(r,s){var o=e.lastIndexOf("/"),i=e.lastIndexOf("|"),n=e.slice(o+1,-1!==i?i:e.length),c=[];Ir.get("/fhir/DEFAULT/ValueSet/"+n+"/$expand").then((function(e){var o=e.data;try{o.expansion&&0!==o.expansion.total||!o.compose.include?c=o.expansion.contains:a(o,c),c.sort(t),r(c)}catch(i){console.log(i),s(new Error("Invalid response from server."))}})).catch((function(){Ir.get("/fhir/DEFAULT/ValueSet/"+n).then((function(e){var s=e.data;a(s,c),c.sort(t),r(c)})).catch((function(e){s(e)}))}))}))}},Lr=Or,Vr=a("be6f");Object.defineProperty(r["a"].prototype,"$fhirpath",{value:Tr.a}),Object.defineProperty(r["a"].prototype,"$fhirutils",{value:Lr});var Nr={install:function(e){e.$tasksVerification=ir}};Nr.install=function(e){e.$tasksVerification=ir,Object.defineProperties(e.prototype,{$tasksVerification:{get:function(){return ir}}})},r["a"].use(Nr),u.a.defaults.withCredentials=!0,r["a"].use(Q.a),r["a"].use(xr.a),r["a"].use(kr.a,u.a),r["a"].use(Pr.a),r["a"].config.productionTip=!1;var Rr=new r["a"];function Mr(e){var t=location.href.split("api");if(!(t.length>=2)){var a=!1;return e(a)}var r=location.href.split("api").shift();u.a.get(r+"api/dataStore/GOFR/config").then((function(t){if(e(t.data),!t.data.BACKEND_SERVER){var a=".",r={BACKEND_SERVER:a};Ur(r)}})).catch((function(t){console.log(JSON.stringify(t));var a=!1,r=".",s={BACKEND_SERVER:r};return Ur(s),e(a)}))}function Ur(e){var t=location.href.split("api").shift();u.a.post(t+"api/dataStore/GOFR/config",e)}"."===Vr.BACKEND_HOST&&(Vr.BACKEND_HOST=window.location.hostname,Vr.BACKEND_PROTOCOL=window.location.protocol.replace(":","")),Vr.BACKEND_SERVER=Vr.BACKEND_PROTOCOL+"://"+Vr.BACKEND_HOST+":"+Vr.BACKEND_PORT,Mr((function(e){e&&e.BACKEND_SERVER,u.a.defaults.baseURL=".";var t=JSON.stringify(or.state.config.generalConfig);u.a.get("/config/getGeneralConfig?defaultGenerConfig="+t).then((function(e){var t=e.data.generalConfig;if(or.state.idp=e.data.otherConfig.idp,or.state.keycloak=e.data.otherConfig.keycloak,t||(t={}),e.data.generalConfig.authDisabled||"keycloak"!==or.state.idp)u()({method:"GET",url:"/auth"}).then((function(e){if(e.data.userObj&&e.data.userObj.resource){var a=e.data.userObj.resource.telecom.find((function(e){return"email"===e.system}));a&&(or.state.auth.username=a.value),or.state.auth.userObj=e.data.userObj,or.state.auth.userID=e.data.userObj.resource.id}r["a"].prototype.$keycloak=null,new r["a"]({router:sr,store:or,i18n:yr,vuetify:Sr,data:function(){return{config:t}},render:function(e){return e(gr,{props:{generalConfig:this.config}})}}).$mount("#app")}));else{var a={realm:e.data.otherConfig.keycloak.realm,clientId:e.data.otherConfig.keycloak.UIClientId,url:e.data.otherConfig.keycloak.baseURL,onLoad:"login-required"},s=Dr(a),o={install:function(e){e.$keycloak=s}};o.install=function(e){e.$keycloak=s,Object.defineProperties(e.prototype,{$keycloak:{get:function(){return s}}})},r["a"].use(o),s.init({onLoad:a.onLoad}).then((function(e){e?(u.a.interceptors.request.use((function(e){return e.headers["Authorization"]="Bearer ".concat(s.token),e}),(function(e){return Promise.reject(e)})),s.loadUserInfo().then((function(e){var a={resourceType:"Person",id:e.sub,meta:{profile:["http://gofr.org/fhir/StructureDefinition/gofr-person-user"]},name:[{use:"official",text:e.name}],active:!0};e.email&&(a.telecom=[{system:"email",value:e.email}]),u()({method:"POST",url:"/auth",data:a}).then((function(a){Q.a.set("userObj",JSON.stringify(a.data),"infinity"),or.state.auth.userObj=a.data,or.state.auth.userID=e.sub,or.state.auth.username=e.preferred_username,new r["a"]({router:sr,store:or,i18n:yr,vuetify:Sr,data:function(){return{config:t}},render:function(e){return e(gr,{props:{generalConfig:this.config}})}}).$mount("#app")})).catch((function(e){console.error(e)}))})),setInterval((function(){s.updateToken(70)}),6e4)):window.location.reload()})).catch((function(){alert("Keycloak access failed")}))}}))}))},"5a61":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",e._l(e.issues,(function(t,r){return a("v-col",{key:r,attrs:{sm:"4"}},[a("v-card",[a("v-card-subtitle",{staticClass:"error white--text text-uppercase font-weight-bold"},[e._v("Error")]),a("v-spacer"),a("v-card-text",{staticClass:"primary--text font-weight-bold"},[e._v(e._s(t.diagnostics))])],1)],1)})),1)],1)},s=[],o={name:"gofr-outcome",props:["issues"],data:function(){return{}}},i=o,n=a("2877"),c=a("6544"),l=a.n(c),u=a("b0af"),d=a("99d9"),h=a("62ad"),v=a("a523"),p=a("0fd9"),g=a("2fa4"),f=Object(n["a"])(i,r,s,!1,null,null,null);t["default"]=f.exports;l()(f,{VCard:u["a"],VCardSubtitle:d["b"],VCardText:d["c"],VCol:h["a"],VContainer:v["a"],VRow:p["a"],VSpacer:g["a"]})},"754f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEMAAAAbCAYAAAAnFzLpAAAGGklEQVRYR+1YaVCTVxQ9BBLWEBYRGhAjFPetVRRoQVnFZRQtYq1Tl6kzij/q2k7dZtTSxW3sVGeqVtHOuLXQYnFBFscNFwqIYikKRRkpq2GRGJCEJJ37RV6SJhBQ63Qs59/7ct9795137vJi4bNktwa94Biw6CVDp4ReMvSiopeMXjJMJ8leZTyPMoQ2AhxePoNNzbx9H3vP5bPxByHD8V7gEDb++MA5VNbLelSnlkaPgf+bYtyrrMfe9Hw0t7T1aP6LGndbGc72NsjbuZjt92N2EdYducDGa2ICER89ho2jNh1FWU1jt/0LGOiJo6tmMvsvk7NxMOtWt+ebMrQSCOAt8YWnxAcOIhFsbe2gULShqaEeTVIp7v1+G0qFjvD/DBmerkJcTJgPnoUFd66l350Fqe954SXxwdtBwbC2sel0CfkTGa5lZaCpQdqzPuPfVgZ5493HEWO4MJHijwqtg88De6EQkTFx4POt2HSNRoMnzY9hLxSBx9MSTmh72obUYz8A0Jhuuuhy+rs5QWRnzcXvU2U7BFaWKN4T3+0wCV57GFWNT7ib9vVwhoOtAA8fPUa9rNXk+cjO3oavc1LZDkW72sjWVmAFD2cHuDnaQdGuwqPmFtQ2ytGuNrR18xAjZNJUtLbIUZh3AzUVFWhvV4LPFyAwLBLunl5s7Utpp1FXXWlMBsX9ssljYWetdUyl1iCnpBKrEjNwZuNcuAptue/mcsa4Tw6C8siMcYNgzbdkG9/9S4otP13h1tSHv58YJ1bPYp8SkrJx6LwuZ0j6irByegCiRvtwF6MPeZsSV4oeYn/GTdwur2U/iVxcIWtqglqtMrAXe0vwTsQk9u1WznWUFhUakrF1QThi9SqC/gq1TXLwrSzh4qCNQXNkFJbXYaSkr0kV0I1OSzhhkGC7IoMuIHX9+/Bwsu80ajQaYMrnx1BS1WA2siR+A+EfHMrsLpxNhbSmWkfGiP59cXJtHDMg2R2/XISymgYM8eqD2KChsNSLNXNk0EJ0S2fySiGys0Hcu0M5aXfgdF4plh9IZ+OuyKALoovqwL70m0i7+SccbARcCIaPHIBWhRLL9qWZJYJnyUPE9FiInJ052xa5HGnJx6FWqXRk7FwUiZjxg9hiaw5nIeXGXTaODRqCrfN1DpkjI7+sGnN3/sKFGYGcztg0j61HZZfKbwe6ImNR2ChsiAtmtt9nFmBHynWjPGGWCVhg/IRQePv6aU01wKX006ir0oYsK60pn8UxWVOSC/g0EWrS3jNY8Xi48+0SFq/myFh9KBMnc+4Z+Hf5iwWgEkqQPVVg9Ir93SKDVEv+Pau63BxpcwuSrhXjyMVC1DTJzfJgYUFEhKOfjy+zvZP3G+4WFrAxIyN3x2KWD0jes75OMtpA/zDmyIjb/jNIHfo4sjIGgYO0WbwnZJD9/NCR2DA72CBU6btSpcap3BJ8cyqn046Xx+MhYGIEPCUDtILQaJB/9TIelOiUb6AM6i6plyAU3K9B7LZkIzLOb/kQlNUJ5siI3nwMpdWGyexFyKA9vVwdsTjyLVDIUonVR1WDDLO3JRuphM/nIzA8Gu5iMWeuUqlw40IWqh6WG52PKSN1/RwM6+fGGVDtpjDRByXPot3x4FvyukWGqXb8Rcno8EdoK+CqXvzksazU02+7UnOw52wuc9va1g4hUVPg5OrKfWtrbUV25jk0SOuMiDBQxq6PojDdfyAzWnEwHadyS9l4ZsBg7FgYwcbmlPEyyXC0szb5aHN3skf2VwtZC085inIVwcHRESGTpoG6UQK9R65mpnHVozMwZQz3dsOv6+YwOyqtSVeL8aC2EX5vuCAmYDBTRXfC5GWSsXpGALd/RkEZiiukqGzQvoYnDu/PhU0HtqVcA5VdepSFTY0xeJfIZTIolYpOicg8mWzYdCXMC8Xc4GEmJ+SVVUPsIoTY2eGVhwmRQV1xVyive4y47clcu0+JMigsqkv7f/6YlLjPuB2nmq4fi7JWBahB2nziEuZNGIGNz+r9qwyT0BESjoxREnejakKHp34o8fwtUJdMeGlk9IjO18y42/9nvGbn7rqa/B8Oa+6MvcrQY+hvaNExIn99uskAAAAASUVORK5CYII="},"7de1":function(e,t,a){},9003:function(e,t,a){"use strict";a("f414")},be6f:function(e){e.exports=JSON.parse('{"BACKEND_HOST":".","BACKEND_PORT":"4000","BACKEND_PROTOCOL":"http"}')},d13b:function(e,t,a){"use strict";a("7de1")},edd4:function(e){e.exports=JSON.parse('{"App":{"title":"Global Open Facility Registry","initApp":"Initializing App","source":"Source","menu":{"facilityRecon":{"msg":"Facility Reconciliation","tooltip":"Facility Reconciliation"},"createPair":{"msg":"Create and Manage Data Source Pair","tooltip":"Select data sources to start mathing"},"reconcile":{"msg":"Reconcile","tooltip":"Perform location matching of your selected data sources"},"recoStatus":{"msg":"Reconciliation Status","tooltip":"Matching Status"},"facilityRegistry":{"msg":"Facility Registry","tooltip":"Facility Registry"},"createOrgHier":{"msg":"Create Hierarchy","tooltip":"Add Facility And Jurisdition"},"healthService":{"msg":"Healthcare Services","tooltip":"Add services and define service terminologies"},"healthServiceTerminologies":{"msg":"Add Terminologies","tooltip":"Add service based terminologies"},"facilityRegReports":{"msg":"Reports","tooltip":"View Reports"},"search":{"msg":"Search","tooltip":"Search"},"searchFacility":{"msg":"Search Facility","tooltip":"Search Facility"},"searchJurisdiction":{"msg":"Search Jurisdiction","tooltip":"Search Jurisdiction"},"searchOrganization":{"msg":"Search Organization","tooltip":"Search Organization"},"searchFacilityAddRequest":{"msg":"Search Facility Add Request","tooltip":"Search Facility Add Request"},"searchFacilityUpdateRequest":{"msg":"Search Facility Update Request","tooltip":"Search Facility Update Request"},"addJurisdiction":{"msg":"Add Jurisdiction","tooltip":"Add Counties/Districts"},"addOrganization":{"msg":"Add Organization","tooltip":"Add Organization"},"addFacility":{"msg":"Add Facility","tooltip":"Add Facility"},"searchService":{"msg":"Search Service","tooltip":"Search Service"},"facilitiesReport":{"msg":"Facilities","tooltip":"Facilities"},"servicesReport":{"msg":"Services","tooltip":"Services"},"newFacilitiesRequestsReport":{"msg":"New Facilities Requests","tooltip":"Report on requests made to create new facilities"},"facilitiesUpdateRequestsReport":{"msg":"Requested Facilities Updates","tooltip":"Report about requests to update details of facilities"},"facilityRequests":{"msg":"Requests","tooltip":"Send requests about addition of new facilities or update of facility details"},"requestNewFacility":{"msg":"Request Addition of New Facility","tooltip":"Request Addition of New Facility"},"requestUpdateFacility":{"msg":"Request Update of Facility Details","tooltip":"Request Update of Facility Details"},"addLanguage":{"msg":"Add Language","tooltip":"Add Language"},"addReferralMethod":{"msg":"Add Referral Methods","tooltip":"Add Referral Methods"},"addProgram":{"msg":"Add Programs","tooltip":"Add Programs"},"addCharacteristic":{"msg":"Add Characteristics","tooltip":"Add Characteristics"},"addService":{"msg":"Add Service","tooltip":"Add Service offered by health facilities"},"viewMap":{"msg":"View Map","tooltip":"View Map"},"services":{"msg":"Services","tooltip":"Services"},"archive":{"msg":"Archived Uploads","tooltip":"Access to backup data"},"account":{"msg":"Account"},"addUser":{"msg":"Add User","tooltip":"Create new user account"},"usersList":{"msg":"Users List","tooltip":"Manage user accounts"},"rolesManagement":{"msg":"Roles Management","tooltip":"Add or remove specific tasks on roles"},"changePassword":{"msg":"Change Password"},"logout":{"msg":"Logout"},"configure":{"msg":"configure System"},"dataSourcesParent":{"msg":"Data Sources","tooltip":"Upload CSV data and add remote DHIS2 or FHIR servers"},"viewDataSources":{"msg":"View Data Sources","tooltip":"View datasets that can be used for reconciliation"},"addDataSources":{"msg":"Add Data Sources","tooltip":"Add a new dataset that you want to reconcile"},"view":{"msg":"View","tooltip":"Explore data sources contents"},"recoParent":{"msg":"Reconcile"}}}}')},f414:function(e,t,a){},f693:function(e){e.exports=JSON.parse('{"App":{"title":"Facility Reconciliation","initApp":"Initialisation de l\'App","source":"la source","menu":{"facilityRecon":{"msg":"rapprochement des installations","tooltip":"rapprochement des installations"},"createPair":{"msg":"Crer et grer une paire de sources de donnes","tooltip":"Select data sources to start mathing"},"reconcile":{"msg":"Rconcilier","tooltip":"Effectuer une correspondance d\'emplacement de vos sources de donnes slectionnes"},"recoStatus":{"msg":"tat de rapprochement","tooltip":"Statut de correspondance"},"facilityRegistry":{"msg":"registre des installations","tooltip":"registre des installations"},"search":{"msg":"Search","tooltip":"Search"},"searchFacility":{"msg":"Facilit de recherche","tooltip":"Facilit de recherche"},"searchJurisdiction":{"msg":"juridiction de recherche","tooltip":"juridiction de recherche"},"searchOrganization":{"msg":"Rechercher une organisation","tooltip":"Rechercher une organisation"},"searchFacilityAddRequest":{"msg":"Search Facility Add Request","tooltip":"Search Facility Add Request"},"searchFacilityUpdateRequest":{"msg":"Search Facility Update Request","tooltip":"Search Facility Update Request"},"createOrgHier":{"msg":"Crer une hirarchie","tooltip":"Ajouter une installation et une dition"},"healthService":{"msg":"Services de sant","tooltip":"Ajouter des services et dfinir des terminologies de service"},"healthServiceTerminologies":{"msg":"Ajouter des terminologies","tooltip":"Ajouter des terminologies bases sur le service"},"facilityRegReports":{"msg":"Rapports","tooltip":"Voir les rapports"},"addJurisdiction":{"msg":"Ajouter une juridiction","tooltip":"Ajouter des comts / districts"},"addOrganization":{"msg":"Ajouter une organisation","tooltip":"Ajouter une organisation"},"addFacility":{"msg":"Add Facility","tooltip":"Add Facility"},"searchService":{"msg":"Service de recherche","tooltip":"Service de recherche"},"facilitiesReport":{"msg":"Facilities Report","tooltip":"Facilities Report"},"servicesReport":{"msg":"Services Report","tooltip":"Services Report"},"facilitiesRequestsReport":{"msg":"Facilities Requests Report","tooltip":"Report on requests made to create new facilities"},"facilitiesUpdateRequestsReport":{"msg":"Facilities Updates Requests Report","tooltip":"Report about requests to update details of facilities"},"requestNewFacility":{"msg":"Request Addition of New Facility","tooltip":"Request Addition of New Facility"},"requestUpdateFacility":{"msg":"Request Update of Facility Details","tooltip":"Request Update of Facility Details"},"addLanguage":{"msg":"Add Language","tooltip":"Add Language"},"addReferralMethod":{"msg":"Add Referral Methods","tooltip":"Add Referral Methods"},"addProgram":{"msg":"Add Programs","tooltip":"Add Programs"},"addCharacteristic":{"msg":"Add Characteristics","tooltip":"Add Characteristics"},"addService":{"msg":"Ajouter un service","tooltip":"Ajouter le service offert par les tablissements de sant"},"viewMap":{"msg":"voir la carte","tooltip":"voir la carte"},"services":{"msg":"Prestations de service","tooltip":"Prestations de service"},"archive":{"msg":"Tlchargements archivs","tooltip":"Accs aux donnes de sauvegarde"},"account":{"msg":"Compte"},"addUser":{"msg":"Ajouter un utilisateur","tooltip":"Crer un nouveau compte d\'utilisateur"},"usersList":{"msg":"Liste des utilisateurs","tooltip":"Grer les comptes d\'utilisateurs"},"rolesManagement":{"msg":"Gestion des rles","tooltip":"Ajouter ou supprimer des tches spcifiques sur les rles"},"changePassword":{"msg":"Changer le mot de passe"},"logout":{"msg":"Connectez - Out"},"configure":{"msg":"configurer le systme"},"dataSourcesParent":{"msg":"Les sources de donnes","tooltip":"Tlcharger des donnes CSV et ajouter des serveurs DHIS2 ou FHIR distants"},"viewDataSources":{"msg":"Afficher les sources de donnes","tooltip":"Afficher les jeux de donnes pouvant tre utiliss pour la rconciliation"},"addDataSources":{"msg":"Ajouter des sources de donnes","tooltip":"Ajouter un nouveau jeu de donnes que vous souhaitez rconcilier"},"view":{"msg":"Vue","tooltip":"Explorer le contenu des sources de donnes"},"recoParent":{"msg":"Rconcilier"}}}}')}});
//# sourceMappingURL=app.a1380aa3.js.map