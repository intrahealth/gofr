(function(e){function t(t){for(var r,s,n=t[0],l=t[1],c=t[2],u=0,d=[];u<n.length;u++)s=n[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);v&&v(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,s=1;s<a.length;s++){var n=a[s];0!==o[n]&&(r=!1)}r&&(i.splice(t--,1),e=l(l.s=a[0]))}return e}var r={},s={app:0},o={app:0},i=[];function n(e){return l.p+"js/"+({"fhir-outcome":"fhir-outcome"}[e]||e)+"."+{"chunk-07768e92":"95e9579f","chunk-08ab496f":"42306b40","chunk-0a2355b0":"9d5cad64","chunk-19a703d4":"276b7ba0","chunk-1b3f2290":"12f417d0","chunk-1f82ee10":"c44d0b52","chunk-2d0afa68":"25967f43","chunk-2d0b8b5d":"4cf89faf","chunk-2d0da301":"6ca8f0b7","chunk-2d0f083f":"db425048","chunk-2d216051":"e0daf29d","chunk-2d21a389":"b0ad19dd","chunk-2d2245b0":"3e3da318","chunk-2f5fab82":"3c1cdd7f","chunk-32fc7ad8":"228c82b1","chunk-3d173b39":"d94b89be","chunk-5368b584":"96f8b531","chunk-53787938":"57b063b4","chunk-5474d9c5":"c3c7c704","chunk-5caeefd5":"464e4a71","chunk-5e70ac24":"7b3a8a4e","chunk-5e719bed":"bdc9579c","chunk-616686dc":"df0f26c3","chunk-63f87f9c":"b4a98726","chunk-67c19840":"47cf2ee0","chunk-f4ca1e72":"9fe7ad86","chunk-69078b64":"fc106f40","chunk-69ce93ab":"f8183a8b","chunk-69e25fe0":"60372f4b","chunk-77a2aa0c":"01d5f4f8","chunk-789dd4ca":"f5a6211b","chunk-79989b56":"79c21e79","chunk-ea42a9f0":"1ec42b38","fhir-outcome":"7868dcf7","chunk-2d0c2116":"63c93d40","chunk-2d0c2136":"de96029e","chunk-2d0c7697":"54926efb","chunk-2d22c892":"6a9c4614","chunk-573e074d":"f0649703","chunk-d3e54200":"aeb292ab","chunk-2d21e6cc":"e698b8c8","chunk-69d01fe3":"54a9d390","chunk-69d059e4":"fc58793f"}[e]+".js"}function l(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a={"chunk-5474d9c5":1,"chunk-616686dc":1,"chunk-f4ca1e72":1,"chunk-79989b56":1,"chunk-ea42a9f0":1,"chunk-573e074d":1};s[e]?t.push(s[e]):0!==s[e]&&a[e]&&t.push(s[e]=new Promise((function(t,a){for(var r="css/"+({"fhir-outcome":"fhir-outcome"}[e]||e)+"."+{"chunk-07768e92":"31d6cfe0","chunk-08ab496f":"31d6cfe0","chunk-0a2355b0":"31d6cfe0","chunk-19a703d4":"31d6cfe0","chunk-1b3f2290":"31d6cfe0","chunk-1f82ee10":"31d6cfe0","chunk-2d0afa68":"31d6cfe0","chunk-2d0b8b5d":"31d6cfe0","chunk-2d0da301":"31d6cfe0","chunk-2d0f083f":"31d6cfe0","chunk-2d216051":"31d6cfe0","chunk-2d21a389":"31d6cfe0","chunk-2d2245b0":"31d6cfe0","chunk-2f5fab82":"31d6cfe0","chunk-32fc7ad8":"31d6cfe0","chunk-3d173b39":"31d6cfe0","chunk-5368b584":"31d6cfe0","chunk-53787938":"31d6cfe0","chunk-5474d9c5":"2976e3dc","chunk-5caeefd5":"31d6cfe0","chunk-5e70ac24":"31d6cfe0","chunk-5e719bed":"31d6cfe0","chunk-616686dc":"76a811a3","chunk-63f87f9c":"31d6cfe0","chunk-67c19840":"31d6cfe0","chunk-f4ca1e72":"49830f27","chunk-69078b64":"31d6cfe0","chunk-69ce93ab":"31d6cfe0","chunk-69e25fe0":"31d6cfe0","chunk-77a2aa0c":"31d6cfe0","chunk-789dd4ca":"31d6cfe0","chunk-79989b56":"50d68936","chunk-ea42a9f0":"2976e3dc","fhir-outcome":"31d6cfe0","chunk-2d0c2116":"31d6cfe0","chunk-2d0c2136":"31d6cfe0","chunk-2d0c7697":"31d6cfe0","chunk-2d22c892":"31d6cfe0","chunk-573e074d":"2976e3dc","chunk-d3e54200":"31d6cfe0","chunk-2d21e6cc":"31d6cfe0","chunk-69d01fe3":"31d6cfe0","chunk-69d059e4":"31d6cfe0"}[e]+".css",o=l.p+r,i=document.getElementsByTagName("link"),n=0;n<i.length;n++){var c=i[n],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===r||u===o))return t()}var d=document.getElementsByTagName("style");for(n=0;n<d.length;n++){c=d[n],u=c.getAttribute("data-href");if(u===r||u===o)return t()}var v=document.createElement("link");v.rel="stylesheet",v.type="text/css",v.onload=t,v.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete s[e],v.parentNode.removeChild(v),a(i)},v.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(v)})).then((function(){s[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,a){r=o[e]=[t,a]}));t.push(r[2]=i);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=n(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(v);var a=o[e];if(0!==a){if(a){var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",d.name="ChunkLoadError",d.type=r,d.request=s,a[1](d)}o[e]=void 0}};var v=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=r,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(a,r,function(t){return e[t]}.bind(null,r));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var v=u;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},4678:function(e,t,a){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=o(e);return a(t)}function o(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=o,e.exports=s,s.id="4678"},"49f8":function(e,t,a){var r={"./en.json":"edd4","./fr.json":"f693"};function s(e){var t=o(e);return a(t)}function o(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=o,e.exports=s,s.id="49f8"},"56d7":function(e,t,a){"use strict";a.r(t),a.d(t,"eventBus",(function(){return Fs}));a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("ac1f"),a("5319"),a("1276");var r=a("a026"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-app-bar",{attrs:{color:"primary",dark:"",app:"","clipped-left":"","clipped-right":""}},[r("v-toolbar-title",{domProps:{textContent:e._s(e.title)}}),r("v-spacer"),e.$store.state.auth.token||e.$store.state.config.generalConfig.authDisabled?r("v-toolbar-items",[e.dhisLink?r("v-btn",{attrs:{flat:"",href:e.dhisLink}},[r("img",{attrs:{src:a("754f")}})]):e._e(),r("appMenu")],1):e._e(),r("v-spacer"),r("v-toolbar-items")],1),r("v-main",[r("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.$store.state.dynamicProgress,callback:function(t){e.$set(e.$store.state,"dynamicProgress",t)},expression:"$store.state.dynamicProgress"}},[r("v-card",{attrs:{color:"primary",dark:""}},[r("v-card-text",[e._v(" "+e._s(e.$store.state.progressTitle)+" "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),r("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.$store.state.dialogError,callback:function(t){e.$set(e.$store.state,"dialogError",t)},expression:"$store.state.dialogError"}},[r("v-card",[r("v-toolbar",{attrs:{color:e.$store.state.errorColor,dark:""}},[r("v-toolbar-title",[e._v(" "+e._s(e.$store.state.errorTitle)+" ")]),r("v-spacer"),r("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.$store.state.dialogError=!1}}},[r("v-icon",[e._v("mdi-close")])],1)],1),r("v-card-text",[e._v(" "+e._s(e.$store.state.errorDescription)+" ")]),r("v-card-actions",[r("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){return e.closeDialogError(t)}}},[e._v("Ok")])],1)],1)],1),r("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.$store.state.initializingApp,callback:function(t){e.$set(e.$store.state,"initializingApp",t)},expression:"$store.state.initializingApp"}},[r("v-card",{attrs:{color:"primary",dark:""}},[r("v-card-text",[e._v(" "+e._s(e.$t("App.initApp"))+" "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),r("v-snackbar",{staticClass:"mt-12",attrs:{app:"",color:e.$store.state.message.type,timeout:e.$store.state.message.timeout,top:"","multi-line":""},model:{value:e.$store.state.message.active,callback:function(t){e.$set(e.$store.state.message,"active",t)},expression:"$store.state.message.active"}},[e._v(" "+e._s(e.$store.state.message.text)+" "),r("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){return e.$store.commit("closeMessage")}}},[r("v-icon",[e._v("mdi-close")])],1)],1),r("v-row",[r("v-col",[Object.keys(e.$store.state.activePair.source1).length>0&&!e.$store.state.denyAccess?[e._v(" "+e._s(e.$t("App.source"))+" 1: "),r("b",[e._v(e._s(e.$store.state.activePair.source1.name))]),e._v(", "+e._s(e.$t("App.source"))+" 2: "),r("b",[e._v(e._s(e.$store.state.activePair.source2.name))]),e._v(", Recon Status: "),"in-progress"===e.$store.state.recoStatus?r("v-icon",{attrs:{small:""}},[e._v("mdi-lock-open-variant-outline")]):r("v-icon",{attrs:{small:""}},[e._v("mdi-lock-outline")]),e._v(" "),r("b",[e._v(e._s(e.$store.state.recoStatus))])]:e._e()],2),r("v-col",{attrs:{cols:"2"}},[r("v-select",{attrs:{items:e.locales},model:{value:e.locale,callback:function(t){e.locale=t},expression:"locale"}})],1)],1),r("center",[r("v-alert",{style:{width:e.$store.state.alert.width},attrs:{type:e.$store.state.alert.type,dismissible:e.$store.state.alert.dismisible,transition:e.$store.state.alert.transition},model:{value:e.$store.state.alert.show,callback:function(t){e.$set(e.$store.state.alert,"show",t)},expression:"$store.state.alert.show"}},[e._v(" "+e._s(e.$store.state.alert.msg)+" ")])],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs4:""}}),r("v-spacer"),r("v-flex",{attrs:{xs1:""}})],1),r("router-view",{key:e.$route.path})],1),r("v-footer",{attrs:{dark:"",color:"primary",fixed:e.fixed,app:""}})],1)},o=[],i=a("53ca"),n=a("b85c"),l=a("5530"),c=(a("b0c0"),a("b64b"),a("7db0"),a("bc3a")),u=a.n(c),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{attrs:{id:"menu"}},[a("li",{staticClass:"parent"},[a("a",{attrs:{href:"#"}},[a("v-icon",[e._v("mdi-spellcheck")]),e._v(" "+e._s(e.$t("App.menu.facilityRecon.msg"))+" ")],1),a("ul",{staticClass:"child"},[a("li",{staticClass:"parent"},[a("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"#"}},[a("v-icon",{attrs:{color:"black",left:""}},[e._v("mdi-sync")]),e._v(e._s(e.$t("App.menu.dataSourcesParent.msg"))+" "),a("v-icon",{staticClass:"menuArrow",attrs:{color:"black",small:""}},[e._v("mdi-play")])],1),a("ul",{staticClass:"child"},[a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/AddDataSources"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-cloud-upload")]),e._v(" "+e._s(e.$t("App.menu.addDataSources.msg"))+" ")],1)],1)]}}])},[a("span",[e._v(e._s(e.$t("App.menu.addDataSources.tooltip")))])])],1),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/ViewDataSources"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-format-list-bulleted-square")]),e._v(e._s(e.$t("App.menu.viewDataSources.msg"))+" ")],1)],1)]}}])},[a("span",[e._v(e._s(e.$t("App.menu.viewDataSources.tooltip")))])])],1)],1)]),a("v-list",{class:{disabledMenu:0===Object.keys(e.$store.state.activePair.source1).length,lastMenu:!0}},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/view",color:"white",disabled:0===Object.keys(e.$store.state.activePair.source1).length}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-format-list-bulleted-square")]),e._v(e._s(e.$t("App.menu.view.msg"))+" ")],1)],1)]}}])},[a("span",[e._v(e._s(e.$t("App.menu.view.tooltip")))])])],1),a("li",{staticClass:"parent"},[a("a",{staticStyle:{"margin-left":"15px"},attrs:{href:"#"}},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-compare-horizontal")]),e._v(e._s(e.$t("App.menu.reconcile.msg"))+" "),a("v-icon",{staticClass:"menuArrow",attrs:{color:"black",small:""}},[e._v("mdi-play")])],1),a("ul",{staticClass:"child"},[a("v-list",{class:{disabledMenu:e.$store.state.dataSources.length<=1||e.$store.state.dataSourcePairs.length<=0,lastMenu:!0}},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/dataSourcesPair",disabled:e.$store.state.dataSources.length<=1||e.$store.state.dataSourcePairs.length<=0}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-numeric-2-box-multiple-outline")]),e._v(e._s(e.$t("App.menu.createPair.msg"))+" ")],1)],1)]}}])},[a("span",[e._v(e._s(e.$t("App.menu.createPair.tooltip")))])])],1),a("v-list",{class:{disabledMenu:0===Object.keys(e.$store.state.activePair.source1).length,lastMenu:!0}},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/scores",disabled:0===Object.keys(e.$store.state.activePair.source1).length}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-book-search")]),e._v(e._s(e.$t("App.menu.reconcile.msg"))+" ")],1)],1)]}}])},[a("span",[e._v(e._s(e.$t("App.menu.reconcile.tooltip")))])])],1),a("v-list",{class:{disabledMenu:0===Object.keys(e.$store.state.activePair.source1).length,lastMenu:!0}},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/recoStatus",disabled:0===Object.keys(e.$store.state.activePair.source1).length}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-view-dashboard")]),e._v(" "+e._s(e.$t("App.menu.recoStatus.msg"))+" ")],1)],1)]}}])},[a("span",[e._v(e._s(e.$t("App.menu.recoStatus.tooltip")))])])],1)],1)])],1)]),a("li",{staticClass:"parent"},[a("a",{attrs:{href:"#"}},[a("v-icon",[e._v("mdi-map-marker")]),e._v(e._s(e.$t("App.menu.facilityRegistry.msg"))+" ")],1),a("ul",{staticClass:"child"},[e.tasksVerification.canAdd("AddJurisdiction")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/Resource/Add/jurisdiction"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-home-city")]),e._v(e._s(e.$t("App.menu.addJurisdiction.msg"))+" ")],1)],1)]}}],null,!1,286617302)},[a("span",[e._v(e._s(e.$t("App.menu.addJurisdiction.tooltip")))])])],1):e._e(),e.tasksVerification.canAdd("AddFacility")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/questionnaire/gofr-facility-questionnaire/facility"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-hospital-building")]),e._v(e._s(e.$t("App.menu.addFacility.msg"))+" ")],1)],1)]}}],null,!1,3656909710)},[a("span",[e._v(e._s(e.$t("App.menu.addFacility.tooltip")))])])],1):e._e(),e.tasksVerification.canAdd("AddService")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/Resource/Add/service"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-room-service")]),e._v(e._s(e.$t("App.menu.addService.msg"))+" ")],1)],1)]}}],null,!1,2194227548)},[a("span",[e._v(e._s(e.$t("App.menu.addService.tooltip")))])])],1):e._e(),e.tasksVerification.canAdd("AddService")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/ViewMap"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-google-maps")]),e._v(e._s(e.$t("App.menu.viewMap.msg"))+" ")],1)],1)]}}],null,!1,3231254354)},[a("span",[e._v(e._s(e.$t("App.menu.viewMap.tooltip")))])])],1):e._e(),a("li",{staticClass:"parent"},[a("a",{attrs:{href:"#"}},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-call-made")]),e._v(" "+e._s(e.$t("App.menu.facilityRequests.msg"))+" "),a("v-icon",{staticClass:"menuArrow",attrs:{color:"black",small:""}},[e._v("mdi-play")])],1),a("ul",{staticClass:"child"},[a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.tasksVerification.canAdd("RequestBuildingAddition")?a("v-list-item",e._g({attrs:{to:"/questionnaire/gofr-facility-add-request-questionnaire/facility-add-request"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-call-made")]),e._v(e._s(e.$t("App.menu.requestNewFacility.msg"))+" ")],1)],1):e._e()]}}])},[a("span",[e._v(e._s(e.$t("App.menu.requestNewFacility.tooltip")))])])],1),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.tasksVerification.canAdd("RequestUpdateBuildingDetails")?a("v-list-item",e._g({attrs:{to:"/Resource/Search/facility?searchAction=send-update-request"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-call-made")]),e._v(e._s(e.$t("App.menu.requestUpdateFacility.msg"))+" ")],1)],1):e._e()]}}])},[a("span",[e._v(e._s(e.$t("App.menu.requestUpdateFacility.tooltip")))])])],1)],1)]),a("li",{staticClass:"parent"},[a("a",{attrs:{href:"#"}},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-magnify")]),e._v(" "+e._s(e.$t("App.menu.search.msg"))+" "),a("v-icon",{staticClass:"menuArrow",attrs:{color:"black",small:""}},[e._v("mdi-play")])],1),a("ul",{staticClass:"child"},[e.tasksVerification.canAdd("AddFacility")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/Resource/Search/facility"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-magnify")]),e._v(e._s(e.$t("App.menu.searchFacility.msg"))+" ")],1)],1)]}}],null,!1,2203957888)},[a("span",[e._v(e._s(e.$t("App.menu.searchFacility.tooltip")))])])],1):e._e(),e.tasksVerification.canAdd("AddService")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/Resource/Search/service"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-magnify")]),e._v(e._s(e.$t("App.menu.searchService.msg"))+" ")],1)],1)]}}],null,!1,1542065888)},[a("span",[e._v(e._s(e.$t("App.menu.searchService.tooltip")))])])],1):e._e(),e.tasksVerification.canAdd("AddService")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/Resource/Search/facility-add-request/process-add-request"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-magnify")]),e._v(e._s(e.$t("App.menu.searchFacilityAddRequest.msg"))+" ")],1)],1)]}}],null,!1,3485559028)},[a("span",[e._v(e._s(e.$t("App.menu.searchFacilityAddRequest.tooltip")))])])],1):e._e(),e.tasksVerification.canAdd("AddService")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/Resource/Search/facility-update-request/process-update-request"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-magnify")]),e._v(e._s(e.$t("App.menu.searchFacilityUpdateRequest.msg"))+" ")],1)],1)]}}],null,!1,933363556)},[a("span",[e._v(e._s(e.$t("App.menu.searchFacilityUpdateRequest.tooltip")))])])],1):e._e()],1)]),a("li",{staticClass:"parent"},[a("a",{attrs:{href:"#"}},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-format-list-bulleted-square")]),e._v(" "+e._s(e.$t("App.menu.facilityRegReports.msg"))+" "),a("v-icon",{staticClass:"menuArrow",attrs:{color:"black",small:""}},[e._v("mdi-play")])],1),a("ul",{staticClass:"child"},[e.tasksVerification.canView("FacilitiesReport")?a("v-list",{staticClass:"lastMenu"},[a("v-list-item",{attrs:{to:"/FacilitiesReport"}},[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-format-list-bulleted-square")]),e._v(e._s(e.$t("App.menu.facilitiesReport.msg"))+" ")],1)],1)],1):e._e(),e.tasksVerification.canView("NewFacilitiesRequestsReport")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/NewFacilitiesRequestsReport"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-format-list-bulleted-square")]),e._v(e._s(e.$t("App.menu.newFacilitiesRequestsReport.msg"))+" ")],1)],1)]}}],null,!1,456695859)},[a("span",[e._v(e._s(e.$t("App.menu.newFacilitiesRequestsReport.tooltip")))])])],1):e._e(),e.tasksVerification.canView("FacilitiesUpdateRequestsReport")?a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-list-item",e._g({attrs:{to:"/FacilitiesUpdateRequestsReport"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-format-list-bulleted-square")]),e._v(e._s(e.$t("App.menu.facilitiesUpdateRequestsReport.msg"))+" ")],1)],1)]}}],null,!1,1404189171)},[a("span",[e._v(e._s(e.$t("App.menu.facilitiesUpdateRequestsReport.tooltip")))])])],1):e._e(),e.tasksVerification.canView("ServicesReport")?a("v-list",{staticClass:"lastMenu"},[a("v-list-item",{attrs:{to:"/ServicesReport"}},[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-format-list-bulleted-square")]),e._v(e._s(e.$t("App.menu.servicesReport.msg"))+" ")],1)],1)],1):e._e()],1)])],1)]),a("li",{staticClass:"parent"},[a("a",{attrs:{href:"#"}},[a("v-icon",[e._v("mdi-account-outline")]),e._v(e._s(e.$t("App.menu.account.msg"))+" ")],1),a("ul",{staticClass:"child"},[a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return["Admin"===e.$store.state.auth.role?a("v-list-item",e._g({attrs:{to:"/addUser"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-account-outline")]),e._v(e._s(e.$t("App.menu.addUser.msg"))+" ")],1)],1):e._e()]}}])},[a("span",[e._v(e._s(e.$t("App.menu.addUser.tooltip")))])])],1),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return["Admin"===e.$store.state.auth.role?a("v-list-item",e._g({attrs:{to:"/usersList"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-account-outline")]),e._v(e._s(e.$t("App.menu.usersList.msg"))+" ")],1)],1):e._e()]}}])},[a("span",[e._v(e._s(e.$t("App.menu.usersList.tooltip")))])])],1),a("v-list",{staticClass:"lastMenu"},[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return["Admin"===e.$store.state.auth.role?a("v-list-item",e._g({attrs:{to:"/rolesManagement"}},r),[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-account-outline")]),e._v(e._s(e.$t("App.menu.rolesManagement.msg"))+" ")],1)],1):e._e()]}}])},[a("span",[e._v(e._s(e.$t("App.menu.rolesManagement.tooltip")))])])],1),a("v-list",{staticClass:"lastMenu"},[a("v-list-item",{attrs:{to:"/changePassword"}},[a("v-list-item-title",{staticClass:"menuText"},[a("v-icon",{attrs:{left:"",color:"black"}},[e._v("mdi-account-outline")]),e._v(e._s(e.$t("App.menu.changePassword.msg"))+" ")],1)],1)],1)],1)]),a("li",{staticClass:"parent"},[e.$store.state.denyAccess?e._e():a("v-list-item",{staticClass:"newClass",attrs:{to:"/configure"}},[a("v-list-item-title",[a("v-icon",[e._v("mdi-cog")]),e._v(" "+e._s(e.$t("App.menu.configure.msg"))+" ")],1)],1)],1),a("li",{staticClass:"parent"},[e.$store.state.denyAccess||e.$store.state.config.generalConfig.authDisabled?e._e():a("v-list-item",{staticClass:"newClass",attrs:{to:"/logout"}},[a("v-list-item-title",[a("v-icon",[e._v("mdi-logout")]),e._v(" "+e._s(e.$t("App.menu.logout.msg"))+" ")],1)],1)],1)])},v=[],p=(a("d3b7"),a("2f62")),h=(a("3ca3"),a("ddb0"),a("8c4f")),f=a("2b27"),g=a.n(f),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("center",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}}),a("v-flex",{attrs:{xs6:""}},[a("v-alert",{attrs:{type:"error",value:e.authStatus}},[e._v(" Authentication Failed ")])],1)],1),a("v-card",{attrs:{width:"430px",hover:""}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{color:"white"},attrs:{color:"primary"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs2:"","text-xs-left":""}},[a("v-icon",{attrs:{"x-large":"",color:"white"}},[e._v("mdi-lock")])],1),a("v-flex",{attrs:{xs9:"","text-xs-right":""}},[a("b",[e._v("Login")])])],1)],1)],1),a("v-card-text",[a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.usernameErrors,filled:"",color:"deep-purple",label:"Username"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.authenticate()},blur:function(t){return e.$v.username.$touch()},change:function(t){return e.$v.username.$touch()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,filled:"",type:"password",color:"deep-purple",label:"Password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.authenticate()},blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-card-actions",[a("v-toolbar",[e.$store.state.config.generalConfig.selfRegistration.enabled?a("v-btn",{attrs:{color:"primary"},on:{click:e.displaySignup}},[e._v("Signup")]):e._e(),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"primary",depressed:""},on:{click:function(t){return e.authenticate()}}},[e._v("Login")])],1)],1)],1)],1)],1)},y=[],b=a("b5ae"),x=a("9612"),_={validations:{username:{required:b["required"]},password:{required:b["required"]}},data:function(){return{username:"",password:"",authStatus:!1,signupEnabled:!1}},methods:{authenticate:function(){var e=this,t=new FormData;t.append("username",this.username),t.append("password",this.password),u.a.post("/authenticate/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.$store.state.auth.token=t.data.token,e.$store.state.auth.username=e.username,e.$store.state.auth.userID=t.data.userID,e.$store.state.auth.role=t.data.role,e.$store.state.auth.tasks=t.data.tasks,g.a.config("30d"),g.a.set("token",e.$store.state.auth.token,"infinity"),g.a.set("userID",e.$store.state.auth.userID,"infinity"),g.a.set("role",e.$store.state.auth.role,"infinity"),g.a.set("tasks",JSON.stringify(e.$store.state.auth.tasks),"infinity"),g.a.set("username",e.$store.state.auth.username,"infinity"),e.$store.state.auth.role=t.data.role,t.data.token?(e.$store.state.clientId=x["a"].v4(),e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,Fs.$emit("getConfig")):e.authStatus=!0})).catch((function(e){e.hasOwnProperty("response")&&console.log(e.response.data.error)}))},displaySignup:function(){this.$router.push({name:"Signup"})}},computed:{usernameErrors:function(){var e=[];return this.$v.username.$dirty?(!this.$v.username.required&&e.push("Username is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e}},created:function(){var e=this;u.a.get("/getSignupConf").then((function(t){t.data&&(e.signupEnabled=!0,e.$store.state.signupFields=t.data.allSignupFields,e.$store.state.customSignupFields=t.data.customSignupFields,g.a.set("signupFields",t.data.allSignupFields,"infinity"),g.a.set("customSignupFields",t.data.customSignupFields,"infinity"))}))},beforeCreate:function(){this.$store.state.config.generalConfig.authDisabled&&(this.$store.state.clientId=x["a"].v4(),this.$store.state.initializingApp=!0,this.$store.state.denyAccess=!1,this.$router.push({name:"DHIS2Auth"}))}},S=_,$=a("2877"),k=a("6544"),w=a.n(k),C=a("0798"),D=a("8336"),P=a("b0af"),T=a("99d9"),A=a("a523"),I=a("0e8f"),R=a("4bd4"),F=a("132d"),V=a("a722"),O=a("2fa4"),L=a("8654"),M=a("71d9"),N=Object($["a"])(S,m,y,!1,null,null,null),E=N.exports;w()(N,{VAlert:C["a"],VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardText:T["c"],VCardTitle:T["d"],VContainer:A["a"],VFlex:I["a"],VForm:R["a"],VIcon:F["a"],VLayout:V["a"],VSpacer:O["a"],VTextField:L["a"],VToolbar:M["a"]});var q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}})},U=[],j={mounted:function(){this.$store.state.auth.token="",g.a.remove("token"),g.a.remove("userID"),g.a.remove("role"),g.a.remove("username"),this.$router.push("login")}},H=j,B=Object($["a"])(H,q,U,!1,null,null,null),W=B.exports;w()(B,{VContainer:A["a"]});var G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-alert",{staticStyle:{width:"900px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-alert",{staticStyle:{width:"900px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"1500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",text:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Create Account")])],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.firstnameErrors,filled:"",color:"deep-purple",label:"First Name"},on:{blur:function(t){return e.$v.firstname.$touch()},change:function(t){return e.$v.firstname.$touch()}},model:{value:e.firstname,callback:function(t){e.firstname=t},expression:"firstname"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.surnameErrors,filled:"",color:"deep-purple",label:"Surname"},on:{blur:function(t){return e.$v.surname.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}})],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Middle Names"},model:{value:e.othername,callback:function(t){e.othername=t},expression:"othername"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.phoneErrors,filled:"",color:"deep-purple",label:"Phone"},on:{blur:e.validatePhone,change:e.validatePhone,input:e.validatePhone},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.emailErrors,filled:"",color:"deep-purple",label:"Email*"},on:{blur:e.validateEmail,change:e.validateEmail,input:e.validateEmail},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.usernameErrors,filled:"",color:"deep-purple",label:"Username"},on:{blur:function(t){return e.$v.username.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",filled:"",color:"deep-purple",label:"Password"},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.retype_passwordErrors,type:"password",filled:"",color:"deep-purple",label:"Re-type Password"},on:{blur:function(t){return e.$v.retype_password.$touch()},change:function(t){return e.$v.retype_password.$touch()}},model:{value:e.retype_password,callback:function(t){e.retype_password=t},expression:"retype_password"}})],1)],1)],1)],1),e._l(e.$store.state.customSignupFields,(function(t,r){return a("label",{key:r},[(t.required,a("v-text-field",{attrs:{required:"",filled:"",color:"deep-purple",label:t.display},model:{value:e.customFields[r],callback:function(t){e.$set(e.customFields,r,t)},expression:"customFields[name]"}}))],1)}))],2),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(t){return e.$refs.form.reset()}}},[a("v-icon",[e._v("mdi-close")]),e._v("Clear ")],1),a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:e.displayLogin}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-lock")]),e._v("Back To Login ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.signup()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("Add ")],1)],1)],1)],1),a("v-spacer")],1)],1)},J=[],z={validations:{username:{required:b["required"]},retype_password:{required:b["required"]},password:{required:b["required"]},firstname:{required:b["required"]},surname:{required:b["required"]},phone:{required:b["required"]},email:{required:b["required"]}},data:function(){return{firstname:"",othername:"",surname:"",phone:"",email:"",username:"",password:"",retype_password:"",customFields:[],phoneErrors:[],emailErrors:[],alertFail:!1,alertSuccess:!1,alertMsg:""}},methods:{validateEmail:function(){if(this.emailErrors=[],!this.email)return this.emailErrors.push("Email is required"),!1;var e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.test(this.email)?void 0:(this.emailErrors.push("Invalid Email"),!1)},validatePhone:function(){if(this.phoneErrors=[],!this.phone)return this.phoneErrors.push("Phone is required");var e=/^[+]?[\s./0-9]*[(]?[0-9]{1,4}[)]?[-\s./0-9]*$/g;return e.test(this.phone)?void 0:this.phoneErrors.push("Invalid phone number")},signup:function(){var e=this;this.password!==this.retype_password&&(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",this.$store.state.errorDescription="Password mismatch"),this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Creating Account";var t=new FormData;for(var a in t.append("firstName",this.firstname),t.append("otherName",this.othername),t.append("surname",this.surname),t.append("phone",this.phone),t.append("email",this.email),t.append("password",this.password),t.append("userName",this.username),this.$store.state.config.generalConfig.selfRegistration.requiresApproval&&t.append("status","Pending"),this.customFields)t.append(a,this.customFields[a]);u.a.post("/addUser/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var t=Object.keys(e.$v.$params),a=0,r=t;a<r.length;a++){var s=r[a];e.$v[s].$reset()}e.$refs.form.reset(),e.$store.state.dynamicProgress=!1,e.alertSuccess=!0,e.$store.state.config.generalConfig.selfRegistration.requiresApproval?e.alertMsg="Account created and waiting for approval, you will receive an email once approved":e.alertMsg="Account created successfully"})).catch((function(t){e.$store.state.dynamicProgress=!1,e.alertFail=!0,e.alertMsg="This account was not added, try different username",console.log(t.response.data.error)}))},displayLogin:function(){this.$router.push({name:"Login"})}},computed:{codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},firstnameErrors:function(){var e=[];return this.$v.firstname.$dirty?(!this.$v.firstname.required&&e.push("First Name is required"),e):e},surnameErrors:function(){var e=[];return this.$v.surname.$dirty?(!this.$v.surname.required&&e.push("Surname is required"),e):e},usernameErrors:function(){var e=[];return this.$v.username.$dirty?(!this.$v.username.required&&e.push("Username is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e},retype_passwordErrors:function(){var e=[];return this.$v.retype_password.$dirty?(!this.$v.retype_password.required&&e.push("Re-type Password"),e):e}},created:function(){this.$store.state.signupFields=g.a.get("signupFields"),this.$store.state.customSignupFields=g.a.get("customSignupFields")}},Y=z,K=a("ce7e"),X=a("afd9"),Z=Object($["a"])(Y,G,J,!1,null,null,null),Q=Z.exports;w()(Z,{VAlert:C["a"],VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardTitle:T["d"],VContainer:A["a"],VDivider:K["a"],VFlex:I["a"],VForm:R["a"],VIcon:F["a"],VLayout:V["a"],VSpacer:O["a"],VSystemBar:X["a"],VTextField:L["a"],VToolbar:M["a"]});var ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.autoDisableSingleDatasourceDialog,callback:function(t){e.autoDisableSingleDatasourceDialog=t},expression:"autoDisableSingleDatasourceDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v(" Disabling Single Data Source Limit ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.autoDisableSingleDatasource("cancel")}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" Disabling limiting reconciliation to be done against one choosen data source will also disable the single data source limit, click OK to proceed ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){return e.autoDisableSingleDatasource("cancel")}}},[e._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){return e.autoDisableSingleDatasource("ok")}}},[e._v("Ok")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"620px"},model:{value:e.defineSuperuserRole,callback:function(t){e.defineSuperuserRole=t},expression:"defineSuperuserRole"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" DHIS2 superuser role that can be an administrator of GOFR ")])],1),a("v-card-text",[a("v-select",{attrs:{label:"Superuser Role Name","item-text":"displayName","item-value":"id",loading:e.loadingDhis2Roles,required:"",items:e.dhis2Roles},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.adminRole,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"adminRole",t)},expression:"$store.state.config.generalConfig.externalAuth.adminRole"}})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",disabled:!e.$store.state.config.generalConfig.externalAuth.adminRole||0===e.dhis2Roles.length},on:{click:function(t){return e.saveConfiguration("generalConfig","authDisabled")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(" Save ")],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"800px"},model:{value:e.selectDatasourceDialog,callback:function(t){e.selectDatasourceDialog=t},expression:"selectDatasourceDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Select datasource to fix source 2 ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchDatasource,callback:function(t){e.searchDatasource=t},expression:"searchDatasource"}}),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeDatasourceDialog(t)}}},[a("v-icon",[e._v("mdi-close")])],1)],1),e._v(" This lists only those datasets that have been shared to all users "),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.dataSourceHeaders,items:e.sharedToAllDatasets,dark:"",search:e.searchDatasource},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.fixSource2To,callback:function(t){e.fixSource2To=t},expression:"fixSource2To"}},[a("td",[a("v-radio",{attrs:{value:r._id,color:"blue"}})],1)]),a("td",[e._v(e._s(r.name))]),a("td",[e._v(e._s(r.userID.userName))]),a("td",[e._v(" "+e._s(r.createdTime)+" ")])],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},on:{click:e.closeDatasourceDialog}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v(" Cancel ")],1),a("v-spacer"),a("v-btn",{attrs:{color:"primary",disabled:!e.fixSource2To||0===e.sharedToAllDatasets.length},on:{click:e.savefixSource2To}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(" Save ")],1)],1)],1)],1),a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("b",[e._v("System Configurations")])]),a("v-card-text",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" User Configurations ")]),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-switch",{attrs:{color:"primary",label:"Apply user defined headers when reconciling"},on:{change:function(t){return e.saveConfiguration("userConfig","useCSVHeader")}},model:{value:e.$store.state.config.userConfig.reconciliation.useCSVHeader,callback:function(t){e.$set(e.$store.state.config.userConfig.reconciliation,"useCSVHeader",t)},expression:"$store.state.config.userConfig.reconciliation.useCSVHeader"}})],1)],1)],1)],1),a("v-divider"),a("v-divider"),a("v-divider"),"Admin"==e.$store.state.auth.role?a("v-card",[a("v-card-title",[e._v(" Admin Configurations ")]),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",{scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.$store.state.config.generalConfig.reconciliation.fixSource2?[e._v(" Source2 Limited To: "),a("v-chip",[e._v(e._s(e.fixedSource2To))]),a("v-tooltip",{attrs:{top:""}},[a("v-btn",e._g({attrs:{fab:"",dark:"",color:"primary",small:""},on:{click:e.displayDatasourceDialog}},r),[a("v-icon",{attrs:{dark:""}},[e._v("mdi-format-list-bulleted")])],1),a("span",[e._v("Change dataset")])],1)]:e._e()]}}],null,!1,1188442032)},[a("v-switch",{attrs:{color:"primary",label:"Perform match based on parent constraint"},on:{change:function(t){return e.saveConfiguration("generalConfig","parentConstraint")}},model:{value:e.$store.state.config.generalConfig.reconciliation.parentConstraint.enabled,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation.parentConstraint,"enabled",t)},expression:"$store.state.config.generalConfig.reconciliation.parentConstraint.enabled"}}),e.$store.state.config.generalConfig.reconciliation.parentConstraint.enabled?e._e():a("v-card",{staticStyle:{"margin-left":"100px"},attrs:{color:"grey lighten-3"}},[a("v-checkbox",{attrs:{color:"primary",label:"Automatch By ID",disabled:""},on:{change:function(t){return e.saveConfiguration("generalConfig","parConstrIdAuto")}},model:{value:e.$store.state.config.generalConfig.reconciliation.parentConstraint.idAutoMatch,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation.parentConstraint,"idAutoMatch",t)},expression:"$store.state.config.generalConfig.reconciliation.parentConstraint.idAutoMatch"}}),a("v-checkbox",{attrs:{color:"primary",label:"Automatch By Name (when parents differ)"},on:{change:function(t){return e.saveConfiguration("generalConfig","parConstrNameAuto")}},model:{value:e.$store.state.config.generalConfig.reconciliation.parentConstraint.nameAutoMatch,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation.parentConstraint,"nameAutoMatch",t)},expression:"$store.state.config.generalConfig.reconciliation.parentConstraint.nameAutoMatch"}})],1),a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Choose ways datasets can be added ")]),a("v-card-text",[a("v-checkbox",{attrs:{label:"CSV Upload",value:"CSV Upload"},on:{change:function(t){return e.checkDatasetsAdditionWays("upload")}},model:{value:e.$store.state.config.generalConfig.datasetsAdditionWays,callback:function(t){e.$set(e.$store.state.config.generalConfig,"datasetsAdditionWays",t)},expression:"$store.state.config.generalConfig.datasetsAdditionWays"}}),a("v-checkbox",{attrs:{label:"Remote Servers Sync",value:"Remote Servers Sync"},on:{change:function(t){return e.checkDatasetsAdditionWays("remote")}},model:{value:e.$store.state.config.generalConfig.datasetsAdditionWays,callback:function(t){e.$set(e.$store.state.config.generalConfig,"datasetsAdditionWays",t)},expression:"$store.state.config.generalConfig.datasetsAdditionWays"}})],1)],1),a("v-switch",{attrs:{color:"primary",label:"Allow non admin users to share datasets will all users"},on:{change:function(t){return e.saveConfiguration("generalConfig","allowShareToAllForNonAdmin")}},model:{value:e.$store.state.config.generalConfig.allowShareToAllForNonAdmin,callback:function(t){e.$set(e.$store.state.config.generalConfig,"allowShareToAllForNonAdmin",t)},expression:"$store.state.config.generalConfig.allowShareToAllForNonAdmin"}}),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-switch",e._g({attrs:{color:"primary",label:"Select a data source to serve as Source 2 for all reconciliation"},on:{change:e.displayDatasourceDialog},model:{value:e.$store.state.config.generalConfig.reconciliation.fixSource2,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation,"fixSource2",t)},expression:"$store.state.config.generalConfig.reconciliation.fixSource2"}},r))]}}],null,!1,2609954683)},[a("span",[e._v("This will limit users to perform reconciliations against the chosen data source")])]),a("v-switch",{attrs:{color:"primary",label:"Single data source per user"},on:{change:e.singleDatasource},model:{value:e.$store.state.config.generalConfig.reconciliation.singleDataSource,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation,"singleDataSource",t)},expression:"$store.state.config.generalConfig.reconciliation.singleDataSource"}}),e.$store.state.dhis.user.orgId?a("v-switch",{attrs:{color:"primary",label:"Single data source pair per org unit"},on:{change:function(t){return e.saveConfiguration("generalConfig","singlePair")}},model:{value:e.$store.state.config.generalConfig.reconciliation.singlePair,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation,"singlePair",t)},expression:"$store.state.config.generalConfig.reconciliation.singlePair"}}):e._e()],1),a("v-flex",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" GOFR Authentication ")]),a("v-card-text",[a("v-switch",{attrs:{color:"primary",label:"Disable Authentication"},on:{change:e.disableGOFRAuth},model:{value:e.$store.state.config.generalConfig.authDisabled,callback:function(t){e.$set(e.$store.state.config.generalConfig,"authDisabled",t)},expression:"$store.state.config.generalConfig.authDisabled"}}),e.$store.state.config.generalConfig.authDisabled?a("v-card",{staticStyle:{"margin-left":"100px"},attrs:{color:"grey lighten-3"}},[e._v(" External Authentication Method "),a("v-radio-group",{on:{change:function(t){return e.saveConfiguration("generalConfig","useDhis2Auth")}},model:{value:e.$store.state.config.generalConfig.authMethod,callback:function(t){e.$set(e.$store.state.config.generalConfig,"authMethod",t)},expression:"$store.state.config.generalConfig.authMethod"}},[a("v-radio",{attrs:{label:"dhis2",value:"dhis2",disabled:""}}),a("v-radio",{attrs:{label:"iHRIS",value:"iHRIS",disabled:""}})],1),a("v-select",{staticStyle:{width:"350px"},attrs:{label:"Superuser Role Name","item-text":"displayName","item-value":"id",loading:e.loadingDhis2Roles,required:"",items:e.dhis2Roles},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.adminRole,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"adminRole",t)},expression:"$store.state.config.generalConfig.externalAuth.adminRole"}}),e.$store.state.config.generalConfig.authMethod?a("v-checkbox",{attrs:{label:"Pull org units"},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.pullOrgUnits,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"pullOrgUnits",t)},expression:"$store.state.config.generalConfig.externalAuth.pullOrgUnits"}}):e._e(),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-checkbox",{attrs:{label:"Share orgs with other users"},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.shareOrgUnits,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"shareOrgUnits",t)},expression:"$store.state.config.generalConfig.externalAuth.shareOrgUnits"}}):e._e(),e.$store.state.config.generalConfig.externalAuth.shareOrgUnits&&e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-checkbox",{attrs:{label:"Limit orgs sharing by user orgid"},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.shareByOrgId,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"shareByOrgId",t)},expression:"$store.state.config.generalConfig.externalAuth.shareByOrgId"}}):e._e(),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",label:"Dataset Name","error-messages":e.datasetNameErrors,required:""},on:{blur:e.ensureNameUnique,input:e.ensureNameUnique},model:{value:e.$store.state.config.generalConfig.externalAuth.datasetName,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"datasetName",t)},expression:"$store.state.config.generalConfig.externalAuth.datasetName"}}):e._e(),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",label:"Username",required:""},model:{value:e.$store.state.config.generalConfig.externalAuth.userName,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"userName",t)},expression:"$store.state.config.generalConfig.externalAuth.userName"}}):e._e(),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",label:"Password",type:"password",required:""},model:{value:e.$store.state.config.generalConfig.externalAuth.password,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"password",t)},expression:"$store.state.config.generalConfig.externalAuth.password"}}):e._e(),a("v-flex",{attrs:{xs3:""}},[e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-btn",{attrs:{color:"primary",disabled:e.datasetNameErrors.length>0||!e.$store.state.config.generalConfig.externalAuth.datasetName,small:"",round:""},on:{click:e.pullOrgUnits}},[e._v("start pulling")]):e._e()],1)],1):e._e()],1)],1)],1),a("v-divider"),a("v-flex",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Self Registration ")]),a("v-card-text",[a("v-switch",{attrs:{color:"primary",label:"Enable self registration"},on:{change:function(t){return e.saveConfiguration("generalConfig","selfRegistration")}},model:{value:e.$store.state.config.generalConfig.selfRegistration.enabled,callback:function(t){e.$set(e.$store.state.config.generalConfig.selfRegistration,"enabled",t)},expression:"$store.state.config.generalConfig.selfRegistration.enabled"}}),e.$store.state.config.generalConfig.selfRegistration.enabled?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs3:""}},[a("v-treeview",{attrs:{items:e.signupFields}})],1),a("v-spacer"),a("v-flex",{attrs:{xs8:""}},[a("v-btn",{attrs:{small:"",round:"",color:"primary"},on:{click:function(t){e.moreFields=!e.moreFields}}},[e._v("Add More Fields")]),e.moreFields?a("v-text-field",{attrs:{label:"Field Label"},model:{value:e.fieldLabel,callback:function(t){e.fieldLabel=t},expression:"fieldLabel"}}):e._e(),e.moreFields?a("v-text-field",{attrs:{label:"Unique Name"},model:{value:e.fieldName,callback:function(t){e.fieldName=t},expression:"fieldName"}}):e._e(),e.moreFields?a("v-select",{attrs:{items:e.requiredText,label:"Required"},model:{value:e.required,callback:function(t){e.required=t},expression:"required"}}):e._e(),e.moreFields?a("v-btn",{attrs:{color:"info",small:""},on:{click:e.addMoreFields}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(" Save ")],1):e._e(),e.moreFields?a("v-btn",{attrs:{color:"error",small:""},on:{click:function(t){e.moreFields=!1}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-close")]),e._v(" Cancel ")],1):e._e()],1)],1):e._e(),a("v-switch",{attrs:{color:"primary",label:"Requires Admin Approval Of Self Registration"},on:{change:function(t){return e.saveConfiguration("generalConfig","selfRegistration")}},model:{value:e.$store.state.config.generalConfig.selfRegistration.requiresApproval,callback:function(t){e.$set(e.$store.state.config.generalConfig.selfRegistration,"requiresApproval",t)},expression:"$store.state.config.generalConfig.selfRegistration.requiresApproval"}})],1)],1)],1),a("v-divider"),a("v-flex",{attrs:{xs1:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Cron Jobs ")]),a("v-card-text",[e._v(" Autosync Below Remote Datasets "),a("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",name:"cron_time",label:"Cron Time"},on:{blur:function(t){return e.saveConfiguration("generalConfig","datasetsAutosyncTime")}},model:{value:e.$store.state.config.generalConfig.datasetsAutosyncTime,callback:function(t){e.$set(e.$store.state.config.generalConfig,"datasetsAutosyncTime",t)},expression:"$store.state.config.generalConfig.datasetsAutosyncTime"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.cronDataSourceHeaders,items:e.remoteDatasets,"hide-default-footer":"","pagination.sync":"pagination"},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.name))]),a("td",[e._v(e._s(r.userID.userName))]),a("td",[e._v(" "+e._s(r.createdTime)+" ")]),a("td",[a("v-switch",{attrs:{color:"primary"},on:{change:function(t){return e.controlDatasetsCronjobs(r)}},model:{value:e.datasetsAutosyncState[r._id],callback:function(t){e.$set(e.datasetsAutosyncState,r._id,t)},expression:"datasetsAutosyncState[item._id]"}})],1)])]}}],null,!1,191319843)})],1)],1)],1),a("v-flex",{attrs:{xs1:""}},[a("v-card",{attrs:{color:"grey lighten-3"}},[a("v-card-text",[e._v(" SMTP Configuration For Email Notifications ")]),a("v-card-actions",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-text-field",{attrs:{label:"SMTP Host",filled:""},model:{value:e.smtp.host,callback:function(t){e.$set(e.smtp,"host",t)},expression:"smtp.host"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"SMTP Port",filled:""},model:{value:e.smtp.port,callback:function(t){e.$set(e.smtp,"port",t)},expression:"smtp.port"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"SMTP Username",filled:""},model:{value:e.smtp.username,callback:function(t){e.$set(e.smtp,"username",t)},expression:"smtp.username"}})],1),a("v-flex",[a("v-text-field",{attrs:{type:"password",label:"SMTP Password",autocomplete:"new-password",filled:""},model:{value:e.smtp.password,callback:function(t){e.$set(e.smtp,"password",t)},expression:"smtp.password"}})],1),a("v-flex",[a("v-switch",{attrs:{color:"primary",label:"SMTP Secured"},model:{value:e.smtp.secured,callback:function(t){e.$set(e.smtp,"secured",t)},expression:"smtp.secured"}})],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs1:""}},[a("v-btn",{attrs:{color:"primary"},on:{click:e.saveSMTP}},[a("v-icon",[e._v("mdi-content-save")]),e._v("Save ")],1)],1)],1)],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs1:""}},[a("v-switch",{attrs:{color:"primary",label:"Enable Endpoint Notification when reconciliation is done"},on:{change:function(t){return e.saveConfiguration("generalConfig","recoProgressNotification")}},model:{value:e.$store.state.config.generalConfig.recoProgressNotification.enabled,callback:function(t){e.$set(e.$store.state.config.generalConfig.recoProgressNotification,"enabled",t)},expression:"$store.state.config.generalConfig.recoProgressNotification.enabled"}}),e.$store.state.config.generalConfig.recoProgressNotification.enabled?a("v-card",{staticStyle:{"margin-left":"100px"},attrs:{color:"grey lighten-3"}},[a("v-card-text",[e._v(" End point to send notification when reconciliation is done ")]),a("v-card-actions",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-text-field",{attrs:{label:"End point URL",box:""},model:{value:e.notification_endpoint,callback:function(t){e.notification_endpoint=t},expression:"notification_endpoint"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"End point Username",box:""},model:{value:e.notification_username,callback:function(t){e.notification_username=t},expression:"notification_username"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"End point Password",box:""},model:{value:e.notification_password,callback:function(t){e.notification_password=t},expression:"notification_password"}})],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs1:""}},[a("v-btn",{attrs:{color:"primary"},on:{click:e.recoProgressNotificationChanged}},[a("v-icon",[e._v("mdi-content-save")]),e._v("Save ")],1)],1)],1)],1)],1)],1)],1):e._e()],1)],1)],1)],1):e._e()],1)],1),a("appRemoteSync",{attrs:{syncType:"dhisSync",serverName:e.$store.state.config.generalConfig.externalAuth.datasetName,userID:e.$store.state.auth.userID,sourceOwner:e.$store.state.auth.userID,mode:"full"}})],1)},te=[],ae=a("2909"),re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("app-syncProgress",{attrs:{syncProgrIndeter:e.syncProgrIndeter,syncStatus:e.syncStatus,syncProgrPercent:e.syncProgrPercent,syncPercent:e.syncPercent}})],1)},se=[],oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.syncProgrIndeter,callback:function(t){e.syncProgrIndeter=t},expression:"syncProgrIndeter"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" "+e._s(e.syncStatus)+" "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"270"},model:{value:e.syncProgrPercent,callback:function(t){e.syncProgrPercent=t},expression:"syncProgrPercent"}},[a("v-card",{attrs:{color:"white",dark:""}},[a("v-card-text",[a("center",[a("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.syncStatus))]),a("br"),a("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.syncPercent,color:"primary"}},[a("v-avatar",{attrs:{color:"indigo",size:"50px"}},[a("span",{staticClass:"white--text"},[a("b",[e._v(e._s(e.syncPercent)+"%")])])])],1)],1)],1)],1)],1)],1)},ie=[],ne={props:["syncProgrIndeter","syncStatus","syncProgrPercent","syncPercent"]},le=ne,ce=a("8212"),ue=a("169a"),de=a("490a"),ve=a("8e36"),pe=Object($["a"])(le,oe,ie,!1,null,null,null),he=pe.exports;w()(pe,{VAvatar:ce["a"],VCard:P["a"],VCardText:T["c"],VContainer:A["a"],VDialog:ue["a"],VProgressCircular:de["a"],VProgressLinear:ve["a"]});var fe=Object({NODE_ENV:"production",VUE_APP_BACKEND_SERVER:"http://localhost:8082/gofr",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/"}).BACKEND_SERVER,ge={props:["syncType","serverName","userID","sourceOwner","mode"],data:function(){return{syncProgrIndeter:!1,syncStatus:"Waiting for sync status",syncPercent:null,syncProgrPercent:!1,syncProgressTimer:"",syncRunning:!1}},methods:{sync:function(){var e=this,t=this.mode;t||(t="full");var a=new FormData,r=this.$store.state.clientId;a.append("name",this.serverName),a.append("userID",this.userID),a.append("sourceOwner",this.sourceOwner),a.append("clientId",r),a.append("mode",t),this.syncRunning=!0,this.syncProgrIndeter=!0,u.a.post(fe+"/"+this.syncType+"/",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.syncProgressTimer=setInterval(e.checkSyncProgress,1e3)})).catch((function(t){e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.response.data.error+". cross check host,user and password",clearInterval(e.syncProgressTimer),console.log(t.response.data.error)}))},checkSyncProgress:function(){var e,t=this,a=this.$store.state.clientId;"dhisSync"===this.syncType?e="dhisSyncRequest":"fhirSync"===this.syncType&&(e="fhirSyncRequest"),u.a.get(fe+"/progress/"+e+"/"+a).then((function(e){return null===e.data||void 0===e.data||!1===e.data?(t.$store.state.uploadRunning=!1,t.syncProgrIndeter=!1,t.syncProgrPercent=!1,void clearInterval(t.syncProgressTimer)):null!==e.data.error?(t.$store.state.uploadRunning=!1,t.syncProgrIndeter=!1,t.syncProgrPercent=!1,t.$store.state.dialogError=!0,t.$store.state.errorTitle="Error",t.$store.state.errorDescription=e.data.error,clearInterval(t.syncProgressTimer),void console.log(e.data.error)):null===e.data.status?(t.$store.state.uploadRunning=!1,t.syncProgrIndeter=!1,t.syncProgrPercent=!1,void clearInterval(t.syncProgressTimer)):(t.syncStatus=e.data.status,e.data.percent&&(t.syncProgrPercent||(t.syncProgrIndeter=!1,t.syncProgrPercent=!0),t.syncPercent=e.data.percent),void("Done"===e.data.status&&(t.syncStatus="Waiting for sync status",clearInterval(t.syncProgressTimer),t.syncProgrPercent=!1,t.$store.state.uploadRunning=!1,Fs.$emit("getDataSources"))))})).catch((function(e){t.$store.state.dialogError=!0,t.$store.state.errorTitle="Error",console.log(e.response.data.error+". cross check host,user and password"),t.$store.state.errorDescription=e.response.data.error+". cross check host,user and password",clearInterval(t.syncProgressTimer)}))}},created:function(){Fs.$on("runRemoteSync",this.sync)},beforeDestroy:function(){Fs.$off("runRemoteSync",this.sync)},components:{appSyncProgress:he}},me=ge,ye=Object($["a"])(me,re,se,!1,null,null,null),be=ye.exports;w()(ye,{VContainer:A["a"]});a("a15b"),a("d81d"),a("159b");var xe={data:function(){return{roles:[],tasks:[]}},computed:{canAddDataset:function(){var e=this;if(this.$store.state.config.generalConfig.reconciliation.singleDataSource){var t,a=0,r=Object(n["a"])(this.$store.state.dataSources);try{var s=function(){var r=t.value;if(r._id===e.$store.state.config.generalConfig.reconciliation.fixSource2To)return"continue";var s=e.$store.state.auth.userID,o=e.$store.state.dhis.user.orgId,i=r.shared.users.find((function(e){return e._id===s})),n=r.owner.id===s,l=!0===r.shareToAll.activated,c=!1;if(r.owner.orgId&&r.owner.orgId===o&&(c=!0),!n&&!i&&!l&&!c)return"continue";a++};for(r.s();!(t=r.n()).done;)s()}catch(o){r.e(o)}finally{r.f()}return!(a>=1)||(this.datasetLimitWarn=!0,!1)}return!0}},methods:{getCodeSystem:function(e,t){u.a.get("/FR/getCodeSystem",{params:{codeSystemType:e}}).then((function(e){return t(null,e.data)})).catch((function(e){return console.log(e),t(e,null)}))},getTree:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0;u.a.get("/FR/getTree",{params:{includeBuilding:e,recursive:t}}).then((function(e){if(e.data){var t=!1;return a(t,e.data)}})).catch((function(e){return a(e,[])}))},clearProgress:function(e){u.a.get("/clearProgress/"+e+"/"+this.$store.state.clientId)},getGeneralConfig:function(e){var t=this,a=JSON.stringify(this.$store.state.config.generalConfig);u.a.get("/getGeneralConfig?defaultGenerConfig="+a).then((function(a){return a&&(t.$store.state.config.generalConfig=a.data),e()})).catch((function(){return e()}))},toTitleCase:function(e){return e.toLowerCase().split(" ").map((function(e){return e.replace(e[0],e[0].toUpperCase())})).join("").toLowerCase()},translateDataHeader:function(e,t){var a=this.$store.state.config.userConfig.reconciliation.useCSVHeader,r=this.$store.state.levelMapping;if(!a||a&&r[e]["level"+t]==="level"+t)return"Level "+t;if(Object.keys(this.$store.state.levelMapping[e]).length>0){var s,o=this.$store.state.levelMapping[e],i=1;for(var n in o)0===n.indexOf("level")&&i++;"source1"===e&&(s=this.$store.state.totalSource1Levels),"source2"===e&&(s=this.$store.state.totalSource2Levels),s--;var l=i-s;t+=l;var c=this.$store.state.levelMapping[e]["level"+t];return c&&"null"!==c&&"undefined"!==c&&"false"!==c?c:this.$store.state.levelMapping[e]["facility"]}return"Level "+t},getActiveDataSourcePair:function(){var e,t=this,a={};return this.$store.state.dataSourcePairs.forEach((function(r){r.userID._id===t.$store.state.auth.userID&&"active"===r.status&&(a=r),Object.keys(a).length>0?e=void 0:r.userID._id!==t.$store.state.auth.userID&&-1!==r.shared.activeUsers.indexOf(t.$store.state.auth.userID)&&(e=r)})),e&&(a=e),a},getDatasourceOwner:function(){var e={source1Owner:"",source2Owner:""};return this.$store.state.activePair.source1.hasOwnProperty("userID")&&(e.source1Owner=this.$store.state.activePair.source1.userID),this.$store.state.activePair.source2.hasOwnProperty("userID")&&(e.source2Owner=this.$store.state.activePair.source2.userID),e},getLimitOrgIdOnActivePair:function(){var e=this,t={source1LimitOrgId:"",source2LimitOrgId:""},a=this.$store.state.dataSources.find((function(t){return t._id===e.$store.state.activePair.source1.id})),r=this.$store.state.dataSources.find((function(t){return t._id===e.$store.state.activePair.source2.id}));if(a&&a.hasOwnProperty("userID")&&a.userID._id!==this.$store.state.auth.userID){var s=a.sharedLocation.find((function(t){return t.user===e.$store.state.auth.userID}));s?t.source1LimitOrgId=s.location:a.shareToAll.activated&&a.shareToAll.limitByUserLocation&&(t.source1LimitOrgId=this.$store.state.dhis.user.orgId,t.source1LimitOrgId||(t.source1LimitOrgId="undefined"))}if(r&&r.hasOwnProperty("userID")&&r.userID._id!==this.$store.state.auth.userID){var o=r.sharedLocation.find((function(t){return t.user===e.$store.state.auth.userID}));o?t.source2LimitOrgId=o.location:r.shareToAll.activated&&r.shareToAll.limitByUserLocation&&(t.source2LimitOrgId=this.$store.state.dhis.user.orgId,t.source2LimitOrgId||(t.source2LimitOrgId="undefined"))}return t},getLimitOrgIdOnDataSource:function(e){var t,a=this;if(e&&e.hasOwnProperty("userID")&&e.userID._id!==this.$store.state.auth.userID){var r=e.sharedLocation.find((function(e){return e.user===a.$store.state.auth.userID}));r?t=r.location:e.shareToAll.activated&&e.shareToAll.limitByUserLocation&&(t=this.$store.state.dhis.user.orgId,t||(t="undefined"))}return t},getRoles:function(){var e=this;u.a.get("/getRoles").then((function(t){var a,r=Object(n["a"])(t.data);try{for(r.s();!(a=r.n()).done;){var s=a.value;e.roles.push({text:s.name,value:s._id,tasks:s.tasks})}}catch(o){r.e(o)}finally{r.f()}})).catch((function(e){console.log(e.response)}))},getTasks:function(){var e=this;u.a.get("/getTasks").then((function(t){e.tasks=t.data})).catch((function(e){console.log(e.response)}))},saveConfiguration:function(e,t){var a,r=this,s=this.$store.state.auth.userID,o=new FormData;o.append("config",JSON.stringify(this.$store.state.config)),o.append("userID",s),a="generalConfig"===e?"/updateGeneralConfig":"/updateUserConfig",u.a.post(a,o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){"useCSVHeader"===t&&Fs.$emit("changeCSVHeaderNames"),"authDisabled"===t&&r.$router.push({name:"Logout"})}))},setDHIS2Credentials:function(){this.$store.state.auth.token="";var e=location.href.split("api");return!(e.length<2)&&(this.$store.state.dhis.host=location.href.split("api").shift(),u.a.defaults.params={authDisabled:!0},!0)}}},_e={mixins:[xe],validations:{facility:{required:b["required"]},code:{required:b["required"]},uploadName:{required:b["required"]}},data:function(){return{smtp:{host:"",port:"",username:"",password:"",secured:!0},autoDisableSingleDatasourceDialog:!1,selectDatasourceDialog:!1,fixSource2To:"",searchDatasource:"",dataSourceHeaders:[{sortable:!1},{text:"Source Name",align:"left",value:"name"},{text:"Owner",value:"owner",sortable:!1},{text:"Created Time",value:"createdTime"}],cronDataSourceHeaders:[{text:"Source Name",align:"left",value:"name"},{text:"Owner",value:"owner",sortable:!1},{text:"Created Time",value:"createdTime"},{text:"Enabled",value:"enabled"}],datasetsAutosyncState:{},useCSVHeader:!1,moreFields:!1,fieldLabel:"",fieldName:"",required:"No",requiredText:["Yes","No"],signupFields:[],notification_endpoint:"",notification_username:"",notification_password:"",dhis2Roles:[],loadingDhis2Roles:!1,datasetNameErrors:[],defineSuperuserRole:!1}},methods:{controlDatasetsCronjobs:function(e){var t=new FormData;t.append("id",e._id),t.append("enabled",this.datasetsAutosyncState[e._id]),u.a.post("/updateDatasetAutosync",t)},checkDatasetsAdditionWays:function(e){var t;0===this.$store.state.config.generalConfig.datasetsAdditionWays.length?(this.$store.state.errorTitle="Cant disable both ways",this.$store.state.errorDescription="There must be atleast one way of adding a dataset",this.$store.state.dialogError=!0,"remote"===e?t="Remote Servers Sync":"upload"===e&&(t="CSV Upload"),this.$store.state.config.generalConfig.datasetsAdditionWays.push(t)):this.saveConfiguration("generalConfig","datasetsAdditionWays")},autoDisableSingleDatasource:function(e){"ok"===e?(this.$store.state.config.generalConfig.reconciliation.singleDataSource=!1,this.saveConfiguration("generalConfig","fixSource2"),this.saveConfiguration("generalConfig","singleDataSource")):"cancel"===e&&(this.$store.state.config.generalConfig.reconciliation.fixSource2=!0),this.autoDisableSingleDatasourceDialog=!1},singleDatasource:function(){var e=this;this.$store.state.config.generalConfig.reconciliation.singleDataSource?this.$store.state.config.generalConfig.reconciliation.fixSource2To&&this.$store.state.config.generalConfig.reconciliation.fixSource2?this.saveConfiguration("generalConfig","singleDataSource"):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",this.$store.state.errorColor="error",this.$store.state.errorDescription="This feature can only be enabled if there is a defined datasource to serve as Source 2 for all reconciliation",setTimeout((function(){e.$store.state.config.generalConfig.reconciliation.singleDataSource=!1}))):this.saveConfiguration("generalConfig","singleDataSource")},displayDatasourceDialog:function(){!0===this.$store.state.config.generalConfig.reconciliation.fixSource2?(this.fixSource2To=this.$store.state.config.generalConfig.reconciliation.fixSource2To,this.selectDatasourceDialog=!0,this.saveConfiguration("generalConfig","fixSource2")):this.$store.state.config.generalConfig.reconciliation.singleDataSource?this.autoDisableSingleDatasourceDialog=!0:this.saveConfiguration("generalConfig","fixSource2")},closeDatasourceDialog:function(){this.selectDatasourceDialog=!1,this.$store.state.config.generalConfig.reconciliation.fixSource2To||(this.$store.state.config.generalConfig.reconciliation.fixSource2=!1,this.saveConfiguration("generalConfig","fixSource2"))},savefixSource2To:function(){this.$store.state.config.generalConfig.reconciliation.fixSource2To=this.fixSource2To,this.saveConfiguration("generalConfig","fixSource2To"),this.selectDatasourceDialog=!1},disableGOFRAuth:function(){var e=this;if(this.$store.state.config.generalConfig.authDisabled){if(this.$store.state.config.generalConfig.authDisabled){var t=this.setDHIS2Credentials();if(!t)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",this.$store.state.errorColor="error",this.$store.state.errorDescription="App doesnt appear to be running inside DHIS2, cant disable authentication",void setTimeout((function(){e.$store.state.config.generalConfig.authDisabled=!1}));this.loadingDhis2Roles=!0,this.getDHIS2Roles((function(t){e.loadingDhis2Roles=!1,e.dhis2Roles=Object(ae["a"])(t.data.userRoles)})),this.defineSuperuserRole=!0}}else this.saveConfiguration("generalConfig","authDisabled")},recoProgressNotificationChanged:function(){this.$store.state.config.generalConfig.hasOwnProperty("recoProgressNotification")||(this.$store.state.config.generalConfig.recoProgressNotification={}),this.$store.state.config.generalConfig.recoProgressNotification.url=this.notification_endpoint,this.$store.state.config.generalConfig.recoProgressNotification.username=this.notification_username,this.$store.state.config.generalConfig.recoProgressNotification.password=this.notification_password,this.saveConfiguration("generalConfig")},saveSMTP:function(){var e=this,t=new FormData;this.$store.state.progressTitle="Saving SMTP",this.$store.state.dynamicProgress=!0,t.append("host",this.smtp.host),t.append("port",this.smtp.port),t.append("username",this.smtp.username),t.append("password",this.smtp.password),t.append("secured",this.smtp.secured),u.a.post("/saveSMTP",t,t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorColor="primary",e.$store.state.errorTitle="Info",e.$store.state.errorDescription="SMTP saved successfully"})).catch((function(t){console.log(t),e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorColor="error",e.$store.state.errorTitle="Error",e.$store.state.errorDescription="SMTP failed to be saved"}))},addMoreFields:function(){var e=this;this.$store.state.progressTitle="Saving field",this.$store.state.dynamicProgress=!0;var t=this.signupFields[0].children.find((function(t){return t.id===e.fieldName}));if(t)this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",this.$store.state.errorDescription="Field name must be unique";else{var a,r=new FormData;a="Yes"===this.required,r.append("fieldName",this.fieldName),r.append("fieldLabel",this.fieldLabel),r.append("fieldRequired",a),r.append("form","signup"),u.a.post("/addFormField",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Info",e.$store.state.errorDescription="Field added successfully",e.$store.state.signupFields[e.fieldName]={type:"String",display:e.fieldLabel},e.$store.state.customSignupFields[e.fieldName]={type:"String",display:e.fieldLabel},g.a.set("signupFields",e.$store.state.signupFields,"infinity"),g.a.set("customSignupFields",e.$store.state.customSignupFields,"infinity"),e.signupFields[0].children.push({id:e.fieldName,name:e.fieldLabel}),e.fieldName="",e.fieldLabel="",e.required="No"}))}},pullOrgUnits:function(){this.saveConfiguration("generalConfig","externalAuth");var e=new FormData;e.append("host",this.$store.state.dhis.host),e.append("sourceType","DHIS2"),e.append("source","syncServer"),e.append("shareToAll",this.$store.state.config.generalConfig.externalAuth.shareOrgUnits),e.append("limitByUserLocation",this.$store.state.config.generalConfig.externalAuth.shareByOrgId),e.append("username",this.$store.state.config.generalConfig.externalAuth.userName),e.append("password",this.$store.state.config.generalConfig.externalAuth.password),e.append("name",this.$store.state.config.generalConfig.externalAuth.datasetName),e.append("userID",this.$store.state.auth.userID),u.a.post("/addDataSource",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){Fs.$emit("runRemoteSync")}))},getDHIS2Roles:function(e){var t=this.$store.state.dhis.dev.auth;""===t.username&&(t=""),u.a.get(this.$store.state.dhis.host+"api/userRoles",{auth:t}).then((function(t){e(t)}))},ensureNameUnique:function(){if(this.datasetNameErrors=[],""===this.$store.state.config.generalConfig.externalAuth.datasetName)return this.datasetNameErrors.push("Dataset name is required");var e,t=Object(n["a"])(this.$store.state.dataSources);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a.name===this.uploadName)return this.datasetNameErrors.push("This Name Exists"),!1}}catch(r){t.e(r)}finally{t.f()}}},created:function(){var e=this;for(var t in u.a.get("/getSMTP").then((function(t){t&&t.data&&(e.smtp.host=t.data.host,e.smtp.port=t.data.port,e.smtp.username=t.data.username,e.smtp.password=t.data.password,e.smtp.secured=t.data.secured)})).catch((function(t){console.log(t),e.$store.state.dialogError=!0,e.$store.state.errorColor="error",e.$store.state.errorTitle="Error",e.$store.state.errorDescription="An error occured while getting SMTP config"})),this.$store.state.config.generalConfig.authDisabled&&"dhis2"===this.$store.state.config.generalConfig.authMethod&&(this.loadingDhis2Roles=!0,this.getDHIS2Roles((function(t){e.loadingDhis2Roles=!1,e.dhis2Roles=Object(ae["a"])(t.data.userRoles)}))),this.signupFields.push({id:"signupFields",name:"Self Registration Fields",children:[]}),this.$store.state.signupFields)this.signupFields[0].children.push({id:t,name:t});this.$store.state.config.generalConfig.hasOwnProperty("recoProgressNotification")&&(this.notification_endpoint=this.$store.state.config.generalConfig.recoProgressNotification.url,this.notification_username=this.$store.state.config.generalConfig.recoProgressNotification.username,this.notification_password=this.$store.state.config.generalConfig.recoProgressNotification.password);var a,r=Object(n["a"])(this.$store.state.dataSources);try{for(r.s();!(a=r.n()).done;){var s=a.value;"syncServer"===s.source&&(s.enableAutosync?this.datasetsAutosyncState[s._id]=!0:this.datasetsAutosyncState[s._id]=!1)}}catch(o){r.e(o)}finally{r.f()}},computed:{fixedSource2To:function(){var e,t="",a=Object(n["a"])(this.$store.state.dataSources);try{for(a.s();!(e=a.n()).done;){var r=e.value;r._id===this.$store.state.config.generalConfig.reconciliation.fixSource2To&&(t=r)}}catch(s){a.e(s)}finally{a.f()}return t.name},sharedToAllDatasets:function(){var e,t=[],a=Object(n["a"])(this.$store.state.dataSources);try{for(a.s();!(e=a.n()).done;){var r=e.value;r.shareToAll.activated,t.push(r)}}catch(s){a.e(s)}finally{a.f()}return t},remoteDatasets:function(){var e,t=[],a=Object(n["a"])(this.$store.state.dataSources);try{for(a.s();!(e=a.n()).done;){var r=e.value;"syncServer"===r.source&&t.push(r)}}catch(s){a.e(s)}finally{a.f()}return t}},beforeCreate:function(){if(this.$store.state.config.generalConfig.hasOwnProperty("authMethod")||this.$set(this.$store.state.config.generalConfig,"authMethod","dhis2"),!this.$store.state.config.generalConfig.hasOwnProperty("externalAuth")){var e={pullOrgUnits:!0,shareOrgUnits:!1,shareByOrgId:!1,datasetName:"",adminRole:""};this.$set(this.$store.state.config.generalConfig,"externalAuth",e)}},components:{appRemoteSync:be}},Se=_e,$e=a("ac7c"),ke=a("cc20"),we=a("8fea"),Ce=a("67b6"),De=a("43a6"),Pe=a("b974"),Te=a("b73d"),Ae=a("2a7f"),Ie=a("3a2f"),Re=a("eb2a"),Fe=Object($["a"])(Se,ee,te,!1,null,null,null),Ve=Fe.exports;w()(Fe,{VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardText:T["c"],VCardTitle:T["d"],VCheckbox:$e["a"],VChip:ke["a"],VContainer:A["a"],VDataTable:we["a"],VDialog:ue["a"],VDivider:K["a"],VFlex:I["a"],VIcon:F["a"],VLayout:V["a"],VProgressLinear:ve["a"],VRadio:Ce["a"],VRadioGroup:De["a"],VSelect:Pe["a"],VSpacer:O["a"],VSwitch:Te["a"],VTextField:L["a"],VToolbar:M["a"],VToolbarTitle:Ae["b"],VTooltip:Ie["a"],VTreeview:Re["a"]});var Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{persistent:"",overlay:!1,"max-width":"500px",transition:"dialog-transition"},model:{value:e.approveUserDialog,callback:function(t){e.approveUserDialog=t},expression:"approveUserDialog"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-spacer"),a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.approveUserDialog=!1}}},[e._v("mdi-close")])],1),a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" User "+e._s(e.user.userName)+" ")]),a("v-card-text",[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{x5:""}},[e._v(" "+e._s(e.user.firstName)+" ")]),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[e._v(" "+e._s(e.user.surname)+" ")])],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{x5:""}},[e._v(" "+e._s(e.user.phone)+" ")]),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[e._v(" "+e._s(e.user.email)+" ")])],1)],1),a("v-flex",[a("v-select",{attrs:{required:"",items:e.roles,"single-line":"",clearable:"","error-messages":e.roleErrors,filled:"",label:"Role"},on:{blur:function(t){return e.$v.role.$touch()},change:function(t){return e.$v.role.$touch()}},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}})],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},on:{click:function(t){return e.changeStatus("Rejected")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v("Reject ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.changeStatus("Active")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-check-circle")]),e._v("Approve ")],1)],1)],1)],1),a("center",[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v(" "+e._s(e.alertMsg)+" ")])],1),a("v-card",{staticClass:"mx-auto",attrs:{color:"cyan lighten-5",width:"1500px"}},[a("v-card-title",{attrs:{"primary-title":"",width:"1000"}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v(" Users List "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUsers,callback:function(t){e.searchUsers=t},expression:"searchUsers"}})],1)],1),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.usersHeader,items:e.users,search:e.searchUsers,dark:"",loading:e.$store.state.loadingusers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("td",[e._v(e._s(r.firstName))]),a("td",[e._v(e._s(r.surname))]),a("td",[e._v(e._s(r.otherName))]),a("td",[e._v(e._s(r.phone))]),a("td",[e._v(e._s(r.email))]),a("td",[e._v(e._s(r.userName))]),r.role?a("td",[e._v(e._s(r.role.name))]):a("td"),a("td",[e._v(e._s(r.status))]),"Pending"===r.status||"Rejected"===r.status?a("td",[a("v-btn",{attrs:{color:"success",small:""},on:{click:function(t){return e.displayApprovalDialog(r)}}},[e._v("Approve/Reject")])],1):a("td",["Active"===r.status?a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(t){return e.accountAction("Inactive",r)}}},[e._v("Deactivate")]):a("v-btn",{attrs:{small:"",color:"success"},on:{click:function(t){return e.accountAction("Active",r)}}},[e._v("Activate")]),e._v(" | "),a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(t){return e.accountAction("reset",r)}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-refresh")]),e._v(" Reset Password ")],1)],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)],1)],1)},Le=[],Me={mixins:[xe],validations:{role:{required:b["required"]}},data:function(){return{usersHeader:[{text:"Firstname",value:"firstName"},{text:"Surname",value:"surname"},{text:"Othername",value:"otherName"},{text:"Phone",value:"phone"},{text:"Email",value:"email"},{text:"User Name",value:"username"},{text:"Role",value:"role"},{text:"Status",value:"status"}],users:[],user:{},role:"",approveUserDialog:!1,loadingUsers:!1,searchUsers:"",alertSuccess:!1,alertFail:!1,alertMsg:""}},methods:{displayApprovalDialog:function(e){this.user=e,this.approveUserDialog=!0},changeStatus:function(e){var t=this,a=new FormData;a.append("role",this.role),a.append("status",e),a.append("id",this.user._id),u.a.post("/processUserAccoutRequest/",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){t.approveUserDialog=!1,t.$store.state.errorTitle="Info",t.$store.state.errorDescription="This request was processed successfully",t.$store.state.dialogError=!0,t.getUsers()})).catch((function(e){t.approveUserDialog=!1,t.$store.state.errorTitle="Error",t.$store.state.errorDescription="An error occured while processing this request, please retry",t.$store.state.dialogError=!0,console.log(e.response.data.error)}))},getUsers:function(){var e=this,t=new FormData;t.append("username",this.username),t.append("password",this.password),this.users=[],this.loadingUsers=!0,u.a.get("/getUsers/").then((function(t){e.loadingUsers=!1,e.users=t.data})).catch((function(t){e.loadingUsers=!1,t.hasOwnProperty("response")&&console.log(t.response.data.error)}))},accountAction:function(e,t){var a=this,r=t._id,s=new FormData;s.append("id",r),"Active"===e||"Inactive"===e?(s.append("status",e),u.a.post("/changeAccountStatus",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){a.alertSuccess=!0,"Active"===e?a.alertMsg="Account activated successfully":"Inactive"===e&&(a.alertMsg="Account deactivated successfully"),a.getUsers()})).catch((function(e){console.log(JSON.stringify(e)),a.alertFail=!0,a.alertMsg="Action failed"}))):"reset"===e&&(s.append("surname",t.surname),u.a.post("/resetPassword",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){a.alertSuccess=!0,a.alertMsg="Password reseted successfully",a.getUsers()})).catch((function(e){console.log(JSON.stringify(e)),a.alertFail=!0,a.alertMsg="Action failed"})))}},computed:{roleErrors:function(){var e=[];return this.$v.role.$dirty?(!this.$v.role.required&&e.push("Role is required"),e):e}},created:function(){this.getUsers(),this.getRoles()}},Ne=Me,Ee=Object($["a"])(Ne,Oe,Le,!1,null,null,null),qe=Ee.exports;w()(Ee,{VAlert:C["a"],VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardText:T["c"],VCardTitle:T["d"],VContainer:A["a"],VDataTable:we["a"],VDialog:ue["a"],VFlex:I["a"],VIcon:F["a"],VLayout:V["a"],VProgressLinear:ve["a"],VSelect:Pe["a"],VSpacer:O["a"],VTextField:L["a"],VToolbar:M["a"]});var Ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Add New User")])],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.firstnameErrors,filled:"",color:"deep-purple",label:"First Name*"},on:{blur:function(t){return e.$v.firstName.$touch()},change:function(t){return e.$v.firstName.$touch()}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Middle Names"},model:{value:e.otherName,callback:function(t){e.otherName=t},expression:"otherName"}}),a("v-text-field",{attrs:{required:"","error-messages":e.surnameErrors,filled:"",color:"deep-purple",label:"Surname*"},on:{blur:function(t){return e.$v.surname.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}}),a("v-text-field",{attrs:{required:"","error-messages":e.phoneErrors,filled:"",color:"deep-purple",label:"Phone*"},on:{blur:e.validatePhone,change:e.validatePhone,input:e.validatePhone},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),a("v-text-field",{attrs:{required:"","error-messages":e.emailErrors,filled:"",color:"deep-purple",label:"Email*"},on:{blur:e.validateEmail,change:e.validateEmail,input:e.validateEmail},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{required:"","error-messages":e.usernameErrors,filled:"",color:"deep-purple",label:"Username*"},on:{blur:function(t){return e.$v.userName.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),e._l(e.$store.state.customSignupFields,(function(t,r){return a("label",{key:r},[(t.required,a("v-text-field",{attrs:{required:"",filled:"",color:"deep-purple",label:t.display},model:{value:e.customFields[r],callback:function(t){e.$set(e.customFields,r,t)},expression:"customFields[name]"}}))],1)})),a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",filled:"",color:"deep-purple",label:"Password*"},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{required:"","error-messages":e.retype_passwordErrors,type:"password",filled:"",color:"deep-purple",label:"Re-type Password*"},on:{blur:function(t){return e.$v.retype_password.$touch()},change:function(t){return e.$v.retype_password.$touch()}},model:{value:e.retype_password,callback:function(t){e.retype_password=t},expression:"retype_password"}}),a("v-select",{attrs:{required:"",items:e.roles,"single-line":"",clearable:"","error-messages":e.roleErrors,filled:"",label:"Role*"},on:{blur:function(t){return e.$v.role.$touch()},change:function(t){return e.$v.role.$touch()}},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}})],2),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[a("v-icon",[e._v("mdi-close")]),e._v("Clear ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addUser()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-web")]),e._v("Add ")],1)],1)],1)],1),a("v-spacer")],1)],1)},je=[],He={mixins:[xe],validations:{userName:{required:b["required"]},retype_password:{required:b["required"]},password:{required:b["required"]},role:{required:b["required"]},firstName:{required:b["required"]},surname:{required:b["required"]},phone:{required:b["required"]},email:{required:b["required"]}},data:function(){return{firstName:"",otherName:"",surname:"",phone:"",email:"",userName:"",password:"",retype_password:"",role:"",customFields:[],phoneErrors:[],emailErrors:[]}},methods:{validateEmail:function(){if(this.emailErrors=[],!this.email)return this.emailErrors.push("Email is required"),!1;var e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.test(this.email)?void 0:(this.emailErrors.push("Invalid Email"),!1)},validatePhone:function(){if(this.phoneErrors=[],!this.phone)return this.phoneErrors.push("Phone is required");var e=/^[+]?[\s./0-9]*[(]?[0-9]{1,4}[)]?[-\s./0-9]*$/g;return e.test(this.phone)?void 0:this.phoneErrors.push("Invalid phone number")},addUser:function(){var e=this;if(this.password!==this.retype_password)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",void(this.$store.state.errorDescription="Password mismatch");this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Saving User";var t=new FormData;for(var a in t.append("firstName",this.firstName),t.append("otherName",this.otherName),t.append("password",this.password),t.append("userName",this.userName),t.append("surname",this.surname),t.append("phone",this.phone),t.append("email",this.email),t.append("role",this.role),this.customFields)t.append(a,this.customFields[a]);u.a.post("/addUser/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="User added successfully",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1})).catch((function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="This user was not added, ensure userName is not used",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t.response.data.error)}))}},computed:{codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},firstnameErrors:function(){var e=[];return this.$v.firstName.$dirty?(!this.$v.firstName.required&&e.push("First Name is required"),e):e},surnameErrors:function(){var e=[];return this.$v.surname.$dirty?(!this.$v.surname.required&&e.push("Surname is required"),e):e},usernameErrors:function(){var e=[];return this.$v.userName.$dirty?(!this.$v.userName.required&&e.push("Username is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e},retype_passwordErrors:function(){var e=[];return this.$v.retype_password.$dirty?(!this.$v.retype_password.required&&e.push("Re-type Password"),e):e},roleErrors:function(){var e=[];return this.$v.role.$dirty?(!this.$v.role.required&&e.push("Role is required"),e):e}},created:function(){this.getRoles()}},Be=He,We=Object($["a"])(Be,Ue,je,!1,null,null,null),Ge=We.exports;w()(We,{VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardTitle:T["d"],VContainer:A["a"],VDivider:K["a"],VFlex:I["a"],VForm:R["a"],VIcon:F["a"],VLayout:V["a"],VSelect:Pe["a"],VSpacer:O["a"],VSystemBar:X["a"],VTextField:L["a"],VToolbar:M["a"]});var Je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[e._v(" Select role to edit tasks "),a("v-select",{attrs:{required:"",items:e.roles,"single-line":"",filled:"",label:"Select Role"},on:{change:e.roleSelected}}),e.role.value?a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Tasks assigned to role "+e._s(e.role.text)+" ")]),a("v-card-text",[a("v-data-table",{attrs:{items:e.tasks,height:"10px","hide-default-footer":""},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[a("v-checkbox",{attrs:{value:r._id},model:{value:e.role.tasks,callback:function(t){e.$set(e.role,"tasks",t)},expression:"role.tasks"}})],1),a("td",[e._v(e._s(r.display))])])]}}],null,!1,1926502652)})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:e.saveRole}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(" Save ")],1)],1)],1):e._e()],1)},ze=[],Ye={mixins:[xe],data:function(){return{role:{},task:""}},methods:{roleSelected:function(e){this.role=this.roles.find((function(t){return t.value===e}))},saveRole:function(){var e=this;this.$store.state.progressTitle="Updating role",this.$store.state.dynamicProgress=!0;var t=new FormData;t.append("role",JSON.stringify(this.role)),u.a.post("/updateRole",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Info",e.$store.state.errorColor="primary",e.$store.state.errorDescription="Role ".concat(e.role.text," updated successfully"),e.getRoles()})).catch((function(t){e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorColor="error",e.$store.state.errorDescription="An error has occured while updating role ".concat(e.role.text),console.log(t)}))}},created:function(){this.getRoles(),this.getTasks()}},Ke=Ye,Xe=Object($["a"])(Ke,Je,ze,!1,null,null,null),Ze=Xe.exports;w()(Xe,{VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardText:T["c"],VCardTitle:T["d"],VCheckbox:$e["a"],VContainer:A["a"],VDataTable:we["a"],VIcon:F["a"],VSelect:Pe["a"],VSpacer:O["a"]});var Qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",filled:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Change Password")])],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.oldPasswordErrors,type:"password",filled:"",color:"deep-purple",label:"Old Password"},on:{blur:function(t){return e.$v.oldPassword.$touch()},change:function(t){return e.$v.oldPassword.$touch()}},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}}),a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",filled:"",color:"deep-purple",label:"Password"},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{required:"","error-messages":e.retype_passwordErrors,type:"password",filled:"",color:"deep-purple",label:"Re-type Password"},on:{blur:function(t){return e.$v.retype_password.$touch()},change:function(t){return e.$v.retype_password.$touch()}},model:{value:e.retype_password,callback:function(t){e.retype_password=t},expression:"retype_password"}})],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{filled:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[a("v-icon",[e._v("mdi-close")]),e._v("Clear ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.verifyPassword()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-find-replace")]),e._v("Change ")],1)],1)],1)],1),a("v-spacer")],1)],1)},et=[],tt={validations:{retype_password:{required:b["required"]},password:{required:b["required"]},oldPassword:{required:b["required"]}},data:function(){return{oldPassword:"",password:"",retype_password:""}},methods:{changePassword:function(){var e=this;if(this.password!==this.retype_password)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",void(this.$store.state.errorDescription="Password mismatch");this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Changing Password";var t=new FormData;t.append("password",this.password),t.append("id",this.$store.state.auth.userID),u.a.post("/changePassword/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="Password changed successfully!",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1})).catch((function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="Password change failed!",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t.response.data.error)}))},verifyPassword:function(){var e=this,t=new FormData;t.append("username",this.$store.state.auth.username),t.append("password",this.oldPassword),u.a.post("/authenticate/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){t.data.token?e.changePassword():(e.alertFail=!0,e.alertMsg="Wrong Old Password")})).catch((function(e){console.log(JSON.stringify(e))}))}},computed:{oldPasswordErrors:function(){var e=[];return this.$v.oldPassword.$dirty?(!this.$v.oldPassword.required&&e.push("Old Password is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e},retype_passwordErrors:function(){var e=[];return this.$v.retype_password.$dirty?(!this.$v.retype_password.required&&e.push("Re-type Password"),e):e}}},at=tt,rt=Object($["a"])(at,Qe,et,!1,null,null,null),st=rt.exports;w()(rt,{VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardTitle:T["d"],VContainer:A["a"],VDivider:K["a"],VFlex:I["a"],VForm:R["a"],VIcon:F["a"],VLayout:V["a"],VSpacer:O["a"],VSystemBar:X["a"],VTextField:L["a"],VToolbar:M["a"]});var ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" About this page ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" This page let you load data from various sources into the app for reconciliation "),a("v-list",[e._v("1. Select to add remote source if you have a DHIS2 or FHIR server that you want to use its data on this app")]),a("v-list",[e._v("2. Select Upload CSV if you have a CSV file and want to upload its data on the app")]),a("v-list",[e._v("3. The system requires CSV data to have atleast 2 levels above facility")]),a("v-list",[e._v("4. Level 1 is the highest level on the hierarchy i.e Country")]),a("v-list",[e._v(" 5. Base URL under remote sources section refer to the URL i.e http://localhost:3447/fhir and not http://localhost:3447/fhir/Location. Same applies to DHIS2 base URL ")])],1)],1)],1),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v(" Choose way to add data source ")]),a("v-spacer")],1),a("v-card-text",[a("v-radio-group",{attrs:{row:""},on:{change:e.sourceSelected},model:{value:e.dataSource,callback:function(t){e.dataSource=t},expression:"dataSource"}},[e.canUseUploadWay?a("v-radio",{attrs:{disabled:!e.canAddDataset,color:"primary",label:"Upload CSV",value:"upload"}}):e._e(),e.canUseRemoteWay?a("v-radio",{attrs:{disabled:!e.canAddDataset,color:"primary",label:"Remote Source",value:"remote"}}):e._e()],1)],1)],1)],1),a("v-spacer"),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){e.helpDialog=!0}}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}])},[a("span",[e._v("Help")])])],1),a("v-flex",{attrs:{xs12:""}},[e.addDataSource?a(e.selectedComponent,{tag:"component"}):e._e()],1)],1),a("appDialogs",{attrs:{datasetLimitWarn:e.datasetLimitWarn},on:{limitWarnStateChange:e.limitWarnStateChange}})],1)},it=[],nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Information ")])],1),a("v-card-text",[e._v(" Data uploaded successfully ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.closeDialog("FacilityReconView")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-format-list-bulleted-square")]),e._v(" View Data ")],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"1050px"},model:{value:e.invalidRows,callback:function(t){e.invalidRows=t},expression:"invalidRows"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-close-circle")]),e._v("Data Upload was not successful,review below invalid rows in your CSV ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeInvalidRows()}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.invalidRowsHeader,items:e.invalidRowsContent,light:""},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.invalidRowsHeader,(function(r){return a("td",{key:r.value},[e._v(e._s(t.item[r.value]))])}))}}])})],1)],1)],1),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.confirmUpload,callback:function(t){e.confirmUpload=t},expression:"confirmUpload"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Warning ")])],1),a("v-card-text",[e._v(" You are about to upload CSV data into the app, click proceed to upload ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.confirmUpload=!1}}},[e._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.performExtraCheck(t)}}},[e._v("Proceed")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.errorDialog,callback:function(t){e.errorDialog=t},expression:"errorDialog"}},[a("v-card",[a("v-card-title",[e._v(" "+e._s(e.errorTitle)+" ")]),a("v-card-text",[e._v(" "+e._s(e.errorContent)+" ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.errorDialog=!1}}},[e._v("Ok")])],1)],1)],1),a("v-dialog",{attrs:{transition:"scale-transition",persistent:"",width:"300"},model:{value:e.uploadPrepaProgr,callback:function(t){e.uploadPrepaProgr=t},expression:"uploadPrepaProgr"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" "+e._s(e.uploadStatus)+" "),e.fileUploadPercentage?a("v-progress-linear",{staticClass:"mb-0",attrs:{color:"white"},model:{value:e.fileUploadPercentage,callback:function(t){e.fileUploadPercentage=t},expression:"fileUploadPercentage"}}):a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("v-dialog",{attrs:{transition:"scale-transition",persistent:"",width:"270"},model:{value:e.percentDialog,callback:function(t){e.percentDialog=t},expression:"percentDialog"}},[a("v-card",{attrs:{color:"white",dark:""}},[a("v-card-text",[a("center",[a("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.uploadStatus))]),a("br"),a("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.uploadPercent,color:"primary"}},[a("v-avatar",{attrs:{color:"indigo",size:"50px"}},[a("span",{staticClass:"white--text"},[a("b",[e._v(e._s(e.uploadPercent)+"%")])])])],1)],1)],1)],1)],1),e.$store.state.denyAccess?e._e():a("v-slide-y-transition",{attrs:{mode:"out-in"}},[a("v-stepper",{model:{value:e.e1,callback:function(t){e.e1=t},expression:"e1"}},[a("v-stepper-header",[a("v-stepper-step",{attrs:{step:"1",complete:e.e1>1}},[e._v("Upload CSV")]),a("v-divider"),a("v-stepper-step",{attrs:{step:"2",complete:e.e1>2}},[e._v("Map Headers")]),a("v-btn",{attrs:{icon:""},nativeOn:{click:function(t){return e.closeUploadWindow()}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-stepper-items",[a("v-stepper-content",{attrs:{step:"1"}},[a("v-card",{staticClass:"mb-5"},[a("v-card-title",[e._v("Upload CSV (utf-8 only) - "),a("b",[e._v("Select a CSV file and upload")])]),a("v-card-text",[a("v-text-field",{attrs:{label:"Enter Unique Name For Your Data","error-messages":e.uploadNameErrors,required:""},on:{blur:e.ensureNameUnique,input:e.ensureNameUnique},model:{value:e.uploadName,callback:function(t){e.uploadName=t},expression:"uploadName"}}),a("input",{attrs:{type:"file"},on:{change:e.fileSelected}}),a("br"),a("br"),a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Advanced Options ")]),a("v-card-text",[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.$store.state.dhis.user.orgId?a("v-checkbox",e._g({attrs:{disabled:e.shareWithAll,color:"primary",label:"Share with other users of the same org unit as yours"},model:{value:e.shareToSameOrgid,callback:function(t){e.shareToSameOrgid=t},expression:"shareToSameOrgid"}},r)):e._e()]}}],null,!1,1162473824)},[a("span",[e._v(" Share this dataset with all other users that are on the same org unit as you ")])]),e.$store.state.config.generalConfig.allowShareToAllForNonAdmin||"Admin"===e.$store.state.auth.role?a("v-checkbox",{attrs:{color:"primary",label:"Share with all other users"},on:{change:e.sharingOptions},model:{value:e.shareWithAll,callback:function(t){e.shareWithAll=t},expression:"shareWithAll"}}):e._e(),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.shareWithAll&&e.$store.state.dhis.user.orgId?a("v-checkbox",e._g({attrs:{color:"primary",label:"Limit orgs sharing by user orgid"},model:{value:e.limitShareByOrgId,callback:function(t){e.limitShareByOrgId=t},expression:"limitShareByOrgId"}},r)):e._e()]}}],null,!1,1150100143)},[a("span",[e._v(" if activated, other users will see locations (including location children) that has the same location id as their location id ")])])],1)],1)],1)],1),e.uploadedFileName&&e.uploadName&&0===e.uploadNameErrors.length?a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.e1=2}}},[e._v("Continue")]):a("v-btn",{attrs:{color:"primary",disabled:""},nativeOn:{click:function(t){e.e1=2}}},[e._v("Continue")])],1),a("v-stepper-content",{attrs:{step:"2"}},[a("b",[e._v("Map an appropriate CSV header against those on the app.")]),a("v-layout",{ref:"form",attrs:{row:"",wrap:""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Facility*")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemFacility,"error-messages":e.facilityErrors,label:"Select",required:"","single-line":"",clearable:""},on:{blur:function(t){return e.$v.facility.$touch()},change:function(t){return e.$v.facility.$touch()}},model:{value:e.facility,callback:function(t){e.facility=t},expression:"facility"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Code*")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemCode,"error-messages":e.codeErrors,label:"Select",required:"","single-line":"",clearable:""},on:{blur:function(t){return e.$v.code.$touch()},change:function(t){return e.$v.code.$touch()}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Latitude")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLat,label:"Select","single-line":"",clearable:""},model:{value:e.lat,callback:function(t){e.lat=t},expression:"lat"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Longitude")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLong,label:"Select","single-line":"",clearable:""},model:{value:e.long,callback:function(t){e.long=t},expression:"long"}})],1),[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 1")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel1,label:"Select","single-line":"",clearable:""},model:{value:e.level1,callback:function(t){e.level1=t},expression:"level1"}})],1)],[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 2")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel2,label:"Select","single-line":"",clearable:""},model:{value:e.level2,callback:function(t){e.level2=t},expression:"level2"}})],1)],e.showLevel3?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 3")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel3,label:"Select","single-line":"",clearable:""},model:{value:e.level3,callback:function(t){e.level3=t},expression:"level3"}})],1)]:e._e(),e.showLevel4?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 4")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel4,label:"Select","single-line":"",clearable:""},model:{value:e.level4,callback:function(t){e.level4=t},expression:"level4"}})],1)]:e._e(),e.showLevel5?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 5")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel5,label:"Select","single-line":"",clearable:""},model:{value:e.level5,callback:function(t){e.level5=t},expression:"level5"}})],1)]:e._e(),e.showLevel6?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 6")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel6,label:"Select","single-line":"",clearable:""},model:{value:e.level6,callback:function(t){e.level6=t},expression:"level6"}})],1)]:e._e(),e.showLevel7?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v("Level 7")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel7,label:"Select","single-line":"",clearable:""},model:{value:e.level7,callback:function(t){e.level7=t},expression:"level7"}})],1)]:e._e()],2),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs1:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.showLevel7?e._e():a("v-btn",e._g({staticClass:"mx-14",attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:e.showMoreLevel}},r),[a("v-icon",{attrs:{dark:""}},[e._v(" mdi-plus ")])],1)]}}],null,!1,1697189859)},[a("span",[e._v("Add More Level")])])],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.e1=1}}},[e._v("Go Back")])],1),a("v-spacer"),a("v-flex",{attrs:{xs1:""}},[a("v-btn",{attrs:{color:"primary",disabled:e.$v.$invalid},nativeOn:{click:function(t){e.confirmUpload=!0}}},[e._v("Upload")])],1)],1)],1)],1)],1)],1)],1)},lt=[],ct=(a("fb6a"),a("07ac"),a("4de4"),{data:function(){return{name:"",host:"",username:"",password:"",sourceType:"",limitShareByOrgId:!1,shareWithAll:!1,shareToSameOrgid:!0,invalidCharacters:['"',"/","\\","."]}},methods:{sharingOptions:function(){this.shareWithAll&&(this.shareToSameOrgid=!1)},addDataSource:function(e){var t=this,a=new FormData,r=this.$store.state.clientId;a.append("host",this.host),a.append("sourceType",this.sourceType),a.append("source",e),a.append("orgId",this.$store.state.dhis.user.orgId),a.append("shareToSameOrgid",this.shareToSameOrgid),a.append("shareToAll",this.shareWithAll),a.append("limitByUserLocation",this.limitShareByOrgId),a.append("username",this.username),a.append("password",this.password),a.append("name",this.name),a.append("clientId",r),a.append("userID",this.$store.state.auth.userID);var s=this.$store.state.dataSources.find((function(e){return e.host===t.host}));u.a.post("/addDataSource",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){Fs.$emit("dataSourceSaved"),Fs.$emit("dataSourceAddedSuccessfully"),Fs.$emit("getDataSources"),s?(s.name=t.name,s.username=t.username,s.password=e.data.password,s.sourceType=t.sourceType):t.$store.state.dataSources.push({name:t.name,host:t.host,sourceType:t.sourceType,source:"syncServer",username:t.username,password:e.data.password})})).catch((function(e){console.log(e),Fs.$emit("remoteServerFailedAdd")}))}}}),ut={mixins:[ct,xe],data:function(){return{datasetLimitWarn:!1,errorDialog:!1,errorTitle:"",errorContent:"",dialog:!1,fileUploadPercentage:"",percentDialog:!1,uploadPrepaProgr:!1,UploadProgressTimer:"",uploadStatus:"1/3 Uploading CSV to the server",uploadPercent:null,uploadName:"",uploadNameErrors:[],confirmUpload:!1,confirmTitle:"",confirmMsg:"",file:"",uploadedFileName:"",e1:1,facility:null,code:null,lat:null,long:null,level1:null,level2:null,level3:null,level4:null,level5:null,level6:null,level7:null,showLevel3:!1,showLevel4:!1,showLevel5:!1,showLevel6:!1,showLevel7:!1,uploadedHeaders:[],mappedHeaders:[],invalidRowsHeader:[],invalidRowsContent:[],invalidRows:!1,valid:!1}},validations:{facility:{required:b["required"]},code:{required:b["required"]},uploadName:{required:b["required"]}},methods:{fileSelected:function(e){this.uploadedFileName=e.target.files[0]["name"],"text/csv"===e.target.files[0]["type"]||"application/vnd.ms-excel"===e.target.files[0]["type"]&&"csv"===e.target.files[0].name.slice(-3).toLowerCase()||(this.errorDialog=!0,this.errorTitle="Error",this.errorContent="Wrong file type uploaded,Only CSV format is supported",this.uploadedFileName=""),this.file=e.target.files[0];var t=new FileReader;t.addEventListener("load",function(){var e=t.result,a=e.split(/\r\n|\n/),r=a[0];this.uploadedHeaders=r.split(",")}.bind(this),!1),t.readAsText(e.target.files[0],"utf-8")},ensureNameUnique:function(){if(this.uploadNameErrors=[],""===this.uploadName)return this.uploadNameErrors.push("Upload name is required");if(this.uploadName.length>35)return this.uploadNameErrors.push("Name must not exceed 35 characters");var e,t=Object(n["a"])(this.invalidCharacters);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(-1!==this.uploadName.indexOf(a))return this.uploadNameErrors.push("Name is invalid")}}catch(i){t.e(i)}finally{t.f()}var r,s=Object(n["a"])(this.$store.state.dataSources);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(o.name.toLowerCase()===this.uploadName.toLowerCase())return this.uploadNameErrors.push("This Name Exists"),!1}}catch(i){s.e(i)}finally{s.f()}},confirmSubmit:function(){this.confirmUpload=!0},checkUploadProgress:function(){var e=this,t=this.$store.state.clientId;u.a.get("/progress/uploadProgress/"+t).then((function(t){return t.data&&(t.data.status||t.data.percent||t.data.error)?null!==t.data.error?(e.$store.state.uploadRunning=!1,e.uploadPrepaProgr=!1,e.percentDialog=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.data.error,void console.log(t.data.error)):(e.uploadStatus=t.data.status,t.data.percent&&(e.percentDialog||(e.uploadPrepaProgr=!1,e.percentDialog=!0),e.uploadPercent=t.data.percent),void("Done"===t.data.status||t.data.status>=100?(e.clearProgress("uploadProgress"),e.addDataSource("upload"),clearInterval(e.UploadProgressTimer),e.$store.state.recoLevel=2,e.percentDialog=!1,e.dialog=!0,e.$store.state.uploadRunning=!1):e.checkUploadProgress())):(e.$store.state.uploadRunning=!1,e.uploadPrepaProgr=!1,e.percentDialog=!1,e.$store.state.errorTitle="An error has occured",e.$store.state.errorDescription="You should delete this data source from view data source page then re-upload",e.$store.state.errorColor="error",void(e.$store.state.dialogError=!0))})).catch((function(t){console.log(t),e.checkUploadProgress()}))},performExtraCheck:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Performing extra validations",this.getGeneralConfig((function(){e.datasetLimitWarn=!1,e.$store.state.dynamicProgress=!1,e.canAddDataset?e.submitCSV():(e.confirmUpload=!1,e.datasetLimitWarn=!0)}))},submitCSV:function(){var e=this,t=new FormData;t.append("file",this.file),t.append("csvName",this.uploadName),t.append("facility",this.facility),t.append("code",this.code),t.append("lat",this.lat),t.append("long",this.long),t.append("level1",this.level1),t.append("level2",this.level2),t.append("level3",this.level3),t.append("level4",this.level4),t.append("level5",this.level5),t.append("level6",this.level6),t.append("level7",this.level7),t.append("clientId",this.$store.state.clientId),t.append("userID",this.$store.state.auth.userID),this.confirmUpload=!1,this.$store.state.uploadRunning=!0,this.uploadPrepaProgr=!0,this.host="",this.sourceType="upload",this.username="",this.password="",this.name=this.uploadName,u.a.post("/uploadCSV",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){this.fileUploadPercentage=parseInt(Math.round(100*e.loaded/e.total)),100===this.fileUploadPercentage&&(this.fileUploadPercentage="",this.uploadStatus="2/3 Validating CSV Data")}.bind(this)}).then((function(){e.checkUploadProgress()})).catch((function(t){if(Array.isArray(t.response.data.error)){e.invalidRows=!0;for(var a=0;a<t.response.data.error.length;a++){if(0===a){for(var r=Object.keys(t.response.data.error[a].data),s=0,o=r;s<o.length;s++){var i=o[s];e.invalidRowsHeader.push({text:i,value:i})}e.invalidRowsHeader.push({text:"Reason",value:"reason"})}var n=Object.values(t.response.data.error[a].data),l={};for(var c in n)l[e.invalidRowsHeader[c].value]=n[c];l["reason"]=t.response.data.error[a].reason,e.invalidRowsContent.push(l)}}else e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.response.data.error+". Reload page and retry";e.$store.state.uploadRunning=!1,e.uploadPrepaProgr=!1,e.percentDialog=!1,clearInterval(e.UploadProgressTimer)}))},closeInvalidRows:function(){this.invalidRows=!1,this.invalidRowsHeader=[],this.invalidRowsContent=[],this.e1=1},closeDialog:function(e){this.$router.push({name:e}),this.dialog=!1},closeUploadWindow:function(){Fs.$emit("dataSourceSaved")},showMoreLevel:function(){this.showLevel3?this.showLevel4?this.showLevel5?this.showLevel6?this.showLevel7||(this.showLevel7=!0):this.showLevel6=!0:this.showLevel5=!0:this.showLevel4=!0:this.showLevel3=!0}},computed:{facilityErrors:function(){var e=[];return this.$v.facility.$dirty?(!this.$v.facility.required&&e.push("Facility is required"),e):e},codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},filteredItemFacility:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemCode:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLat:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLong:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLevel1:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLevel2:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLevel3:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLevel4:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLevel5:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level6&&t!==e.level7}))},filteredItemLevel6:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level7}))},filteredItemLevel7:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6}))}},created:function(){this.$store.state.uploadProgressData.percentDialog&&(this.percentDialog=this.$store.state.uploadProgressData.percentDialog),this.$store.state.uploadProgressData.uploadPrepaProgr&&(this.uploadPrepaProgr=this.$store.state.uploadProgressData.uploadPrepaProgr),this.$store.state.uploadProgressData.UploadProgressTimer&&(this.UploadProgressTimer=this.$store.state.uploadProgressData.UploadProgressTimer),this.$store.state.uploadProgressData.uploadStatus&&(this.uploadStatus=this.$store.state.uploadProgressData.uploadStatus),this.$store.state.uploadProgressData.uploadPercent&&(this.uploadPercent=this.$store.state.uploadProgressData.uploadPercent)},destroyed:function(){this.$store.state.uploadProgressData.dialog=this.dialog,this.$store.state.uploadProgressData.percentDialog=this.percentDialog,this.$store.state.uploadProgressData.uploadPrepaProgr=this.uploadPrepaProgr,this.$store.state.uploadProgressData.UploadProgressTimer=this.UploadProgressTimer,this.$store.state.uploadProgressData.uploadStatus=this.uploadStatus,this.$store.state.uploadProgressData.uploadPercent=this.uploadPercent}},dt=ut,vt=(a("edb7"),a("0789")),pt=a("7e85"),ht=a("e516"),ft=a("9c54"),gt=a("56a4"),mt=a("e0c7"),yt=Object($["a"])(dt,nt,lt,!1,null,"358ac677",null),bt=yt.exports;w()(yt,{VAvatar:ce["a"],VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardText:T["c"],VCardTitle:T["d"],VCheckbox:$e["a"],VContainer:A["a"],VDataTable:we["a"],VDialog:ue["a"],VDivider:K["a"],VFlex:I["a"],VIcon:F["a"],VLayout:V["a"],VProgressCircular:de["a"],VProgressLinear:ve["a"],VSelect:Pe["a"],VSlideYTransition:vt["g"],VSpacer:O["a"],VStepper:pt["a"],VStepperContent:ht["a"],VStepperHeader:ft["a"],VStepperItems:ft["b"],VStepperStep:gt["a"],VSubheader:mt["a"],VTextField:L["a"],VToolbar:M["a"],VToolbarTitle:Ae["b"],VTooltip:Ie["a"]});var xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",text:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Add New Remote Source")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.close()}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-select",{attrs:{items:e.$store.state.remoteDataSources,required:"",label:"Source Type"},model:{value:e.sourceType,callback:function(t){e.sourceType=t},expression:"sourceType"}}),a("v-text-field",{attrs:{filled:"",required:"","error-messages":e.nameErrors,color:"deep-purple",label:"Source Name"},on:{blur:e.ensureNameUnique,input:e.ensureNameUnique},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-text-field",{attrs:{filled:"",required:"",color:"deep-purple",label:"Base URL"},model:{value:e.host,callback:function(t){e.host=t},expression:"host"}}),a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{staticStyle:{"min-height":"96px"},attrs:{filled:"",color:"deep-purple",label:"Password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),[a("v-tooltip",{attrs:{top:""}},[e.$store.state.dhis.user.orgId?a("v-checkbox",{attrs:{slot:"activator",disabled:e.shareWithAll,color:"primary",label:"Share with other users of the same org unit as yours"},slot:"activator",model:{value:e.shareToSameOrgid,callback:function(t){e.shareToSameOrgid=t},expression:"shareToSameOrgid"}}):e._e(),a("span",[e._v(" Share this dataset with all other users that are on the same org unit as you ")])],1),e.$store.state.config.generalConfig.allowShareToAllForNonAdmin||"Admin"===e.$store.state.auth.role?a("v-checkbox",{attrs:{color:"primary",label:"Share with all other users"},on:{change:e.sharingOptions},model:{value:e.shareWithAll,callback:function(t){e.shareWithAll=t},expression:"shareWithAll"}}):e._e(),a("v-tooltip",{attrs:{top:""}},[e.shareWithAll&&e.$store.state.dhis.user.orgId?a("v-checkbox",{attrs:{slot:"activator",color:"primary",label:"Limit orgs sharing by user orgid"},slot:"activator",model:{value:e.limitShareByOrgId,callback:function(t){e.limitShareByOrgId=t},expression:"limitShareByOrgId"}}):e._e(),a("span",[e._v(" if activated, other users will see locations (including location children) that has the same location id as their location id ")])],1)]],2),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:e.performExtraCheck}},[e._v(" Add ")])],1)],1)],1),a("v-spacer")],1)],1)},_t=[],St={mixins:[ct,xe],validations:{host:{required:b["required"]},name:{required:b["required"]},sourceType:{required:b["required"]}},data:function(){return{datasetLimitWarn:!1,nameErrors:[]}},methods:{close:function(){Fs.$emit("dataSourceSaved")},performExtraCheck:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Performing extra validations",this.getGeneralConfig((function(){e.datasetLimitWarn=!1,e.$store.state.dynamicProgress=!1,e.canAddDataset?e.addDataSource("syncServer"):e.datasetLimitWarn=!0}))},ensureNameUnique:function(){if(this.nameErrors=[],""===this.name)return this.nameErrors.push("Name is required");if(this.name.length>35)return this.nameErrors.push("Name must not exceed 35 characters");var e,t=Object(n["a"])(this.invalidCharacters);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(-1!==this.name.indexOf(a))return this.nameErrors.push("Name is invalid")}}catch(i){t.e(i)}finally{t.f()}var r,s=Object(n["a"])(this.$store.state.dataSources);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(o.name===this.name)return this.nameErrors.push("This Name Exists"),!1}}catch(i){s.e(i)}finally{s.f()}}}},$t=St,kt=Object($["a"])($t,xt,_t,!1,null,null,null),wt=kt.exports;w()(kt,{VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardTitle:T["d"],VCheckbox:$e["a"],VContainer:A["a"],VDivider:K["a"],VFlex:I["a"],VForm:R["a"],VIcon:F["a"],VLayout:V["a"],VSelect:Pe["a"],VSpacer:O["a"],VSystemBar:X["a"],VTextField:L["a"],VToolbar:M["a"],VTooltip:Ie["a"]});var Ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}},[a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"770px",transition:"dialog-transition"},model:{value:e.datasetLimit,callback:function(t){e.datasetLimit=t},expression:"datasetLimit"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("info")]),e._v(" Datasets limit Warning ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.datasetLimit=!1}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",[e._v(" You cant add more datasets as you have reached the datasets limit, contact system administrator for help ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.datasetLimit=!1}}},[e._v("Ok")])],1)],1)],1)],1)},Dt=[],Pt={props:["datasetLimitWarn"],computed:{datasetLimit:{get:function(){return this.datasetLimitWarn},set:function(e){this.$emit("limitWarnStateChange",e)}}}},Tt=Pt,At=Object($["a"])(Tt,Ct,Dt,!1,null,null,null),It=At.exports;w()(At,{VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardText:T["c"],VContainer:A["a"],VDialog:ue["a"],VIcon:F["a"],VSpacer:O["a"],VToolbar:M["a"],VToolbarTitle:Ae["b"]});var Rt={mixins:[xe],data:function(){return{helpDialog:!1,datasetLimitWarn:!1,selectedComponent:"",dataSources:[{text:"Upload CSV",value:"upload"},{text:"Remote Source",value:"remote"}],dataSource:"",addDataSource:!0,alertSuccess:!1,alertError:!1,alertMsg:""}},methods:{limitWarnStateChange:function(e){this.datasetLimitWarn=e},sourceSelected:function(e){this.addDataSource=!0,"upload"===e?this.selectedComponent="FacilityReconUpload":"remote"===e&&(this.selectedComponent="FacilityReconRemoteSources")}},computed:{canUseUploadWay:function(){return-1!==this.$store.state.config.generalConfig.datasetsAdditionWays.indexOf("CSV Upload")},canUseRemoteWay:function(){return-1!==this.$store.state.config.generalConfig.datasetsAdditionWays.indexOf("Remote Servers Sync")}},components:{FacilityReconUpload:bt,FacilityReconRemoteSources:wt,appDialogs:It},created:function(){var e=this;Fs.$on("dataSourceSaved",(function(){e.addDataSource=!1,e.dataSource=""})),Fs.$on("dataSourceAddedSuccessfully",(function(){e.alertSuccess=!0,e.alertMsg="Data Source Added Successfully",setTimeout((function(){e.alertSuccess=!1}),3e3)})),Fs.$on("remoteServerFailedAdd",(function(){e.alertError=!0,e.alertMsg="Data Source Failed To Be Added"}))}},Ft=Rt,Vt=a("8860"),Ot=Object($["a"])(Ft,ot,it,!1,null,null,null),Lt=Ot.exports;w()(Ot,{VAlert:C["a"],VBtn:D["a"],VCard:P["a"],VCardText:T["c"],VCardTitle:T["d"],VContainer:A["a"],VDialog:ue["a"],VFlex:I["a"],VIcon:F["a"],VLayout:V["a"],VList:Vt["a"],VRadio:Ce["a"],VRadioGroup:De["a"],VSpacer:O["a"],VToolbar:M["a"],VToolbarTitle:Ae["b"],VTooltip:Ie["a"]});var Mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{width:"630px"},model:{value:e.deleteConfirm,callback:function(t){e.deleteConfirm=t},expression:"deleteConfirm"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v(" This will delete the datasource "+e._s(e.server.name)+" from the database ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.deleteConfirm=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e.loadingPairs||e.pairs.length>0?a("label",[e._v(" Below data source pairs (mapping) will also be deleted "),a("v-data-table",{attrs:{headers:e.pairsHeaders,items:e.pairs,"hide-actions":"",loading:e.loadingPairs},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name)+" - "+e._s(t.item.source2Name))]),a("td",[e._v(e._s(t.item.owner))])]}}],null,!1,815489092)})],1):a("label",[e._v(" There is no any data source pair (mapping) associated with this data source"),a("br")]),a("br"),a("b",[e._v("Do you want to proceed and delete?")])]),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.deleteConfirm=!1}}},[e._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"success"},on:{click:e.deleteDataSource}},[e._v("Yes")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",{attrs:{width:"530px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Editing "+e._s(e.server.host)+" ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.editDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"Name",disabled:""},model:{value:e.server.name,callback:function(t){e.$set(e.server,"name",t)},expression:"server.name"}})],1),a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"Host"},model:{value:e.server.host,callback:function(t){e.$set(e.server,"host",t)},expression:"server.host"}})],1),a("v-flex",{attrs:{xs1:""}},[a("v-select",{attrs:{items:e.$store.state.remoteDataSources,label:"Source Type"},model:{value:e.server.sourceType,callback:function(t){e.$set(e.server,"sourceType",t)},expression:"server.sourceType"}})],1),a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"User Name"},model:{value:e.server.username,callback:function(t){e.$set(e.server,"username",t)},expression:"server.username"}})],1),a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"Password",type:"password"},model:{value:e.server.password,callback:function(t){e.$set(e.server,"password",t)},expression:"server.password"}})],1)],1)],1),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"error"},nativeOn:{click:function(t){e.editDialog=!1}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("cancel")]),e._v("Cancel ")],1),a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.saveEdit("match")}}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Save ")],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.shareDialog,callback:function(t){e.shareDialog=t},expression:"shareDialog"}},[a("v-card",{attrs:{width:"530px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Sharing "+e._s(e.shareSource.name)+" ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.shareDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",[e.loadingLocationTree?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("p",[a("liquor-tree",{ref:"locationTree",attrs:{data:e.locationTree,options:{}},on:{"node:selected":e.locationSelected}})],1)])],a("v-icon",{attrs:{small:""}},[e._v("lock")]),e._v(" Limiting Sharing to: "),a("b",[e._v(e._s(e.limitLocationName))]),a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUsers,callback:function(t){e.searchUsers=t},expression:"searchUsers"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.usersHeader,items:e.users,search:e.searchUsers,"item-key":"firstName"},scopedSlots:e._u([{key:"items",fn:function(t){return[t.item.userName!==e.$store.state.auth.username?a("tr",[a("td",[a("v-checkbox",{attrs:{value:t.item._id},model:{value:e.sharedUsers,callback:function(t){e.sharedUsers=t},expression:"sharedUsers"}})],1),a("td",[e._v(e._s(t.item.userName))]),a("td",[e._v(e._s(t.item.firstName))]),a("td",[e._v(e._s(t.item.surname))])]):e._e()]}}])})],2),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"error",disabled:e.loadingLocationTree},nativeOn:{click:function(t){e.shareDialog=!1}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("cancel")]),e._v("Cancel ")],1),a("v-spacer"),a("v-btn",{attrs:{color:"primary",disabled:e.loadingLocationTree},nativeOn:{click:function(t){return e.share("","saveShare")}}},[a("v-icon",{attrs:{left:""}},[e._v("share")]),e._v("Share ")],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" About this page ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" This page let you visualize various data sets you have added into the app as well as synchronize remote servers with the app "),a("v-list",[e._v("1. Use Force Full Sync to fetch all data from the remote server and update the app")]),a("v-list",[e._v("2. Use Sync (Update) to pull updated records from the remote server and update the app")]),a("v-list",[e._v("3. You may proceed to the 'Data Source Pair' page after you have added atleast two data sources")]),a("v-list",[e._v("4. You may come back to this page and add more sources at any time")])],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){e.helpDialog=!0}}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}])},[a("span",[e._v("Help")])])],1)],1),a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v(" "+e._s(e.alertMsg)+" ")])],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",[a("v-card",{attrs:{color:"cyan lighten-5"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v(" Remote Sources ")])],1),a("v-card-actions",[e.remoteServers.length>0?a("v-btn",{attrs:{color:"primary",rounded:""},on:{click:function(t){return e.sync("full")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-sync")]),e._v("Force Full Sync ")],1):a("v-btn",{attrs:{color:"primary",rounded:"",disabled:""},on:{click:function(t){return e.sync("full")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-sync")]),e._v("Force Full Sync ")],1),e.remoteServers.length>0?a("v-btn",{attrs:{color:"primary lighten-1",rounded:""},on:{click:function(t){return e.sync("update")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-sync")]),e._v("Sync (Update) ")],1):a("v-btn",{attrs:{color:"primary lighten-1",rounded:"",disabled:""},on:{click:function(t){return e.sync("update")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-sync")]),e._v("Sync (Update) ")],1),a("v-spacer"),e.remoteServers.length>0?a("v-btn",{attrs:{color:"success",rounded:""},on:{click:e.editDataSource}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-pencil")]),e._v("Edit ")],1):a("v-btn",{attrs:{color:"success",rounded:"",disabled:""},on:{click:e.editDataSource}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-pencil")]),e._v("Edit ")],1),e.remoteServers.length>0?a("v-btn",{attrs:{color:"error",rounded:""},on:{click:e.validateDelete}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v("Delete ")],1):a("v-btn",{attrs:{color:"error",rounded:"",disabled:""},on:{click:e.validateDelete}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v("Delete ")],1)],1),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.syncServersHeader,items:e.remoteServers,dark:"",loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.server,callback:function(t){e.server=t},expression:"server"}},[a("td",[a("v-radio",{attrs:{value:r,color:"blue"}})],1)]),a("td",[e._v(e._s(r.name))]),a("td",[e._v(e._s(r.host))]),a("td",[e._v(e._s(r.sourceType))]),a("td",[e._v(e._s(r.username))]),r.username?a("td",[e._v("*****")]):a("td"),a("td",[e._v(e._s(r.lastUpdate))]),a("td",[e._v(e._s(r.userID.userName))]),a("td",[e._v(" "+e._s(e._f("mergeUsers")(r.shared.users))+" ")]),a("td",[e._v(" "+e._s(r.createdTime)+" ")]),r.userID._id===e.$store.state.auth.userID?a("td",[a("v-btn",{attrs:{color:"success",flat:""},on:{click:function(t){return e.share(r,"showDialog")}}},[a("v-icon",[e._v("mdi-share-variant-outline")]),e._v(" Share ")],1)],1):e._e()],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v(" Uploaded Sources ")])],1),a("v-card-actions",[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.uploadedSources.length>0?a("v-btn",e._g({attrs:{color:"success",rounded:""},on:{click:e.exportCSV}},r),[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-document-multiple")]),e._v("Export ")],1):a("v-btn",e._g({attrs:{color:"success",rounded:"",disabled:""},on:{click:e.exportCSV}},r),[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-document-multiple")]),e._v("Export ")],1)]}}])},[a("span",[e._v("Export Original CSV")])]),a("v-spacer"),e.uploadedSources.length>0?a("v-btn",{attrs:{color:"error",rounded:""},on:{click:e.validateDelete}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v("Delete ")],1):a("v-btn",{attrs:{color:"error",rounded:"",disabled:""},on:{click:e.validateDelete}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v("Delete ")],1)],1),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.uploadSourcesHeader,items:e.uploadedSources,dark:"",loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.server,callback:function(t){e.server=t},expression:"server"}},[a("td",[a("v-radio",{attrs:{value:r,color:"blue"}})],1)]),a("td",[e._v(e._s(r.name))]),a("td",[e._v(e._s(r.userID.userName))]),a("td",[e._v(" "+e._s(e._f("mergeUsers")(r.shared.users))+" ")]),a("td",[e._v(" "+e._s(r.createdTime)+" ")]),r.userID._id===e.$store.state.auth.userID?a("td",[a("v-btn",{attrs:{color:"success",text:""},on:{click:function(t){return e.share(r,"showDialog")}}},[a("v-icon",[e._v("mdi-share-variant-outline")]),e._v(" Share ")],1)],1):e._e()],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)],1)],1),a("v-spacer")],1),e.server.name?a("appRemoteSync",{attrs:{syncType:e.syncType,serverName:e.server.name,userID:e.$store.state.auth.userID,sourceOwner:e.server.userID._id,mode:e.mode}}):e._e()],1)},Nt=[],Et=(a("99af"),a("2b3d"),a("25ea")),qt={mixins:[xe],data:function(){return{syncType:"",mode:"",loadingPairs:!1,pairs:[],pairsHeaders:[{text:"Pair Name",value:"name"},{text:"Owner",value:"owner"}],helpDialog:!1,deleteConfirm:!1,editDialog:!1,server:{name:"",userID:{}},shareDialog:!1,shareSource:{},users:[],sharedUsers:[],limitLocationId:"",limitLocationName:"No limit",locationTree:[],loadingLocationTree:!1,searchUsers:"",syncServersHeader:[{sortable:!1},{text:"Source Name",value:"name"},{text:"Base URL",value:"host"},{text:"Source Type",value:"sourceType"},{text:"User Name",value:"username"},{text:"Password",value:"password"},{text:"Last Sync",value:"lastsync"},{text:"Owner",value:"owner",sortable:!1},{text:"Shared To",value:"shareStatus"},{text:"Created Time",value:"createdTime"}],uploadSourcesHeader:[{sortable:!1},{text:"Source Name",align:"left",value:"name"},{text:"Owner",value:"owner",sortable:!1},{text:"Shared To",value:"shareStatus"},{text:"Created Time",value:"createdTime"}],dataSources:[{text:"Upload CSV",value:"upload"},{text:"Remote Source",value:"remote"}],usersHeader:[{sortable:!1},{text:"Username",value:"userName",sortable:!0},{text:"Firstname",value:"firstName",sortable:!0},{text:"Surname",value:"surname",sortable:!0}],dataSource:"",addDataSource:!0,syncProgrIndeter:!1,syncProgrPercent:!1,syncStatus:"Waiting for sync status",syncPercent:null,syncProgressTimer:"",syncRunning:!1,alertSuccess:!1,alertError:!1,alertMsg:""}},filters:{mergeUsers:function(e){if(!e||0===e.length)return"";var t,a="",r=Object(n["a"])(e);try{for(r.s();!(t=r.n()).done;){var s=t.value;a?a+=", "+s.userName:a=s.userName}}catch(o){r.e(o)}finally{r.f()}return a}},methods:{sourceSelected:function(e){this.addDataSource=!0,"upload"===e?this.selectedComponent="FacilityReconUpload":"remote"===e&&(this.selectedComponent="FacilityReconRemoteSources")},editDataSource:function(){return this.server.name?this.server.userID._id!==this.$store.state.auth.userID?(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="You are not the owner of this data source, ask the owner to edit any details")):void("upload"!==this.server.source&&(this.editDialog=!0)):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source"))},saveEdit:function(){var e=this,t=new FormData,a=this.$store.state.clientId;t.append("host",this.server.host),t.append("sourceType",this.server.sourceType),t.append("source",this.server.source),t.append("username",this.server.username),t.append("password",this.server.password),t.append("userID",this.server.userID._id),t.append("name",this.server.name),t.append("id",this.server._id),t.append("clientId",a),this.editDialog=!1,u.a.post("/addDataSource",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.server.password=t.data.password}))},validateDelete:function(){return this.server.name?this.server.userID._id!==this.$store.state.auth.userID&&"Admin"!==this.$store.state.auth.role?(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="You are not the owner of this data source, ask the owner to remove you from the share")):(this.getPairsToDelete(),void(this.deleteConfirm=!0)):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source"))},deleteDataSource:function(){var e=this;this.deleteConfirm=!1;var t=this.$store.state.auth.userID,a=this.server.userID._id;u.a.get("/deleteDataSource/".concat(this.server._id,"/").concat(this.server.name,"/").concat(a,"/").concat(t)).then((function(){e.server={},Fs.$emit("getDataSources")}))},getPairsToDelete:function(){var e=this;this.loadingPairs=!0,u.a.get("/getPairForDatasource/"+this.server._id).then((function(t){e.loadingPairs=!1,e.pairs=t.data})).catch((function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config)}))},share:function(e,t){var a=this;if("showDialog"===t)this.limitLocationId="",this.limitLocationName="No limit",this.sharedUsers=[],this.shareSource=e,this.getLocationTree(),e.hasOwnProperty("shared")&&e.shared.users.length>0&&e.shared.users.forEach((function(e){a.sharedUsers.push(e._id)})),this.shareDialog=!0;else if("saveShare"===t){if(0===this.sharedUsers.length)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select atleast one user");var r=new FormData;r.append("shareSource",this.shareSource._id),r.append("users",JSON.stringify(this.sharedUsers)),r.append("userID",this.$store.state.auth.userID),r.append("role",this.$store.state.auth.role),r.append("orgId",this.$store.state.dhis.user.orgId),r.append("limitLocationId",this.limitLocationId),this.$store.state.loadingServers=!0,this.shareDialog=!1,u.a.post("/shareDataSource",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){a.$store.state.loadingServers=!1,a.$store.state.dataSources=e.data})).catch((function(e){console.log(e),a.$store.state.loadingServers=!1}))}},locationSelected:function(e){this.limitLocationId=e.id,"parent"!==e.id?this.limitLocationName=e.data.text:(this.limitLocationName="No limit",this.limitLocationId="")},getLocationTree:function(){var e=this,t=this.shareSource.userID._id;this.loadingLocationTree=!0;var a=this.toTitleCase(this.shareSource.name);u.a.get("/getTree/"+a+"/"+t).then((function(t){t.data&&(e.locationTree=[{text:"Select location to limit sharing",id:"parent",children:t.data}]),e.loadingLocationTree=!1}))},getUsers:function(){var e=this;u.a.get("/getUsers").then((function(t){e.users=t.data}))},exportCSV:function(){var e=this;if(!this.server.name)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source");var t=this.server.userID._id;u.a.get("/getUploadedCSV/"+t+"/"+this.server.name).then((function(t){var a=new Blob([t.data]);if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(a,"".concat(e.server.name,".csv"));else{var r=window.document.createElement("a");r.href=window.URL.createObjectURL(a,{type:"text/plain"}),r.download="".concat(e.server.name,".csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}})).catch((function(t){e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.response.data}))},sync:function(e){return this.server.name?this.server.userID._id!==this.$store.state.auth.userID?(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Only data source owner can run the sync")):void("upload"!==this.server.source&&(this.mode=e,"DHIS2"===this.server.sourceType?this.syncType="dhisSync":"FHIR"===this.server.sourceType&&(this.syncType="fhirSync"),setTimeout((function(){Fs.$emit("runRemoteSync")}),100))):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source"))}},computed:{remoteServers:function(){var e,t=[],a=Object(n["a"])(this.$store.state.dataSources);try{for(a.s();!(e=a.n()).done;){var r=e.value;"syncServer"===r.source&&t.push(r)}}catch(s){a.e(s)}finally{a.f()}return t},uploadedSources:function(){var e,t=[],a=Object(n["a"])(this.$store.state.dataSources);try{for(a.s();!(e=a.n()).done;){var r=e.value;"upload"===r.source&&t.push(r)}}catch(s){a.e(s)}finally{a.f()}return t}},components:{appRemoteSync:be,"liquor-tree":Et["a"]},created:function(){var e=this;this.getUsers(),Fs.$on("dataSourceSaved",(function(){e.addDataSource=!1,e.dataSource=""})),Fs.$on("dataSourceAddedSuccessfully",(function(){e.alertSuccess=!0,e.alertMsg="Data Source Added Successfully",setTimeout((function(){e.alertSuccess=!1}),3e3)})),Fs.$on("remoteServerFailedAdd",(function(){e.alertError=!0,e.alertMsg="Data Source Failed To Be Added"}))}},Ut=qt,jt=Object($["a"])(Ut,Mt,Nt,!1,null,null,null),Ht=jt.exports;w()(jt,{VAlert:C["a"],VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardText:T["c"],VCardTitle:T["d"],VCheckbox:$e["a"],VContainer:A["a"],VDataTable:we["a"],VDialog:ue["a"],VFlex:I["a"],VIcon:F["a"],VLayout:V["a"],VList:Vt["a"],VProgressLinear:ve["a"],VRadio:Ce["a"],VRadioGroup:De["a"],VSelect:Pe["a"],VSpacer:O["a"],VTextField:L["a"],VToolbar:M["a"],VToolbarTitle:Ae["b"],VTooltip:Ie["a"]});var Bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("center",[a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.confirmPairDeleteDialog,callback:function(t){e.confirmPairDeleteDialog=t},expression:"confirmPairDeleteDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v(" Confirm deleting ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.confirmPairDeleteDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" Are you sure you want to delete this data source pair ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.confirmPairDeleteDialog=!1}}},[e._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){return e.deletePair(t)}}},[e._v("Ok")])],1)],1)],1),a("v-alert",{staticStyle:{width:"1000px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-alert",{staticStyle:{width:"1000px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"770px",transition:"dialog-transition"},model:{value:e.pairLimitWarn,callback:function(t){e.pairLimitWarn=t},expression:"pairLimitWarn"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" Pair creation limit ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.pairLimitWarn=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" You cant create more pairs as this account is limited to one pair only at a time. ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.pairLimitWarn=!1}}},[e._v("Ok")])],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"770px",transition:"dialog-transition"},model:{value:e.mapSourcePairLevels,callback:function(t){e.mapSourcePairLevels=t},expression:"mapSourcePairLevels"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" Data sources has different level counts, please map Levels to proceed ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeLevelMappingDialog(t)}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-data-table",{attrs:{headers:e.pairLevelsMappingHeader,items:e.source1Levels},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.text))]),a("td",[e.pairLevelsMapping[r.value]?[e._v(" "+e._s(e.$store.state.levelMapping.source2[e.pairLevelsMapping[r.value]])+" "),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.clearMappingSelection(r.value)}}},[e._v("mdi-close")])]:a("v-select",{attrs:{items:e.source2Levels,clearable:""},on:{change:function(t){return e.mappingSelected(r.value)}},model:{value:e.pairLevelsMapping[r.value],callback:function(t){e.$set(e.pairLevelsMapping,r.value,t)},expression:"pairLevelsMapping[item.value]"}})],2)])]}}])})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"error",rounded:""},on:{click:e.closeLevelMappingDialog}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v(" Cancel ")],1),a("v-spacer"),a("v-btn",{attrs:{color:"primary",rounded:""}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v("Save Mapping ")],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" About this page ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" This page let you choose a pair of data sources to use for reconciliation "),a("v-list",[e._v("1. Source 1 is the source while source 2 is the target")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.shareDialog,callback:function(t){e.shareDialog=t},expression:"shareDialog"}},[a("v-card",{attrs:{width:"530px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Sharing "),e.sharePair.hasOwnProperty("source1")?[e._v(e._s(e.sharePair.source1.name)+" - "+e._s(e.sharePair.source2.name))]:e._e()],2),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.shareDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUsers,callback:function(t){e.searchUsers=t},expression:"searchUsers"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.usersHeader,items:e.users,search:e.searchUsers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[r.userName!==e.$store.state.auth.username?a("tr",[a("td",[a("v-checkbox",{attrs:{value:r._id},model:{value:e.sharedUsers,callback:function(t){e.sharedUsers=t},expression:"sharedUsers"}})],1),a("td",[e._v(e._s(r.userName))]),a("td",[e._v(e._s(r.firstName))]),a("td",[e._v(e._s(r.surname))])]):e._e()]}}])})],1),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"error"},nativeOn:{click:function(t){e.shareDialog=!1}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("mdi-cancel")]),e._v("Cancel ")],1),a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.share("","saveShare")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-share-variant-outline")]),e._v("Share ")],1)],1)],1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs11:""}},[e._v(" Create/Choose a pair of data sources to use for reconciliation. Source 1 is the source while source 2 is the target ")]),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){e.helpDialog=!0}}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}])},[a("span",[e._v("Help")])])],1)],1),a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-card",{staticStyle:{width:"1000px"},attrs:{color:"cyan lighten-5"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white lighten-2"}},[e._v(" Choose Data Source Pair ")])],1),a("v-card-text",{staticStyle:{float:"center"}},[a("v-row",[a("v-col",[a("v-data-table",{attrs:{headers:e.source1Headers,items:e.$store.state.dataSources,loading:e.$store.state.loadingServers,dark:""},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.source1,callback:function(t){e.source1=t},expression:"source1"}},[a("td",[a("v-radio",{attrs:{value:r,color:"blue"}})],1)]),a("td",[e._v(e._s(r.name))])],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),a("v-col",[a("v-data-table",{attrs:{headers:e.source2Headers,items:e.dataSources2,"item-key":"id",loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.source2,callback:function(t){e.source2=t},expression:"source2"}},[a("td",[a("v-radio",{attrs:{value:r,color:"blue"}})],1)]),a("td",[e._v(e._s(r.name))])],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{color:"error",rounded:""},on:{click:e.reset}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-refresh")]),e._v(" Reset ")],1),a("v-spacer"),a("v-btn",{attrs:{disabled:!e.canCreatePair,color:"primary",rounded:""},on:{click:e.checkLevels}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(" Save ")],1)],1)],1)],1),a("v-flex",[a("v-card",{staticStyle:{width:"1000px"},attrs:{color:"cyan lighten-4"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white lighten-2"}},[e._v(" Existing Data Source Pairs "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchPairs,callback:function(t){e.searchPairs=t},expression:"searchPairs"}})],1)],1),a("v-card-text",{staticStyle:{float:"center"}},[a("v-data-table",{attrs:{headers:e.sourcePairHeaders,items:e.$store.state.dataSourcePairs,search:e.searchPairs,loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.source1.name)+" - "+e._s(r.source2.name))]),a("td",[e._v(e._s(r.userID.userName))]),a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.activeDataSourcePair,callback:function(t){e.activeDataSourcePair=t},expression:"activeDataSourcePair"}},[a("td",[a("v-radio",{attrs:{value:r,color:"blue"}})],1)]),a("td",[e._v(" "+e._s(e._f("mergeUsers")(r.shared.users))+" ")]),r.userID._id===e.$store.state.auth.userID?a("td",[a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.share(r,"showDialog")}}},[a("v-icon",[e._v("mdi-share-variant-outline")]),e._v("Share ")],1)],1):e._e()],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),a("v-card-actions",[a("v-btn",{attrs:{disabled:!e.canDeletePair,color:"error",rounded:""},on:{click:e.confirmDeletePair}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v("Delete Pair ")],1),a("v-spacer"),a("v-btn",{attrs:{color:"primary",rounded:""},on:{click:e.activatePair}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v("Activate Pair ")],1)],1)],1)],1)],1)],1)],1)},Wt=[],Gt={methods:{createDatasourcePair:function(e,t){var a=this;if(0===Object.keys(e).length||0===Object.keys(t).length)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source");if(e.name===t.name&&e.source===t.source)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",void(this.$store.state.errorDescription="Data source pair of the same data source is not allowed, change one of the source");this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Creating Data Source Pair";var r=null;this.$store.state.activePair.hasOwnProperty("shared")&&this.$store.state.activePair.shared.hasOwnProperty("activeUsers")&&-1!==this.$store.state.activePair.shared.activeUsers.indexOf(this.$store.state.auth.userID)&&(r=this.$store.state.activePair._id);var s=!1;this.$store.state.dhis.user.orgId&&this.$store.state.config.generalConfig.reconciliation.singlePair&&(s=!0),r||(r=!1);var o=new FormData;o.append("source1",JSON.stringify(e)),o.append("source2",JSON.stringify(t)),o.append("userID",this.$store.state.auth.userID),o.append("orgId",this.$store.state.dhis.user.orgId),o.append("singlePair",s),o.append("activePairID",r),u.a.post("/addDataSourcePair",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){a.$store.state.levelMapping.source1=JSON.parse(e.data).levelMapping1,a.$store.state.levelMapping.source2=JSON.parse(e.data).levelMapping2,Fs.$emit("getDataSourcePair"),a.$store.state.dynamicProgress=!1})).catch((function(e){a.alertError=!0,a.$store.state.dialogError=!0,e.response.data.error?(a.$store.state.errorDescription=e.response.data.error,a.$store.state.errorTitle="Pair was not created",a.alertMsg=e.response.data.error):a.alertMsg="Something went wrong while saving data source pairs.",a.$store.state.dynamicProgress=!1,console.log(e)}))},activateSharedPair:function(e){var t=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Activating Shared Data Source Pair";var a=new FormData;a.append("pairID",e),a.append("userID",this.$store.state.auth.userID),u.a.post("/activateSharedPair",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){Fs.$emit("getDataSourcePair"),t.$store.state.dynamicProgress=!1})).catch((function(e){t.alertError=!0,t.alertMsg="Something went wrong while activating data source pair",t.$store.state.dynamicProgress=!1,console.log(e.response.data)}))},activatePair:function(){var e=this;this.activeDataSourcePair.userID._id!==this.$store.state.auth.userID?this.activateSharedPair(this.activeDataSourcePair._id):(this.source1=this.$store.state.dataSources.find((function(t){return t._id===e.activeDataSourcePair.source1._id})),this.source2=this.$store.state.dataSources.find((function(t){return t._id===e.activeDataSourcePair.source2._id})),this.createDatasourcePair(this.source1,this.source2))}}},Jt={mixins:[xe,Gt],data:function(){return{confirmPairDeleteDialog:!1,helpDialog:!1,alertSuccess:!1,alertError:!1,alertMsg:"",pairLimitWarn:!1,shareDialog:!1,mapSourcePairLevels:!1,pairLevelsMapping:{},sharePair:{},source1:{},source2:{},searchPairs:"",searchSources:"",searchUsers:"",users:[],sharedUsers:[],activeDataSourcePair:{},pairLevelsMappingHeader:[{text:"Source 1 Levels",value:"headerSource1Levels",sortable:!1},{text:"Source 2 Levels",value:"headerSource1Levels",sortable:!1}],source1Headers:[{sortable:!1},{text:"Source 1",value:"headerSource1",sortable:!1}],source2Headers:[{sortable:!1},{text:"Source 2",value:"headerSource2",sortable:!1}],sourcePairHeaders:[{text:"Pair",value:"pair"},{text:"Owner",value:"owner",sortable:!1},{text:"Active",value:"active"},{text:"Shared To",value:"shareStatus"}],usersHeader:[{text:"Username",value:"username",sortable:!0},{text:"Firstname",value:"fname",sortable:!0},{text:"Surname",value:"sname",sortable:!0}],source1Levels:[],source2Levels:[]}},filters:{mergeUsers:function(e){if(!e||0===e.length)return"";var t,a="",r=Object(n["a"])(e);try{for(r.s();!(t=r.n()).done;){var s=t.value;a=a?","+s.userName:s.userName}}catch(o){r.e(o)}finally{r.f()}return a}},methods:{confirmDeletePair:function(){this.confirmPairDeleteDialog=!0},deletePair:function(){var e=this;this.confirmPairDeleteDialog=!1;var t="pairId=".concat(this.activeDataSourcePair._id,"&userID=").concat(this.activeDataSourcePair.owner.id,"&source1Name=").concat(this.activeDataSourcePair.source1.name,"&source2Name=").concat(this.activeDataSourcePair.source2.name);u.a.delete("/deleteSourcePair?"+t).then((function(){e.$store.state.errorTitle="Pair Deletion",e.$store.state.errorDescription="Pair deleted successfully",e.$store.state.dialogError=!0,setTimeout((function(){Fs.$emit("getDataSourcePair")}),500)})).catch((function(t){e.$store.state.errorTitle="Pair Deletion",e.$store.state.errorDescription="An error occured while deleting pair, please retry",e.$store.state.errorColor="error",e.$store.state.dialogError=!0,console.log(JSON.stringify(t))}))},reset:function(){var e=this;this.source1={},this.source2={},this.activeDataSourcePair={},this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Reseting Data Source Pairs";var t=this.$store.state.auth.userID;u.a.get("/resetDataSourcePair/"+t).then((function(){Fs.$emit("getDataSourcePair"),e.$store.state.dynamicProgress=!1,e.alertSuccess=!0,e.alertMsg="Data Source Pair Reseted Successfully"})).catch((function(t){e.alertError=!0,e.alertMsg="Something went wrong while reseting data source pairs",console.log(t)}))},checkLevels:function(){var e=this;this.pairLevelsMapping={};var t=this.source1.name,a=this.source2.name;t=this.toTitleCase(t),a=this.toTitleCase(a);var r=JSON.stringify({source1LimitOrgId:this.getLimitOrgIdOnDataSource(this.source1),source2LimitOrgId:this.getLimitOrgIdOnDataSource(this.source2)}),s=JSON.stringify({source1Owner:this.source1.userID._id,source2Owner:this.source2.userID._id});u.a.get("/countLevels/"+t+"/"+a+"/"+s+"/"+r).then((function(t){return 1===t.data.totalSource1Levels?(e.$store.state.errorTitle="No data for you",e.$store.state.errorDescription="Cant create this pair, "+e.source1.name+" has no data for you",void(e.$store.state.dialogError=!0)):1===t.data.totalSource2Levels?(e.$store.state.errorTitle="No data for you",e.$store.state.errorDescription="Cant create this pair, "+e.source2.name+" has no data for you",void(e.$store.state.dialogError=!0)):void(t.data.totalSource1Levels>t.data.totalSource2Levels?(e.$store.state.errorTitle="Levels mismatch",e.$store.state.errorDescription="Make sure source1 has the same or less levels as source2",e.$store.state.dialogError=!0):e.createDatasourcePair(e.source1,e.source2))}))},mappingSelected:function(e){var t=this;this.source2Levels=this.source2Levels.filter((function(a){return a.value!==t.pairLevelsMapping[e]}))},clearMappingSelection:function(e){this.source2Levels.push({text:this.$store.state.levelMapping.source2[this.pairLevelsMapping[e]],value:this.pairLevelsMapping[e]});var t,a=Object.keys(this.pairLevelsMapping),r=a.filter((function(t){return t!==e})),s={},o=Object(n["a"])(r);try{for(o.s();!(t=o.n()).done;){var i=t.value;s[i]=this.pairLevelsMapping[i]}}catch(l){o.e(l)}finally{o.f()}this.pairLevelsMapping=s},closeLevelMappingDialog:function(){for(var e in this.pairLevelsMapping)this.source2Levels.push({text:this.$store.state.levelMapping.source2[this.pairLevelsMapping[e]],value:this.pairLevelsMapping[e]});this.mapSourcePairLevels=!1},share:function(e,t){var a=this;if("showDialog"===t)this.sharedUsers=[],this.sharePair=e,e.hasOwnProperty("shared")&&e.shared.users.length>0&&e.shared.users.forEach((function(e){a.sharedUsers.push(e._id)})),this.shareDialog=!0;else if("saveShare"===t){if(0===this.sharedUsers.length)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select atleast one user");var r=new FormData;r.append("sharePair",this.sharePair._id),r.append("users",JSON.stringify(this.sharedUsers)),r.append("userID",this.$store.state.auth.userID),r.append("orgId",this.$store.state.dhis.user.orgId),this.$store.state.loadingServers=!0,this.shareDialog=!1,u.a.post("/shareSourcePair",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){a.$store.state.loadingServers=!1,a.$store.state.dataSourcePairs=e.data})).catch((function(e){console.log(e),a.$store.state.loadingServers=!1}))}},getUsers:function(){var e=this;u.a.get("/getUsers").then((function(t){e.users=t.data}))}},computed:{dataSources2:function(){if(this.$store.state.config.generalConfig.reconciliation.fixSource2){var e,t="",a=Object(n["a"])(this.$store.state.dataSources);try{for(a.s();!(e=a.n()).done;){var r=e.value;r._id===this.$store.state.config.generalConfig.reconciliation.fixSource2To&&(t=r)}}catch(s){a.e(s)}finally{a.f()}return[t]}return this.$store.state.dataSources},canCreatePair:function(){return!this.$store.state.dhis.user.orgId||!this.$store.state.config.generalConfig.reconciliation.singlePair||0===this.$store.state.dataSourcePairs.length},canDeletePair:function(){return"{}"!==JSON.stringify(this.activeDataSourcePair)&&this.activeDataSourcePair.owner.id===this.$store.state.auth.userID}},created:function(){var e=this;for(var t in this.canCreatePair||(this.pairLimitWarn=!0),this.getUsers(),this.source1=this.$store.state.dataSources.find((function(t){return t._id===e.$store.state.activePair.source1.id})),this.source2=this.$store.state.dataSources.find((function(t){return t._id===e.$store.state.activePair.source2.id})),this.activeDataSourcePair=this.getActiveDataSourcePair(),this.source1||(this.source1={}),this.source2||(this.source2={}),this.$store.state.levelMapping.source2)"code"!==t&&this.source2Levels.push({text:this.$store.state.levelMapping.source2[t],value:t});for(var a in this.$store.state.levelMapping.source1)"code"!==a&&this.source1Levels.push({text:this.$store.state.levelMapping.source1[a],value:a})}},zt=Jt,Yt=a("62ad"),Kt=a("0fd9"),Xt=Object($["a"])(zt,Bt,Wt,!1,null,null,null),Zt=Xt.exports;w()(Xt,{VAlert:C["a"],VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardText:T["c"],VCardTitle:T["d"],VCheckbox:$e["a"],VCol:Yt["a"],VContainer:A["a"],VDataTable:we["a"],VDialog:ue["a"],VFlex:I["a"],VIcon:F["a"],VLayout:V["a"],VList:Vt["a"],VProgressLinear:ve["a"],VRadio:Ce["a"],VRadioGroup:De["a"],VRow:Kt["a"],VSelect:Pe["a"],VSpacer:O["a"],VTextField:L["a"],VToolbar:M["a"],VToolbarTitle:Ae["b"],VTooltip:Ie["a"]});var Qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[e.$store.state.uploadRunning?[a("br"),a("br"),a("br"),a("v-alert",{attrs:{type:"info",value:!0}},[a("b",[e._v("Wait for upload to finish ...")]),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)]:e._e(),!e.$store.state.denyAccess&!e.$store.state.uploadRunning?[a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" About this page ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" This page let you view dat you have uploaded or synchronized from a remote server "),a("v-list",[e._v("1. Use the tree to filter grid data")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.confirmDelete,callback:function(t){e.confirmDelete=t},expression:"confirmDelete"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Warning ")])],1),a("v-card-text",[e._v(" Are you sure that you want to delete "+e._s(e.deleteLocationData.facility)+" ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.confirmDelete=!1}}},[e._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.deleteLocation()}}},[e._v("Proceed")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",{attrs:{height:"500px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Edit Location ")]),a("v-spacer"),a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.editDialog=!1}}},[e._v("close")])],1),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-text-field",{attrs:{"error-messages":e.editLocationNameErrors,required:"",label:"Facility"},on:{blur:function(t){return e.$v.editLocationName.$touch()},change:function(t){return e.$v.editLocationName.$touch()}},model:{value:e.editLocationName,callback:function(t){e.editLocationName=t},expression:"editLocationName"}})],1),a("v-flex",[a("v-select",{attrs:{items:e.editParents,box:"",label:"Parent"},model:{value:e.editLocationParent,callback:function(t){e.editLocationParent=t},expression:"editLocationParent"}})],1)],1)],1)],1),a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-toolbar",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:"","text-sm-left":""}},[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.editDialog=!1}}},[a("v-icon",{attrs:{left:""}},[e._v("cancel")]),e._v(" Cancel ")],1)],1),a("v-flex",{attrs:{xs6:"","text-sm-right":""}},[a("v-btn",{attrs:{color:"primary",disabled:e.$v.$invalid,dark:""},on:{click:function(t){return e.saveEdit()}}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Save ")],1)],1)],1)],1)],1)],1)],1),a("v-row",[a("v-spacer"),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){e.helpDialog=!0}}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}],null,!1,3148663098)},[a("span",[e._v("Help")])])],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[e._v("Source 1 Data Tree")])]),e.loadingSource1Tree?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("p",[a("liquor-tree",{ref:"source1Tree",attrs:{data:e.source1Tree,options:{}},on:{"node:selected":e.source1NodeSelected}})],1)])]],2)],1),a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[e._v("Source 2 Data Tree")])]),e.loadingSource2Tree?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("p",[a("liquor-tree",{ref:"source2Tree",attrs:{data:e.source2Tree,options:{}},on:{"node:selected":e.source2NodeSelected}})],1)])]],2)],1),a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[e._v("Source 1 Data Grid")])]),e.loadingSource1Grid?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source1GridHeader,items:e.source1Grid,search:e.searchSource1,options:e.source1Pagination,"server-items-length":e.totalSource1Records,loading:e.loadingSource1,"hide-default-footer":""},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.source1GridHeader,(function(r,s){return a("td",{key:r.value+1,staticStyle:{"white-space":"nowrap",overflow:"hidden"}},[0===s&&e.isDataset1Owner?[a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.edit(t.item,"source1")}}},[e._v("edit")]),e._v(" | "),a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.deleteLocation(t.item,"source1","requestConfirmation")}}},[e._v("delete")])]:[e._v(" "+e._s(t.item[r.value])+" ")]],2)}))}}],null,!1,1855409753)})],1),a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:e.source1Pages},model:{value:e.source1Pagination.page,callback:function(t){e.$set(e.source1Pagination,"page",t)},expression:"source1Pagination.page"}})],1)]],2)],1),a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[e._v("Source 2 Data Grid")])]),e.loadingSource2Grid?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source2GridHeader,items:e.source2Grid,search:e.searchSource2,options:e.source2Pagination,"server-items-length":e.totalSource2Records,loading:e.loadingSource2,"hide-default-footer":""},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.source2GridHeader,(function(r,s){return a("td",{key:r.value+2,staticStyle:{"white-space":"nowrap",overflow:"hidden"}},[0===s&&e.isDataset2Owner?[a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.edit(t.item,"source2")}}},[e._v("edit")]),e._v(" | "),a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.deleteLocation(t.item,"source2","requestConfirmation")}}},[e._v("delete")])]:[e._v(" "+e._s(t.item[r.value])+" ")]],2)}))}}],null,!1,592712922)})],1),a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:e.source2Pages},model:{value:e.source2Pagination.page,callback:function(t){e.$set(e.source2Pagination,"page",t)},expression:"source2Pagination.page"}})],1)]],2)],1)],1),a("br"),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs1:"",xl10:""}},[a("v-btn",{attrs:{color:"primary",dark:""},on:{click:function(t){return e.$router.push({name:"FacilityReconScores"})}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-find")]),e._v(" Reconcile ")],1)],1)],1)]:e._e()],2)},ea=[],ta=u.a.CancelToken,aa={mixins:[xe],data:function(){return{loadingSource2Unmatched:!1,loadingSource1Unmatched:!1,topTree:""}},methods:{scoreProgressCheckTimeout:function(){this.$store.state.scoresProgressData.scoreProgressTitle="Server is busy with automatching, please be patient",clearInterval(this.$store.state.scoresProgressData.progressReqTimer);var e=parseInt(this.$store.state.scoresProgressData.scoreProgressPercent);100!==e||100===e&&"last"!==this.$store.state.scoresProgressData.stage?(this.$store.state.scoresProgressData.requestCancelled=!0,this.$store.state.scoresProgressData.cancelTokenSource.cancel("Cancelling request."),this.checkScoreProgress()):this.$store.state.scoresProgressData.scoreProgressTitle="Please be patient, waiting for server response"},scoreSavingProgressCheckTimeout:function(){clearInterval(this.$store.state.scoreSavingProgressData.progressReqTimer),this.$store.state.scoreSavingProgressData.requestCancelled=!0,this.$store.state.scoreSavingProgressData.cancelTokenSource.cancel("Cancelling request."),this.checkScoreSavingStatus(),this.saveProgressTimedout=!0},checkScoreProgress:function(){var e,t=this;this.$store.state.scoresProgressData.cancelTokenSource=ta.source();var a=parseInt(this.$store.state.scoresProgressData.scoreProgressPercent);e=a>96?402382:1e4,this.$store.state.scoresProgressData.progressReqTimer=setInterval(this.scoreProgressCheckTimeout,e);var r=this.$store.state.clientId;u.a.get("/progress/scoreResults/"+r,{cancelToken:this.$store.state.scoresProgressData.cancelTokenSource.token}).then((function(e){if(clearInterval(t.$store.state.scoresProgressData.progressReqTimer),!e.data||!(e.data.status||e.data.percent||e.data.error||0!==t.$store.state.scoreResults.length))return t.$store.state.scoresProgressData.scoreDialog=!1,t.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status",t.$store.state.errorTitle="An error has occured",t.$store.state.errorDescription="An error has occured while reaching out to server, please click recalculate scores to restart automatch",t.$store.state.errorColor="error",t.$store.state.dialogError=!0,t.clearProgress("scoreResults"),t.$store.state.scoreSavingProgressData.savingMatches=!0,void t.checkScoreSavingStatus();if(null===e.data.status&&null===e.data.percent&&null===e.data.error&&t.$store.state.scoreResults.length>0)return t.$store.state.scoresProgressData.scoreDialog=!1,t.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status",t.clearProgress("scoreResults"),t.$store.state.scoreSavingProgressData.savingMatches=!0,void t.checkScoreSavingStatus();if(t.$store.state.scoresProgressData.scoreProgressTitle=e.data.status,e.data.percent&&("percent"!==t.$store.state.scoresProgressData.progressType&&(t.$store.state.scoresProgressData.progressType="percent"),t.$store.state.scoresProgressData.scoreProgressPercent=e.data.percent,t.$store.state.scoresProgressData.stage=e.data.stage),"Done"===e.data.status&&0===t.$store.state.scoreResults.length){t.clearProgress("scoreResults"),t.$store.state.scoreSavingProgressData.savingMatches=!0,t.checkScoreSavingStatus(),t.loadingSource1Unmatched=!1,t.loadingSource2Unmatched=!1;var a=e.data.responseData;t.$store.state.source2UnMatched=a.source2Unmatched,t.$store.state.source1UnMatched=[],t.$store.state.matchedContent=[],t.$store.state.noMatchContent=[],t.$store.state.ignoreContent=[],t.$store.state.flagged=[],t.$store.state.scoreResults=a.scoreResults,t.$store.state.source2TotalRecords=a.source2TotalRecords,t.$store.state.source2TotalAllRecords=a.source2TotalAllRecords,t.$store.state.totalAllMapped=a.totalAllMapped,t.$store.state.totalAllFlagged=a.totalAllFlagged,t.$store.state.totalAllNoMatch=a.totalAllNoMatch,t.$store.state.totalAllIgnore=a.totalAllIgnore,t.$store.state.source1TotalAllNotMapped=a.source1TotalAllNotMapped,t.$store.state.source1TotalAllRecords=a.source1TotalAllRecords;var r,s=Object(n["a"])(t.$store.state.scoreResults);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(o.source1.hasOwnProperty("tag")&&"flagged"===o.source1.tag)t.$store.state.flagged.push({source1Name:o.source1.name,source1Id:o.source1.id,source1IdHierarchy:o.source1.source1IdHierarchy,source1Parents:o.source1.parents,source2Name:o.exactMatch.name,source2Id:o.exactMatch.id,source2IdHierarchy:o.exactMatch.source2IdHierarchy,mappedParentName:o.exactMatch.mappedParentName,source2Parents:o.exactMatch.parents,flagComment:o.source1.flagComment});else if(o.source1.hasOwnProperty("tag")&&"noMatch"===o.source1.tag){var i=o.source1.parents;t.$store.state.noMatchContent.push({source1Name:o.source1.name,source1Id:o.source1.id,parents:i})}else if(o.source1.hasOwnProperty("tag")&&"ignore"===o.source1.tag){var l=o.source1.parents;t.$store.state.ignoreContent.push({source1Name:o.source1.name,source1Id:o.source1.id,parents:l})}else if(Object.keys(o.exactMatch).length>0)t.$store.state.matchedContent.push({source1Name:o.source1.name,source1Id:o.source1.id,source1Parents:o.source1.parents,source2Name:o.exactMatch.name,source2Id:o.exactMatch.id,source2IdHierarchy:o.exactMatch.source2IdHierarchy,mappedParentName:o.exactMatch.mappedParentName,source2Parents:o.exactMatch.parents,matchComments:o.exactMatch.matchComments});else{for(var c=t.topTree,u=o.source1.parents.length-1;u>=0;u--)c[o.source1.parents[u]]||(c[o.source1.parents[u]]={}),c=c[o.source1.parents[u]];t.$store.state.source1UnMatched.push({name:o.source1.name,id:o.source1.id,parents:o.source1.parents})}}}catch(d){s.e(d)}finally{s.f()}t.$store.state.source1Parents=t.topTree,t.$store.state.scoresProgressData.scoreDialog=!1,t.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status"}else t.checkScoreProgress()})).catch((function(){t.$store.state.scoresProgressData.requestCancelled?t.$store.state.scoresProgressData.requestCancelled=!1:(clearInterval(t.$store.state.scoresProgressData.progressReqTimer),t.checkScoreProgress())}))},checkScoreSavingStatus:function(){var e=this;this.$store.state.scoreSavingProgressData.cancelTokenSource=ta.source(),this.$store.state.scoreSavingProgressData.progressReqTimer=setInterval(this.scoreSavingProgressCheckTimeout,1e4);var t=this.$store.state.clientId;u.a.get("/progress/scoreSavingStatus/"+t,{cancelToken:this.$store.state.scoreSavingProgressData.cancelTokenSource.token}).then((function(t){return clearInterval(e.$store.state.scoreSavingProgressData.progressReqTimer),t.data&&(t.data.status||t.data.percent||t.data.error||!e.$store.state.scoreSavingProgressData.savingMatches)?t.data.status||t.data.percent||t.data.error||e.$store.state.scoreSavingProgressData.savingMatches?(t.data.percent&&(e.$store.state.scoreSavingProgressData.percent=t.data.percent),void(100===t.data.percent?(e.$store.state.scoreSavingProgressData.savingMatches=!1,e.$store.state.scoreSavingProgressData.percent=0,e.clearProgress("scoreSavingStatus")):e.checkScoreSavingStatus())):(e.$store.state.scoreSavingProgressData.savingMatches=!1,e.$store.state.scoreSavingProgressData.percent=0,void e.clearProgress("scoreSavingStatus")):(e.$store.state.errorTitle="An error has occured",e.$store.state.errorDescription="An error has occured while checking saving status",e.$store.state.errorColor="error",e.$store.state.dialogError=!0,e.$store.state.scoreSavingProgressData.savingMatches=!1,e.$store.state.scoreSavingProgressData.percent=0,void e.clearProgress("scoreSavingStatus"))})).catch((function(){e.$store.state.scoreSavingProgressData.requestCancelled?e.$store.state.scoreSavingProgressData.requestCancelled=!1:(clearInterval(e.$store.state.scoreSavingProgressData.progressReqTimer),e.checkScoreSavingStatus())}))},getScores:function(e){var t=this;e||(e=!1);var a=this.getSource1(),r=this.getSource2(),s=this.getDatasourceOwner();if(this.$store.state.source1UnMatched=[],this.$store.state.source2UnMatched=[],this.$store.state.matchedContent=[],this.$store.state.noMatchContent=[],this.$store.state.ignoreContent=[],this.$store.state.flagged=[],this.$store.state.source1TotalAllRecords=0,this.$store.state.totalAllMapped=0,this.$store.state.totalAllFlagged=0,this.$store.state.totalAllNoMatch=0,this.$store.state.totalAllIgnore=0,this.$store.state.source2TotalRecords=0,this.$store.state.scoreResults=[],a&&r){this.loadingSource1Unmatched=!0,this.loadingSource2Unmatched=!0,this.$store.state.scoresProgressData.scoreDialog=!0,this.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status",this.$store.state.scoresProgressData.progressType="indeterminate";var o=this.$store.state.recoLevel,i=this.$store.state.totalSource1Levels,n=this.$store.state.totalSource2Levels,l=this.$store.state.clientId;this.topTree=this.$store.state.source1Parents.slice(0,this.$store.state.source1Parents.length),this.$store.state.levelArray=[];for(var c=1;c<this.$store.state.totalSource1Levels;c++){var d=void 0;c+1>this.$store.state.recoLevel||(d=this.translateDataHeader("source1",c),this.$store.state.levelArray.push({text:d,value:c+1}))}var v=this.$store.state.activePair.userID._id,p=s.source1Owner,h=s.source2Owner,f=this.getLimitOrgIdOnActivePair().source1LimitOrgId,g=this.getLimitOrgIdOnActivePair().source2LimitOrgId,m=JSON.stringify(this.$store.state.config.generalConfig.reconciliation.parentConstraint),y="source1=".concat(a,"&source2=").concat(r,"&source1Owner=").concat(p,"&source2Owner=").concat(h,"&source1LimitOrgId=").concat(f,"&source2LimitOrgId=").concat(g,"&totalSource1Levels=").concat(i,"&totalSource2Levels=").concat(n);y+="&recoLevel=".concat(o,"&clientId=").concat(l,"&userID=").concat(v,"&parentConstraint=")+m+"&getPotential="+e,u.a.get("/reconcile/?"+y).then((function(){t.checkScoreProgress()}))}},getSource1:function(){var e=this.$store.state.activePair.source1.name;return e&&(e=this.toTitleCase(e)),e},getSource2:function(){var e=this.$store.state.activePair.source2.name;return e&&(e=this.toTitleCase(e)),e},getSource1Name:function(){return this.$store.state.activePair.source1.name},getSource2Name:function(){return this.$store.state.activePair.source2.name}},created:function(){var e=this;Fs.$on("changeCSVHeaderNames",(function(){e.$store.state.levelArray=[];for(var t=1;t<e.$store.state.totalSource1Levels;t++){var a=void 0;t+1>e.$store.state.recoLevel||(a=e.translateDataHeader("source1",t),e.$store.state.levelArray.push({text:a,value:t+1}))}}))}},ra={validations:{editLocationName:{required:b["required"]}},mixins:[aa,xe],data:function(){return{confirmDelete:!1,deleteLocationData:"",deleteSource:{name:"",value:""},editDialog:!1,editLocationName:"",editLocationId:"",editParents:[],editLocationParent:"",editSource:"",helpDialog:!1,lastLevel:[],headerText:{level2:"Level 1",level3:"Level 2",level4:"Level 3",level5:"Level 4",level6:"Level 5",level7:"Level 6",level8:"Level 7",level9:"Level 8",level10:"Level 9",facility:"Facility",latitude:"Latitude",longitude:"Longitude"},headers:[{text:"Level 1",value:"level1"},{text:"Level 2",value:"level2"},{text:"Level 3",value:"level3"},{text:"Level 4",value:"level4"},{text:"Facility",value:"facility"},{text:"Latitude",value:"latitude"},{text:"Longitude",value:"longitude"}],searchSource1:"",searchSource2:"",filterSource1:{text:"",level:""},filterSource2:{text:"",level:""},source2Pagination:{rowsPerPage:20},source1Pagination:{rowsPerPage:20},loadingSource1:!1,loadingSource2:!1,totalSource1Records:0,totalSource2Records:0,source2Grid:[],source1Grid:[],source1Tree:[],source2Tree:[],source1Start:1,source2Start:1,source1Count:10,source2Count:10,loadingSource1Tree:!1,loadingSource2Tree:!1,loadingSource1Grid:!1,loadingSource2Grid:!1,currentSource2Pagination:{},currentSource1Pagination:{},source1SelNodeId:!1,source2SelNodeId:!1,sourceOwner:""}},methods:{edit:function(e,t){var a=this.getDatasourceOwner();"source1"===t?(this.sourceOwner=a.source1Owner,this.editSource=this.source1):"source2"===t&&(this.sourceOwner=a.source1Owner,this.editSource=this.source2),this.editLocationName=e.facility,this.editLocationId=e.id,this.editDialog=!0;var r=Object.keys(this.source2GridHeader).length,s=this.source2GridHeader[r-1].value;this.editLocationParent=e[s+"id"];var o=s.replace("level","");this.getLevelData(o)},saveEdit:function(){var e=this,t=new FormData;t.append("sourceOwner",this.sourceOwner),t.append("source",this.editSource),t.append("locationId",this.editLocationId),t.append("locationName",this.editLocationName),t.append("locationParent",this.editLocationParent),u.a.post("/editLocation",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.editDialog=!1,e.getSource1Grid(!1),e.getSource2Grid(!1),e.getTree()})).catch((function(e){console.log(JSON.stringify(e))}))},deleteLocation:function(e,t,a){var r=this;if("requestConfirmation"===a){var s=this.getDatasourceOwner();"source1"===t?(this.sourceOwner=s.source1Owner,this.deleteSource={name:"source1",sourceId:this.$store.state.activePair.source1.id,sourceName:this.source1}):"source2"===t&&(this.sourceOwner=s.source2Owner,this.deleteSource={name:"source2",sourceId:this.$store.state.activePair.source2.id,sourceName:this.source2}),this.deleteLocationData=e,this.confirmDelete=!0}else{this.confirmDelete=!1;var o=this.$store.state.activePair.userID._id,i="id=".concat(this.deleteLocationData.id,"&sourceId=").concat(this.deleteSource.sourceId,"&sourceName=").concat(this.deleteSource.sourceName,"&userID=").concat(o,"&sourceOwner=").concat(this.sourceOwner);u.a.delete("/deleteLocation?".concat(i)).then((function(){"source1"===r.deleteSource.name?r.getSource1Grid(!1):r.getSource2Grid(!1)}))}},getLevelData:function(e){var t=this;u.a.get("/getLevelData/"+this.editSource+"/"+this.sourceOwner+"/"+e).then((function(e){t.editParents=e.data}))},getSource1Grid:function(e){var t=this;if(this.source1){this.loadingSource1=!0,e||(e=""),this.loadingSource1Grid=!0;var a=this.getDatasourceOwner().source1Owner,r=this.getLimitOrgIdOnActivePair().source1LimitOrgId,s=this.$store.state.activePair.userID._id,o="/hierarchy?source=".concat(this.source1,"&start=").concat(this.source1Start,"&count=").concat(this.source1Count,"&id=").concat(e,"&userID=").concat(s,"&sourceOwner=").concat(a,"&sourceLimitOrgId=").concat(r);u.a.get(o).then((function(e){if(t.loadingSource1Grid=!1,e.data){var a=t.source1Pagination,r=a.sortBy,s=a.descending;t.source1Pagination.sortBy&&(e.data.tree=e.data.grid.sort((function(e,t){var a=e[r],o=t[r];return s?a<o?1:a>o?-1:0:a<o?-1:a>o?1:0}))),t.source1Grid=e.data.grid,t.totalSource1Records=e.data.total,t.source1Pagination.totalItems=e.data.total,t.currentSource1Pagination=Object.assign({},t.source1Pagination),t.currentSource1Pagination.hasOwnProperty("descending")||(t.currentSource1Pagination.descending=!1),t.currentSource1Pagination.hasOwnProperty("page")||(t.currentSource1Pagination.page=1),t.currentSource1Pagination.hasOwnProperty("sortBy")||(t.currentSource1Pagination.sortBy="facility"),t.currentSource1Pagination.hasOwnProperty("totalItems")||(t.currentSource1Pagination.totalItems=e.data.total)}t.loadingSource1=!1}))}},getSource2Grid:function(e){var t=this;if(this.source2){e||(e=""),this.loadingSource2=!0,this.loadingSource2Grid=!0;var a=this.getDatasourceOwner().source2Owner,r=this.getLimitOrgIdOnActivePair().source2LimitOrgId,s=this.$store.state.activePair.userID._id,o="/hierarchy?source=".concat(this.source2,"&start=").concat(this.source2Start,"&count=").concat(this.source2Count,"&id=").concat(e,"&userID=").concat(s,"&sourceOwner=").concat(a,"&sourceLimitOrgId=").concat(r);u.a.get(o).then((function(e){if(t.loadingSource2Grid=!1,e.data){var a=t.source2Pagination,r=a.sortBy,s=a.descending;t.source2Pagination.sortBy&&(e.data.tree=e.data.grid.sort((function(e,t){var a=e[r],o=t[r];return s?a<o?1:a>o?-1:0:a<o?-1:a>o?1:0}))),t.source2Grid=e.data.grid,t.totalSource2Records=e.data.total,t.source2Pagination.totalItems=e.data.total,t.currentSource2Pagination=Object.assign({},t.source2Pagination),t.currentSource2Pagination.hasOwnProperty("descending")||(t.currentSource2Pagination.descending=!1),t.currentSource2Pagination.hasOwnProperty("page")||(t.currentSource2Pagination.page=1),t.currentSource2Pagination.hasOwnProperty("sortBy")||(t.currentSource2Pagination.sortBy="facility"),t.currentSource2Pagination.hasOwnProperty("totalItems")||(t.currentSource2Pagination.totalItems=e.data.total)}t.loadingSource2=!1}))}},getTree:function(){var e=this;if(this.source1&&this.source2){var t=this.getDatasourceOwner().source2Owner,a=this.getLimitOrgIdOnActivePair().source2LimitOrgId;this.loadingSource2Tree=!0,u.a.get("/getTree/"+this.source2+"/"+t+"/"+a).then((function(t){e.loadingSource2Tree=!1,t.data&&(e.source2Tree=t.data)}));var r=this.getDatasourceOwner().source1Owner,s=this.getLimitOrgIdOnActivePair().source1LimitOrgId;this.loadingSource1Tree=!0,u.a.get("/getTree/"+this.source1+"/"+r+"/"+s).then((function(t){e.loadingSource1Tree=!1,t.data&&(e.source1Tree=t.data)}))}},source1NodeSelected:function(e){this.source1SelNodeId=e.id,this.getSource1Grid(e.id)},source2NodeSelected:function(e){this.source2SelNodeId=e.id,this.getSource2Grid(e.id)}},computed:{isDataset1Owner:function(){var e=this.getDatasourceOwner().source1Owner,t=this.$store.state.auth.userID;return e===t},isDataset2Owner:function(){var e=this.getDatasourceOwner().source2Owner,t=this.$store.state.auth.userID;return e===t},source2GridHeader:function(){var e=[];this.isDataset2Owner&&e.push({text:"",value:"",sortable:!1});var t={};if(this.source2Grid&&this.source2Grid.length>0)for(var a in this.source2Grid)(t.length>0&&this.source2Grid[a].length>Object.keys(t).length||0===Object.keys(t).length)&&(t=this.source2Grid[a]);for(var r in t)this.headerText[r]&&e.push({text:this.headerText[r],value:r});return e},source1GridHeader:function(){var e=[];this.isDataset1Owner&&e.push({text:"",value:"",sortable:!1});var t={};if(this.source1Grid&&this.source1Grid.length>0)for(var a in this.source1Grid)(t.length>0&&this.source1Grid[a].length>Object.keys(t).length||0===Object.keys(t).length)&&(t=this.source1Grid[a]);if(this.source1Grid&&this.source1Grid.length>0)for(var r in this.source1Grid[0])this.headerText[r]&&e.push({text:this.headerText[r],value:r});return e},source2Pages:function(){return null==this.source2Pagination.rowsPerPage||null==this.source2Pagination.totalItems?0:Math.ceil(this.source2Pagination.totalItems/this.source2Count)},source1Pages:function(){return null==this.source1Pagination.rowsPerPage||null==this.source1Pagination.totalItems?0:Math.ceil(this.source1Pagination.totalItems/this.source1Count)},source1:function(){var e=this.$store.state.activePair.source1.name;return e&&(e=this.toTitleCase(e)),e},source2:function(){var e=this.$store.state.activePair.source2.name;return e&&(e=this.toTitleCase(e)),e},editLocationNameErrors:function(){var e=[];return this.$v.editLocationName.$dirty?(!this.$v.editLocationName.required&&e.push("Facility Name is required"),e):e}},watch:{source1Pagination:{handler:function(){if(this.currentSource1Pagination.sortBy!==this.source1Pagination.sortBy||this.currentSource1Pagination.descending!==this.source1Pagination.descending||this.currentSource1Pagination.page!==this.source1Pagination.page){var e=this.source1Pagination.page-1;this.source1Start=e*this.source1Count+1,this.getSource1Grid(this.source1SelNodeId)}},deep:!0},source2Pagination:{handler:function(){if(this.currentSource2Pagination.sortBy!==this.source2Pagination.sortBy||this.currentSource2Pagination.descending!==this.source2Pagination.descending||this.currentSource2Pagination.page!==this.source2Pagination.page){var e=this.source2Pagination.page-1;this.source2Start=e*this.source2Count+1,this.getSource2Grid(this.source2SelNodeId)}},deep:!0}},mounted:function(){this.getSource1Grid(!1),this.getSource2Grid(!1),this.getTree()},components:{"liquor-tree":Et["a"]}},sa=ra,oa=(a("d486"),a("891e")),ia=Object($["a"])(sa,Qt,ea,!1,null,"ebcfbc9e",null),na=ia.exports;w()(ia,{VAlert:C["a"],VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardText:T["c"],VCardTitle:T["d"],VContainer:A["a"],VDataTable:we["a"],VDialog:ue["a"],VFlex:I["a"],VIcon:F["a"],VLayout:V["a"],VList:Vt["a"],VPagination:oa["a"],VProgressLinear:ve["a"],VRow:Kt["a"],VSelect:Pe["a"],VSpacer:O["a"],VTextField:L["a"],VToolbar:M["a"],VToolbarTitle:Ae["b"],VTooltip:Ie["a"]});var la=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[e.$store.state.uploadRunning?[a("br"),a("br"),a("br"),a("v-alert",{attrs:{type:"info",value:!0}},[a("b",[e._v("Wait for upload to finish ...")]),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)]:e._e(),!e.$store.state.denyAccess&!e.$store.state.uploadRunning?a("v-container",{attrs:{fluid:"","grid-list-lg":""}},[a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"350"},model:{value:e.$store.state.scoresProgressData.scoreDialog,callback:function(t){e.$set(e.$store.state.scoresProgressData,"scoreDialog",t)},expression:"$store.state.scoresProgressData.scoreDialog"}},[a("v-card",{attrs:{color:"white",dark:""}},[a("v-card-text",[a("center",[a("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.$store.state.scoresProgressData.scoreProgressTitle))]),a("br"),"percent"==e.$store.state.scoresProgressData.progressType?a("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.$store.state.scoresProgressData.scoreProgressPercent,color:"primary"}},[a("v-avatar",{attrs:{color:"indigo",size:"50px"}},[a("span",{staticClass:"white--text"},[a("b",[e._v(e._s(e.$store.state.scoresProgressData.scoreProgressPercent)+"%")])])])],1):e._e(),"indeterminate"==e.$store.state.scoresProgressData.progressType?a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"red"}}):e._e()],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"500px"},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.alertTitle)+" ")])],1),a("v-card-text",[e._v(" "+e._s(e.alertText)+" ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"success"},on:{click:function(t){e.alert=!1}}},[e._v("OK")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"500px"},model:{value:e.flagCommentDialog,callback:function(t){e.flagCommentDialog=t},expression:"flagCommentDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Add comment for this flag if any ")])],1),a("v-card-text",[a("v-textarea",{attrs:{"auto-grow":"",box:"",color:"deep-purple",label:"Flag Comment",rows:"1"},model:{value:e.flagComment,callback:function(t){e.flagComment=t},expression:"flagComment"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"success"},on:{click:e.saveMatch}},[e._v("Continue")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition",width:e.dialogWidth,height:"auto"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{attrs:{width:e.dialogWidth,height:"auto"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Matching "+e._s(e.selectedSource1Name)+" "+e._s(e.dialogWidth)+" ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",color:"yellow"},model:{value:e.searchPotential,callback:function(t){e.searchPotential=t},expression:"searchPotential"}}),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.back(t)}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-title",[e._v(" Parents: "),a("b",[e._v(e._s(e._f("joinParentsAndReverse")(e.selectedSource1Parents)))]),a("v-spacer"),e.$store.state.recoLevel==e.$store.state.totalSource1Levels?[e._v(" Latitude: "),a("b",[e._v(e._s(e.selectedSource1Lat))]),a("v-spacer"),e._v(" Longitude: "),a("b",[e._v(e._s(e.selectedSource1Long))]),a("v-spacer")]:e._e()],2),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.potentialHeaders,items:e.allPotentialMatches,search:e.searchPotential},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[a("v-row",[a("v-col",{attrs:{md:"4"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{color:"error",small:""},nativeOn:{click:function(t){return e.match("flag",r.id,r.name,r.source2IdHierarchy,r.mappedParentName)}}},s),[a("v-icon",{attrs:{dark:"",left:""}},[e._v("mdi-bell")]),e._v("Flag ")],1)]}}],null,!0)},[a("span",[e._v("Mark the selected item as a match to be reviewed")])])],1),a("v-col",{attrs:{md:"4"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{color:"primary",small:"",dark:""},nativeOn:{click:function(t){return e.match("match",r.id,r.name,r.source2IdHierarchy)}}},s),[a("v-icon",{attrs:{left:""}},[e._v("mdi-thumb-up")]),e._v("Save Match ")],1)]}}],null,!0)},[a("span",[e._v("Save the selected item as a match")])])],1)],1)],1),a("td",[e._v(e._s(r.name))]),a("td",[e._v(e._s(r.id))]),a("td",[e._v(e._s(e._f("joinParentsAndReverse")(r.parents)))]),e.$store.state.recoLevel==e.$store.state.totalSource1Levels?a("td",[e._v(e._s(r.geoDistance))]):e._e(),a("td",[e._v(e._s(r.score))]),a("td",[e._v(e._s(e.potentialMatchComment(r)))])])]}}],null,!1,357144023)},[a("template",{slot:"headers"},[a("tr",[e._l(e.potentialHeaders,(function(t){return["Score"==t.text?a("th",{key:t.text,staticClass:"column sortable active",attrs:{align:"left"},on:{click:function(a){return e.changeSort(t.value)}}},["up"==e.sort_arrow?a("v-icon",{attrs:{small:""}},[e._v("mdi-arrow-up")]):a("v-icon",{attrs:{small:""}},[e._v("mdi-arrow-down")]),e._v(" "+e._s(t.text)+" "),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{icon:""}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}],null,!0)},[a("span",[e._v("The lower the score, the better the match")])])],1):a("th",{key:t.text,attrs:{align:"left"}},[e._v(" "+e._s(t.text)+" ")])]}))],2)])],2)],1),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-row",[a("v-col",{attrs:{justify:"1"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{color:"green",dark:""},nativeOn:{click:function(t){return e.noMatch("nomatch")}}},r),[a("v-icon",{attrs:{left:""}},[e._v("mdi-thumb-down")]),e._v("No Match ")],1)]}}],null,!1,3434304218)},[a("span",[e._v("Save this Source 1 location as having no match")])])],1),a("v-col",{attrs:{justify:"1"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{color:"error",dark:""},nativeOn:{click:function(t){return e.noMatch("ignore")}}},r),[a("v-icon",{attrs:{left:""}},[e._v("mdi-thumb-down")]),e._v("Ignore ")],1)]}}],null,!1,577440601)},[a("span",[e._v("Mark this source 1 location as being ignored")])])],1),a("v-col",{attrs:{justify:"5"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.potentialAvailable?a("v-btn",e._g({staticStyle:{color:"white"},attrs:{color:"teal darken-6"},on:{click:function(t){e.showAllPotential=!e.showAllPotential}}},r),[e.showAllPotential?[e._v("Show Scored Suggestions")]:[a("v-icon",{attrs:{left:""}},[e._v("mdi-eye")]),e._v(" Show All Suggestions ")]],2):e._e()]}}],null,!1,2440108326)},[e.showAllPotential?a("span",[e._v("Limit to only scored suggestions")]):a("span",[e._v("See all possible choices ignoring the score")])])],1),a("v-col",{attrs:{justify:"7"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticStyle:{color:"white"},attrs:{color:"orange darken-2"},nativeOn:{click:function(t){return e.back(t)}}},r),[a("v-icon",{attrs:{dark:"",left:""}},[e._v("mdi-arrow-left")]),e._v("Back ")],1)]}}],null,!1,2568067178)},[a("span",[e._v("Return without saving")])])],1)],1)],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("appRecoExport")],1),a("v-spacer"),a("v-flex",{attrs:{xs2:""}},[a("b",[e._v("Reconciling "+e._s(e.currentLevelText))])]),a("v-spacer"),a("v-flex",{attrs:{xs1:"",sm2:"",md2:"",right:""}},[a("v-select",{attrs:{items:e.$store.state.levelArray,"item-value":e.$store.state.levelArray.value,"item-name":e.$store.state.levelArray.text,label:"Level","single-line":""},on:{change:e.levelChanged},model:{value:e.$store.state.recoLevel,callback:function(t){e.$set(e.$store.state,"recoLevel",t)},expression:"$store.state.recoLevel"}})],1),a("v-flex",{attrs:{xs2:""}},[e.$store.state.scoreSavingProgressData.savingMatches?[e._v(" Saving matches for "+e._s(e.translateDataHeader("source1",e.$store.state.recoLevel-1))+" "),e.saveProgressTimedout?a("v-progress-linear",{attrs:{indeterminate:"",color:"red"}}):a("v-progress-linear",{attrs:{color:"error",width:"20",height:"20",value:e.$store.state.scoreSavingProgressData.percent}},[a("center",[a("span",{staticClass:"green--text"},[a("b",[e._v(e._s(e.$store.state.scoreSavingProgressData.percent)+"%")])])])],1)]:[[a("v-btn",{attrs:{color:"primary",dark:"",rounded:""},on:{click:function(t){return e.getScores(!1)}}},[a("v-icon",[e._v("mdi-repeat-once")]),e._v(" Recalculate Scores ")],1)]]],2),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){e.helpDialog=!0}}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}],null,!1,3148663098)},[a("span",[e._v("Help")])])],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" About this page ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" This page let you map source 1 data with those in source2 "),a("v-list",[e._v(" 1. Source 1 refer to the data source name selected as source 1 under data source pair section ")]),a("v-list",[e._v(" 2. Source 2 refer to the data source name selected as source 2 under data source pair section ")]),a("v-list",[e._v(" 3. After breaking a match, you will need to recalculate scores for the app to load potential matches of the broken location ")]),a("v-list",[e._v(" 4. FLAGGED Locations are the locations that will need to be reviewed before they are saved as matches ")]),a("v-list",[e._v(" 5. NO MATCHES - these are locations that do not matches anything from source 2 ")])],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs2:"",right:""}},[a("div",{staticStyle:{"border-style":"solid","border-color":"green","text-align":"center"}},[a("b",[e._v("Source 1 Reconciliation Status")]),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("b",[e._v("Matched")])]),a("v-flex",{attrs:{"align-center":""}},[a("center",[a("b",[e._v(e._s(e.source1TotalMatched)+"/"+e._s(e.source1TotalRecords))])])],1),a("v-flex",[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentMatched,color:"green"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentMatched)+"%")])])],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v("Unmatched")])]),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.source1TotalUnMatched)+"/"+e._s(e.source1TotalRecords))])])],1),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentUnMatched,color:"red"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentUnMatched)+"%")])])],1)],1)],1)],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v("Flagged")])]),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.totalFlagged)+"/"+e._s(e.source1TotalRecords))])])],1),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentFlagged,color:"orange"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentFlagged)+"%")])])],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v("No Match")])]),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.source1TotalNoMatch)+"/"+e._s(e.source1TotalRecords))])])],1),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentNoMatch,color:"red"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentNoMatch)+"%")])])],1)],1)],1)],1)],1)],1)],1)]),a("v-flex",{attrs:{xs4:"","child-flex":""}},[a("v-card",{attrs:{color:"green lighten-2"}},[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Source 1 Unmatched "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUnmatchedSource1,callback:function(t){e.searchUnmatchedSource1=t},expression:"searchUnmatchedSource1"}})],1),e.loadingSource1Unmatched?[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]:[a("liquor-tree",{key:e.source1TreeUpdate,ref:"source1Tree",attrs:{data:e.source1Tree}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source1GridHeaders,items:e.source1Grid,search:e.searchUnmatchedSource1,light:""},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",["Done"===e.$store.state.recoStatus?a("td",{key:r.id},[e._v(e._s(r.name))]):a("td",{key:r.id,staticStyle:{cursor:"pointer"},on:{click:function(t){return e.getPotentialMatch(r.id)}}},[e._v(e._s(r.name))]),e._l(r.parents,(function(t,s){return a("td",{key:r.id+s},[s!=r.parents.length-1?[e._v(" "+e._s(t)+" ")]:e._e()],2)}))],2)]}}],null,!1,4039369149)})]],2)],1),a("v-flex",{attrs:{xs4:""}},[a("v-card",{attrs:{color:"blue lighten-2",dark:""}},[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Source 2 Unmatched "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUnmatchedSource2,callback:function(t){e.searchUnmatchedSource2=t},expression:"searchUnmatchedSource2"}})],1),e.loadingSource2Unmatched?[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]:[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source1UnmatchedHeaders,items:e.$store.state.source2UnMatched,search:e.searchUnmatchedSource2,light:""},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.name)+" "),a("br"),e._v(" "+e._s(e._f("joinParentsAndReverse")(r.parents)))])])]}}],null,!1,2780787155)})]],2)],1),a("v-flex",{attrs:{xs2:"",right:""}},[a("div",{staticStyle:{"border-style":"solid","border-color":"green","text-align":"center"}},[a("b",[e._v("Source 2 Reconciliation Status")]),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v("Matched")])]),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.source2TotalMatched)+"/"+e._s(e.source2TotalRecords))])])],1),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentMatched,color:"green"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source2PercentMatched)+"%")])])],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Unmatched")])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.source2TotalUnmatched)+"/"+e._s(e.source2TotalRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentUnmatched,color:"red"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source2PercentUnmatched)+"%")])])],1)],1)],1)],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v("Flagged")])]),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.totalFlagged)+"/"+e._s(e.source2TotalRecords))])])],1),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentFlagged,color:"orange"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source2PercentFlagged)+"%")])])],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v("Not in Source 1")])]),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.source2NotInSource1))])])],1),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentNotInSource1,color:"red"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source2PercentNotInSource1)+"%")])])],1)],1)],1)],1)],1)],1)],1)])],1),a("v-layout",{attrs:{column:"",wrap:""}},[a("v-tabs",{attrs:{"icons-and-text":"",centered:"",grow:"",dark:"","background-color":"cyan"}},[a("v-tabs-slider",{attrs:{color:"red"}}),a("v-tab",{key:"match"},[e._v(" MATCHED ("+e._s(e.source1TotalMatched)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-up")])],1),a("v-tab",{key:"nomatch"},[e._v(" NO MATCH ("+e._s(e.source1TotalNoMatch)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-down")])],1),a("v-tab",{key:"ignore"},[e._v(" IGNORED ("+e._s(e.source1TotalIgnore)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-down")])],1),a("v-tab",{key:"flagged"},[e._v(" FLAGGED ("+e._s(e.totalFlagged)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-bell")])],1),a("v-tab-item",{key:"match"},[null!=e.$store.state.matchedContent?[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchMatched,callback:function(t){e.searchMatched=t},expression:"searchMatched"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.matchedHeaders,items:e.$store.state.matchedContent,search:e.searchMatched},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.source1Name))]),a("td",[e._v(e._s(r.source1Id))]),a("td",[e._v(e._s(r.source2Name))]),a("td",[a("v-treeview",{attrs:{items:r.source2IdHierarchy}})],1),r.matchComments?a("td",[e._v(e._s(r.matchComments.join(", ")))]):a("td"),a("td",["Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(t){return e.breakMatch(r.source1Id)}}},[a("v-icon",[e._v("mdi-undo")]),e._v("Break Match ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(t){return e.breakMatch(r.source1Id)}}},[a("v-icon",[e._v("mdi-undo")]),e._v("Break Match ")],1)],1)])]}}],null,!1,1712484571)})]:[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2),a("v-tab-item",{key:"nomatch"},[null!=e.$store.state.noMatchContent?[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchNotMatched,callback:function(t){e.searchNotMatched=t},expression:"searchNotMatched"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.noMatchHeaders,items:e.$store.state.noMatchContent,search:e.searchNotMatched},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.source1Name))]),a("td",[e._v(e._s(r.source1Id))]),a("td",[e._v(e._s(r.parents.join("->")))]),a("td",["Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(t){return e.breakNoMatch(r.source1Id,"nomatch")}}},[a("v-icon",[e._v("mdi-cached")]),e._v("Break No Match ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(t){return e.breakNoMatch(r.source1Id,"nomatch")}}},[a("v-icon",[e._v("mdi-cached")]),e._v("Break No Match ")],1)],1)])]}}],null,!1,1597245691)})]:[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2),a("v-tab-item",{key:"ignore"},[null!=e.$store.state.ignoreContent?[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchIgnore,callback:function(t){e.searchIgnore=t},expression:"searchIgnore"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.noMatchHeaders,items:e.$store.state.ignoreContent,search:e.searchIgnore},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("td",[e._v(e._s(r.source1Name))]),a("td",[e._v(e._s(r.source1Id))]),a("td",[e._v(e._s(r.parents.join("->")))]),a("td",["Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(t){return e.breakNoMatch(r.source1Id,"ignore")}}},[a("v-icon",[e._v("mdi-cached")]),e._v("Break Ignore ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(t){return e.breakNoMatch(r.source1Id,"ignore")}}},[a("v-icon",[e._v("mdi-cached")]),e._v("Break Ignore ")],1)],1)]}}],null,!1,1076527946)})]:[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2),a("v-tab-item",{key:"flagged"},[null!=e.$store.state.flagged?[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchFlagged,callback:function(t){e.searchFlagged=t},expression:"searchFlagged"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.flaggedHeaders,items:e.$store.state.flagged,search:e.searchFlagged},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.source1Name))]),a("td",[e._v(e._s(r.source1Id))]),a("td",[e._v(e._s(r.source2Name))]),a("td",[a("v-treeview",{attrs:{items:r.source2IdHierarchy}})],1),a("td",[e._v(e._s(r.flagComment))]),a("td",["Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"primary",small:""},on:{click:function(t){return e.acceptFlag(r.source1Id)}}},[a("v-icon",[e._v("mdi-thumb-up")]),e._v("Confirm Match ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"primary",small:""},on:{click:function(t){return e.acceptFlag(r.source1Id)}}},[a("v-icon",[e._v("mdi-thumb-up")]),e._v("Confirm Match ")],1),"Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(t){return e.unFlag(r.source1Id)}}},[a("v-icon",[e._v("mdi-cached")]),e._v("Release ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(t){return e.unFlag(r.source1Id)}}},[a("v-icon",[e._v("mdi-cached")]),e._v("Release ")],1)],1)])]}}],null,!1,2054694266)})]:[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2)],1)],1),a("v-layout",["yes"!=e.goNextLevel||e.$store.state.scoreSavingProgressData.savingMatches?e._e():a("v-flex",{attrs:{xs1:"",sm4:"",md2:""}},[a("v-btn",{attrs:{color:"primary",rounded:""},on:{click:function(t){return e.levelChanged(e.$store.state.recoLevel+1)}}},[a("v-icon",[e._v("mdi-forward")]),e._v("Proceed to "+e._s(e.nextLevelText)+" ")],1)],1),"yes"==e.lastLevelDone?a("v-flex",{attrs:{xs1:"",sm4:"",md2:""}},[a("v-btn",{attrs:{color:"primary",rounded:""},on:{click:function(t){return e.$router.push({name:"FacilityRecoStatus"})}}},[a("v-icon",[e._v("mdi-view-dashboard")]),e._v("Reconciliation Status ")],1)],1):e._e()],1)],1):e._e()],2)},ca=[],ua=(a("a434"),a("b680"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}},[a("v-dialog",{attrs:{persistent:"",width:"620px"},model:{value:e.downloadDialog,callback:function(t){e.downloadDialog=t},expression:"downloadDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Select file type to download ")]),a("v-spacer"),a("v-icon",{on:{click:e.closeDownloadDialog}},[e._v("mdi-close")])],1),a("v-card-text"),a("v-card-actions",[a("v-btn",{attrs:{rounded:"",color:"info"},on:{click:e.downloadMatched}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-multiple-outline")]),e._v(" Matched ")],1),a("v-spacer"),a("v-btn",{attrs:{rounded:"",color:"info"},on:{click:e.downloadSource1Unmatched}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-multiple-outline")]),e._v(" Source1 Unmatched ")],1),a("v-spacer"),a("v-btn",{attrs:{rounded:"",color:"info"},on:{click:e.downloadSource2Unmatched}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-multiple-outline")]),e._v(" Source2 Unmatched ")],1)],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-btn",{attrs:{color:"success",rounded:"",small:""},on:{click:e.csvExport}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-multiple-outline")]),e.loadingCSV?a("v-progress-circular",{attrs:{indeterminate:"",color:"red"}}):e._e(),e._v(" CSV Export ")],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-btn",{attrs:{color:"success",rounded:"",small:""},on:{click:e.fhirExport}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-multiple-outline")]),e.loadingFHIR?a("v-progress-circular",{attrs:{indeterminate:"",color:"red"}}):e._e(),e._v(" FHIR Export ")],1)],1)],1)],1)}),da=[],va={mixins:[aa,xe],data:function(){return{loadingCSV:!1,loadingFHIR:!1,downloadDialog:!1,matchedDownloadData:"",unmatchedSource1DownloadData:"",unmatchedSource2DownloadData:"",downloadType:""}},methods:{closeDownloadDialog:function(){this.downloadDialog=!1,this.matchedDownloadData="",this.unmatchedSource1DownloadData="",this.unmatchedSource2DownloadData=""},matchedLocations:function(e){var t=this.$store.state.activePair.userID._id,a=this.getSource1(),r=this.getSource2(),s=this.getDatasourceOwner(),o=s.source1Owner,i=s.source2Owner,n=JSON.stringify(this.$store.state.levelMapping.source1),l=JSON.stringify(this.$store.state.levelMapping.source2),c=this.getLimitOrgIdOnActivePair().source1LimitOrgId,d=this.getLimitOrgIdOnActivePair().source2LimitOrgId,v={source1:a,source2:r,source1Owner:o,source2Owner:i,type:e,userID:t,source1LimitOrgId:c,source2LimitOrgId:d,levelMapping1:n,levelMapping2:l};return u.a.get("/matchedLocations",{params:v})},unMatchedLocations:function(e){var t=this.$store.state.activePair.userID._id,a=this.getDatasourceOwner(),r=a.source1Owner,s=a.source2Owner,o=this.$store.state.levelMapping.source1,i=this.$store.state.levelMapping.source2,n=this.getLimitOrgIdOnActivePair().source1LimitOrgId,l=this.getLimitOrgIdOnActivePair().source2LimitOrgId,c=this.getSource1(),d=this.getSource2(),v={source1:c,source2:d,source1Owner:r,source2Owner:s,type:e,userID:t,source1LimitOrgId:n,source2LimitOrgId:l,levelMapping1:o,levelMapping2:i};return u.a.get("/unmatchedLocations",{params:v})},csvExport:function(){this.loadingCSV=!0;var e=this;u.a.all([this.matchedLocations("CSV"),this.unMatchedLocations("CSV")]).then(u.a.spread((function(t,a){e.loadingCSV=!1,e.downloadDialog=!0,e.downloadType="csv",e.matchedDownloadData=t.data,e.unmatchedSource1DownloadData=a.data.unmatchedSource1CSV,e.unmatchedSource2DownloadData=a.data.unmatchedSource2CSV})))},fhirExport:function(){this.loadingFHIR=!0;var e=this;u.a.all([this.matchedLocations("FHIR"),this.unMatchedLocations("FHIR")]).then(u.a.spread((function(t,a){e.loadingFHIR=!1,e.downloadDialog=!0,e.downloadType="fhir",e.matchedDownloadData=t.data,e.unmatchedSource1DownloadData=a.data.unmatchedSource1mCSD,e.unmatchedSource2DownloadData=a.data.unmatchedSource2mCSD})))},downloadMatched:function(){var e,t;"fhir"===this.downloadType?(e="json",t="data:text/json;charset=utf-8,",this.matchedDownloadData=JSON.stringify(this.matchedDownloadData)):(e="csv",t="data:text/csv;charset=utf-8,");var a=t+escape(this.matchedDownloadData),r=document.createElement("a");r.setAttribute("href",a),r.setAttribute("download","matched".concat(this.getSource1()).concat(this.getSource2(),".").concat(e)),r.click()},downloadSource1Unmatched:function(){var e,t;"fhir"===this.downloadType?(e="json",t="data:text/json;charset=utf-8,",this.unmatchedSource1DownloadData=JSON.stringify(this.unmatchedSource1DownloadData)):(e="csv",t="data:text/csv;charset=utf-8,");var a=t+escape(this.unmatchedSource1DownloadData),r=document.createElement("a");r.setAttribute("href",a),r.setAttribute("download","unmatched".concat(this.getSource1(),".").concat(e)),r.click()},downloadSource2Unmatched:function(){var e,t;"fhir"===this.downloadType?(e="json",t="data:text/json;charset=utf-8,",this.unmatchedSource2DownloadData=JSON.stringify(this.unmatchedSource2DownloadData)):(e="csv",t="data:text/csv;charset=utf-8,");var a=t+escape(this.unmatchedSource2DownloadData),r=document.createElement("a");r.setAttribute("href",a),r.setAttribute("download","unmatched".concat(this.getSource2(),".").concat(e)),r.click()}}},pa=va,ha=Object($["a"])(pa,ua,da,!1,null,null,null),fa=ha.exports;w()(ha,{VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardText:T["c"],VContainer:A["a"],VDialog:ue["a"],VFlex:I["a"],VIcon:F["a"],VLayout:V["a"],VProgressCircular:de["a"],VSpacer:O["a"],VToolbar:M["a"],VToolbarTitle:Ae["b"]});var ga={mixins:[aa,xe],data:function(){return{clientId:"",flagCommentDialog:!1,flagComment:"",helpDialog:!1,type:"",source2Id:"",source2Name:"",sort_arrow:"up",pagination:{sortBy:"score"},recoLevel:0,searchUnmatchedSource2:"",searchUnmatchedSource1:"",searchPotential:"",searchMatched:"",searchNotMatched:"",searchIgnore:"",searchFlagged:"",potentialMatches:[],showAllPotential:!1,alertText:"",alertTitle:"",alert:!1,saveProgressTimedout:!1,source1Parents:{},source1Filter:{text:"",level:""},source1TreeUpdate:0,selectedSource1:{},selectedSource1Name:null,selectedSource1Id:null,selectedSource1Lat:null,selectedSource1Long:null,selectedSource1Parents:[],dialog:!1,dialogWidth:"",source1UnmatchedHeaders:[{text:"Location",value:"name"}],noMatchHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"},{text:"Parents",value:"parents"}],flaggedHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"},{text:"Source 2 Location",value:"source2Name"},{text:"Source 2 ID",value:"source2Id"},{text:"Comment",value:"flagComment"}]}},filters:{removeCountry:function(e){var t=e.slice(0);return t.splice(t.length-1,1),t},joinParents:function(e){return e.join("->")},joinParentsAndReverse:function(e){return Object(ae["a"])(e).reverse().join("->")}},methods:{changeSort:function(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1),this.pagination.descending?this.sort_arrow="mdi-down":this.sort_arrow="mdi-up"},addListener:function(){var e=this,t=function t(){e.$refs&&e.$refs.source1Tree?e.$refs.source1Tree.$on("node:selected",(function(t){e.source1Filter.text=t.data.text;var a=1;while(t.parent)t=t.parent,a++;e.source1Filter.level=a})):setTimeout((function(){t()}),500)};t()},levelChanged:function(e){this.$store.state.recoLevel!==e&&(this.$store.state.recoLevel=e,this.getScores(!1),this.$store.state.recoLevel===this.$store.state.totalSource1Levels?this.dialogWidth="1460px":this.dialogWidth="1190px")},getBuildingPotentialMatches:function(e){var t=this;this.potentialMatches=[];var a=this.getSource1(),r=this.getSource2(),s=this.$store.state.recoLevel,o=this.$store.state.totalSource1Levels,i=this.$store.state.totalSource2Levels;if(this.clientId){var n=this.clientId[this.clientId.length-1];n=parseInt(n),n+=1,this.clientId+=n}else{var l=this.$store.state.clientId[this.$store.state.clientId.length-1];l=parseInt(l),l+=1,this.clientId=this.$store.state.clientId+l}var c=this.getDatasourceOwner(),d=this.$store.state.activePair.userID._id,v=c.source1Owner,p=c.source2Owner,h=this.getLimitOrgIdOnActivePair().source1LimitOrgId,f=this.getLimitOrgIdOnActivePair().source2LimitOrgId,g=JSON.stringify(this.$store.state.config.generalConfig.reconciliation.parentConstraint),m="id=".concat(e,"&source1=").concat(a,"&source2=").concat(r,"&source1Owner=").concat(v,"&source2Owner=").concat(p,"&source1LimitOrgId=").concat(h,"&source2LimitOrgId=").concat(f,"&totalSource1Levels=").concat(o,"&totalSource2Levels=").concat(i);m+="&recoLevel=".concat(s,"&clientId=").concat(this.clientId,"&userID=").concat(d,"&parentConstraint=")+g+"&getPotential="+!0,this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Getting potential matches from server",u.a.get("/reconcile/?"+m).then((function(e){if(t.$store.state.dynamicProgress=!1,e.data){var a=JSON.parse(e.data).responseData.scoreResults;if(a.length>0){var r=a[0],s=r.exactMatch;if(Object.keys(s).length>0)return t.$store.state.dialogError=!0,t.$store.state.errorDescription="This location is already mapped, please recalculate scores to get changes",t.$store.state.errorTitle="Info",void(t.$store.state.errorColor="error");for(var o in t.selectedSource1=r.source1,t.selectedSource1Name=r.source1.name,t.selectedSource1Parents=r.source1.parents,t.selectedSource1Lat=r.source1.lat,t.selectedSource1Long=r.source1.long,t.selectedSource1Id=r.source1.id,r.potentialMatches){var i=function(e){var a=r.potentialMatches[o][e];return l=t.$store.state.matchedContent.find((function(e){return e.source2Id===a.id})),c=t.$store.state.flagged.find((function(e){return e.source2Id===a.id})),l||c?"continue":void t.potentialMatches.push({score:o,name:a.name,id:a.id,source2IdHierarchy:a.source2IdHierarchy,lat:a.lat,long:a.long,geoDistance:a.geoDistance,parents:a.parents,mappedParentName:a.mappedParentName})};for(var n in r.potentialMatches[o]){var l,c;i(n)}}}t.dialog=!0}else t.dialog=!0})).catch((function(e){console.log(e)}))},getJurisdictionPotentialMatches:function(e){var t=this;this.potentialMatches=[],this.showAllPotential=!1;var a,r=Object(n["a"])(this.$store.state.scoreResults);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(s.source1.id===e)for(var o in this.selectedSource1=s.source1,this.selectedSource1Name=s.source1.name,this.selectedSource1Parents=s.source1.parents,this.selectedSource1Lat=s.source1.lat,this.selectedSource1Long=s.source1.long,this.selectedSource1Id=s.source1.id,s.potentialMatches){var i=function(e){var a=s.potentialMatches[o][e];return c=t.$store.state.matchedContent.find((function(e){return e.source2Id===a.id})),u=t.$store.state.flagged.find((function(e){return e.source2Id===a.id})),c||u?"continue":void t.potentialMatches.push({score:o,name:a.name,id:a.id,source2IdHierarchy:a.source2IdHierarchy,lat:a.lat,long:a.long,geoDistance:a.geoDistance,parents:a.parents,mappedParentName:a.mappedParentName})};for(var l in s.potentialMatches[o]){var c,u;i(l)}}}}catch(d){r.e(d)}finally{r.f()}this.dialog=!0},getPotentialMatch:function(e){this.getBuildingPotentialMatches(e)},potentialMatchComment:function(e){var t="";if(this.$store.state.recoLevel===this.$store.state.totalSource1Levels){var a=[],r=[];if(this.selectedSource1.source1IdHierarchy){a.push(this.selectedSource1.source1IdHierarchy[0].id);var s,o=Object(n["a"])(this.selectedSource1.source1IdHierarchy[0].children);try{for(o.s();!(s=o.n()).done;){var i=s.value;a.push(i.id)}}catch(h){o.e(h)}finally{o.f()}}if(e.source2IdHierarchy){r.push(e.source2IdHierarchy[0].id);var l,c=Object(n["a"])(e.source2IdHierarchy[0].children);try{for(c.s();!(l=c.n()).done;){var u=l.value;r.push(u.id)}}catch(h){c.e(h)}finally{c.f()}}var d=a.some((function(e){return r.indexOf(e)>=0}));d||(t&&(t+=", "),t+="ID differ")}e.name.toLowerCase()!==this.selectedSource1.name.toLowerCase()&&(t&&(t+=", "),t+="Names differ");var v=e.mappedParentName,p=this.selectedSource1.parents[0];return p!==v&&(t&&(t+=", "),t+="Parents differ"),t},match:function(e,t,a,r,s){if(this.matchType=e,this.source2Id=t,this.source2Name=a,this.source2IdHierarchy=r,this.mappedParentName=s,null===t)return this.alert=!0,this.alertTitle="Information",void(this.alertText="Select Source 2 Location to match against Source 1 Location");"flag"===e?this.flagCommentDialog=!0:this.saveMatch()},saveMatch:function(){var e=this;this.flagCommentDialog=!1,this.$store.state.progressTitle="Saving match",this.$store.state.dynamicProgress=!0;var t=this.getDatasourceOwner(),a=new FormData;a.append("source1Id",this.selectedSource1Id),a.append("source2Id",this.source2Id),a.append("source1Owner",t.source1Owner),a.append("source2Owner",t.source2Owner),a.append("flagComment",this.flagComment),a.append("source1DB",this.getSource1()),a.append("source2DB",this.getSource2()),a.append("recoLevel",this.$store.state.recoLevel),a.append("totalLevels",this.$store.state.totalSource1Levels),a.append("userID",this.$store.state.activePair.userID._id),u.a.post("/match/"+this.matchType,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.$store.state.dynamicProgress=!1;var a=null;for(var r in e.$store.state.source2UnMatched)e.$store.state.source2UnMatched[r].id===e.source2Id&&(a=e.$store.state.source2UnMatched[r].parents,e.$store.state.source2UnMatched.splice(r,1));for(var s in e.$store.state.source1UnMatched)e.$store.state.source1UnMatched[s].id===e.selectedSource1Id&&("match"===e.matchType?(++e.$store.state.totalAllMapped,e.$store.state.matchedContent.push({source1Name:e.selectedSource1Name,source1Id:e.selectedSource1Id,source1Parents:e.$store.state.source1UnMatched[s].parents,source2Name:e.source2Name,source2Id:e.source2Id,source2IdHierarchy:e.source2IdHierarchy,mappedParentName:e.mappedParentName,source2Parents:a,matchComments:t.data.matchComments})):"flag"===e.matchType&&(++e.$store.state.totalAllFlagged,e.$store.state.flagged.push({source1Name:e.selectedSource1Name,source1Id:e.selectedSource1Id,source1Parents:e.$store.state.source1UnMatched[s].parents,source2Name:e.source2Name,source2Id:e.source2Id,source2IdHierarchy:e.source2IdHierarchy,mappedParentName:e.mappedParentName,source2Parents:a,flagComment:e.flagComment})),e.$store.state.source1UnMatched.splice(s,1));e.flagComment="",e.selectedSource1Id=null,e.selectedSource1Name=null,e.dialog=!1})).catch((function(t){e.flagComment="",e.$store.state.dynamicProgress=!1,e.alert=!0,e.alertTitle="Error",e.alertText=t.response.data.error,e.selectedSource1Id=null,e.selectedSource1Name=null,e.dialog=!1}))},acceptFlag:function(e){var t=this;this.$store.state.progressTitle="Accepting flag",this.$store.state.dynamicProgress=!0;var a=new FormData;a.append("source1Id",e);var r=this.$store.state.activePair.userID._id;u.a.post("/acceptFlag/"+this.getSource1()+"/"+this.getSource2()+"/"+r,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var a in t.$store.state.dynamicProgress=!1,t.$store.state.flagged)t.$store.state.flagged[a].source1Id===e&&(t.$store.state.matchedContent.push({source1Name:t.$store.state.flagged[a].source1Name,source1Id:t.$store.state.flagged[a].source1Id,source1Parents:t.$store.state.flagged[a].source1Parents,source2Name:t.$store.state.flagged[a].source2Name,source2Id:t.$store.state.flagged[a].source2Id,source2IdHierarchy:t.$store.state.flagged[a].source2IdHierarchy,mappedParentName:t.$store.state.flagged[a].mappedParentName,source2Parents:t.$store.state.flagged[a].source2Parents}),t.$store.state.flagged.splice(a,1),++t.$store.state.totalAllMapped,--t.$store.state.totalAllFlagged)})).catch((function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.selectedSource1Id=null,t.selectedSource1Name=null,t.dialog=!1,console.log(e)}))},breakMatch:function(e){var t=this;this.$store.state.progressTitle="Breaking match",this.$store.state.dynamicProgress=!0;var a=new FormData,r=this.$store.state.activePair.userID._id,s=this.getDatasourceOwner();a.append("source1Id",e),u.a.post("/breakMatch/"+this.getSource1()+"/"+this.getSource2()+"/"+s.source1Owner+"/"+s.source2Owner+"/"+r,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var a in t.$store.state.dynamicProgress=!1,t.$store.state.matchedContent)t.$store.state.matchedContent[a].source1Id===e&&(t.$store.state.source1UnMatched.push({name:t.$store.state.matchedContent[a].source1Name,id:t.$store.state.matchedContent[a].source1Id,parents:t.$store.state.matchedContent[a].source1Parents}),t.$store.state.source2UnMatched.push({name:t.$store.state.matchedContent[a].source2Name,id:t.$store.state.matchedContent[a].source2Id,source2IdHierarchy:t.$store.state.matchedContent[a].source2IdHierarchy,mappedParentName:t.$store.state.matchedContent[a].mappedParentName,parents:t.$store.state.matchedContent[a].source2Parents}),t.$store.state.matchedContent.splice(a,1),--t.$store.state.totalAllMapped)})).catch((function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.selectedSource1Id=null,t.selectedSource1Name=null,t.dialog=!1,console.log(e)}))},unFlag:function(e){var t=this;this.$store.state.progressTitle="Unflagging match",this.$store.state.dynamicProgress=!0;var a=new FormData,r=this.$store.state.activePair.userID._id,s=this.getDatasourceOwner();a.append("source1Id",e),u.a.post("/breakMatch/"+this.getSource1()+"/"+this.getSource2()+"/"+s.source1Owner+"/"+s.source2Owner+"/"+r,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var a in t.$store.state.dynamicProgress=!1,t.$store.state.flagged)t.$store.state.flagged[a].source1Id===e&&(t.$store.state.source1UnMatched.push({name:t.$store.state.flagged[a].source1Name,id:t.$store.state.flagged[a].source1Id,parents:t.$store.state.flagged[a].source1Parents}),t.$store.state.source2UnMatched.push({name:t.$store.state.flagged[a].source2Name,id:t.$store.state.flagged[a].source2Id,source2IdHierarchy:t.$store.state.flagged[a].source2IdHierarchy,mappedParentName:t.$store.state.flagged[a].mappedParentName,parents:t.$store.state.flagged[a].source2Parents}),t.$store.state.flagged.splice(a,1),--t.$store.state.totalAllFlagged)})).catch((function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.selectedSource1Id=null,t.selectedSource1Name=null,t.dialog=!1,console.log(e)}))},breakNoMatch:function(e,t){var a=this;this.$store.state.progressTitle="Breaking no match",this.$store.state.dynamicProgress=!0;var r=new FormData;r.append("source1Id",e),r.append("recoLevel",this.$store.state.recoLevel),r.append("totalLevels",this.$store.state.totalSource1Levels);var s=this.$store.state.activePair.userID._id;u.a.post("/breakNoMatch/"+t+"/"+this.getSource1()+"/"+this.getSource2()+"/"+s,r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){if(a.$store.state.dynamicProgress=!1,"nomatch"===t)for(var r in a.$store.state.noMatchContent)a.$store.state.noMatchContent[r].source1Id===e&&(a.$store.state.source1UnMatched.push({name:a.$store.state.noMatchContent[r].source1Name,id:a.$store.state.noMatchContent[r].source1Id,parents:a.$store.state.noMatchContent[r].parents}),a.$store.state.noMatchContent.splice(r,1),--a.$store.state.totalAllNoMatch);else if("ignore"===t)for(var s in a.$store.state.ignoreContent)a.$store.state.ignoreContent[s].source1Id===e&&(a.$store.state.source1UnMatched.push({name:a.$store.state.ignoreContent[s].source1Name,id:a.$store.state.ignoreContent[s].source1Id,parents:a.$store.state.ignoreContent[s].parents}),a.$store.state.ignoreContent.splice(s,1),--a.$store.state.totalAllIgnore)})).catch((function(e){a.$store.state.dynamicProgress=!1,a.alert=!0,a.alertTitle="Error",a.alertText=e.response.data.error,a.selectedSource1Id=null,a.selectedSource1Name=null,a.dialog=!1,console.log(e)}))},noMatch:function(e){var t=this;this.$store.state.progressTitle="Saving as no match",this.$store.state.dynamicProgress=!0;var a=this.$store.state.activePair.userID._id,r=this.getDatasourceOwner(),s=r.source1Owner,o=r.source2Owner,i=new FormData;i.append("source1Id",this.selectedSource1Id),i.append("recoLevel",this.$store.state.recoLevel),i.append("totalLevels",this.$store.state.totalSource1Levels),u.a.post("/noMatch/".concat(e,"/").concat(this.getSource1(),"/").concat(this.getSource2(),"/").concat(s,"/").concat(o,"/").concat(a),i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){if(t.$store.state.dynamicProgress=!1,"nomatch"===e)for(var a in t.$store.state.source1UnMatched)t.$store.state.source1UnMatched[a].id===t.selectedSource1Id&&(t.$store.state.noMatchContent.push({source1Name:t.selectedSource1Name,source1Id:t.selectedSource1Id,parents:t.$store.state.source1UnMatched[a].parents}),++t.$store.state.totalAllNoMatch,t.$store.state.source1UnMatched.splice(a,1));else if("ignore"===e)for(var r in t.$store.state.source1UnMatched)t.$store.state.source1UnMatched[r].id===t.selectedSource1Id&&(t.$store.state.ignoreContent.push({source1Name:t.selectedSource1Name,source1Id:t.selectedSource1Id,parents:t.$store.state.source1UnMatched[r].parents}),++t.$store.state.totalAllIgnore,t.$store.state.source1UnMatched.splice(r,1));t.dialog=!1,t.selectedSource1Id=null,t.selectedSource1Name=null})).catch((function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.dialog=!1,t.selectedSource1Id=null,t.selectedSource1Name=null}))},back:function(){this.searchPotential="",this.dialog=!1}},computed:{nextLevelText:{get:function(){return this.translateDataHeader("source1",this.$store.state.recoLevel)},set:function(){}},currentLevelText:{get:function(){return this.translateDataHeader("source1",this.$store.state.recoLevel-1)},set:function(){}},matchedHeaders:function(){var e=[{text:"Source1 Location",value:"source1Name"},{text:"Source1 ID",value:"source1Id"},{text:"Source2 Location",value:"source2Name"},{text:"Source2 ID",value:"source2Id"},{text:"Match Comment",value:"matchComments"}];return e},source1GridHeaders:function(){var e=[{text:"Location",value:"name"}];if(this.$store.state.source1UnMatched.length>0)for(var t=this.$store.state.source1UnMatched[0].parents.length;t>0;t--)e.push({text:"Level "+t,value:"level"+(t+1)});return e.splice(1,1),e},potentialHeaders:function(){var e=[];return e.push({sortable:!1},{text:"Source 2 Location",value:"name",sortable:!1},{text:"ID",value:"id",sortable:!1},{text:"Parent",value:"source2Parent",sortable:!1}),this.$store.state.recoLevel===this.$store.state.totalSource1Levels&&e.push({text:"Geo Dist (Miles)",value:"geodist",sortable:!1}),e.push({text:"Score",value:"score"}),e.push({text:"Comment",value:"comment",sortable:!1}),e},potentialAvailable:function(){return null!==this.$store.state.source2UnMatched&&this.$store.state.source2UnMatched.length>this.potentialMatches.length},allPotentialMatches:function(){var e=this;if(null!==this.$store.state.source2UnMatched&&this.$store.state.source2UnMatched.length>this.potentialMatches.length&&this.showAllPotential){var t,a=[],r=Object(n["a"])(this.$store.state.source2UnMatched);try{var s=function(){var r=t.value,s=e.potentialMatches.find((function(e){return e.id===r.id}));s||(r.score="N/A",a.push(r))};for(r.s();!(t=r.n()).done;)s()}catch(o){r.e(o)}finally{r.f()}return this.potentialMatches.concat(a)}return this.potentialMatches},source1Tree:function(){this.addListener();var e=function e(t,a){for(var r in t){var s={text:r,children:[]};e(t[r],s.children),0===s.children.length&&delete s.children,a.push(s)}},t=[];return 1===Object.keys(this.$store.state.source1Parents).length&&"null"===Object.keys(this.$store.state.source1Parents)[0]||e(this.$store.state.source1Parents,t),t},source1Grid:function(){var e=this;if(this.$store.state.source1UnMatched.length>0&&""!==this.source1Filter.level){var t=this.$store.state.source1UnMatched[0].parents.length-this.source1Filter.level;return this.$store.state.source1UnMatched.filter((function(a){return a.parents[t]===e.source1Filter.text}))}return this.$store.state.source1UnMatched},goNextLevel:function(){return this.$store.state.recoLevel<this.$store.state.totalSource1Levels&&null!==this.$store.state.source1UnMatched&&0===this.$store.state.source1UnMatched.length&&null!==this.$store.state.flagged&&0===this.$store.state.flagged.length&&null!==this.$store.state.matchedContent&&0!==this.$store.state.matchedContent.length?"yes":"no"},lastLevelDone:function(){return this.$store.state.recoLevel===this.$store.state.totalSource1Levels&&null!==this.$store.state.source1UnMatched&&0===this.$store.state.source1UnMatched.length&&null!==this.$store.state.flagged&&0===this.$store.state.flagged.length?"yes":"no"},source1TotalRecords:function(){return this.$store.state.scoreResults?this.$store.state.scoreResults.length:0},source1TotalMatched:function(){return this.$store.state.matchedContent?this.$store.state.matchedContent.length:0},source1PercentMatched:function(){return 0===this.source1TotalRecords?0:parseFloat((100*this.source1TotalMatched/this.source1TotalRecords).toFixed(1))},source1TotalUnMatched:function(){return this.source1TotalRecords-this.source1TotalMatched},source1PercentUnMatched:function(){return 0===this.source1TotalRecords?0:parseFloat((100*this.source1TotalUnMatched/this.source1TotalRecords).toFixed(1))},totalFlagged:function(){return this.$store.state.flagged?this.$store.state.flagged.length:0},source1PercentFlagged:function(){return 0===this.$store.state.scoreResults.length?0:this.$store.state.flagged?parseFloat((100*this.$store.state.flagged.length/this.$store.state.scoreResults.length).toFixed(1)):0},source1TotalNoMatch:function(){return this.$store.state.noMatchContent?this.$store.state.noMatchContent.length:0},source1TotalIgnore:function(){return this.$store.state.ignoreContent?this.$store.state.ignoreContent.length:0},source1PercentNoMatch:function(){return 0===this.$store.state.scoreResults.length?0:this.$store.state.noMatchContent?parseFloat((100*this.$store.state.noMatchContent.length/this.$store.state.scoreResults.length).toFixed(1)):0},source1PercentIgnore:function(){return 0===this.$store.state.scoreResults.length?0:this.$store.state.ignoreContent?parseFloat((100*this.$store.state.ignoreContent.length/this.$store.state.scoreResults.length).toFixed(1)):0},source2TotalRecords:function(){return this.$store.state.source2TotalRecords?this.$store.state.source2TotalRecords:0},source2TotalUnmatched:function(){return this.source2TotalRecords>0&&this.$store.state.matchedContent?parseInt(this.source2TotalRecords)-parseInt(this.$store.state.matchedContent.length):0},source2PercentUnmatched:function(){return 0===this.$store.state.source2TotalRecords?0:parseFloat((100*this.source2TotalUnmatched/this.$store.state.source2TotalRecords).toFixed(1))},source2PercentFlagged:function(){return 0===this.$store.state.source2TotalRecords?0:this.$store.state.flagged?parseFloat((100*this.$store.state.flagged.length/this.$store.state.source2TotalRecords).toFixed(1)):0},source2TotalMatched:function(){return this.source1TotalMatched},source2PercentMatched:function(){return 0===this.$store.state.source2TotalRecords?0:parseFloat((100*this.source2TotalMatched/this.$store.state.source2TotalRecords).toFixed(1))},source2NotInSource1:function(){var e=this.source2TotalRecords-this.source1TotalRecords;return e<0?0:e},source2PercentNotInSource1:function(){if(0===this.source2NotInSource1)return 0;var e=parseFloat((100*this.source2NotInSource1/this.source2TotalRecords).toFixed(1));return parseFloat(e)}},created:function(){var e=this;this.$store.state.recalculateScores&&(this.$store.state.recalculateScores=!1,this.getScores(!1)),Fs.$on("changeCSVHeaderNames",(function(){var t=e.translateDataHeader("source1",e.$store.state.recoLevel);e.nextLevelText=t,e.currentLevelText=t})),this.addListener(),this.$store.state.recoLevel===this.$store.state.totalSource1Levels?this.dialogWidth="auto":this.dialogWidth="1500px",this.source1TreeUpdate++},components:{"liquor-tree":Et["a"],appRecoExport:fa}},ma=ga,ya=a("71a3"),ba=a("c671"),xa=a("fe57"),_a=a("9a96"),Sa=a("a844"),$a=Object($["a"])(ma,la,ca,!1,null,null,null),ka=$a.exports;w()($a,{VAlert:C["a"],VAvatar:ce["a"],VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardText:T["c"],VCardTitle:T["d"],VCol:Yt["a"],VContainer:A["a"],VDataTable:we["a"],VDialog:ue["a"],VFlex:I["a"],VIcon:F["a"],VLayout:V["a"],VList:Vt["a"],VProgressCircular:de["a"],VProgressLinear:ve["a"],VRow:Kt["a"],VSelect:Pe["a"],VSpacer:O["a"],VTab:ya["a"],VTabItem:ba["a"],VTabs:xa["a"],VTabsSlider:_a["a"],VTextField:L["a"],VTextarea:Sa["a"],VToolbar:M["a"],VToolbarTitle:Ae["b"],VTooltip:Ie["a"],VTreeview:Re["a"]});var wa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{transition:"scale-transition","hide-overlay":"",persistent:"",width:"350"},model:{value:e.mappingStatusDialog,callback:function(t){e.mappingStatusDialog=t},expression:"mappingStatusDialog"}},[a("v-card",{attrs:{color:"white",dark:""}},[a("v-card-text",[a("center",[a("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.mappingStatusProgressTitle))]),a("br"),"percent"==e.progressType?a("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.mappingStatusProgressPercent,color:"primary"}},[a("v-avatar",{attrs:{color:"indigo",size:"50px"}},[a("span",{staticClass:"white--text"},[a("b",[e._v(e._s(e.mappingStatusProgressPercent)+"%")])])])],1):e._e(),"indeterminate"==e.progressType?a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"red"}}):e._e()],1)],1)],1)],1),a("v-layout",{attrs:{column:""}},[a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" About this page ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" This page let you visualize the mapping status for various levels "),a("v-list",[e._v(" 1. Right boxes shows reconciliation status for a selected level ")]),a("v-list",[e._v(" 2. Left boxes shows reconciliation status for a all levels ")]),a("v-list",[e._v(" 3. The search box let you search locations for a selected level only ")])],1)],1)],1),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-row",[a("v-col",{attrs:{cols:"3"}},[a("appRecoExport")],1),a("v-spacer"),a("v-col",{attrs:{cols:"1"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){e.helpDialog=!0}}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}])},[a("span",[e._v("Help")])])],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"1"}},[a("b",[e._v("All Levels")])]),a("v-spacer"),a("v-col",{attrs:{cols:"1"}},[a("b",[e._v(e._s(e.currentLevelText)+" Only")])])],1),a("v-row",[a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 1 Matched")])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllMapped)+"/"+e._s(e.$store.state.source1TotalAllRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentMapped,color:"yellow"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source1PercentMapped)+"%")])])],1)],1)],1)],1)],1)],1),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 1 No Match")])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllNoMatch)+"/"+e._s(e.$store.state.source1TotalAllRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentNoMatch,color:"yellow"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source1PercentNoMatch)+"%")])])],1)],1)],1)],1)],1)],1),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 1 Flagged")])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllFlagged)+"/"+e._s(e.$store.state.source1TotalAllRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentFlagged,color:"yellow"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source1PercentFlagged)+"%")])])],1)],1)],1)],1)],1)],1),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 2 Matched")])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllMapped)+"/"+e._s(e.$store.state.source2TotalAllRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentMapped,color:"green"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source2PercentMapped)+"%")])])],1)],1)],1)],1)],1)],1),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 2 Flagged")])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllFlagged)+"/"+e._s(e.$store.state.source2TotalAllRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentFlagged,color:"yellow"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source2PercentFlagged)+"%")])])],1)],1)],1)],1)],1)],1),a("v-spacer"),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"cyan","text-color":"black"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 1 Matched")])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.totalMapped)+"/"+e._s(e.totalRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentMappedLevel,color:"yellow"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentMappedLevel)+"%")])])],1)],1)],1)],1)],1)],1),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"cyan","text-color":"black"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 1 No Match")])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.totalNoMatch)+"/"+e._s(e.totalRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentNoMatchLevel,color:"yellow"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentNoMatchLevel)+"%")])])],1)],1)],1)],1)],1)],1),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"cyan","text-color":"black"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v("Source 1 Flagged")])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.totalFlagged)+"/"+e._s(e.totalRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentFlagged,color:"yellow"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentFlagged)+"%")])])],1)],1)],1)],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"3"}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchMatched,callback:function(t){e.searchMatched=t},expression:"searchMatched"}})],1),a("v-spacer"),a("v-col",{attrs:{cols:"3"}},[e.$store.state.activePair.userID._id===e.$store.state.auth.userID||"Admin"==e.$store.state.auth.role?["Done"!==e.$store.state.recoStatus?a("v-btn",{attrs:{color:"success",rounded:""},on:{click:e.markRecoDone}},[a("v-icon",[e._v("mdi-lock")]),e._v("Mark Reconciliation As Done ")],1):e._e(),"Done"===e.$store.state.recoStatus&&"Admin"==e.$store.state.auth.role?a("v-btn",{attrs:{color:"success",rounded:""},on:{click:e.markRecoUnDone}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-lock-open-variant")]),e._v("Mark Reconciliation As UnDone ")],1):e._e()]:e._e()],2),a("v-spacer"),a("v-col",[a("v-select",{staticClass:"input-group--focused",attrs:{items:e.locationLevels,"item-value":e.locationLevels.value,"item-name":e.locationLevels.text,label:"Level",height:"1","full-width":"","single-line":""},on:{change:e.levelChanged},model:{value:e.recoLevel,callback:function(t){e.recoLevel=t},expression:"recoLevel"}})],1)],1),a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}}),a("v-spacer"),a("v-flex",{attrs:{xs2:""}}),a("v-spacer"),a("v-flex",{attrs:{xs1:"",sm2:"",md2:"",right:""}})],1)],1),a("v-flex",{attrs:{xs1:""}},[a("v-tabs",{attrs:{"icons-and-text":"",centered:"",grow:"",dark:"","background-color":"cyan"}},[a("v-tabs-slider",{attrs:{color:"red"}}),a("v-tab",{key:"match"},[e._v(" MATCHED ("+e._s(e.totalMapped)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-up")])],1),a("v-tab",{key:"notMapped"},[e._v(" Source 1 Not Mapped ("+e._s(e.totalNotMapped)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-down")])],1),a("v-tab",{key:"nomatch"},[e._v(" Source 1 NO MATCH ("+e._s(e.totalNoMatch)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-down")])],1),a("v-tab",{key:"ignore"},[e._v(" Source 1 IGNORED ("+e._s(e.totalIgnore)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-down")])],1),a("v-tab",{key:"flagged"},[e._v(" FLAGGED ("+e._s(e.totalFlagged)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-bell")])],1),a("v-tab-item",{key:"match"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.matchedHeaders,items:e.mappingData.mapped,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),a("td",[e._v(e._s(t.item.source1Id))]),a("td",[e._v(e._s(t.item.source2Name))]),a("td",[e._v(e._s(t.item.source2Id))])]}}])})],1),a("v-tab-item",{key:"notMapped"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.notMappedHeaders,items:e.mappingData.notMapped,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),a("td",[e._v(e._s(t.item.source1Id))])]}}])})],1),a("v-tab-item",{key:"nomatch"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.noMatchHeaders,items:e.mappingData.noMatch,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),a("td",[e._v(e._s(t.item.source1Id))])]}}])})],1),a("v-tab-item",{key:"ignore"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.noMatchHeaders,items:e.mappingData.ignore,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),a("td",[e._v(e._s(t.item.source1Id))])]}}])})],1),a("v-tab-item",{key:"flagged"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.flaggedHeaders,items:e.mappingData.flagged,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),a("td",[e._v(e._s(t.item.source1Id))]),a("td",[e._v(e._s(t.item.source2Name))]),a("td",[e._v(e._s(t.item.source2Id))])]}}])})],1)],1)],1)],1)],1)},Ca=[],Da={mixins:[aa],data:function(){return{helpDialog:!1,matchedHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"},{text:"Source 2 Location",value:"source2Name"},{text:"Source 2 ID",value:"source2Id"}],noMatchHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"}],notMappedHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"}],flaggedHeaders:[{text:"Source 1 Location",value:"source1Name"},{text:"Source 1 ID",value:"source1Id"},{text:"Source 2 Location",value:"source2Name"},{text:"Source 2 ID",value:"source2Id"}],searchMatched:"",mappingData:{},recoLevel:2,mappingStatusDialog:!1,mappingStatusProgressTitle:"Waiting for progress status",mappingStatusProgressPercent:0,locationLevels:[]}},methods:{checkMappingStatusProgress:function(){var e=this,t=this.$store.state.clientId;u.a.get("/progress/mappingStatus/"+t).then((function(t){return null===t.data||void 0===t.data||!1===t.data?(e.mappingStatusDialog=!1,e.mappingStatusProgressTitle="Waiting for progress status",void clearInterval(e.mappingStatusProgressTimer)):null===t.data.status&&null===t.data.error&&null===t.data.percent?(e.mappingStatusDialog=!1,clearInterval(e.mappingStatusProgressTimer),void(e.mappingStatusProgressTitle="Waiting for progress status")):(e.mappingStatusProgressTitle=t.data.status,t.data.percent&&("percent"!==e.progressType&&(e.progressType="percent"),e.mappingStatusProgressPercent=t.data.percent),void("Done"===t.data.status&&(e.clearProgress("mappingStatus"),clearInterval(e.mappingStatusProgressTimer),e.mappingStatusDialog=!1,e.mappingStatusProgressTitle="Waiting for progress status")))})).catch((function(e){console.log(e)}))},mappingStatus:function(){var e=this;if(this.source1&&this.source2){this.mappingData={};var t=this.$store.state.clientId,a=this.$store.state.totalSource2Levels,r=this.$store.state.totalSource1Levels,s=this.$store.state.activePair.userID._id,o=this.getDatasourceOwner(),i=o.source1Owner,n=o.source2Owner,l=this.getLimitOrgIdOnActivePair().source1LimitOrgId,c=this.getLimitOrgIdOnActivePair().source2LimitOrgId;this.mappingStatusDialog=!0,this.progressType="indeterminate";var d="/mappingStatus/".concat(this.source1,"/").concat(this.source2,"/").concat(i,"/").concat(n,"/").concat(this.recoLevel,"/").concat(a,"/").concat(r,"/").concat(t,"/").concat(s,"?source1LimitOrgId=").concat(l,"&source2LimitOrgId=").concat(c);u.a.get(d).then((function(t){e.mappingData=t.data})),this.mappingStatusProgressTimer=setInterval(this.checkMappingStatusProgress,500)}},levelChanged:function(e){this.recoLevel=e,this.mappingStatus()},markRecoDone:function(){var e=this;this.$store.state.progressTitle="Marking reconciliation as Done",this.$store.state.dynamicProgress=!0;var t=this.$store.state.activePair.userID._id;u.a.get("/markRecoDone/"+this.source1+"/"+this.source2+"/"+t).then((function(t){e.$store.state.dynamicProgress=!1,t.data.status&&(e.$store.state.recoStatus=t.data.status),e.$store.state.errorTitle="Reconciliation Done",e.$store.state.errorDescription="Reconciliation is complete, no more changes can be done",e.$store.state.errorColor="primary",e.$store.state.dialogError=!0})).catch((function(t){e.$store.state.dynamicProgress=!1,console.log(t.response.data.error)}))},markRecoUnDone:function(){var e=this,t=this.$store.state.activePair.userID._id;this.$store.state.progressTitle="Marking reconciliation as Un Done",this.$store.state.dynamicProgress=!0,u.a.get("/markRecoUnDone/"+this.source1+"/"+this.source2+"/"+t).then((function(t){e.$store.state.dynamicProgress=!1,t.data.status&&(e.$store.state.recoStatus=t.data.status),e.$store.state.errorTitle="Reconciliation on progress",e.$store.state.errorDescription="You may continue doing reconciliation now",e.$store.state.errorColor="primary",e.$store.state.dialogError=!0})).catch((function(t){e.$store.state.dynamicProgress=!1,console.log(t.response.data.error)}))}},computed:{currentLevelText:function(){return this.translateDataHeader("source1",this.recoLevel-1)},source1:function(){var e=this.$store.state.activePair.source1.name;return e&&(e=this.toTitleCase(e)),e},source2:function(){var e=this.$store.state.activePair.source2.name;return e&&(e=this.toTitleCase(e)),e},source1PercentMapped:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllMapped/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentMappedLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalMapped/this.totalRecords).toFixed(2))},source1PercentNoMatch:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllNoMatch/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentIgnore:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllIgnore/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentNoMatchLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalNoMatch/this.totalRecords).toFixed(2))},source1PercentIgnoreLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalIgnore/this.totalRecords).toFixed(2))},source1PercentFlagged:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllFlagged/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentFlaggedLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalFlagged/this.totalRecords).toFixed(2))},source1PercentNotMapped:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.source1TotalAllNotMapped/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentNotMappedLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalNotMapped/this.totalRecords).toFixed(2))},source2PercentFlagged:function(){return 0===this.$store.state.source2TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllFlagged/this.$store.state.source2TotalAllRecords).toFixed(2))},source2PercentMapped:function(){return 0===this.$store.state.source2TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllMapped/this.$store.state.source2TotalAllRecords).toFixed(2))},totalMapped:function(){return this.mappingData&&this.mappingData.hasOwnProperty("mapped")?this.mappingData.mapped.length:0},totalNotMapped:function(){return this.mappingData&&this.mappingData.hasOwnProperty("notMapped")?this.mappingData.notMapped.length:0},totalNoMatch:function(){return this.mappingData&&this.mappingData.hasOwnProperty("noMatch")?this.mappingData.noMatch.length:0},totalIgnore:function(){return this.mappingData&&this.mappingData.hasOwnProperty("ignore")?this.mappingData.ignore.length:0},totalFlagged:function(){return this.mappingData&&this.mappingData.hasOwnProperty("flagged")?this.mappingData.flagged.length:0},totalRecords:function(){return this.totalMapped+this.totalNotMapped+this.totalNoMatch+this.totalIgnore+this.totalFlagged}},components:{appRecoExport:fa},created:function(){this.mappingStatus();for(var e=1;e<this.$store.state.totalSource1Levels;e++){var t=this.translateDataHeader("source1",e);this.locationLevels.push({text:t,value:e+1})}}},Pa=Da,Ta=Object($["a"])(Pa,wa,Ca,!1,null,null,null),Aa=Ta.exports;w()(Ta,{VAvatar:ce["a"],VBtn:D["a"],VCard:P["a"],VCardText:T["c"],VChip:ke["a"],VCol:Yt["a"],VContainer:A["a"],VDataTable:we["a"],VDialog:ue["a"],VFlex:I["a"],VIcon:F["a"],VLayout:V["a"],VList:Vt["a"],VProgressCircular:de["a"],VProgressLinear:ve["a"],VRow:Kt["a"],VSelect:Pe["a"],VSpacer:O["a"],VTab:ya["a"],VTabItem:ba["a"],VTabs:xa["a"],VTabsSlider:_a["a"],VTextField:L["a"],VToolbar:M["a"],VToolbarTitle:Ae["b"],VTooltip:Ie["a"]});var Ia=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}})},Ra=[],Fa={mixins:[xe],methods:{getDHIS2UserData:function(e){var t=this,a=this.$store.state.dhis.dev.auth;""===a.username&&(a=""),u.a.get(this.$store.state.dhis.host+"api/me",{auth:a}).then((function(r){var s=r.data.organisationUnits;s.length>0&&(t.$store.state.dhis.user.orgId=s.shift().id,u.a.get(t.$store.state.dhis.host+"api/organisationUnits/"+t.$store.state.dhis.user.orgId,{auth:a}).then((function(a){return t.$store.state.dhis.user.orgName=a.data.displayName,e(r)})))})).catch((function(e){t.$store.state.dialogError=!0,t.$store.state.errorTitle="Error",e.response&&e.response.data&&401===e.response.data.httpStatusCode?(t.$store.state.errorDescription="Unauthorized, ensure that your DHIS2 login is active",t.$router.push({name:"Logout"})):t.$store.state.errorDescription="Unauthorized, please reload the app"}))}},created:function(){var e=this;this.setDHIS2Credentials(),this.getRoles(),this.getDHIS2UserData((function(t){var a,r,s=t.data.userCredentials.userRoles.find((function(t){return t.id===e.$store.state.config.generalConfig.externalAuth.adminRole}));if(s){var o=e.roles.find((function(e){return"Admin"===e.text}));a=o.value,r=o.text}else{var i=e.roles.find((function(e){return"Data Manager"===e.text}));a=i.value,r=i.text}u.a.get("/getUser/"+t.data.userCredentials.username).then((function(s){if(s.data.userID)e.$store.state.auth.username=t.data.userCredentials.username,e.$store.state.auth.userID=s.data.userID,e.$store.state.auth.role=r,e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,Fs.$emit("getConfig");else{var o=new FormData;o.append("firstName",t.data.firstName),o.append("otherName",""),o.append("password",t.data.surname),o.append("userName",t.data.userCredentials.username),o.append("surname",t.data.surname),o.append("role",a),u.a.post("/addUser",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){u.a.get("/getUser/"+t.data.userCredentials.username).then((function(a){a.data.userID&&(e.$store.state.auth.username=t.data.userCredentials.username,e.$store.state.auth.userID=a.data.userID,e.$store.state.auth.role=a.data.role,e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,Fs.$emit("getConfig"))}))}))}}))}))}},Va=Fa,Oa=Object($["a"])(Va,Ia,Ra,!1,null,null,null),La=Oa.exports;w()(Oa,{VContainer:A["a"]});var Ma,Na=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ihris-template",{key:e.$route.path},[e._v(" Loading... ")])},Ea=[],qa={name:"fhir-page-view",props:["page","pageId"],data:function(){return{}},created:function(){this.getTemplate(),Ma=this.pageId},methods:{getTemplate:function(){var e=this;u.a.get("/config/page/"+this.page).then((function(t){var s=t.data;"OperationOutcome"===s.resourceType?r["a"].component("ihris-template",{name:"ihris-template",data:function(){return{issues:s.issue}},components:{"ihris-outcome":function(){return a.e("fhir-outcome").then(a.bind(null,"adbd"))}},template:'<div><ihris-outcome :issues="issues"></ihris-outcome></div>'}):r["a"].component("ihris-template",{name:"ihris-template",data:function(){return{fhirId:Ma,isEdit:!1,sectionMenu:s.data.sectionMenu,subFields:s.data.subFields,columns:s.data.columns,actions:s.data.actions,links:s.data.links,constraints:s.data.constraints}},components:{"ihris-resource":function(){return a.e("chunk-ea42a9f0").then(a.bind(null,"7372"))},"ihris-codesystem":function(){return a.e("chunk-5474d9c5").then(a.bind(null,"2d9b"))},"ihris-section":function(){return a.e("chunk-2d2245b0").then(a.bind(null,"e07f"))},"ihris-secondary":function(){return a.e("chunk-69ce93ab").then(a.bind(null,"39e1"))},"ihris-array":function(){return a.e("chunk-2d21a389").then(a.bind(null,"bb1d"))},"fhir-extension":function(){return a.e("chunk-2d0da301").then(a.bind(null,"6b10"))},"fhir-reference":function(){return Promise.all([a.e("chunk-67c19840"),a.e("chunk-f4ca1e72")]).then(a.bind(null,"99fa"))},"fhir-backbone-element":function(){return a.e("chunk-08ab496f").then(a.bind(null,"8142"))},"fhir-string":function(){return a.e("chunk-1b3f2290").then(a.bind(null,"b78c"))},"fhir-attachment":function(){return a.e("chunk-616686dc").then(a.bind(null,"ca33"))},"fhir-human-name":function(){return a.e("chunk-07768e92").then(a.bind(null,"89c1"))},"fhir-code":function(){return a.e("chunk-77a2aa0c").then(a.bind(null,"1131"))},"fhir-date":function(){return a.e("chunk-32fc7ad8").then(a.bind(null,"7fb0"))},"fhir-time":function(){return a.e("chunk-3d173b39").then(a.bind(null,"1286"))},"fhir-date-time":function(){return a.e("chunk-0a2355b0").then(a.bind(null,"45dd"))},"fhir-period":function(){return a.e("chunk-789dd4ca").then(a.bind(null,"4807"))},"fhir-identifier":function(){return a.e("chunk-5e719bed").then(a.bind(null,"c408"))},"fhir-contact-point":function(){return a.e("chunk-69e25fe0").then(a.bind(null,"4b80"))},"fhir-address":function(){return a.e("chunk-63f87f9c").then(a.bind(null,"b248"))},"fhir-codeable-concept":function(){return a.e("chunk-2d0b8b5d").then(a.bind(null,"309c"))},"fhir-uri":function(){return a.e("chunk-69078b64").then(a.bind(null,"6d39"))},"fhir-boolean":function(){return a.e("chunk-5caeefd5").then(a.bind(null,"ff03"))},"fhir-positive-int":function(){return a.e("chunk-19a703d4").then(a.bind(null,"b750"))},"fhir-unsigned-int":function(){return a.e("chunk-53787938").then(a.bind(null,"4c52"))},"fhir-integer":function(){return a.e("chunk-5368b584").then(a.bind(null,"eaae"))},"fhir-coding":function(){return a.e("chunk-5e70ac24").then(a.bind(null,"eee9"))},"fhir-money":function(){return a.e("chunk-1f82ee10").then(a.bind(null,"a6ba"))},"fhir-decimal":function(){return a.e("chunk-2f5fab82").then(a.bind(null,"8892"))}},template:s.template,methods:{setEdit:function(e){this.isEdit=e}}}),e.$forceUpdate()})).catch((function(t){console.log(t),r["a"].component("ihris-template",{template:"<div><h1>Error</h1><p>An error occurred trying to load this page</p>.</div>"}),e.$forceUpdate()}))}},components:{},beforeCreate:function(){r["a"].component("ihris-template",{template:"<div>Loading...</div>"})}},Ua=qa,ja=Object($["a"])(Ua,Na,Ea,!1,null,null,null),Ha=ja.exports,Ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CreateFacility",{attrs:{action:"request",requestType:"add"}})},Wa=[],Ga=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[[a("v-card",[a("v-card-title",{staticClass:"indigo white--text headline"},["request"===e.action?[e._v(" Fill Details Below About A New Facility And Submit For Approval ")]:e._e(),"add"===e.action?[e._v(" Fill Details Below To Add A New Facility ")]:e._e()],2),a("v-layout",{attrs:{"justify-space-between":"","pa-4":""}},[a("v-scroll-y-transition",[a("v-flex",{attrs:{xs5:""}},[e.loadingTree?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:e._e(),e.jurisdictionHierarchy.length>0?a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search Jurisdiction","single-line":"","hide-details":""},model:{value:e.searchJurisdiction,callback:function(t){e.searchJurisdiction=t},expression:"searchJurisdiction"}}):e._e(),e.jurisdictionHierarchy.length>0?a("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,filter:e.searchJurisdiction},on:{"node:selected":e.selectedJurisdiction}}):e._e()],2)],1),a("v-divider",{attrs:{vertical:""}}),a("v-flex",{attrs:{"d-flex":"","text-center":""}},[a("v-scroll-y-transition",{attrs:{mode:"out-in"}},[e.activeJurisdiction.id?a("v-card",{staticClass:"pt-4 mx-auto",attrs:{flat:""}},[a("v-card-title",{attrs:{"primary-title":""}},[a("b",["request"===e.action?[e._v(" Requesting New Facility Under "+e._s(e.activeJurisdiction.text)+" ")]:"add"===e.action?[e._v(" Adding New Facility Under "+e._s(e.activeJurisdiction.text)+" ")]:e._e()],2)]),a("v-card-text",[a("v-card",[a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,filled:"",color:"deep-purple",label:"Name"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Alternative Name"},model:{value:e.alt_name,callback:function(t){e.alt_name=t},expression:"alt_name"}})],1)],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"",filled:"",color:"deep-purple",label:"Code"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-select",{attrs:{clearable:"",items:e.types,label:"Facility Type"},model:{value:e.facilityType,callback:function(t){e.facilityType=t},expression:"facilityType"}})],1)],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-select",{attrs:{clearable:"",items:e.status,label:"Status"},model:{value:e.facilityStatus,callback:function(t){e.facilityStatus=t},expression:"facilityStatus"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-select",{attrs:{clearable:"",items:e.ownerships,label:"Facility Ownership"},model:{value:e.facilityOwnership,callback:function(t){e.facilityOwnership=t},expression:"facilityOwnership"}})],1)],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Latitude"},model:{value:e.lat,callback:function(t){e.lat=t},expression:"lat"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"",filled:"",color:"deep-purple",label:"Longitude"},model:{value:e.long,callback:function(t){e.long=t},expression:"long"}})],1)],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Contacts Informations ")]),a("v-card-text",[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Email"},model:{value:e.contact.email,callback:function(t){e.$set(e.contact,"email",t)},expression:"contact.email"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Phone"},model:{value:e.contact.phone,callback:function(t){e.$set(e.contact,"phone",t)},expression:"contact.phone"}})],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Fax"},model:{value:e.contact.fax,callback:function(t){e.$set(e.contact,"fax",t)},expression:"contact.fax"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Website"},model:{value:e.contact.website,callback:function(t){e.$set(e.contact,"website",t)},expression:"contact.website"}})],1)],1)],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{outline:"",label:"Facility Description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[a("v-icon",[e._v("mdi-close")]),e._v("Clear ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addLocation()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),"request"===e.action?[e._v(" Send Request ")]:"add"===e.action?[e._v(" Add ")]:e._e()],2)],1)],1)],1)],1):["request"===e.action?[a("b",[e._v("Select a location on the left to request a new facility")])]:"add"===e.action?[a("b",[e._v("Select a location on the left to add a facility")])]:e._e()]],2)],1)],1)],1)]],2)},Ja=[],za=(a("a4d3"),a("e01a"),{validations:{name:{required:b["required"]}},props:["action","requestType"],data:function(){return{loadingTree:!1,searchJurisdiction:"",activeJurisdiction:{},jurisdictionHierarchy:[],name:"",alt_name:"",code:"",description:"",facilityType:"",types:[{text:"Clinic",value:"CLNC"},{text:"Dispensary",value:"DSPN"},{text:"Health Center",value:"HCNT"},{text:"Health Post",value:"HPST"},{text:"Hospital",value:"HOSP"}],ownerships:[{text:"Concesion",value:"CNCS"},{text:"Public",value:"PBLC"},{text:"Private",value:"PRVT"},{text:"Private Faith Based",value:"PFBO"},{text:"Private Not Profit",value:"PNPR"}],facilityOwnership:"",status:[{text:"Functional",value:"active"},{text:"Not Functional",value:"inactive"},{text:"Suspended",value:"suspended"}],facilityStatus:"",lat:"",long:"",contact:{email:"",phone:"",fax:"",website:""}}},methods:{getTree:function(){var e=this;this.loadingTree=!0,this.jurisdictionHierarchy=[],u.a.get("/FR/getTree").then((function(t){e.loadingTree=!1,t.data&&(e.jurisdictionHierarchy=t.data)}))},selectedJurisdiction:function(e){this.activeJurisdiction=e},addLocation:function(){var e=this,t=new FormData;t.append("name",this.name),t.append("alt_name",this.alt_name),t.append("code",this.code),t.append("action",this.action),t.append("requestType",this.requestType),t.append("username",this.$store.state.auth.username),this.facilityType&&t.append("type",this.facilityType),this.facilityStatus&&t.append("status",this.facilityStatus),this.facilityOwnership&&t.append("ownership",this.facilityOwnership),this.lat&&t.append("lat",this.lat),this.long&&t.append("long",this.long),t.append("contact",JSON.stringify(this.contact)),this.description&&t.append("description",this.description),t.append("parent",this.activeJurisdiction.id),u.a.post("/FR/addBuilding",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.$store.state.alert.show=!0,e.$store.state.alert.width="600px",e.$store.state.alert.msg="Facility added successfully!",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1})).catch((function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="600px",e.$store.state.alert.msg="Failed to add Facility!",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t)}))}},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("Name is required"),e):e}},created:function(){this.getTree()},components:{"liquor-tree":Et["a"]}}),Ya=za,Ka=Object($["a"])(Ya,Ga,Ja,!1,null,null,null),Xa=Ka.exports;w()(Ka,{VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardText:T["c"],VCardTitle:T["d"],VContainer:A["a"],VDivider:K["a"],VFlex:I["a"],VForm:R["a"],VIcon:F["a"],VLayout:V["a"],VProgressLinear:ve["a"],VScrollYTransition:vt["e"],VSelect:Pe["a"],VSpacer:O["a"],VTextField:L["a"],VTextarea:Sa["a"]});var Za={components:{CreateFacility:Xa}},Qa=Za,er=Object($["a"])(Qa,Ba,Wa,!1,null,null,null),tr=er.exports,ar=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{width:"630px"},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}},[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v(" Confirmation ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.confirm=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card",[a("v-card-text",[e._v(" "+e._s(e.confirmTitle)+" ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.confirm=!1}}},[e._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:e.changeRequestStatus}},[e._v("Proceed")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"800px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" Editing "+e._s(e.name)+" ")]),a("v-spacer"),a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.editDialog=!1}}},[e._v("mdi-close")])],1),a("v-card",[a("v-card-text",[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,filled:"",color:"deep-purple",label:"Name"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Alternative Name"},model:{value:e.alt_name,callback:function(t){e.alt_name=t},expression:"alt_name"}})],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"",filled:"",color:"deep-purple",label:"Code"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-select",{attrs:{clearable:"",items:e.types,label:"Facility Type"},model:{value:e.facilityType,callback:function(t){e.facilityType=t},expression:"facilityType"}})],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-select",{attrs:{clearable:"",items:e.status,label:"Status"},model:{value:e.facilityStatus,callback:function(t){e.facilityStatus=t},expression:"facilityStatus"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-select",{attrs:{clearable:"",items:e.ownerships,label:"Facility Ownership"},model:{value:e.facilityOwnership,callback:function(t){e.facilityOwnership=t},expression:"facilityOwnership"}})],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Latitude"},model:{value:e.lat,callback:function(t){e.lat=t},expression:"lat"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"",filled:"",color:"deep-purple",label:"Longitude"},model:{value:e.long,callback:function(t){e.long=t},expression:"long"}})],1)],1)],1),a("v-flex",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Contacts Informations ")]),a("v-card-text",[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Email"},model:{value:e.contact.email,callback:function(t){e.$set(e.contact,"email",t)},expression:"contact.email"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Phone"},model:{value:e.contact.phone,callback:function(t){e.$set(e.contact,"phone",t)},expression:"contact.phone"}})],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Fax"},model:{value:e.contact.fax,callback:function(t){e.$set(e.contact,"fax",t)},expression:"contact.fax"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Website"},model:{value:e.contact.website,callback:function(t){e.$set(e.contact,"website",t)},expression:"contact.website"}})],1)],1)],1)],1)],1)],1)],1),a("v-flex",[a("v-textarea",{attrs:{outline:"",label:"Facility Description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),a("v-flex",{attrs:{color:"white"}},[e._v(" Selected Parent: "),a("b",[e._v(e._s(e.facilityParent.text))]),a("br"),a("br"),e._v(" Choose Different Parent "),e.jurisdictionHierarchy.length>0?a("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,filter:e.searchJurisdiction},on:{"node:selected":e.selectedEditJurisdiction},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node;return a("div",{staticClass:"node-container"},[a("div",{staticClass:"node-text"},[e._v(e._s(r.text))])])}}],null,!1,893252766)}):e._e()],1)],1)],1),a("v-card-actions",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-toolbar",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:"","text-sm-left":""}},[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.editDialog=!1}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v(" Cancel ")],1)],1),a("v-flex",{attrs:{xs6:"","text-sm-right":""}},[a("v-btn",{attrs:{color:"primary",disabled:e.$v.$invalid,dark:""},on:{click:function(t){return e.saveEdit()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),"updateRequest"===e.requestCategory?[e._v(" Send Request ")]:[e._v(" Save ")]],2)],1)],1)],1)],1)],1)],1)],1)],1),a("v-card",[a("v-card-title",{staticClass:"indigo white--text headline"},["updateRequest"===e.requestCategory?[e._v(" Choose Facility To Request Change Of Information ")]:[e._v(" Facilities List ")]],2),a("v-layout",{attrs:{"justify-space-between":""}},[a("v-scroll-y-transition",[a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search Jurisdiction","single-line":"","hide-details":""},model:{value:e.searchJurisdiction,callback:function(t){e.searchJurisdiction=t},expression:"searchJurisdiction"}}),e.loadingTree?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:e._e(),e.jurisdictionHierarchy.length>0?a("liquor-tree",{ref:"jurisdictionHierarchy",attrs:{data:e.jurisdictionHierarchy,filter:e.searchJurisdiction},on:{"node:selected":e.selectedJurisdiction}}):e._e()],2)],1),a("v-divider",{attrs:{vertical:""}}),a("v-flex",{attrs:{"d-flex":"","text-center":""}},[a("v-scroll-y-transition",{attrs:{mode:"out-in"}},[e.activeJurisdiction.id?a("v-card",{attrs:{flat:""}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",[a("b",[a("center",[e._v("Facilities Under "+e._s(e.activeJurisdiction.text))])],1)]),a("v-spacer"),a("v-flex",[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search Facility","single-line":"","hide-details":""},model:{value:e.searchBuildings,callback:function(t){e.searchBuildings=t},expression:"searchBuildings"}})],1)],1)],1),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{loading:e.loadingBuildings,headers:e.buildingsHeaders,items:e.buildings,search:e.searchBuildings},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.viewBuilding(r.id)}}},[a("td",[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[e.canEditBuilding(r)?a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){return e.edit(r)}}},s),[a("v-icon",[e._v("mdi-pencil")])],1):e._e()]}}],null,!0)},[a("span",[e._v("Edit")])]),"request"===e.action?a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[e.canChangeRequestStatus(r,"approve")?a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"success"},on:{click:function(t){return e.changeRequestStatus(r,"approved",!0)}}},s),[a("v-icon",[e._v("mdi-check-circle")])],1):e._e()]}}],null,!0)},[a("span",[e._v("Approve")])]):e._e(),"request"===e.action?a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[e.canChangeRequestStatus(r,"reject")?a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"error"},on:{click:function(t){return e.changeRequestStatus(r,"rejected",!0)}}},s),[a("v-icon",[e._v("mdi-cancel")])],1):e._e()]}}],null,!0)},[a("span",[e._v("Reject")])]):e._e()],1),a("td",[e._v(e._s(r.name))]),a("td",[e._v(e._s(r.code))]),a("td",[e._v(e._s(r.parent.name))]),a("td",[e._v(e._s(r.type.text))]),a("td",[e._v(e._s(r.ownership.text))]),a("td",[e._v(e._s(r.status.text))]),a("td",[e._v(e._s(r.lat))]),a("td",[e._v(e._s(r.long))]),"request"===e.action&&"requestsList"===e.requestCategory?a("td",[e._v(" "+e._s(r.requestStatus)+" ")]):e._e()])]}}],null,!1,898217256)})],1)],1):e.loadingBuildings?e._e():[a("b",[e._v("Select a jurisdiction on the left to display its facilities")])]],2)],1)],1)],1)],1)},rr=[],sr={mixins:[xe],validations:{name:{required:b["required"]}},props:["action","requestType","requestCategory"],data:function(){return{facilityId:"",editDialog:!1,loadingTree:!1,loadingBuildings:!1,buildingsHeaders:[{sortable:!1},{text:"Name",value:"name"},{text:"Code",value:"code"},{text:"Parent",value:"parent"},{text:"Facility Type",value:"type"},{text:"Facility Ownership",value:"ownership"},{text:"Status",value:"status"},{text:"Latitude",value:"latitude"},{text:"Longitude",value:"longitude"}],searchJurisdiction:"",searchBuildings:"",activeJurisdiction:{},jurisdictionHierarchy:[],buildings:[],name:"",alt_name:"",code:"",description:"",facilityType:"",types:[{text:"Clinic",value:"CLNC"},{text:"Dispensary",value:"DSPN"},{text:"Health Center",value:"HCNT"},{text:"Health Post",value:"HPST"},{text:"Hospital",value:"HOSP"}],ownerships:[{text:"Concesion",value:"CNCS"},{text:"Public",value:"PBLC"},{text:"Private",value:"PRVT"},{text:"Private Faith Based",value:"PFBO"},{text:"Private Not Profit",value:"PNPR"}],facilityOwnership:"",status:[{text:"Functional",value:"active"},{text:"Not Functional",value:"inactive"},{text:"Suspended",value:"suspended"}],facilityStatus:"",facilityParent:{},lat:"",long:"",contact:{email:"",phone:"",fax:"",website:""},requestStatus:"",confirm:!1,confirmTitle:"",tasksVerification:ts}},methods:{viewBuilding:function(e){this.$router.push({path:"resource/view/facility/"+e})},changeRequestStatus:function(e,t,a){var r=this;if(a){var s;this.requestStatus=t,"approved"===t?s="approved":"rejected"===t&&(s="rejected"),this.confirm=!0,this.confirmTitle="Are you sure that you want to mark facility "+e.name+" as "+s,this.facilityId=e.id}else{this.$store.state.progressTitle="Saving new status",this.confirm=!1,this.$store.state.dynamicProgress=!0;var o=new FormData;o.append("id",this.facilityId),o.append("status",this.requestStatus),o.append("requestType",this.requestType),u.a.post("/FR/changeBuildingRequestStatus",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){r.$store.state.dynamicProgress=!1,r.$store.state.errorTitle="Info",r.$store.state.errorDescription="Request status changed successfully",r.$store.state.dialogError=!0,r.getBuildings()})).catch((function(e){r.$store.state.errorTitle="Error",r.$store.state.errorDescription="This request was not successfully processed",r.$store.state.dialogError=!0,console.log(e)}))}},canChangeRequestStatus:function(e,t){if("request"!==this.action||"request"===this.action&&"requestsList"!==this.requestCategory)return!1;if("approve"===t){if("Approved"===e.requestStatus)return!1}else if("reject"===t&&("Approved"===e.requestStatus||"Rejected"===e.requestStatus))return!1;return!!("update"===this.requestType&&this.tasksVerification.canApprove("FacilitiesUpdateRequestsReport")||"add"===this.requestType&&this.tasksVerification.canApprove("NewFacilitiesRequestsReport")||"update"===this.requestType&&this.tasksVerification.canReject("FacilitiesUpdateRequestsReport")||"add"===this.requestType&&this.tasksVerification.canReject("NewFacilitiesRequestsReport"))},canEditBuilding:function(e){return("Approved"!==e.requestStatus||"requestsList"!==this.requestCategory)&&!(!this.tasksVerification.canEdit("FacilitiesReport")&&!this.tasksVerification.canAdd("RequestUpdateBuildingDetails"))},getBuildings:function(){var e=this;this.facilities=[],this.buildings=[],this.loadingBuildings=!0,u.a.get("/FR/getBuildings",{params:{jurisdiction:this.activeJurisdiction.id,action:this.action,requestType:this.requestType,requestCategory:this.requestCategory}}).then((function(t){e.loadingBuildings=!1,e.buildings=t.data})).catch((function(t){e.loadingBuildings=!1,console.log(t)}))},selectedJurisdiction:function(e){this.activeJurisdiction=e,this.getBuildings()},selectedEditJurisdiction:function(e){this.facilityParent=e},edit:function(e){this.facilityId=e.id,this.facilityType=e.type.code,this.facilityStatus=e.status.code,this.facilityParent.id=e.parent.id,this.facilityParent.text=e.parent.name,this.facilityOwnership=e.ownership.code,this.name=e.name,this.alt_name=e.alt_name,this.code=e.code,this.lat=e.lat,this.long=e.long,this.contact.phone=e.phone,this.contact.email=e.email,this.contact.website=e.website,this.contact.fax=e.fax,this.description=e.description,this.editDialog=!0},saveEdit:function(){var e=this,t=new FormData;t.append("id",this.facilityId),t.append("name",this.name),t.append("alt_name",this.alt_name),t.append("code",this.code),t.append("action",this.action),t.append("requestType",this.requestType),t.append("username",this.$store.state.auth.username),this.facilityType&&t.append("type",this.facilityType),this.facilityStatus&&t.append("status",this.facilityStatus),this.facilityOwnership&&t.append("ownership",this.facilityOwnership),this.lat&&t.append("lat",this.lat),this.long&&t.append("long",this.long),t.append("contact",JSON.stringify(this.contact)),this.description&&t.append("description",this.description),t.append("parent",this.facilityParent.id),this.$store.state.progressTitle="Saving Changes",this.editDialog=!1,this.$store.state.dynamicProgress=!0,u.a.post("/FR/addBuilding",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.$store.state.dynamicProgress=!1,e.$store.state.errorTitle="Changes Saved",e.$store.state.errorDescription="Changes saved successfully",e.$store.state.dialogError=!0,e.getBuildings()})).catch((function(t){e.$store.state.errorTitle="Failed To Save Changes",e.$store.state.errorDescription="Failed To Save Changes",e.$store.state.dialogError=!0,console.log(t)}))}},created:function(){var e=this;this.loadingTree=!0,this.getTree(!1,!1,(function(t,a){t?e.loadingTree=!1:(e.loadingTree=!1,e.jurisdictionHierarchy=a)})),"request"===this.action&&"requestsList"===this.requestCategory&&this.buildingsHeaders.push({text:"Request Status",value:"requestStatus"})},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("Name is required"),e):e}},components:{"liquor-tree":Et["a"]}},or=sr,ir=Object($["a"])(or,ar,rr,!1,null,null,null),nr=ir.exports;w()(ir,{VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardText:T["c"],VCardTitle:T["d"],VContainer:A["a"],VDataTable:we["a"],VDialog:ue["a"],VDivider:K["a"],VFlex:I["a"],VIcon:F["a"],VLayout:V["a"],VProgressLinear:ve["a"],VScrollYTransition:vt["e"],VSelect:Pe["a"],VSpacer:O["a"],VTextField:L["a"],VTextarea:Sa["a"],VToolbar:M["a"],VToolbarTitle:Ae["b"],VTooltip:Ie["a"]});var lr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("FacilitiesReport",{attrs:{action:"request",requestType:"update",requestCategory:"updateRequest"}})},cr=[],ur={components:{FacilitiesReport:nr}},dr=ur,vr=Object($["a"])(dr,lr,cr,!1,null,null,null),pr=vr.exports,hr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("FacilitiesReport",{attrs:{action:"request",requestType:"add",requestCategory:"requestsList"}})},fr=[],gr={props:["action","requestType","requestCategory"],components:{FacilitiesReport:nr}},mr=gr,yr=Object($["a"])(mr,hr,fr,!1,null,null,null),br=yr.exports,xr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("FacilitiesReport",{attrs:{action:"request",requestType:"update",requestCategory:"requestsList"}})},_r=[],Sr={props:["action","requestType","requestCategory"],components:{FacilitiesReport:nr}},$r=Sr,kr=Object($["a"])($r,xr,_r,!1,null,null,null),wr=kr.exports,Cr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[e.viewDialog?a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"950px"},model:{value:e.viewDialog,callback:function(t){e.viewDialog=t},expression:"viewDialog"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-spacer"),a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:e.closeViewDialog}},[e._v("close")])],1),a("v-card",[a("v-card-text",[a("v-switch",{attrs:{label:"Expand All"},on:{change:e.expandAll},model:{value:e.expand,callback:function(t){e.expand=t},expression:"expand"}}),a("v-expansion-panel",{attrs:{expand:""},model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Name")])]},proxy:!0}],null,!1,4004223849)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e._v(e._s(e.service.name))])],1)],1)],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Code")])]},proxy:!0}],null,!1,896836835)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e._v(e._s(e._f("displayId")(e.service.identifier)))])],1)],1)],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Active")])]},proxy:!0}],null,!1,1023682178)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e.service.active?[e._v(" Yes ")]:[e._v(" No ")]],2)],1)],1)],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Appointment Required")])]},proxy:!0}],null,!1,2098729288)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e.service.appointment?[e._v(" Yes ")]:[e._v(" No ")]],2)],1)],1)],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Service Time Availability")])]},proxy:!0}],null,!1,130211255)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e._l(e.service.availableTime,(function(t,r){return[e._v(" Days of the week: "+e._s(e._f("translateDays")(t.daysOfWeek))+" Available All Day: "),t.allDay?a("p",{key:"allDayYes"+r},[e._v(" Yes ")]):a("p",{key:"allDayNo"+r},[e._v(" No ")]),t.availableStartTime?a("p",{key:"startTime"+r},[e._v(" Available Start Time: "+e._s(t.availableStartTime)+" ")]):e._e(),t.availableEndTime?a("p",{key:"endTime"+r},[e._v(" Available End Time: "+e._s(t.availableEndTime)+" ")]):e._e(),a("v-divider",{key:"divider"+r})]}))],2)],1)],1)],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Service Unavailability")])]},proxy:!0}],null,!1,913906681)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e._l(e.service.notAvailable,(function(t,r){return[e._v(" Description: "+e._s(t.description)+" "),t.during&&(t.during.start||t.during.end)?a("p",{key:"unavailable"+r},[e._v(" Dates Unavailable: "+e._s(e._f("formatDate")(t.during.start))+" to "+e._s(e._f("formatDate")(t.during.end))+" ")]):e._e(),a("v-divider",{key:"unAvDivider"+r})]}))],2)],1)],1)],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Service Types")])]},proxy:!0}],null,!1,2068889432)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[a("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.type))}})])],1)],1)],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Service Category")])]},proxy:!0}],null,!1,1665262723)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[a("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.category))}})])],1)],1)],1)],1)],1),a("v-flex",[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Facilities Offering Service")])]},proxy:!0}],null,!1,2224861096)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e._l(e.service.location,(function(t,r){return[e._v(" "+e._s(t.name)),a("br",{key:r})]}))],2)],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Required Specialty")])]},proxy:!0}],null,!1,1169077963)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[a("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.specialty))}})])],1)],1)],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Eligibility")])]},proxy:!0}],null,!1,1814976707)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[a("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.eligibility))}})])],1)],1)],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Contacts")])]},proxy:!0}],null,!1,4171370397)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e._l(e.service.telecom,(function(t,r){return["url"===t.system?a("label",{key:r},[e._v("website")]):a("label",{key:r},[e._v(e._s(t.system))]),e._v(" : "+e._s(t.value)+" "),a("br",{key:"br"+r})]}))],2)],1)],1)],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Communication Language")])]},proxy:!0}],null,!1,2765979932)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[a("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.communication))}})])],1)],1)],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Service Provision Conditions")])]},proxy:!0}],null,!1,2942230810)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[a("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.serviceProvisionCode))}})])],1)],1)],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Referral Methods")])]},proxy:!0}],null,!1,751530875)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[a("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.referralMethod))}})])],1)],1)],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Characteristics")])]},proxy:!0}],null,!1,874600544)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[a("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.characteristic))}})])],1)],1)],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Programs")])]},proxy:!0}],null,!1,3542767689)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[a("label",{domProps:{innerHTML:e._s(e.formatCodeableConcept(e.service.program))}})])],1)],1)],1)],1)],1),a("v-flex",[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Comments")])]},proxy:!0}],null,!1,1180182606)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e._v(" "+e._s(e.service.comment)+" ")])],1)],1)],1),a("v-flex",[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Extra Details")])]},proxy:!0}],null,!1,3274642518)},[a("v-card",{staticClass:"grey lighten-3"},[a("v-card-text",[e._v(" "+e._s(e.service.extraDetails)+" ")])],1)],1)],1),a("v-flex",[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v("Photo")])]},proxy:!0}],null,!1,4281668386)},[a("v-card",[a("v-card-text",[a("img",{attrs:{src:e.service.photo}})])],1)],1)],1)],1)],1)],1)],1)],1):e._e(),a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"1200px"}},[a("v-card-title",{staticClass:"indigo white--text headline"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",[e._v(" Services List ")]),a("v-spacer"),a("v-flex",[a("v-text-field",{attrs:{dark:"","append-icon":"mdi-magnify",label:"Search Service","single-line":"","hide-details":""},model:{value:e.searchServices,callback:function(t){e.searchServices=t},expression:"searchServices"}})],1)],1)],1),a("v-scroll-y-transition",{attrs:{mode:"out-in"}},[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{loading:e.loadingServices,headers:e.servicesHeaders,items:e.services,search:e.searchServices},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[a("v-btn",{attrs:{icon:"",color:"primary"},on:{click:function(a){return e.view(t.item.id)}}},[a("v-icon",[e._v("list")])],1)],1),a("td",[e._v(e._s(t.item.name))]),a("td",[e._v(e._s(t.item.code))]),a("td",[e._v(e._s(e._f("limitCharacters")(t.item.type.join(","))))]),a("td",[e._v(e._s(t.item.locations))]),a("td",[e._v(e._s(t.item.active))])]}}])})],1)],1)],1)],1)],1)},Dr=[],Pr=a("c1df"),Tr=a.n(Pr),Ar={data:function(){return{panel:[],expand:!1,viewDialog:!1,searchServices:"",services:[],service:{},loadingServices:!1,servicesHeaders:[{sortable:!1},{text:"Name",value:"name"},{text:"Code",value:"code"},{text:"Service Types",value:"type"},{text:"Facilities Offering Service",value:"locations"},{text:"Active",value:"active"}],serviceHeader:[{name:"Name",value:"name"},{name:"Code",value:"code"},{name:"Facilities Offering Service",value:"facility"},{name:"Active",value:"active"},{name:"Appointment Required",value:"appointment"},{name:"Service Types",value:"type"},{name:"Service Categories",value:"category"},{name:"Required Specialty",value:"specialty"},{name:"Service Time Availability",value:"availableTime"},{name:"Service Unavailability",value:"notAvailable"},{name:"Contacts",value:"telecom"},{name:"Service Provision Conditions",value:"serviceProvisionCode"},{name:"Eligibility",value:"eligibility"},{name:"Referral Methods",value:"referralMethod"},{name:"Communication Language",value:"communication"},{name:"Program",value:"program"},{name:"Characteristics",value:"characteristics"},{name:"Comments",value:"comments"},{name:"Extra Details",value:"details"},{name:"Photo",value:"photo"}]}},filters:{limitCharacters:function(e){return e.substring(0,40)},displayId:function(e){if(e){var t,a,r=Object(n["a"])(e);try{for(r.s();!(a=r.n()).done;){var s=a.value;t?t+=", "+s.value:t=s.value}}catch(o){r.e(o)}finally{r.f()}return t}},translateDays:function(e){var t,a=[],r=Object(n["a"])(e);try{for(r.s();!(t=r.n()).done;){var s=t.value;"mon"===s&&a.push("Monday"),"tue"===s&&a.push("Tuesday"),"wed"===s&&a.push("Wednesday"),"thu"===s&&a.push("Thursday"),"fri"===s&&a.push("Friday"),"sat"===s&&a.push("Saturday"),"sun"===s&&a.push("Sunday")}}catch(o){r.e(o)}finally{r.f()}return a.join(", ")},formatDate:function(e){return Tr()(e).format("Do MMMM YYYY")}},methods:{expandAll:function(){this.expand?this.panel=Object(ae["a"])(Array(20).keys()).map((function(){return!0})):this.panel=[]},formatCodeableConcept:function(e){if(!e||!Array.isArray(e))return"";var t,a,r=Object(n["a"])(e);try{for(r.s();!(a=r.n()).done;){var s=a.value,o=void 0;o=s.hasOwnProperty("code")?s.code.text:s.text,t?t+="<br>"+o:t=o}}catch(i){r.e(i)}finally{r.f()}return t},getServices:function(e,t){var a=e.getResource,r=e.id,s={getResource:a,id:r};u.a.get("/FR/getServices",{params:s}).then((function(e){return t(e)})).catch((function(e){console.log(e)}))},view:function(e){var t=this;this.getServices({id:e,getResource:!0},(function(e){e.data&&e.data.entry&&e.data.entry.length>0&&(t.service=e.data.entry[0].resource),t.viewDialog=!0}))},closeViewDialog:function(){this.viewDialog=!1,this.expand=!1}},created:function(){var e=this;this.loadingServices=!0,this.getServices({},(function(t){e.loadingServices=!1,e.services=t.data}))}},Ir=Ar,Rr=a("cd55"),Fr=a("49e2"),Vr=Object($["a"])(Ir,Cr,Dr,!1,null,null,null),Or=Vr.exports;w()(Vr,{VBtn:D["a"],VCard:P["a"],VCardText:T["c"],VCardTitle:T["d"],VContainer:A["a"],VDataTable:we["a"],VDialog:ue["a"],VDivider:K["a"],VExpansionPanel:Rr["a"],VExpansionPanelContent:Fr["a"],VFlex:I["a"],VIcon:F["a"],VLayout:V["a"],VScrollYTransition:vt["e"],VSpacer:O["a"],VSwitch:Te["a"],VTextField:L["a"],VToolbar:M["a"]});var Lr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",{staticClass:"pt-4 mx-auto",attrs:{text:"","max-width":"500"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("b",[e._v("Adding New "+e._s(e.displayText))])]),a("v-card-text",[a("v-card",[a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,filled:"",color:"deep-purple",label:"Name"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-text-field",{attrs:{required:"","error-messages":e.codeErrors,filled:"",color:"deep-purple",label:"Code"},on:{blur:function(t){return e.$v.code.$touch()},change:function(t){return e.$v.code.$touch()}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[a("v-icon",[e._v("mdi-close")]),e._v("Clear ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addServiceType()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v("Add ")],1)],1)],1)],1)],1)],1)},Mr=[],Nr={validations:{name:{required:b["required"]},code:{required:b["required"]}},props:["codeSystemType","displayText"],data:function(){return{name:"",code:""}},methods:{addServiceType:function(){var e=this,t=new FormData;t.append("name",this.name),t.append("code",this.code),t.append("codeSystemType",this.codeSystemType),u.a.post("/FR/addCodeSystem",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="Code system added successfully!",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1})).catch((function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="Failed to add code system!",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t)}))}},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("Name is required"),e):e},codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e}}},Er=Nr,qr=Object($["a"])(Er,Lr,Mr,!1,null,null,null),Ur=qr.exports;w()(qr,{VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardText:T["c"],VCardTitle:T["d"],VContainer:A["a"],VForm:R["a"],VIcon:F["a"],VSpacer:O["a"],VTextField:L["a"]});var jr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-card",{staticClass:"pt-4 mx-auto",attrs:{flat:"","max-width":"1000"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("b",[e._v("Adding New Service")])]),a("v-card-text",[a("v-card",[a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,filled:"",color:"deep-purple",label:"Name *"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"",filled:"",color:"deep-purple",label:"Code"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-select",e._g({attrs:{multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.serviceCategoriesConcept,label:"Service Category"},scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,s=t.index;return[s<2?a("v-chip",[a("span",[e._v(e._s(r.display))])]):e._e(),2===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.serviceCategories.length-2)+" others)")]):e._e()]}}],null,!0),model:{value:e.serviceCategories,callback:function(t){e.serviceCategories=t},expression:"serviceCategories"}},r))]}}])},[a("span",[e._v("Broad category of service being performed or delivered")])])],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-select",e._g({attrs:{multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.serviceTypesConcept,label:"Service Type"},scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,s=t.index;return[s<2?a("v-chip",[a("span",[e._v(e._s(r.display))])]):e._e(),2===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.serviceTypes.length-2)+" others)")]):e._e()]}}],null,!0),model:{value:e.serviceTypes,callback:function(t){e.serviceTypes=t},expression:"serviceTypes"}},r))]}}])},[a("span",[e._v("Type of service that may be delivered or performed")])])],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-select",e._g({attrs:{multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.referralMethodsConcept,label:"Referral Methods"},scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,s=t.index;return[s<2?a("v-chip",[a("span",[e._v(e._s(r.display))])]):e._e(),2===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.referralMethods.length-2)+" others)")]):e._e()]}}],null,!0),model:{value:e.referralMethods,callback:function(t){e.referralMethods=t},expression:"referralMethods"}},r))]}}])},[a("span",[e._v("Ways that the service accepts referrals")])])],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-select",e._g({attrs:{multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.specialtiesConcept,label:"Specialties"},scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,s=t.index;return[s<2?a("v-chip",[a("span",[e._v(e._s(r.display))])]):e._e(),2===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.specialties.length-2)+" others)")]):e._e()]}}],null,!0),model:{value:e.specialties,callback:function(t){e.specialties=t},expression:"specialties"}},r))]}}])},[a("span",[e._v("Specialties handled by the HealthcareService")])])],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-select",e._g({attrs:{multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.serviceEligibilitiesConcept,label:"Service Eligibility"},scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,s=t.index;return[s<2?a("v-chip",[a("span",[e._v(e._s(r.display))])]):e._e(),2===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.serviceEligibilities.length-2)+" others)")]):e._e()]}}],null,!0),model:{value:e.serviceEligibilities,callback:function(t){e.serviceEligibilities=t},expression:"serviceEligibilities"}},r))]}}])},[a("span",[e._v("Specific eligibility requirements required to use the service")])])],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-select",e._g({attrs:{multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.languagesConcept,label:"Communication Language"},scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,s=t.index;return[s<2?a("v-chip",[a("span",[e._v(e._s(r.display))])]):e._e(),2===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.languages.length-2)+" others)")]):e._e()]}}],null,!0),model:{value:e.languages,callback:function(t){e.languages=t},expression:"languages"}},r))]}}])},[a("span",[e._v("The language that this service is offered in")])])],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-select",e._g({attrs:{multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.programsConcept,label:"Programs"},scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,s=t.index;return[s<2?a("v-chip",[a("span",[e._v(e._s(r.display))])]):e._e(),2===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.programs.length-2)+" others)")]):e._e()]}}],null,!0),model:{value:e.programs,callback:function(t){e.programs=t},expression:"programs"}},r))]}}])},[a("span",[e._v("Programs that this service is applicable to")])])],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-select",e._g({attrs:{multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.serviceCharacteristicsConcept,label:"Characteristics"},scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,s=t.index;return[s<2?a("v-chip",[a("span",[e._v(e._s(r.display))])]):e._e(),2===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.serviceCharacteristics.length-2)+" others)")]):e._e()]}}],null,!0),model:{value:e.serviceCharacteristics,callback:function(t){e.serviceCharacteristics=t},expression:"serviceCharacteristics"}},r))]}}])},[a("span",[e._v("Collection of characteristics (attributes)")])])],1)],1)],1),a("v-flex",[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-select",e._g({attrs:{multiple:"","multi-line":"","item-text":"display","item-value":"code",items:e.serviceProvisionConditionsConcept,label:"Service Provision Conditions"},scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,s=t.index;return[s<2?a("v-chip",[a("span",[e._v(e._s(r.display))])]):e._e(),2===s?a("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.serviceProvisionConditions.length-2)+" others)")]):e._e()]}}],null,!0),model:{value:e.serviceProvisionConditions,callback:function(t){e.serviceProvisionConditions=t},expression:"serviceProvisionConditions"}},r))]}}])},[a("span",[e._v("Conditions under which service is available/offered")])])],1),a("v-flex",[e._v(" Facility where service is provided "),e.locationHierarchy.length>0?a("liquor-tree",{ref:"locationHierarchyRef",attrs:{data:e.locationHierarchy,filter:e.searchLocation,options:{checkbox:!0}},on:{"node:checked":e.locationSelected,"node:unchecked":e.locationUnSelected},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node;return a("div",{staticClass:"node-container"},[a("div",{staticClass:"node-text"},[e._v(e._s(r.text))])])}}],null,!1,893252766)}):e._e()],1),a("v-flex",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Service time availability ")]),a("v-card-text",[e._l(e.availableTime,(function(t,r){return a("div",{key:r},[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-select",{attrs:{multiple:"","multi-line":"","item-text":"text","item-value":"value",items:e.days,label:"Available days of the week"},scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item;return[a("v-chip",[a("span",[e._v(e._s(r.text))])])]}}],null,!0),model:{value:e.availableTime[r].mainFields.daysOfWeek,callback:function(t){e.$set(e.availableTime[r].mainFields,"daysOfWeek",t)},expression:"availableTime[key].mainFields.daysOfWeek"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-switch",{attrs:{label:"Always available (24 hr service)"},model:{value:e.availableTime[r].mainFields.allDay,callback:function(t){e.$set(e.availableTime[r].mainFields,"allDay",t)},expression:"availableTime[key].mainFields.allDay"}})],1)],1)],1),e.availableTime[r].mainFields.allDay?e._e():a("v-flex",[a("div",{staticStyle:{color:"red"}},[e._v(" "+e._s(e.timeRangeErrors[r])+" ")])]),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-menu",{ref:"timeMenuStart",refInFor:!0,attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.availableTime[r].mainFields.availableStartTime,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.availableTime[r].mainFields,"availableStartTime",t)},"update:return-value":function(t){return e.$set(e.availableTime[r].mainFields,"availableStartTime",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-text-field",e._g({attrs:{disabled:e.availableTime[r].mainFields.allDay,label:"Available start time","prepend-icon":"mdi-clock-outline",clearable:"",readonly:""},on:{"click:clear":function(t){return e.clearStartTime(r)}},model:{value:e.availableTime[r].mainFields.availableStartTime,callback:function(t){e.$set(e.availableTime[r].mainFields,"availableStartTime",t)},expression:"availableTime[key].mainFields.availableStartTime"}},s))]}}],null,!0),model:{value:e.availableTime[r].otherFields.timeMenuStart,callback:function(t){e.$set(e.availableTime[r].otherFields,"timeMenuStart",t)},expression:"availableTime[key].otherFields.timeMenuStart"}},[e.availableTime[r].otherFields.timeMenuStart?a("v-time-picker",{attrs:{format:"24hr"},on:{"click:minute":function(t){return e.validateStartTime(r)}},model:{value:e.availableTime[r].mainFields.availableStartTime,callback:function(t){e.$set(e.availableTime[r].mainFields,"availableStartTime",t)},expression:"availableTime[key].mainFields.availableStartTime"}}):e._e()],1)],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-menu",{ref:"timeMenuEnd",refInFor:!0,attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.availableTime[r].mainFields.availableEndTime,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.availableTime[r].mainFields,"availableEndTime",t)},"update:return-value":function(t){return e.$set(e.availableTime[r].mainFields,"availableEndTime",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-text-field",e._g({attrs:{disabled:e.availableTime[r].mainFields.allDay,label:"Available end time","prepend-icon":"mdi-clock-outline",clearable:"",readonly:""},on:{"click:clear":function(t){return e.clearEndTime(r)}},model:{value:e.availableTime[r].mainFields.availableEndTime,callback:function(t){e.$set(e.availableTime[r].mainFields,"availableEndTime",t)},expression:"availableTime[key].mainFields.availableEndTime"}},s))]}}],null,!0),model:{value:e.availableTime[r].otherFields.timeMenuEnd,callback:function(t){e.$set(e.availableTime[r].otherFields,"timeMenuEnd",t)},expression:"availableTime[key].otherFields.timeMenuEnd"}},[e.availableTime[r].otherFields.timeMenuEnd?a("v-time-picker",{attrs:{format:"24hr"},on:{"click:minute":function(t){return e.validateEndTime(r)}},model:{value:e.availableTime[r].mainFields.availableEndTime,callback:function(t){e.$set(e.availableTime[r].mainFields,"availableEndTime",t)},expression:"availableTime[key].mainFields.availableEndTime"}}):e._e()],1)],1)],1)],1)],1),a("v-divider"),a("v-divider")],1)})),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs1:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:e.addAvailableTime}},r),[a("v-icon",[e._v("mdi-plus")])],1)]}}])},[a("span",[e._v("Add more availability for this service")])])],1)],1)],2)],1)],1),a("v-divider"),a("v-divider"),a("v-flex",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Service un availability ")]),a("v-card-text",[e._l(e.notAvailable,(function(t,r){return a("div",{key:r},[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("div",{staticStyle:{color:"red"}},[e._v(" "+e._s(e.unavailabilityDescrErr[r])+" ")])]),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-text-field",e._g({attrs:{label:"Description",id:"id"},on:{input:function(t){return e.validateUnavailabilityDescr(r)}},model:{value:e.notAvailable[r].mainFields.description,callback:function(t){e.$set(e.notAvailable[r].mainFields,"description",t)},expression:"notAvailable[key].mainFields.description"}},s))]}}],null,!0)},[a("span",[e._v("Reason presented to the user explaining why time not available")])])],1)],1)],1),a("v-flex",[a("div",{staticStyle:{color:"red"}},[e._v(" "+e._s(e.dateRangeErrors[r])+" ")])]),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-menu",{ref:"dateMenuStart",refInFor:!0,attrs:{"return-value":e.notAvailable[r].mainFields.during.startDisplay,"close-on-content-click":!1,"max-width":"290"},on:{"update:returnValue":function(t){return e.$set(e.notAvailable[r].mainFields.during,"startDisplay",t)},"update:return-value":function(t){return e.$set(e.notAvailable[r].mainFields.during,"startDisplay",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-text-field",e._g({attrs:{value:e.notAvailable[r].mainFields.during.startDisplay,clearable:"",label:"Start Date",readonly:""},on:{"click:clear":function(t){return e.clearStartDate(r)}}},s))]}}],null,!0),model:{value:e.notAvailable[r].otherFields.dateMenuStart,callback:function(t){e.$set(e.notAvailable[r].otherFields,"dateMenuStart",t)},expression:"notAvailable[key].otherFields.dateMenuStart"}},[a("v-date-picker",{on:{change:function(t){e.notAvailable[r].otherFields.dateMenuStart=!1},input:function(t){return e.validateStartDate(r)}},model:{value:e.notAvailable[r].mainFields.during.start,callback:function(t){e.$set(e.notAvailable[r].mainFields.during,"start",t)},expression:"notAvailable[key].mainFields.during.start"}})],1)],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-menu",{ref:"dateMenuEnd",refInFor:!0,attrs:{"return-value":e.notAvailable[r].mainFields.during.endDisplay,"close-on-content-click":!1,"max-width":"290"},on:{"update:returnValue":function(t){return e.$set(e.notAvailable[r].mainFields.during,"endDisplay",t)},"update:return-value":function(t){return e.$set(e.notAvailable[r].mainFields.during,"endDisplay",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-text-field",e._g({attrs:{value:e.notAvailable[r].mainFields.during.endDisplay,clearable:"",label:"End Date",readonly:""},on:{"click:clear":function(t){return e.clearEndDate(r)}}},s))]}}],null,!0),model:{value:e.notAvailable[r].otherFields.dateMenuEnd,callback:function(t){e.$set(e.notAvailable[r].otherFields,"dateMenuEnd",t)},expression:"notAvailable[key].otherFields.dateMenuEnd"}},[a("v-date-picker",{on:{change:function(t){e.notAvailable[r].otherFields.dateMenuEnd=!1},input:function(t){return e.validateEndDate(r)}},model:{value:e.notAvailable[r].mainFields.during.end,callback:function(t){e.$set(e.notAvailable[r].mainFields.during,"end",t)},expression:"notAvailable[key].mainFields.during.end"}})],1)],1)],1)],1)],1),a("v-divider"),a("v-divider")],1)})),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs1:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:e.addUnavailableTime}},r),[a("v-icon",[e._v("mdi-plus")])],1)]}}])},[a("span",[e._v("Add more service un availability")])])],1)],1)],2)],1)],1),a("v-divider"),a("v-divider"),a("v-flex",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" Contacts Informations ")]),a("v-card-text",[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Email"},model:{value:e.contact.email,callback:function(t){e.$set(e.contact,"email",t)},expression:"contact.email"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Phone"},model:{value:e.contact.phone,callback:function(t){e.$set(e.contact,"phone",t)},expression:"contact.phone"}})],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Fax"},model:{value:e.contact.fax,callback:function(t){e.$set(e.contact,"fax",t)},expression:"contact.fax"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:"Website"},model:{value:e.contact.website,callback:function(t){e.$set(e.contact,"website",t)},expression:"contact.website"}})],1)],1)],1)],1)],1)],1)],1),a("v-divider"),a("v-divider"),a("v-divider"),a("v-flex",[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-textarea",e._g({attrs:{outline:"",label:"Comment about this service"},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}},r))]}}])},[a("span",[e._v("Additional description and/or any specific issues not covered elsewhere")])])],1),a("v-flex",[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-textarea",e._g({attrs:{outline:"",label:"Extra details about this service"},model:{value:e.extraDetails,callback:function(t){e.extraDetails=t},expression:"extraDetails"}},r))]}}])},[a("span",[e._v("Extra details about the service that can't be placed in the other fields")])])],1),a("v-flex",[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("label",[e._v("Photo for a service")]),a("input",e._g({attrs:{type:"file",accept:"image/*"},on:{change:e.previewImage}},r))]}}])},[a("span",[e._v("Facilitates quick identification of the service")])]),e.imageData.length>0?a("div",{staticClass:"image-preview"},[a("img",{staticClass:"preview",attrs:{src:e.imageData}})]):e._e()],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-switch",e._g({attrs:{label:"Appointment Required"},model:{value:e.appointmentRequired,callback:function(t){e.appointmentRequired=t},expression:"appointmentRequired"}},r))]}}])},[a("span",[e._v("If an appointment is required for access to this service")])])],1),a("v-spacer"),a("v-flex",{attrs:{xs2:""}},[a("v-switch",{attrs:{label:"Active"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[a("v-icon",[e._v("mdi-close")]),e._v("Clear ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid||(e.hasTimeRangeErrors||e.hasDateRangeErrors||e.hasUnAvDescrErrors)&&!e.availableTime.allDay,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addService()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("Add ")],1)],1)],1)],1)],1)],1)},Hr=[],Br={mixins:[xe],validations:{name:{required:b["required"]}},data:function(){return{dateRangeErrors:[],timeRangeErrors:[],unavailabilityDescrErr:[],name:"",code:"",comment:"",extraDetails:"",serviceTypes:[],serviceCharacteristics:[],serviceProvisionConditions:[],programs:[],languages:[],serviceCategories:[],specialties:[],referralMethods:[],serviceEligibilities:[],serviceTypesConcept:[],serviceCategoriesConcept:[],specialtiesConcept:[],referralMethodsConcept:[],serviceEligibilitiesConcept:[],languagesConcept:[],serviceCharacteristicsConcept:[],serviceProvisionConditionsConcept:[],programsConcept:[],locations:[],contact:{email:"",phone:"",fax:"",website:""},availableTime:[{mainFields:{daysOfWeek:[],allDay:!1,availableStartTime:"",availableEndTime:""},otherFields:{timeMenuStart:!1,timeMenuEnd:!1}}],notAvailable:[{mainFields:{description:"",during:{start:"",end:"",startDisplay:"",endDisplay:""}},otherFields:{dateMenuStart:!1,dateMenuEnd:!1}}],active:!0,appointmentRequired:!1,locationHierarchy:[],searchLocation:"",days:[{text:"Monday",value:"mon"},{text:"Tuesday",value:"tue"},{text:"Wednesday",value:"wed"},{text:"Thursday",value:"thu"},{text:"Friday",value:"fri"},{text:"Saturday",value:"sat"},{text:"Sunday",value:"sun"}],imageData:""}},methods:{addAvailableTime:function(){this.availableTime.push({mainFields:{daysOfWeek:[],allDay:!1,availableStartTime:"",availableEndTime:""},otherFields:{timeMenuStart:!1,timeMenuEnd:!1}})},addUnavailableTime:function(){this.notAvailable.push({mainFields:{description:"",during:{start:"",end:"",startDisplay:"",endDisplay:""}},otherFields:{dateMenuStart:!1,dateMenuEnd:!1}})},clearEndTime:function(e){this.availableTime[e].mainFields.availableEndTime="",this.validateStartTime(e)},clearStartTime:function(e){this.availableTime[e].mainFields.availableStartTime="",this.validateEndTime(e)},clearEndDate:function(e){this.notAvailable[e].mainFields.during.end="",this.notAvailable[e].mainFields.during.endDisplay="",this.validateStartDate(e)},clearStartDate:function(e){this.notAvailable[e].mainFields.during.start="",this.notAvailable[e].mainFields.during.startDisplay="",this.validateEndDate(e)},previewImage:function(e){var t=this,a=e.target;if(a.files&&a.files[0]){var r=new FileReader;r.onload=function(e){t.imageData=e.target.result},r.readAsDataURL(a.files[0])}},locationSelected:function(e){"bu"===e.data.locType&&this.locations.push(e.id)},locationUnSelected:function(e){-1!==this.locations.indexOf(e.id)&&this.locations.splice(this.locations.indexOf(e.id),1)},addService:function(){var e=this,t=new FormData;t.append("name",this.name),t.append("code",this.code),t.append("category",JSON.stringify(this.serviceCategories)),t.append("type",JSON.stringify(this.serviceTypes)),t.append("referralMethod",JSON.stringify(this.referralMethods)),t.append("specialty",JSON.stringify(this.specialties)),t.append("eligibility",JSON.stringify(this.serviceEligibilities)),t.append("communication",JSON.stringify(this.languages)),t.append("program",JSON.stringify(this.programs)),t.append("characteristic",JSON.stringify(this.serviceCharacteristics)),t.append("serviceProvisionCode",JSON.stringify(this.serviceProvisionConditions)),t.append("location",JSON.stringify(this.locations)),t.append("comment",this.comment),t.append("extraDetails",this.extraDetails),t.append("photo",this.imageData),t.append("availableTime",JSON.stringify(this.availableTime)),t.append("notAvailable",JSON.stringify(this.notAvailable)),t.append("telecom",JSON.stringify(this.contact)),t.append("appointmentRequired",this.appointmentRequired),t.append("active",this.active),u.a.post("/FR/addService",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.$store.state.alert.show=!0,e.$store.state.alert.width="800px",e.$store.state.alert.msg="Service added successfully!",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1})).catch((function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="800px",e.$store.state.alert.msg="Failed to add service!",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t)}))},validateEndTime:function(e){if(this.$refs.timeMenuEnd[e].save(this.availableTime[e].mainFields.availableEndTime+":00"),this.timeRangeErrors.splice(e,1,""),!this.availableTime[e].mainFields.availableStartTime&&this.availableTime[e].mainFields.availableEndTime)return this.timeRangeErrors.splice(e,1,"Start time is missing"),!1;if(this.availableTime[e].mainFields.availableStartTime||this.availableTime[e].mainFields.availableEndTime){var t=this.availableTime[e].mainFields.availableStartTime.split(":"),a=new Date;a.setHours(t[0],t[1],"00");var r=this.availableTime[e].mainFields.availableEndTime.split(":"),s=new Date;s.setHours(r[0],r[1],"00"),r<=t&&this.timeRangeErrors.splice(e,1,"End time must be after start time")}},validateStartTime:function(e){if(this.$refs.timeMenuStart[e].save(this.availableTime[e].mainFields.availableStartTime+":00"),this.timeRangeErrors.splice(e,1,""),!this.availableTime[e].mainFields.availableEndTime&&this.availableTime[e].mainFields.availableStartTime)return this.timeRangeErrors.splice(e,1,"End time is missing"),!1;if(this.availableTime[e].mainFields.availableStartTime||this.availableTime[e].mainFields.availableEndTime){var t=this.availableTime[e].mainFields.availableStartTime.split(":"),a=new Date;a.setHours(t[0],t[1],"00");var r=this.availableTime[e].mainFields.availableEndTime.split(":"),s=new Date;s.setHours(r[0],r[1],"00"),r<=t&&this.timeRangeErrors.splice(e,1,"End time must be after start time")}},validateStartDate:function(e){this.dateRangeErrors.splice(e,1,"");var t=Tr()(this.notAvailable[e].mainFields.during.start).format("Do MMMM YYYY");if(this.$refs.dateMenuStart[e].save(t),this.validateUnavailabilityDescr(e),!this.notAvailable[e].mainFields.during.end&&this.notAvailable[e].mainFields.during.start)return this.dateRangeErrors.splice(e,1,"End date is missing"),!1;this.notAvailable[e].mainFields.during.end<this.notAvailable[e].mainFields.during.start&&this.dateRangeErrors.splice(e,1,"End date must be after start date")},validateEndDate:function(e){this.dateRangeErrors.splice(e,1,"");var t=Tr()(this.notAvailable[e].mainFields.during.end).format("Do MMMM YYYY");if(this.$refs.dateMenuEnd[e].save(t),this.validateUnavailabilityDescr(e),!this.notAvailable[e].mainFields.during.start&&this.notAvailable[e].mainFields.during.end)return this.dateRangeErrors.splice(e,1,"Start date is missing"),!1;this.notAvailable[e].mainFields.during.end<this.notAvailable[e].mainFields.during.start&&this.dateRangeErrors.splice(e,1,"End date must be after start date")},validateUnavailabilityDescr:function(e){if(this.unavailabilityDescrErr.splice(e,1,""),(this.notAvailable[e].mainFields.during.start||this.notAvailable[e].mainFields.during.end)&&!this.notAvailable[e].mainFields.description)return this.unavailabilityDescrErr.splice(e,1,"Description is missing")}},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("Name is required"),e):e},codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},hasTimeRangeErrors:function(){if(0===this.timeRangeErrors.length)return!1;var e,t=Object(n["a"])(this.timeRangeErrors);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a)return!0}}catch(r){t.e(r)}finally{t.f()}return!1},hasDateRangeErrors:function(){if(0===this.dateRangeErrors.length)return!1;var e,t=Object(n["a"])(this.dateRangeErrors);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a)return!0}}catch(r){t.e(r)}finally{t.f()}return!1},hasUnAvDescrErrors:function(){if(0===this.unavailabilityDescrErr.length)return!1;var e,t=Object(n["a"])(this.unavailabilityDescrErr);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a)return!0}}catch(r){t.e(r)}finally{t.f()}return!1}},created:function(){var e=this;this.getTree(!0,!0,(function(t,a){t||(e.locationHierarchy=a)})),this.getCodeSystem("serviceTypes",(function(t,a){t||(e.serviceTypesConcept=a)})),this.getCodeSystem("serviceCategories",(function(t,a){t||(e.serviceCategoriesConcept=a)})),this.getCodeSystem("specialties",(function(t,a){t||(e.specialtiesConcept=a)})),this.getCodeSystem("serviceEligibilities",(function(t,a){t||(e.serviceEligibilitiesConcept=a)})),this.getCodeSystem("languages",(function(t,a){t||(e.languagesConcept=a)})),this.getCodeSystem("referralMethods",(function(t,a){t||(e.referralMethodsConcept=a)})),this.getCodeSystem("programs",(function(t,a){t||(e.programsConcept=a)})),this.getCodeSystem("serviceCharacteristics",(function(t,a){t||(e.serviceCharacteristicsConcept=a)})),this.getCodeSystem("serviceProvisionConditions",(function(t,a){t||(e.serviceProvisionConditionsConcept=a)}))},components:{"liquor-tree":Et["a"]}},Wr=Br,Gr=(a("940e"),a("2e4b")),Jr=a("e449"),zr=a("c964"),Yr=Object($["a"])(Wr,jr,Hr,!1,null,"0d99241e",null),Kr=Yr.exports;w()(Yr,{VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardText:T["c"],VCardTitle:T["d"],VChip:ke["a"],VContainer:A["a"],VDatePicker:Gr["a"],VDivider:K["a"],VFlex:I["a"],VForm:R["a"],VIcon:F["a"],VLayout:V["a"],VMenu:Jr["a"],VSelect:Pe["a"],VSpacer:O["a"],VSwitch:Te["a"],VTextField:L["a"],VTextarea:Sa["a"],VTimePicker:zr["a"],VTooltip:Ie["a"]}),r["a"].use(h["a"]);var Xr=new h["a"]({routes:[{path:"/UsersList",name:"UsersList",component:qe},{path:"/RolesManagement",name:"RolesManagement",component:Ze},{path:"/ChangePassword",name:"ChangePassword",component:st},{path:"/login",name:"Login",component:E},{path:"/logout",name:"Logout",component:W},{path:"/Signup",name:"Signup",component:Q},{path:"/dhis2Auth",name:"DHIS2Auth",component:La},{path:"/Configure",name:"Configure",component:Ve},{path:"/addUser",name:"AddUser",component:Ge},{path:"/ViewDataSources",name:"ViewDataSources",component:Ht},{path:"/AddDataSources",name:"AddDataSources",component:Lt},{path:"/dataSourcesPair",name:"DataSourcesPair",component:Zt},{path:"/view",name:"FacilityReconView",component:na},{path:"/scores",name:"FacilityReconScores",component:ka},{path:"/recoStatus",name:"FacilityRecoStatus",component:Aa},{path:"/",name:"FacilityReconHome",component:ka},{path:"/questionnaire/:questionnaire/:page",name:"questionnaire",component:function(){return a.e("chunk-2d0afa68").then(a.bind(null,"0eda"))},beforeEnter:function(e,t,a){var r=ts.canAdd(e.name);if(r)return a();Qr.state.dialogError=!0,Qr.state.errorTitle="Info",Qr.state.errorColor="error",Qr.state.errorDescription="You dont have permission to access this page",a({path:t.path})}},{path:"/ViewMap",name:"ViewMap",component:function(){return a.e("chunk-79989b56").then(a.bind(null,"afb4"))}},{path:"/Resource/View/:page/:id",name:"ResourceView",component:Ha,props:function(e){return{page:e.params.page,pageId:e.params.id}},beforeEnter:function(e,t,a){var r=ts.canAdd(e.name);if(r)return a();Qr.state.dialogError=!0,Qr.state.errorTitle="Info",Qr.state.errorColor="error",Qr.state.errorDescription="You dont have permission to access this page",a({path:t.path})}},{path:"/Resource/Add/:page",name:"ResourceAdd",component:function(){return a.e("chunk-2d216051").then(a.bind(null,"c14a"))},props:function(e){return{page:e.params.page}}},{path:"/Resource/Search/:page/:requestAction?",name:"ResourceSearch",component:function(){return a.e("chunk-2d0f083f").then(a.bind(null,"9d64"))},props:function(e){return{page:e.params.page,requestAction:e.params.requestAction}}},{path:"/RequestBuildingAddition",name:"RequestBuildingAddition",component:tr,beforeEnter:function(e,t,a){var r=ts.canAdd(e.name);if(r)return a();Qr.state.dialogError=!0,Qr.state.errorTitle="Info",Qr.state.errorColor="error",Qr.state.errorDescription="You dont have permission to access this page",a({path:t.path})}},{path:"/RequestUpdateBuildingDetails",name:"RequestUpdateBuildingDetails",component:pr,props:function(e){return{action:e.query.action,requestCategory:e.query.requestCategory,requestType:e.query.requestType}},beforeEnter:function(e,t,a){var r=ts.canAdd(e.name);if(r)return a();Qr.state.dialogError=!0,Qr.state.errorTitle="Info",Qr.state.errorColor="error",Qr.state.errorDescription="You dont have permission to access this page",a({path:t.path})}},{path:"/FacilitiesUpdateRequestsReport",name:"FacilitiesUpdateRequestsReport",component:wr,props:function(e){return{action:e.query.action,requestCategory:e.query.requestCategory,requestType:e.query.requestType}},beforeEnter:function(e,t,a){var r=ts.canView(e.name);if(r)return a();Qr.state.dialogError=!0,Qr.state.errorTitle="Info",Qr.state.errorColor="error",Qr.state.errorDescription="You dont have permission to access this page",a({path:t.path})}},{path:"/FacilitiesReport",name:"FacilitiesReport",component:nr,beforeEnter:function(e,t,a){var r=ts.canView(e.name);if(r)return a();Qr.state.dialogError=!0,Qr.state.errorTitle="Info",Qr.state.errorColor="error",Qr.state.errorDescription="You dont have permission to access this page",a({path:t.path})}},{path:"/NewFacilitiesRequestsReport",name:"NewFacilitiesRequestsReport",component:br,props:function(e){return{action:e.query.action,requestCategory:e.query.requestCategory,requestType:e.query.requestType}},beforeEnter:function(e,t,a){var r=ts.canView(e.name);if(r)return a();Qr.state.dialogError=!0,Qr.state.errorTitle="Info",Qr.state.errorColor="error",Qr.state.errorDescription="You dont have permission to access this page",a({path:t.path})}},{path:"/ServicesReport",name:"ServicesReport",component:Or,beforeEnter:function(e,t,a){var r=ts.canView(e.name);if(r)return a();Qr.state.dialogError=!0,Qr.state.errorTitle="Info",Qr.state.errorColor="error",Qr.state.errorDescription="You dont have permission to access this page",a({path:t.path})}},{path:"/AddCodeSystem",name:"AddCodeSystem",component:Ur,props:function(e){return{codeSystemType:e.query.type,displayText:e.query.displayText}},beforeEnter:function(e,t,a){var r=ts.canAdd(e.name);if(r)return a();Qr.state.dialogError=!0,Qr.state.errorTitle="Info",Qr.state.errorColor="error",Qr.state.errorDescription="You dont have permission to access this page",a({path:t.path})}},{path:"/AddService",name:"AddService",component:Kr,beforeEnter:function(e,t,a){var r=ts.canAdd(e.name);if(r)return a();Qr.state.dialogError=!0,Qr.state.errorTitle="Info",Qr.state.errorColor="error",Qr.state.errorDescription="You dont have permission to access this page",a({path:t.path})}}]});Xr.beforeEach((function(e,t,a){if(Qr.state.alert.show=!1,Qr.state.auth.token||g.a.get("token")&&"null"!==g.a.get("token")&&g.a.get("userID")&&"null"!==g.a.get("userID"))a();else{if("/Login"===e.path||"/Signup"===e.path||Qr.state.config.generalConfig.authDisabled)return a();a({path:"/Login"})}}));var Zr=Xr;r["a"].use(p["a"]);var Qr=new p["a"].Store({state:{baseRouterViewKey:0,alert:{width:"800px",show:!1,msg:"",type:"success",dismisible:!0,transition:"scale-transition"},auth:{username:"",userID:"",role:"",token:""},levelMapping:{source1:{},source2:{}},config:{userConfig:{reconciliation:{useCSVHeader:!0}},generalConfig:{reconciliation:{parentConstraint:{enabled:!0,idAutoMatch:!0,nameAutoMatch:!1},singlePair:!1,singleDataSource:!1,fixSource2To:null,fixSource2:!1},recoProgressNotification:{enabled:!1},allowShareToAllForNonAdmin:!1,selfRegistration:{enabled:!1,requiresApproval:!1},datasetsAdditionWays:["CSV Upload","Remote Servers Sync"],datasetsAutosyncTime:"*/15 * * * *",authDisabled:!1,authMethod:"dhis2",externalAuth:{pullOrgUnits:!0,shareOrgUnits:!0,shareByOrgId:!0,datasetName:null,adminRole:null}}},signupFields:{},customSignupFields:{},recoStatus:{status:"in-progress"},recalculateScores:!1,dialogError:!1,errorTitle:"",errorDescription:"",errorColor:"primary",clientId:null,denyAccess:!0,source2Hierarchy:"",source1Hierarchy:"",uploadRunning:!1,dhis:{user:{orgId:"",orgName:""},host:"",dev:{auth:{username:"",password:""}}},dataSourcePairs:[],activePair:{source1:{},source2:{}},source1TotalAllRecords:0,source2TotalAllRecords:0,totalAllMapped:0,totalAllFlagged:0,totalAllNoMatch:0,totalAllIgnore:0,source1TotalAllNotMapped:0,source2TotalRecords:0,recoLevel:2,totalSource1Levels:"",totalSource2Levels:"",matchedContent:[],noMatchContent:[],ignoreContent:[],flagged:[],source1Parents:[],source2UnMatched:[],source1UnMatched:[],scoreResults:[],levelArray:[],scoresProgressData:{scoreDialog:!1,scoreProgressTitle:"Waiting for progress status",stage:"not final",scoreProgressPercent:null,progressType:"",scoreProgressTimer:!1,progressReqTimer:"",requestCancelled:!1,cancelTokenSource:""},scoreSavingProgressData:{percent:null,savingMatches:!1,savingProgressTimer:!1,progressReqTimer:"",requestCancelled:!1,cancelTokenSource:""},uploadProgressData:{},dataSources:[],remoteDataSources:["DHIS2","FHIR"],loadingServers:!1,dynamicProgress:!1,initializingApp:!1,cols:{header:4,content:8},searchAction:"",requestResourceUpdateData:{requestType:"",requestUpdatingResource:""},message:{type:"info",text:null,timeout:5e3,active:!1}},mutations:{setMessage:function(e,t){"string"===typeof t?(e.message.type="info",e.message.timeout=5e3,e.message.text=t,e.message.active=!0):(e.message.type=t.type||"info",e.message.timeout=t.timeout||5e3,e.message.text=t.text,e.message.active=!0)},closeMessage:function(e){e.message.active=!1}}});u.a.interceptors.request.use((function(e){var t=Qr.state.auth.token;return t&&(e.headers["Authorization"]="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),u.a.interceptors.response.use((function(e){return e}),(function(e){var t=e.response.status;return 401===t&&(Qr.state.auth.token="",g.a.remove("token"),Zr.push("login")),Promise.reject(e)}));var es=[{component:"AddService",addTasks:["facility_registry_can_add_service"],viewTasks:[],editTasks:[],deleteTasks:[],approveTasks:[],rejectTasks:[]},{component:"AddFacility",addTasks:["facility_registry_can_add_facility"],viewTasks:[],editTasks:[],deleteTasks:[],approveTasks:[],rejectTasks:[]},{component:"AddJurisdiction",addTasks:["facility_registry_can_add_jurisdiction"],viewTasks:[],editTasks:[],deleteTasks:[],approveTasks:[],rejectTasks:[]},{component:"AddCodeSystem",addTasks:["facility_registry_can_add_terminologies"],viewTasks:[],editTasks:[],deleteTasks:[],approveTasks:[],rejectTasks:[]},{component:"ServicesReport",addTasks:[],viewTasks:["facility_registry_can_view_service"],editTasks:["facility_registry_can_edit_service"],deleteTasks:["facility_registry_can_delete_service"],approveTasks:[],rejectTasks:[]},{component:"FacilitiesReport",addTasks:[],viewTasks:["facility_registry_can_view_facility"],editTasks:["facility_registry_can_edit_facility"],deleteTasks:["facility_registry_can_delete_facility"],approveTasks:[],rejectTasks:[]},{component:"NewFacilitiesRequestsReport",addTasks:[],viewTasks:["facility_registry_can_view_new_facility_requests_report"],editTasks:["facility_registry_can_edit_new_facility_request"],deleteTasks:["facility_registry_can_delete_new_facility_request"],approveTasks:["facility_registry_can_approve_new_facility_request"],rejectTasks:["facility_registry_can_reject_new_facility_request"]},{component:"FacilitiesUpdateRequestsReport",addTasks:[],viewTasks:["facility_registry_can_view_update_facility_details_requests_report"],editTasks:["facility_registry_can_edit_update_facility_details_request"],deleteTasks:["facility_registry_can_delete_update_facility_details_request"],approveTasks:["facility_registry_can_approve_update_facility_details_requests"],rejectTasks:["facility_registry_can_reject_update_facility_details_requests"]},{component:"RequestUpdateBuildingDetails",addTasks:["facility_registry_can_request_update_of_facility_details"],viewTasks:["facility_registry_can_request_update_of_facility_details"],editTasks:[],deleteTasks:[],approveTasks:[],rejectTasks:[]},{component:"RequestBuildingAddition",addTasks:["facility_registry_can_request_new_facility"],viewTasks:[],editTasks:[],deleteTasks:[],approveTasks:[],rejectTasks:[]}],ts={canAdd:function(e){if("Admin"===Qr.state.auth.role)return!0;var t,a=Qr.state.auth.tasks,r=[],s=Object(n["a"])(es);try{for(s.s();!(t=s.n()).done;){var o=t.value;if(o.component===e){r=o.addTasks;break}}}catch(h){s.e(h)}finally{s.f()}if(0===r.length)return!0;var i,l=!1,c=Object(n["a"])(r);try{for(c.s();!(i=c.n()).done;){var u,d=i.value,v=Object(n["a"])(a);try{for(v.s();!(u=v.n()).done;){var p=u.value;if(p.name===d){l=!0;break}}}catch(h){v.e(h)}finally{v.f()}}}catch(h){c.e(h)}finally{c.f()}return l},canView:function(e){if("Admin"===Qr.state.auth.role)return!0;var t,a=Qr.state.auth.tasks,r=[],s=Object(n["a"])(es);try{for(s.s();!(t=s.n()).done;){var o=t.value;if(o.component===e){r=o.viewTasks;break}}}catch(h){s.e(h)}finally{s.f()}if(0===r.length)return!0;var i,l=!1,c=Object(n["a"])(r);try{for(c.s();!(i=c.n()).done;){var u,d=i.value,v=Object(n["a"])(a);try{for(v.s();!(u=v.n()).done;){var p=u.value;if(p.name===d){l=!0;break}}}catch(h){v.e(h)}finally{v.f()}}}catch(h){c.e(h)}finally{c.f()}return l},canEdit:function(e){if("Admin"===Qr.state.auth.role)return!0;var t,a=Qr.state.auth.tasks,r=[],s=Object(n["a"])(es);try{for(s.s();!(t=s.n()).done;){var o=t.value;if(o.component===e){r=o.editTasks;break}}}catch(h){s.e(h)}finally{s.f()}if(0===r.length)return!0;var i,l=!1,c=Object(n["a"])(r);try{for(c.s();!(i=c.n()).done;){var u,d=i.value,v=Object(n["a"])(a);try{for(v.s();!(u=v.n()).done;){var p=u.value;if(p.name===d){l=!0;break}}}catch(h){v.e(h)}finally{v.f()}}}catch(h){c.e(h)}finally{c.f()}return l},canDelete:function(e){if("Admin"===Qr.state.auth.role)return!0;var t,a=Qr.state.auth.tasks,r=[],s=Object(n["a"])(es);try{for(s.s();!(t=s.n()).done;){var o=t.value;if(o.component===e){r=o.deleteTasks;break}}}catch(h){s.e(h)}finally{s.f()}if(0===r.length)return!0;var i,l=!1,c=Object(n["a"])(r);try{for(c.s();!(i=c.n()).done;){var u,d=i.value,v=Object(n["a"])(a);try{for(v.s();!(u=v.n()).done;){var p=u.value;if(p.name===d){l=!0;break}}}catch(h){v.e(h)}finally{v.f()}}}catch(h){c.e(h)}finally{c.f()}return l},canApprove:function(e){if("Admin"===Qr.state.auth.role)return!0;var t,a=Qr.state.auth.tasks,r=[],s=Object(n["a"])(es);try{for(s.s();!(t=s.n()).done;){var o=t.value;if(o.component===e){r=o.approveTasks;break}}}catch(h){s.e(h)}finally{s.f()}if(0===r.length)return!0;var i,l=!1,c=Object(n["a"])(r);try{for(c.s();!(i=c.n()).done;){var u,d=i.value,v=Object(n["a"])(a);try{for(v.s();!(u=v.n()).done;){var p=u.value;if(p.name===d){l=!0;break}}}catch(h){v.e(h)}finally{v.f()}}}catch(h){c.e(h)}finally{c.f()}return l},canReject:function(e){if("Admin"===Qr.state.auth.role)return!0;var t,a=Qr.state.auth.tasks,r=[],s=Object(n["a"])(es);try{for(s.s();!(t=s.n()).done;){var o=t.value;if(o.component===e){r=o.rejectTasks;break}}}catch(h){s.e(h)}finally{s.f()}if(0===r.length)return!0;var i,l=!1,c=Object(n["a"])(r);try{for(c.s();!(i=c.n()).done;){var u,d=i.value,v=Object(n["a"])(a);try{for(v.s();!(u=v.n()).done;){var p=u.value;if(p.name===d){l=!0;break}}}catch(h){v.e(h)}finally{v.f()}}}catch(h){c.e(h)}finally{c.f()}return l}},as={data:function(){return{tasksVerification:ts}}},rs=as,ss=(a("8d58"),a("da13")),os=a("5d23"),is=Object($["a"])(rs,d,v,!1,null,"cb6be92a",null),ns=is.exports;w()(is,{VIcon:F["a"],VList:Vt["a"],VListItem:ss["a"],VListItemTitle:os["c"],VTooltip:Ie["a"]});var ls={mixins:[Gt,aa,xe],props:["generalConfig"],data:function(){return{items:[{title:"Click Me"},{title:"Click Me"},{title:"Click Me"},{title:"Click Me 2"}],fixed:!1,title:this.$t("App.title"),locale:"en",locales:[{text:"English",value:"en"},{text:"French",value:"fr"}],activeDataSourcePair:{},tasksVerification:ts}},watch:{locale:function(e){this.$i18n.locale=e}},methods:{closeDialogError:function(){this.$store.state.errorColor="primary",this.$store.state.dialogError=!1},renderInitialPage:function(){var e=this,t=this.$store.state.activePair.source1.name,a=this.$store.state.activePair.source2.name;if(t&&a||!(this.$store.state.dataSources.length>1||this.$store.state.dataSourcePairs.length>0))if(t&&a){t=this.toTitleCase(t),a=this.toTitleCase(a);var r=this.getDatasourceOwner();u.a.get("/uploadAvailable/"+t+"/"+a+"/"+r.source1Owner+"/"+r.source2Owner).then((function(t){e.$store.state.initializingApp=!1,t.data.dataUploaded?(e.$store.state.recalculateScores=!0,e.$router.push({name:"FacilityReconScores"})):e.$router.push({name:"AddDataSources"})})).catch((function(t){console.log(t),e.$router.push({name:"AddDataSources"})}))}else this.$router.push({name:"AddDataSources"});else this.$router.push({name:"DataSourcesPair"})},getTotalLevels:function(){var e=this,t=this.$store.state.activePair.source1.name,a=this.$store.state.activePair.source2.name;if(!t||!a)return this.$store.state.totalSource1Levels=5,this.$store.state.totalSource2Levels=5,this.$store.state.initializingApp=!1,this.renderInitialPage(),this.$store.state.recoLevel=2,void this.getRecoStatus();t=this.toTitleCase(t),a=this.toTitleCase(a);var r=JSON.stringify(this.getDatasourceOwner()),s=JSON.stringify(this.getLimitOrgIdOnActivePair());u.a.get("/countLevels/"+t+"/"+a+"/"+r+"/"+s).then((function(t){e.$store.state.levelMapping.source1=t.data.levelMapping.levelMapping1,e.$store.state.levelMapping.source2=t.data.levelMapping.levelMapping2,e.$store.state.totalSource1Levels=t.data.totalSource1Levels,e.$store.state.totalSource2Levels=t.data.totalSource2Levels,e.$store.state.recoLevel=2,e.renderInitialPage(),e.getRecoStatus()})).catch((function(t){console.log(t),e.$store.state.recoLevel=2,e.renderInitialPage(),e.getRecoStatus()}))},getRecoStatus:function(){var e=this;if(0!==Object.keys(this.$store.state.activePair.source1).length&&0!==Object.keys(this.$store.state.activePair.source2).length){var t=this.toTitleCase(this.$store.state.activePair.source1.name),a=this.toTitleCase(this.$store.state.activePair.source2.name),r=this.$store.state.activePair.userID._id;u.a.get("/recoStatus/"+t+"/"+a+"/"+r).then((function(s){s.data.status?e.$store.state.recoStatus=s.data.status:u.a.get("/markRecoUnDone/"+t+"/"+a+"/"+r).then((function(t){t.data.status&&(e.$store.state.recoStatus=t.data.status)})).catch((function(e){console.log(e.response.data.error)}))})).catch((function(e){console.log(e.response.data.error)}))}},getDataSources:function(){var e=this;this.$store.state.loadingServers=!0,this.$store.state.dataSources=[];var t=this.$store.state.auth.userID,a=this.$store.state.auth.role,r=this.$store.state.dhis.user.orgId;u.a.get("/getDataSources/"+t+"/"+a+"/"+r).then((function(t){e.$store.state.loadingServers=!1,e.$store.state.dataSources=t.data.servers,e.getDataSourcePair()})).catch((function(t){e.$store.state.loadingServers=!1,console.log(JSON.stringify(t))}))},getUserConfig:function(){var e=this,t=this.$store.state.auth.userID;u.a.get("/getUserConfig/"+t).then((function(t){t.data&&(e.$store.state.config.userConfig=Object(l["a"])(Object(l["a"])({},e.$store.state.config.userConfig),t.data)),e.getGeneralConfig((function(){e.getDataSources()}))})).catch((function(){e.getGeneralConfig((function(){e.getDataSources()}))}))},getDataSourcePair:function(){var e=this;this.$store.state.activePair.source1={},this.$store.state.activePair.source2={};var t=this.$store.state.auth.userID;this.$store.state.initializingApp||(this.$store.state.initializingApp=!0),u.a.get("/getDataSourcePair/"+t+"/"+this.$store.state.dhis.user.orgId).then((function(t){e.$store.state.dataSourcePairs=t.data;var a=e.getActiveDataSourcePair();Object.keys(a).length>0&&(e.$store.state.activePair.source1.id=a.source1._id,e.$store.state.activePair.source1.name=a.source1.name,e.$store.state.activePair.source1.userID=a.source1.userID,e.$store.state.activePair.source2.id=a.source2._id,e.$store.state.activePair.source2.name=a.source2.name,e.$store.state.activePair.source2.userID=a.source2.userID,e.$store.state.activePair._id=a._id,e.$store.state.activePair.shared=a.shared,e.$store.state.activePair.userID=a.userID),e.autoActivateDatasourcePair((function(t){t||e.autoCreateDatasourcePair()})),e.getTotalLevels()})).catch((function(t){console.log(JSON.stringify(t)),e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription="An error occured while getting data source pairs, reload the app to retry",e.getTotalLevels()}))},autoCreateDatasourcePair:function(){var e=this;if(this.$store.state.config.generalConfig.reconciliation.singleDataSource){var t=function(){if(Object.keys(e.$store.state.activePair.source1).length>0)return{v:!1};var t,a=e.$store.state.config.generalConfig.reconciliation.fixSource2To,r={},s={},o=e.$store.state.auth.userID,i=e.$store.state.dhis.user.orgId,l=[],c=Object(n["a"])(e.$store.state.dataSources);try{for(c.s();!(t=c.n()).done;){var u=t.value,d=u.shared.users.find((function(e){return e._id===o})),v=u.owner.id===o,p=!0===u.shareToAll.activated,h=!1;u.owner.orgId&&u.owner.orgId===i&&(h=!0),(v||d||p||h)&&(u._id===a?s=u:r=u,l.push(u))}}catch(f){c.e(f)}finally{c.f()}if(l.length>2||0===Object.keys(r).length||0===Object.keys(s).length)return{v:!1};e.createDatasourcePair(r,s)}();if("object"===Object(i["a"])(t))return t.v}},autoActivateDatasourcePair:function(e){if(Object.keys(this.$store.state.activePair.source1).length>0){var t=!1;return e(t)}if(this.$store.state.dataSourcePairs.length>1||0===this.$store.state.dataSourcePairs.length){var a=!1;return e(a)}if(this.$store.state.dhis.user.orgId&&this.$store.state.config.generalConfig.reconciliation.singlePair){this.$store.state.dataSourcePairs.status="active",this.activeDataSourcePair=this.$store.state.dataSourcePairs[0];var r=!0;e(r),this.activatePair()}else{var s=!1;e(s)}}},computed:{dhisLink:function(){return!!this.$store.state.dhis.user.orgId&&window.location.protocol+"//"+window.location.hostname}},components:{appMenu:ns},created:function(){var e=this;this.$router.push({name:"AddDataSources"}),this.$store.state.config.generalConfig=this.generalConfig,g.a.get("token")&&g.a.get("userID")&&(this.$store.state.auth.token=g.a.get("token"),this.$store.state.auth.userID=g.a.get("userID"),this.$store.state.auth.username=g.a.get("username"),this.$store.state.auth.role=g.a.get("role"),this.$store.state.auth.tasks=JSON.parse(g.a.get("tasks")),this.$store.state.signupFields=g.a.get("signupFields"),this.$store.state.customSignupFields=g.a.get("customSignupFields"),this.$store.state.config.generalConfig.authDisabled?this.$router.push("login"):u.a.get("/isTokenActive/").then((function(){e.$store.state.clientId=x["a"].v4(),e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,e.getUserConfig()}))),Fs.$on("refreshApp",(function(){e.getDataSources()})),Fs.$on("recalculateScores",(function(){e.$store.state.recalculateScores=!0,e.$router.push({name:"FacilityReconScores"})})),Fs.$on("getDataSources",(function(){e.getDataSources()})),Fs.$on("getConfig",(function(){e.getUserConfig()})),Fs.$on("getGeneralConfig",(function(){e.getGeneralConfig()})),Fs.$on("getDataSourcePair",(function(){e.getDataSourcePair()}))},name:"App"},cs=ls,us=a("7496"),ds=a("40dc"),vs=a("553a"),ps=a("f6c4"),hs=a("2db4"),fs=Object($["a"])(cs,s,o,!1,null,null,null),gs=fs.exports;w()(fs,{VAlert:C["a"],VApp:us["a"],VAppBar:ds["a"],VBtn:D["a"],VCard:P["a"],VCardActions:T["a"],VCardText:T["c"],VCol:Yt["a"],VDialog:ue["a"],VFlex:I["a"],VFooter:vs["a"],VIcon:F["a"],VLayout:V["a"],VMain:ps["a"],VProgressLinear:ve["a"],VRow:Kt["a"],VSelect:Pe["a"],VSnackbar:hs["a"],VSpacer:O["a"],VToolbar:M["a"],VToolbarItems:Ae["a"],VToolbarTitle:Ae["b"]});a("466d");var ms=a("a925");function ys(){var e=a("49f8"),t={};return e.keys().forEach((function(a){var r=a.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var s=r[1];t[s]=e(a)}})),t}r["a"].use(ms["a"]);var bs=new ms["a"]({locale:"en",fallbackLocale:"en",messages:ys()}),xs=a("f309");r["a"].use(xs["a"],{theme:{primary:"#3F51B5",secondary:"#7986CB",accent:"#9c27b0",error:"#f44336",warning:"#ffeb3b",info:"#2196f3",success:"#4caf50"}});var _s=new xs["a"]({}),Ss=a("1dce"),$s=a.n(Ss),ks=a("2106"),ws=a.n(ks),Cs=(a("6d93"),a("0551")),Ds=a.n(Cs),Ps=(a("2ca0"),a("caad"),a("2532"),a("0551")),Ts=a("bc3a"),As={_code_cache:{},_code_loading:{},_setCache:function(e,t){return As._code_cache[e]=t,As._code_loading[e]=!1,t},checkConstraints:function(e,t,a,r,s){return new Promise((function(o,i){var l,c=e.split(","),u=[],d=Object(n["a"])(c);try{var v=function(){var e=l.value;if(t[e]){var o=Ps.evaluate(a,t[e].expression);if(e.startsWith("ihris-search")){var i=o.shift(),n=["_elements=id"];while(o.length)n.push(o.shift()+"="+encodeURI(o.shift()));u.push(new Promise((function(a,o){Ts.get("/fhir/"+i+"?"+n.join("&")).then((function(o){var i=o.data;if(0===i.total)a(!0);else if(s){var n=Ps.evaluate(i.entry,"resource.id");n.includes(s)?a(!0):(r.push(t[e].human),a(!1))}else r.push(t[e].human),a(!1)})).catch((function(e){o(e)}))})))}else o.every(Boolean)?u.push(!0):(r.push(t[e].human),u.push(!1))}};for(d.s();!(l=d.n()).done;)v()}catch(p){d.e(p)}finally{d.f()}Promise.all(u).then((function(e){e.every(Boolean)?o(!0):o(!1)})).catch((function(e){i(e)}))}))},lookup:function(e,t){return e?t?As.codeLookup(t,e):e.system&&e.code?As.codeLookup(e.system,e.code):e.reference?As.resourceLookup(e.reference):/([A-Z]\w*)\/([A-Za-z0-9\-.]{1,64})/.test(e)?As.resourceLookup(e):new Promise((function(t){return t(e)})):new Promise((function(t){return t(e)}))},resourceLookup:function(e){return new Promise((function(t){var a=e;As._code_loading[a]?setTimeout((function(){t(As.resourceLookup(e))}),200):As._code_cache[a]?t(As._code_cache[a]):(As._code_loading[a]=!0,Ts.get("/fhir/$short-name?reference="+e).then((function(r){var s=r.data;s.display?t(As._setCache(a,s.display)):(console.log("No display data from reference found ",a,s),t(As._setCache(a,e)))})).catch((function(r){console.log(r),t(As._setCache(a,e))})))}))},codeLookup:function(e,t,a){return new Promise((function(r){var s=e+"#"+t;As._code_loading[s]?setTimeout((function(){r(As.codeLookup(e,t,a))}),200):As._code_cache[s]?r(As._code_cache[s]):(As._code_loading[s]=!0,Ts.get("/fhir/$short-name?system="+e+"&code="+t+"&valuset="+a).then((function(e){var a=e.data;a.display?r(As._setCache(s,a.display)):(console.log("No display data from codesystem found ",s,a),r(As._setCache(s,t)))})).catch((function(e){console.log(e),r(As._setCache(s,t))})))}))},pathFieldExpression:function(e){var t=e.substring(e.indexOf(":")+1);return t.includes("-")||t.includes(".")?"`"+t+"`":t},expand:function(e){var t=function(e,t){return e.display===t.display?e.code===t.code?0:e.code<t.code?-1:1:e.display<t.display?-1:1},a=function(e,t){if(e.compose.include){var a,r=Object(n["a"])(e.compose.include);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(s.concept){var o,i=Object(n["a"])(s.concept);try{for(i.s();!(o=i.n()).done;){var l=o.value;l.system=s.system,t.push(l)}}catch(c){i.e(c)}finally{i.f()}}}}catch(c){r.e(c)}finally{r.f()}}};return new Promise((function(r,s){var o=e.lastIndexOf("/"),i=e.lastIndexOf("|"),n=e.slice(o+1,-1!==i?i:e.length),l=[];Ts.get("/fhir/ValueSet/"+n+"/$expand").then((function(e){var o=e.data;try{o.expansion&&0!==o.expansion.total||!o.compose.include?l=o.expansion.contains:a(o,l),l.sort(t),r(l)}catch(i){console.log(i),s(new Error("Invalid response from server."))}})).catch((function(){Ts.get("/fhir/ValueSet/"+n).then((function(e){var s=e.data;a(s,l),l.sort(t),r(l)})).catch((function(e){s(e)}))}))}))}},Is=As,Rs=a("be6f");Object.defineProperty(r["a"].prototype,"$fhirpath",{value:Ds.a}),Object.defineProperty(r["a"].prototype,"$fhirutils",{value:Is}),r["a"].use($s.a),r["a"].use(ws.a,u.a),r["a"].config.productionTip=!1;var Fs=new r["a"];function Vs(e){var t=location.href.split("api");if(!(t.length>=2)){var a=!1;return e(a)}var r=location.href.split("api").shift();u.a.get(r+"api/dataStore/GOFR/config").then((function(t){if(e(t.data),!t.data.BACKEND_SERVER){var a="http://localhost:8082/gofr",r={BACKEND_SERVER:a};Os(r)}})).catch((function(t){console.log(JSON.stringify(t));var a=!1,r="http://localhost:8082/gofr",s={BACKEND_SERVER:r};return Os(s),e(a)}))}function Os(e){var t=location.href.split("api").shift();u.a.post(t+"api/dataStore/GOFR/config",e)}"."===Rs.BACKEND_HOST&&(Rs.BACKEND_HOST=window.location.hostname,Rs.BACKEND_PROTOCOL=window.location.protocol.replace(":","")),Rs.BACKEND_SERVER=Rs.BACKEND_PROTOCOL+"://"+Rs.BACKEND_HOST+":"+Rs.BACKEND_PORT,Vs((function(e){e&&e.BACKEND_SERVER,u.a.defaults.baseURL="http://localhost:8082/gofr",console.log(u.a.defaults);var t=JSON.stringify(Qr.state.config.generalConfig);u.a.get("/getGeneralConfig?defaultGenerConfig="+t).then((function(e){e||(e.data={}),new r["a"]({router:Zr,store:Qr,i18n:bs,vuetify:_s,data:function(){return{config:e.data}},render:function(e){return e(gs,{props:{generalConfig:this.config}})}}).$mount("#app")})).catch((function(){new r["a"]({router:Zr,store:Qr,i18n:bs,vuetify:_s,data:function(){return{config:{}}},render:function(e){return e(gs,{props:{generalConfig:this.config}})}}).$mount("#app")}))}))},"5dd3":function(e,t,a){},"754f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEMAAAAbCAYAAAAnFzLpAAAGGklEQVRYR+1YaVCTVxQ9BBLWEBYRGhAjFPetVRRoQVnFZRQtYq1Tl6kzij/q2k7dZtTSxW3sVGeqVtHOuLXQYnFBFscNFwqIYikKRRkpq2GRGJCEJJ37RV6SJhBQ63Qs59/7ct9795137vJi4bNktwa94Biw6CVDp4ReMvSiopeMXjJMJ8leZTyPMoQ2AhxePoNNzbx9H3vP5bPxByHD8V7gEDb++MA5VNbLelSnlkaPgf+bYtyrrMfe9Hw0t7T1aP6LGndbGc72NsjbuZjt92N2EdYducDGa2ICER89ho2jNh1FWU1jt/0LGOiJo6tmMvsvk7NxMOtWt+ebMrQSCOAt8YWnxAcOIhFsbe2gULShqaEeTVIp7v1+G0qFjvD/DBmerkJcTJgPnoUFd66l350Fqe954SXxwdtBwbC2sel0CfkTGa5lZaCpQdqzPuPfVgZ5493HEWO4MJHijwqtg88De6EQkTFx4POt2HSNRoMnzY9hLxSBx9MSTmh72obUYz8A0Jhuuuhy+rs5QWRnzcXvU2U7BFaWKN4T3+0wCV57GFWNT7ib9vVwhoOtAA8fPUa9rNXk+cjO3oavc1LZDkW72sjWVmAFD2cHuDnaQdGuwqPmFtQ2ytGuNrR18xAjZNJUtLbIUZh3AzUVFWhvV4LPFyAwLBLunl5s7Utpp1FXXWlMBsX9ssljYWetdUyl1iCnpBKrEjNwZuNcuAptue/mcsa4Tw6C8siMcYNgzbdkG9/9S4otP13h1tSHv58YJ1bPYp8SkrJx6LwuZ0j6irByegCiRvtwF6MPeZsSV4oeYn/GTdwur2U/iVxcIWtqglqtMrAXe0vwTsQk9u1WznWUFhUakrF1QThi9SqC/gq1TXLwrSzh4qCNQXNkFJbXYaSkr0kV0I1OSzhhkGC7IoMuIHX9+/Bwsu80ajQaYMrnx1BS1WA2siR+A+EfHMrsLpxNhbSmWkfGiP59cXJtHDMg2R2/XISymgYM8eqD2KChsNSLNXNk0EJ0S2fySiGys0Hcu0M5aXfgdF4plh9IZ+OuyKALoovqwL70m0i7+SccbARcCIaPHIBWhRLL9qWZJYJnyUPE9FiInJ052xa5HGnJx6FWqXRk7FwUiZjxg9hiaw5nIeXGXTaODRqCrfN1DpkjI7+sGnN3/sKFGYGcztg0j61HZZfKbwe6ImNR2ChsiAtmtt9nFmBHynWjPGGWCVhg/IRQePv6aU01wKX006ir0oYsK60pn8UxWVOSC/g0EWrS3jNY8Xi48+0SFq/myFh9KBMnc+4Z+Hf5iwWgEkqQPVVg9Ir93SKDVEv+Pau63BxpcwuSrhXjyMVC1DTJzfJgYUFEhKOfjy+zvZP3G+4WFrAxIyN3x2KWD0jes75OMtpA/zDmyIjb/jNIHfo4sjIGgYO0WbwnZJD9/NCR2DA72CBU6btSpcap3BJ8cyqn046Xx+MhYGIEPCUDtILQaJB/9TIelOiUb6AM6i6plyAU3K9B7LZkIzLOb/kQlNUJ5siI3nwMpdWGyexFyKA9vVwdsTjyLVDIUonVR1WDDLO3JRuphM/nIzA8Gu5iMWeuUqlw40IWqh6WG52PKSN1/RwM6+fGGVDtpjDRByXPot3x4FvyukWGqXb8Rcno8EdoK+CqXvzksazU02+7UnOw52wuc9va1g4hUVPg5OrKfWtrbUV25jk0SOuMiDBQxq6PojDdfyAzWnEwHadyS9l4ZsBg7FgYwcbmlPEyyXC0szb5aHN3skf2VwtZC085inIVwcHRESGTpoG6UQK9R65mpnHVozMwZQz3dsOv6+YwOyqtSVeL8aC2EX5vuCAmYDBTRXfC5GWSsXpGALd/RkEZiiukqGzQvoYnDu/PhU0HtqVcA5VdepSFTY0xeJfIZTIolYpOicg8mWzYdCXMC8Xc4GEmJ+SVVUPsIoTY2eGVhwmRQV1xVyive4y47clcu0+JMigsqkv7f/6YlLjPuB2nmq4fi7JWBahB2nziEuZNGIGNz+r9qwyT0BESjoxREnejakKHp34o8fwtUJdMeGlk9IjO18y42/9nvGbn7rqa/B8Oa+6MvcrQY+hvaNExIn99uskAAAAASUVORK5CYII="},"8d2f":function(e,t,a){},"8d58":function(e,t,a){"use strict";a("5dd3")},"940e":function(e,t,a){"use strict";a("cabd")},be6f:function(e){e.exports=JSON.parse('{"BACKEND_HOST":".","BACKEND_PORT":"4000","BACKEND_PROTOCOL":"http"}')},cabd:function(e,t,a){},d486:function(e,t,a){"use strict";a("de80")},de80:function(e,t,a){},edb7:function(e,t,a){"use strict";a("8d2f")},edd4:function(e){e.exports=JSON.parse('{"App":{"title":"Global Open Facility Registry","initApp":"Initializing App","source":"Source","menu":{"facilityRecon":{"msg":"Facility Reconciliation","tooltip":"Facility Reconciliation"},"createPair":{"msg":"Create and Manage Data Source Pair","tooltip":"Select data sources to start mathing"},"reconcile":{"msg":"Reconcile","tooltip":"Perform location matching of your selected data sources"},"recoStatus":{"msg":"Reconciliation Status","tooltip":"Matching Status"},"facilityRegistry":{"msg":"Facility Registry","tooltip":"Facility Registry"},"createOrgHier":{"msg":"Create Hierarchy","tooltip":"Add Facility And Jurisdition"},"healthService":{"msg":"Healthcare Services","tooltip":"Add services and define service terminologies"},"healthServiceTerminologies":{"msg":"Add Terminologies","tooltip":"Add service based terminologies"},"facilityRegReports":{"msg":"Reports","tooltip":"View Reports"},"search":{"msg":"Search","tooltip":"Search"},"searchFacility":{"msg":"Search Facility","tooltip":"Search Facility"},"searchFacilityAddRequest":{"msg":"Search Facility Add Request","tooltip":"Search Facility Add Request"},"searchFacilityUpdateRequest":{"msg":"Search Facility Update Request","tooltip":"Search Facility Update Request"},"addJurisdiction":{"msg":"Add Jurisdiction","tooltip":"Add Counties/Districts"},"addFacility":{"msg":"Add Facility","tooltip":"Add Facility"},"searchService":{"msg":"Search Service","tooltip":"Search Service"},"facilitiesReport":{"msg":"Facilities","tooltip":"Facilities"},"servicesReport":{"msg":"Services","tooltip":"Services"},"newFacilitiesRequestsReport":{"msg":"New Facilities Requests","tooltip":"Report on requests made to create new facilities"},"facilitiesUpdateRequestsReport":{"msg":"Requested Facilities Updates","tooltip":"Report about requests to update details of facilities"},"facilityRequests":{"msg":"Requests","tooltip":"Send requests about addition of new facilities or update of facility details"},"requestNewFacility":{"msg":"Request Addition of New Facility","tooltip":"Request Addition of New Facility"},"requestUpdateFacility":{"msg":"Request Update of Facility Details","tooltip":"Request Update of Facility Details"},"addLanguage":{"msg":"Add Language","tooltip":"Add Language"},"addReferralMethod":{"msg":"Add Referral Methods","tooltip":"Add Referral Methods"},"addProgram":{"msg":"Add Programs","tooltip":"Add Programs"},"addCharacteristic":{"msg":"Add Characteristics","tooltip":"Add Characteristics"},"addService":{"msg":"Add Service","tooltip":"Add Service offered by health facilities"},"viewMap":{"msg":"View Map","tooltip":"View Map"},"services":{"msg":"Services","tooltip":"Services"},"archive":{"msg":"Archived Uploads","tooltip":"Access to backup data"},"account":{"msg":"Account"},"addUser":{"msg":"Add User","tooltip":"Create new user account"},"usersList":{"msg":"Users List","tooltip":"Manage user accounts"},"rolesManagement":{"msg":"Roles Management","tooltip":"Add or remove specific tasks on roles"},"changePassword":{"msg":"Change Password"},"logout":{"msg":"Logout"},"configure":{"msg":"configure System"},"dataSourcesParent":{"msg":"Data Sources","tooltip":"Upload CSV data and add remote DHIS2 or FHIR servers"},"viewDataSources":{"msg":"View Data Sources","tooltip":"View datasets that can be used for reconciliation"},"addDataSources":{"msg":"Add Data Sources","tooltip":"Add a new dataset that you want to reconcile"},"view":{"msg":"View","tooltip":"Explore data sources contents"},"recoParent":{"msg":"Reconcile"}}}}')},f693:function(e){e.exports=JSON.parse('{"App":{"title":"Facility Reconciliation","initApp":"Initialisation de l\'App","source":"la source","menu":{"facilityRecon":{"msg":"rapprochement des installations","tooltip":"rapprochement des installations"},"createPair":{"msg":"Crer et grer une paire de sources de donnes","tooltip":"Select data sources to start mathing"},"reconcile":{"msg":"Rconcilier","tooltip":"Effectuer une correspondance d\'emplacement de vos sources de donnes slectionnes"},"recoStatus":{"msg":"tat de rapprochement","tooltip":"Statut de correspondance"},"facilityRegistry":{"msg":"registre des installations","tooltip":"registre des installations"},"search":{"msg":"Search","tooltip":"Search"},"searchFacility":{"msg":"Search Facility","tooltip":"Search Facility"},"searchFacilityAddRequest":{"msg":"Search Facility Add Request","tooltip":"Search Facility Add Request"},"searchFacilityUpdateRequest":{"msg":"Search Facility Update Request","tooltip":"Search Facility Update Request"},"createOrgHier":{"msg":"Crer une hirarchie","tooltip":"Ajouter une installation et une dition"},"healthService":{"msg":"Services de sant","tooltip":"Ajouter des services et dfinir des terminologies de service"},"healthServiceTerminologies":{"msg":"Ajouter des terminologies","tooltip":"Ajouter des terminologies bases sur le service"},"facilityRegReports":{"msg":"Rapports","tooltip":"Voir les rapports"},"addJurisdiction":{"msg":"Ajouter une juridiction","tooltip":"Ajouter des comts / districts"},"addFacility":{"msg":"Add Facility","tooltip":"Add Facility"},"searchService":{"msg":"Service de recherche","tooltip":"Service de recherche"},"facilitiesReport":{"msg":"Facilities Report","tooltip":"Facilities Report"},"servicesReport":{"msg":"Services Report","tooltip":"Services Report"},"facilitiesRequestsReport":{"msg":"Facilities Requests Report","tooltip":"Report on requests made to create new facilities"},"facilitiesUpdateRequestsReport":{"msg":"Facilities Updates Requests Report","tooltip":"Report about requests to update details of facilities"},"requestNewFacility":{"msg":"Request Addition of New Facility","tooltip":"Request Addition of New Facility"},"requestUpdateFacility":{"msg":"Request Update of Facility Details","tooltip":"Request Update of Facility Details"},"addLanguage":{"msg":"Add Language","tooltip":"Add Language"},"addReferralMethod":{"msg":"Add Referral Methods","tooltip":"Add Referral Methods"},"addProgram":{"msg":"Add Programs","tooltip":"Add Programs"},"addCharacteristic":{"msg":"Add Characteristics","tooltip":"Add Characteristics"},"addService":{"msg":"Ajouter un service","tooltip":"Ajouter le service offert par les tablissements de sant"},"viewMap":{"msg":"voir la carte","tooltip":"voir la carte"},"services":{"msg":"Prestations de service","tooltip":"Prestations de service"},"archive":{"msg":"Tlchargements archivs","tooltip":"Accs aux donnes de sauvegarde"},"account":{"msg":"Compte"},"addUser":{"msg":"Ajouter un utilisateur","tooltip":"Crer un nouveau compte d\'utilisateur"},"usersList":{"msg":"Liste des utilisateurs","tooltip":"Grer les comptes d\'utilisateurs"},"rolesManagement":{"msg":"Gestion des rles","tooltip":"Ajouter ou supprimer des tches spcifiques sur les rles"},"changePassword":{"msg":"Changer le mot de passe"},"logout":{"msg":"Connectez - Out"},"configure":{"msg":"configurer le systme"},"dataSourcesParent":{"msg":"Les sources de donnes","tooltip":"Tlcharger des donnes CSV et ajouter des serveurs DHIS2 ou FHIR distants"},"viewDataSources":{"msg":"Afficher les sources de donnes","tooltip":"Afficher les jeux de donnes pouvant tre utiliss pour la rconciliation"},"addDataSources":{"msg":"Ajouter des sources de donnes","tooltip":"Ajouter un nouveau jeu de donnes que vous souhaitez rconcilier"},"view":{"msg":"Vue","tooltip":"Explorer le contenu des sources de donnes"},"recoParent":{"msg":"Rconcilier"}}}}')}});
//# sourceMappingURL=app.bb487967.js.map