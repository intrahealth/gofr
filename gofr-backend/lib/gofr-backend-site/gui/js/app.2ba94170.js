(function(e){function t(t){for(var r,s,n=t[0],c=t[1],l=t[2],d=0,u=[];d<n.length;d++)s=n[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&u.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);p&&p(t);while(u.length)u.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,s=1;s<a.length;s++){var n=a[s];0!==o[n]&&(r=!1)}r&&(i.splice(t--,1),e=c(c.s=a[0]))}return e}var r={},s={app:0},o={app:0},i=[];function n(e){return c.p+"js/"+({apps:"apps",custom:"custom","install-app":"install-app","uninstall-app":"uninstall-app"}[e]||e)+"."+{apps:"fef0daa7","chunk-0779b602":"35f94afe","chunk-08a9b5b7":"e64caabe","chunk-0a6b076a":"bad8ecd2","chunk-19a7ffa0":"5ceace9d","chunk-1b3d2af8":"9bf5b379","chunk-1f83e9dc":"8ed225fd","chunk-2d0a4639":"04ed7728","chunk-2d0aa9e6":"200c329b","chunk-2d0af298":"b9ee157b","chunk-2d0afa68":"85f1176a","chunk-2d0b8b5d":"f70e01cd","chunk-2d0d34f6":"d043f2e8","chunk-2d0da301":"2dabb0d9","chunk-2d2106b9":"bf47492a","chunk-2d210a08":"b93d3f86","chunk-2d216051":"2383ab85","chunk-2d2174d7":"7af5a1ec","chunk-2d21a3c6":"7843a44e","chunk-2d21a437":"ede993fa","chunk-2f5db3ea":"2326ceec","chunk-32294727":"f3a73b6a","chunk-3d07554a":"fbbfea8c","chunk-5369b150":"41784fd8","chunk-53797504":"88bab461","chunk-58ec08a2":"a410195f","chunk-5cafeba1":"18d0c0cb","chunk-5e700835":"ad7e8da8","chunk-5e71a7f0":"87f62d55","chunk-63fba70c":"7f4928bf","chunk-69088730":"c1b2ff55","chunk-69e0cc28":"16b97334","chunk-72162224":"453016b6","chunk-2d0c17b7":"9fe22111","chunk-2d0e2c53":"56100c9f","chunk-77a0b274":"7a6f5eef","chunk-78a0fc3a":"b6238642",custom:"8e6e6c09","install-app":"ace8d68e","uninstall-app":"306b9f08","chunk-0a6f3fea":"dd41aee4","chunk-2d0b9df2":"2ed1739e","chunk-2d0c2116":"58fe37a3","chunk-2d0e6654":"08b4efac","chunk-2d0efc9d":"fadbb746","chunk-d3e34a68":"976b7f8e","chunk-2d2104c7":"85e7b89d"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={"chunk-32294727":1,"chunk-3d07554a":1,"chunk-72162224":1,"install-app":1};s[e]?t.push(s[e]):0!==s[e]&&a[e]&&t.push(s[e]=new Promise((function(t,a){for(var r="css/"+({apps:"apps",custom:"custom","install-app":"install-app","uninstall-app":"uninstall-app"}[e]||e)+"."+{apps:"31d6cfe0","chunk-0779b602":"31d6cfe0","chunk-08a9b5b7":"31d6cfe0","chunk-0a6b076a":"31d6cfe0","chunk-19a7ffa0":"31d6cfe0","chunk-1b3d2af8":"31d6cfe0","chunk-1f83e9dc":"31d6cfe0","chunk-2d0a4639":"31d6cfe0","chunk-2d0aa9e6":"31d6cfe0","chunk-2d0af298":"31d6cfe0","chunk-2d0afa68":"31d6cfe0","chunk-2d0b8b5d":"31d6cfe0","chunk-2d0d34f6":"31d6cfe0","chunk-2d0da301":"31d6cfe0","chunk-2d2106b9":"31d6cfe0","chunk-2d210a08":"31d6cfe0","chunk-2d216051":"31d6cfe0","chunk-2d2174d7":"31d6cfe0","chunk-2d21a3c6":"31d6cfe0","chunk-2d21a437":"31d6cfe0","chunk-2f5db3ea":"31d6cfe0","chunk-32294727":"a5c908f7","chunk-3d07554a":"76a811a3","chunk-5369b150":"31d6cfe0","chunk-53797504":"31d6cfe0","chunk-58ec08a2":"31d6cfe0","chunk-5cafeba1":"31d6cfe0","chunk-5e700835":"31d6cfe0","chunk-5e71a7f0":"31d6cfe0","chunk-63fba70c":"31d6cfe0","chunk-69088730":"31d6cfe0","chunk-69e0cc28":"31d6cfe0","chunk-72162224":"7cb64c1b","chunk-2d0c17b7":"31d6cfe0","chunk-2d0e2c53":"31d6cfe0","chunk-77a0b274":"31d6cfe0","chunk-78a0fc3a":"31d6cfe0",custom:"31d6cfe0","install-app":"76a811a3","uninstall-app":"31d6cfe0","chunk-0a6f3fea":"31d6cfe0","chunk-2d0b9df2":"31d6cfe0","chunk-2d0c2116":"31d6cfe0","chunk-2d0e6654":"31d6cfe0","chunk-2d0efc9d":"31d6cfe0","chunk-d3e34a68":"31d6cfe0","chunk-2d2104c7":"31d6cfe0"}[e]+".css",o=c.p+r,i=document.getElementsByTagName("link"),n=0;n<i.length;n++){var l=i[n],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===r||d===o))return t()}var u=document.getElementsByTagName("style");for(n=0;n<u.length;n++){l=u[n],d=l.getAttribute("data-href");if(d===r||d===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete s[e],p.parentNode.removeChild(p),a(i)},p.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){s[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,a){r=o[e]=[t,a]}));t.push(r[2]=i);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=n(e);var u=new Error;l=function(t){d.onerror=d.onload=null,clearTimeout(p);var a=o[e];if(0!==a){if(a){var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",u.name="ChunkLoadError",u.type=r,u.request=s,a[1](u)}o[e]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(a,r,function(t){return e[t]}.bind(null,r));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var p=d;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},2824:function(e,t,a){},"41c2":function(e,t,a){},4951:function(e,t,a){e.exports=a.p+"img/GOFR_RGB_high-res.02d54e3c.png"},"56d7":function(e,t,a){"use strict";a.r(t),a.d(t,"eventBus",(function(){return Ws}));var r=a("1da1"),s=(a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("96cf"),a("b680"),a("ac1f"),a("5319"),a("1276"),a("d3b7"),a("4c53"),a("b0c0"),a("7db0"),a("a026")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("appToolbar"),e.$store.state.auth.userID?a("appSideMenu",{attrs:{nav:e.nav}}):e._e(),a("v-main",[a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.$store.state.dynamicProgress,callback:function(t){e.$set(e.$store.state,"dynamicProgress",t)},expression:"$store.state.dynamicProgress"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" "+e._s(e.$store.state.progressTitle)+" "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.$store.state.dialogError,callback:function(t){e.$set(e.$store.state,"dialogError",t)},expression:"$store.state.dialogError"}},[a("v-card",[a("v-toolbar",{attrs:{color:e.$store.state.errorColor,dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.$store.state.errorTitle)+" ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.$store.state.dialogError=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" "+e._s(e.$store.state.errorDescription)+" ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){return e.closeDialogError.apply(null,arguments)}}},[e._v(e._s(e.$t("App.hardcoded-texts.Ok")))])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.$store.state.initializingApp,callback:function(t){e.$set(e.$store.state,"initializingApp",t)},expression:"$store.state.initializingApp"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" "+e._s(e.$t("App.hardcoded-texts.initApp"))+" "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("v-snackbar",{staticClass:"mt-12",attrs:{app:"",color:e.$store.state.message.type,timeout:e.$store.state.message.timeout,top:"","multi-line":""},model:{value:e.$store.state.message.active,callback:function(t){e.$set(e.$store.state.message,"active",t)},expression:"$store.state.message.active"}},[e._v(" "+e._s(e.$store.state.message.text)+" "),a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){return e.$store.commit("closeMessage")}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-divider"),a("br"),a("center",[a("v-alert",{style:{width:e.$store.state.alert.width},attrs:{type:e.$store.state.alert.type,dismissible:e.$store.state.alert.dismisible,transition:e.$store.state.alert.transition},model:{value:e.$store.state.alert.show,callback:function(t){e.$set(e.$store.state.alert,"show",t)},expression:"$store.state.alert.show"}},[e._v(" "+e._s(e.$store.state.alert.msg)+" ")])],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs4:""}}),a("v-spacer"),a("v-flex",{attrs:{xs1:""}})],1),a("router-view",{key:e.$route.path})],1),a("v-footer",{attrs:{dark:"",color:"primary",fixed:e.fixed,app:"",height:"20"}},[a("v-spacer"),a("label",{staticStyle:{"font-size":"10px"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.GOFR Version"))+" "+e._s(e.$store.state.version)+" ")])],1)],1)},i=[],n=a("53ca"),c=a("b85c"),l=a("5530"),d=(a("99af"),a("b64b"),a("bc3a")),u=a.n(d),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app-bar",{attrs:{color:"white",light:"",app:"","clipped-left":"","clipped-right":"",height:"50"}},[r("router-link",{attrs:{to:"/"}},[r("img",{staticStyle:{"margin-top":"11px"},attrs:{src:a("4951"),width:"220"}})]),e.$store.state.auth.userID?[r("v-spacer"),r("label",{staticStyle:{color:"#569fd3"}},[e._v(" "+e._s(e.$store.state.auth.username)+" "),r("v-icon",[e._v("mdi-account")])],1)]:e._e(),r("v-spacer"),r("v-toolbar-items",[e.$keycloak&&e.$keycloak.authenticated||e.$store.state.auth.userID||e.$store.state.config.generalConfig.authDisabled?[e.dhisLink?r("v-btn",{attrs:{flat:"",href:e.dhisLink}},[r("img",{attrs:{src:a("754f")}})]):e._e()]:e._e(),r("div",[r("language-switcher")],1),e.$store.state.auth.userID?[e.$store.state.public_access?r("v-btn",{attrs:{color:"white",light:"",to:"/logout-public",small:""}},[r("v-icon",[e._v("mdi-login")]),e._v(e._s(e.$t("App.hardcoded-texts.Login"))+" ")],1):r("v-btn",{attrs:{color:"white",light:"",to:"/logout",small:""}},[r("v-icon",[e._v("mdi-logout")]),e._v(e._s(e.$t("App.hardcoded-texts.Logout"))+" ")],1)]:e._e()],2)],2)},h=[],v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-menu",{staticClass:"ma-8",attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,s=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"text-capitalize",attrs:{text:""}},"v-btn",s,!1),r),[a("v-list-item-avatar",{attrs:{size:"24"}},[a("v-img",{attrs:{src:"/flag_"+e.activeFlag+".svg"}})],1),e._v(" "+e._s(e.activeLang)+" "),a("v-icon",{attrs:{small:"",right:""}},[e._v("mdi-menu-down")])],1)]}}]),model:{value:e.languageMenu,callback:function(t){e.languageMenu=t},expression:"languageMenu"}},[a("v-list",{attrs:{dense:""}},e._l(e.languages,(function(t,r){return a("v-list-item",{key:r,on:{click:function(a){return e.handleMenuItemClick(t)}}},[a("v-list-item-avatar",{attrs:{size:"24"}},[a("v-img",{attrs:{src:"/flag_"+t.flag+".svg"}})],1),a("v-list-item-title",[e._v(e._s(t.language))])],1)})),1)],1)},g=[],f=(a("4e827"),a("a925")),m=a("2f62"),$=(a("3ca3"),a("ddb0"),a("8c4f")),x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-card",[a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs3:""}},[a("v-card",{attrs:{height:"209"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-size":"14px"},attrs:{color:"#78496a",dark:"",height:"40"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Active Partition"))+" ")])],1),a("v-card-text",[a("v-select",{attrs:{items:e.$store.state.dataSources,"item-text":"display","item-value":"name",label:e.$t("App.hardcoded-texts.Facility Registry Datasource")},on:{change:function(t){return e.partitionChanged()}},model:{value:e.$store.state.config.userConfig.FRDatasource,callback:function(t){e.$set(e.$store.state.config.userConfig,"FRDatasource",t)},expression:"$store.state.config.userConfig.FRDatasource"}})],1)],1)],1),a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("ActivePartitionStats",{key:e.reload,attrs:{partition:e.$store.state.config.userConfig.FRDatasource,title:e.$t("App.hardcoded-texts.Active Partition Stats")}})],1),a("v-spacer"),a("v-flex",{attrs:{xs3:""}},[a("v-card",{attrs:{height:"209"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-size":"14px"},attrs:{color:"#78496a",dark:"",height:"40"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Active Reconciliation Pair"))+" ")])],1),a("v-card-text",[Object.keys(e.$store.state.activePair.source1).length>0?a("label",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Name"))+": "),a("b",[e._v(e._s(e.$store.state.activePair.display))]),e._v(" "),a("br"),e._v(" "+e._s(e.$t("App.hardcoded-texts.Source 1"))+": "),a("b",[e._v(e._s(e.$store.state.activePair.source1.display))]),e._v(" "),a("br"),e._v(" "+e._s(e.$t("App.hardcoded-texts.Source 2"))+": "),a("b",[e._v(e._s(e.$store.state.activePair.source2.display))]),e._v(" "),a("br"),e._v(" "+e._s(e.$t("App.hardcoded-texts.Status"))+": "),a("b",[e._v(e._s(e.$store.state.recoStatus))]),e._v(" "),"in-progress"===e.$store.state.recoStatus?a("v-icon",{attrs:{small:""}},[e._v("mdi-lock-open-variant-outline")]):a("v-icon",{attrs:{small:""}},[e._v("mdi-lock-outline")])],1):e._e()])],1)],1),a("v-spacer")],1)],1)],1)],1),a("br"),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("viewMap",{key:e.reload})],1),a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("fhirPageSearch",{key:e.reload,attrs:{page:"facility"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("fhirPageSearch",{key:e.reload,attrs:{page:"jurisdiction"}})],1),a("v-spacer")],1)],1)],1)],1)],1)],1)},b=[],_=(a("a15b"),a("d81d"),a("159b"),{data:function(){return{roles:[],tasks:[]}},computed:{canAddDataset:function(){var e=this;if(this.$store.state.config.generalConfig.reconciliation.singleDataSource){var t,a=0,r=Object(c["a"])(this.$store.state.dataSources);try{var s=function(){var r=t.value;if(r.id===e.$store.state.config.generalConfig.reconciliation.fixSource2To)return"continue";var s=e.$store.state.auth.userID,o=e.$store.state.dhis.user.orgId,i=r.shared.users.find((function(e){return e.id===s})),n=r.owner.id===s,c=!0===r.shareToAll.activated,l=!1;if(r.owner.orgId&&r.owner.orgId===o&&(l=!0),!n&&!i&&!c&&!l)return"continue";a++};for(r.s();!(t=r.n()).done;)s()}catch(o){r.e(o)}finally{r.f()}return!(a>=1)||(this.datasetLimitWarn=!0,!1)}return!0}},methods:{flattenExtension:function(e){var t,a={},r=Object(c["a"])(e);try{for(r.s();!(t=r.n()).done;){for(var s=t.value,o="",i=0,n=Object.keys(s);i<n.length;i++){var l=n[i];"url"!==l&&(o=s[l])}a[s.url]?Array.isArray(a[s.url])?a[s.url].push(o):a[s.url]=[a[s.url],o]:Array.isArray(o)?a[s.url]=[o]:a[s.url]=o}}catch(d){r.e(d)}finally{r.f()}return a},getCodeSystem:function(e,t){u.a.get("/FR/getCodeSystem",{params:{codeSystemType:e}}).then((function(e){return t(null,e.data)})).catch((function(e){return console.log(e),t(e,null)}))},getTree:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0;u.a.get("/FR/getTree",{params:{includeBuilding:e,recursive:t}}).then((function(e){if(e.data){var t=!1;return a(t,e.data)}})).catch((function(e){return a(e,[])}))},clearProgress:function(e){u.a.get("/clearProgress/"+e+"/"+this.$store.state.clientId)},getGeneralConfig:function(e){var t=this,a=JSON.stringify(this.$store.state.config.generalConfig);u.a.get("/config/getGeneralConfig?defaultGenerConfig="+a).then((function(a){return a&&(t.$store.state.config.generalConfig=a.data.generalConfig),e()})).catch((function(){return e()}))},toTitleCase:function(e){return e.toLowerCase().split(" ").map((function(e){return e.replace(e[0],e[0].toUpperCase())})).join("").toLowerCase()},translateDataHeader:function(e,t){var a=this.$store.state.config.userConfig.reconciliation.useCSVHeader,r=this.$store.state.levelMapping;if(!a||a&&r[e]["level"+t]==="level"+t)return"Level "+t;if(Object.keys(this.$store.state.levelMapping[e]).length>0){var s,o=this.$store.state.levelMapping[e],i=1;for(var n in o)0===n.indexOf("level")&&i++;"source1"===e&&(s=this.$store.state.totalSource1Levels),"source2"===e&&(s=this.$store.state.totalSource2Levels),s--;var c=i-s;t+=c;var l=this.$store.state.levelMapping[e]["level"+t];return l&&"null"!==l&&"undefined"!==l&&"false"!==l?l:this.$store.state.levelMapping[e]["facility"]}return"Level "+t},getActiveDataSourcePair:function(){var e,t=this,a={};return this.$store.state.dataSourcePairs.forEach((function(r){r.user.id===t.$store.state.auth.userID&&"active"===r.status&&(a=r),Object.keys(a).length>0?e=void 0:r.user.id!==t.$store.state.auth.userID&&r.activeUsers.find((function(e){return e.id===t.$store.state.auth.userID}))&&(e=r)})),e&&(a=e),a},getDatasourceOwner:function(){var e={source1Owner:"",source2Owner:""};return this.$store.state.activePair.source1.hasOwnProperty("userID")&&(e.source1Owner=this.$store.state.activePair.source1.userID),this.$store.state.activePair.source2.hasOwnProperty("userID")&&(e.source2Owner=this.$store.state.activePair.source2.userID),e},getLimitOrgIdOnActivePair:function(){var e=this,t={source1LimitOrgId:[],source2LimitOrgId:[]},a=this.$store.state.dataSources.find((function(t){return t.id===e.$store.state.activePair.source1.id})),r=this.$store.state.dataSources.find((function(t){return t.id===e.$store.state.activePair.source2.id}));if(a&&a.hasOwnProperty("userID")&&a.userID!==this.$store.state.auth.userID){var s=a.sharedUsers.find((function(t){return t.id===e.$store.state.auth.userID}));s&&s.limits.length>0?t.source1LimitOrgId=s.limits:a.shareToAll.activated&&a.shareToAll.limitByUserLocation&&this.$store.state.dhis.user.orgId&&(t.source1LimitOrgId=[this.$store.state.dhis.user.orgId])}if(r&&r.hasOwnProperty("userID")&&r.userID!==this.$store.state.auth.userID){var o=r.sharedUsers.find((function(t){return t.id===e.$store.state.auth.userID}));o&&o.limits.length>0?t.source2LimitOrgId=o.limits:r.shareToAll.activated&&r.shareToAll.limitByUserLocation&&this.$store.state.dhis.user.orgId&&(t.source2LimitOrgId=[this.$store.state.dhis.user.orgId])}return t},getLimitOrgIdOnDataSource:function(e){var t=this,a=[];if(e&&e.hasOwnProperty("userID")&&e.userID!==this.$store.state.auth.userID){var r=e.sharedUsers.find((function(e){return e.id===t.$store.state.auth.userID}));r&&r.limits.length>0?a=r.limits:e.shareToAll.activated&&e.shareToAll.limitByUserLocation&&this.$store.state.dhis.user.orgId&&(a=[this.$store.state.dhis.user.orgId])}return a},getRoles:function(){var e=this;u.a.get("/getRoles").then((function(t){var a,r=Object(c["a"])(t.data);try{for(r.s();!(a=r.n()).done;){var s=a.value;e.roles.push({text:s.name,value:s.id,tasks:s.tasks})}}catch(o){r.e(o)}finally{r.f()}})).catch((function(e){console.log(e.response)}))},getTasks:function(){var e=this;u.a.get("/getTasks").then((function(t){e.tasks=t.data})).catch((function(e){console.log(e.response)}))},saveConfiguration:function(e,t){var a,r=this,s=this.$store.state.auth.userID,o=new FormData;o.append("config",JSON.stringify(this.$store.state.config)),o.append("userID",s),a="generalConfig"===e?"/config/updateGeneralConfig":"/config/updateUserConfig/".concat(this.$store.state.auth.userID),u.a.post(a,o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){"useCSVHeader"===t&&Ws.$emit("changeCSVHeaderNames"),"authDisabled"===t&&r.$router.push({name:"Logout"})}))},setDHIS2Credentials:function(){this.$store.state.auth.userID="";var e=location.href.split("api");return!(e.length<2)&&(this.$store.state.dhis.host=location.href.split("api").shift(),u.a.defaults.params={authDisabled:!0},!0)}}}),y=a("9d64"),S=a("afb4"),k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-size":"14px"},attrs:{color:"#78496a",dark:"",height:"40"}},[e._v(" "+e._s(e.title)+" ")])],1),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[e.loading.facilitiesCount?a("label",[a("v-progress-linear",{attrs:{color:"deep-purple accent-4",indeterminate:"",rounded:"",height:"6"}})],1):a("label",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Total"))+" "+e._s(e.$t("App.hardcoded-texts.Facilities"))+": "),a("v-chip",{staticClass:"ma-2",attrs:{color:"#5f6062","text-color":"white"}},[e._v(" "+e._s(e.totalFacilities)+" ")]),a("br")],1),e.loading.jurisdictionsCount?a("label",[a("v-progress-linear",{attrs:{color:"deep-purple accent-4",indeterminate:"",rounded:"",height:"6"}})],1):a("label",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Total"))+" "+e._s(e.$t("App.hardcoded-texts.Jurisdictions"))+": "),a("v-chip",{staticClass:"ma-2",attrs:{color:"#5f6062","text-color":"white"}},[e._v(" "+e._s(e.totalJurisdictions)+" ")])],1),a("br"),e._v(" "+e._s(e.$t("App.hardcoded-texts.Created"))+": "),a("v-chip",{staticClass:"ma-2",attrs:{color:"#5f6062","text-color":"white"}},[e._v(" "+e._s(e.activePartition.createdTime)+" ")])],1),a("v-divider",{attrs:{color:"#78496a",vertical:""}}),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[e.activePartition.sharedToAll?e._e():a("label",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Shared Users"))+": "),a("v-chip",{staticClass:"ma-2",attrs:{color:"#8a8d35","text-color":"white"}},[e._v(" "+e._s(e.activePartition.sharedUsers)+" ")]),e._v(" "),a("br")],1),e._v(" "+e._s(e.$t("App.hardcoded-texts.Shared To All"))+": "),a("v-chip",{staticClass:"ma-2",attrs:{color:"#5f6062","text-color":"white"}},[e._v(" "+e._s(e.activePartition.sharedToAll)+" ")]),e._v(" "),a("br"),e._v(" "+e._s(e.$t("App.hardcoded-texts.Limited by User Location"))+": "),a("v-chip",{staticClass:"ma-2",attrs:{color:"#5f6062","text-color":"white"}},[e._v(" "+e._s(e.activePartition.limitedByLocation)+" ")])],1)],1)],1)],1)},P=[],A={props:["partition","title"],data:function(){return{totalFacilities:0,totalJurisdictions:0,loading:{facilitiesCount:!1,jurisdictionsCount:!1},activePartition:{sharedUsers:0,sharedToAll:!1,limitedByLocation:!1}}},watch:{datasources:function(){this.getPartitionStatus()}},computed:{datasources:function(){return this.$store.state.dataSources}},methods:{countFacilities:function(){var e=this;this.loading.facilitiesCount=!0;var t="/fhir/"+this.partition+"/Location?type=urn:ihe:iti:mcsd:2019:facility&_count=0&_total=accurate";u.a.get(t).then((function(t){e.totalFacilities=t.data.total,e.loading.facilitiesCount=!1,e.getPartitionStatus()}))},countJurisdictions:function(){var e=this,t="/fhir/"+this.partition+"/Location?type=urn:ihe:iti:mcsd:2019:jurisdiction&_count=0&_total=accurate";this.loading.jurisdictionsCount=!0,u.a.get(t).then((function(t){e.totalJurisdictions=t.data.total,e.loading.jurisdictionsCount=!1}))},getPartitionStatus:function(){var e=this,t=this.$store.state.dataSources.find((function(t){return t.name===e.partition}));t&&(this.activePartition.sharedUsers=t.sharedUsers.length,this.activePartition.sharedToAll=t.shareToAll.activated,this.activePartition.limitedByLocation=t.shareToAll.limitByUserLocation,this.activePartition.createdTime=t.createdTime)}},created:function(){this.partition&&(this.countFacilities(),this.countJurisdictions())}},w=A,D=a("2877"),C=a("6544"),T=a.n(C),I=a("b0af"),L=a("99d9"),V=a("cc20"),O=a("ce7e"),N=a("0e8f"),M=a("a722"),R=a("8e36"),U=a("2fa4"),E=a("71d9"),F=Object(D["a"])(w,k,P,!1,null,null,null),q=F.exports;T()(F,{VCard:I["a"],VCardText:L["c"],VCardTitle:L["d"],VChip:V["a"],VDivider:O["a"],VFlex:N["a"],VLayout:M["a"],VProgressLinear:R["a"],VSpacer:U["a"],VToolbar:E["a"]});var j={mixins:[_],data:function(){return{locale:"en",locales:[{text:"English",value:"en"},{text:"French",value:"fr"}],reload:0}},watch:{locale:function(e){this.$i18n.locale=e},FRDatasource:function(){this.reload++}},computed:{FRDatasource:function(){return this.$store.state.config.userConfig.FRDatasource},datasources:function(){return this.$store.state.dataSources}},methods:{partitionChanged:function(){this.saveConfiguration("userConfig","activePartition"),this.reload++}},components:{fhirPageSearch:y["default"],viewMap:S["default"],ActivePartitionStats:q}},H=j,B=a("a523"),G=a("132d"),W=a("b974"),z=Object(D["a"])(H,x,b,!1,null,null,null),J=z.exports;T()(z,{VCard:I["a"],VCardText:L["c"],VCardTitle:L["d"],VContainer:B["a"],VFlex:N["a"],VIcon:G["a"],VLayout:M["a"],VSelect:W["a"],VSpacer:U["a"],VToolbar:E["a"]});var Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("br"),a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs2:""}},[a("v-chip",{attrs:{color:"primary",dark:"",outlined:""}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Facilities"))+": "+e._s(e.totalFacilities)+" ")])],1),a("v-flex",{attrs:{xs2:""}},[a("v-chip",{attrs:{color:"primary",dark:"",outlined:""}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Jurisdictions"))+": "+e._s(e.totalJurisdictions)+" ")])],1),a("v-flex",{attrs:{xs2:""}},[a("v-chip",{attrs:{color:"primary",dark:"",outlined:""}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Services"))+": "+e._s(e.totalServices)+" ")])],1),a("v-spacer"),a("v-flex",{attrs:{xs3:""}},[e.$tasksVerification.hasPermissionByName("special","custom","view-request-add-facility-page")?a("v-btn",{attrs:{color:"#5f6062",dark:"",rounded:"",small:"",to:"/questionnaire/gofr-facility-add-request-questionnaire/facility-add-request"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Request Addition of New Facility"))+" ")]):e._e()],1),a("v-flex",{attrs:{xs3:""}},[e.$tasksVerification.hasPermissionByName("special","custom","view-request-update-facility-page")?a("v-btn",{attrs:{color:"#5f6062",dark:"",rounded:"",small:"",to:"/Resource/Search/facility?searchAction=send-update-request"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Request Update of Facility Details"))+" ")]):e._e()],1)],1)],1),a("p"),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("viewMap",{key:e.reload})],1),a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("fhirPageSearch",{key:e.reload,attrs:{page:"facility"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("fhirPageSearch",{key:e.reload,attrs:{page:"jurisdiction"}})],1),a("v-spacer")],1)],1)],1)],1)],1)],1)},K=[],X={mixins:[_],data:function(){return{locale:"en",locales:[{text:"English",value:"en"},{text:"French",value:"fr"}],reload:0,totalFacilities:0,totalJurisdictions:0,totalServices:0,loading:{facilitiesCount:!1,jurisdictionsCount:!1,servicesCount:!1}}},watch:{locale:function(e){this.$i18n.locale=e},FRDatasource:function(){this.reload++},reload:function(){this.countFacilities(),this.countJurisdictions(),this.countServices()}},computed:{FRDatasource:function(){return this.$store.state.config.userConfig.FRDatasource},datasources:function(){return this.$store.state.dataSources}},methods:{partitionChanged:function(){this.saveConfiguration("userConfig","activePartition"),this.reload++},countFacilities:function(){var e=this;if(this.FRDatasource){this.loading.facilitiesCount=!0;var t="/fhir/"+this.FRDatasource+"/Location?type=urn:ihe:iti:mcsd:2019:facility&_count=0&_total=accurate";u.a.get(t).then((function(t){e.totalFacilities=t.data.total,e.loading.facilitiesCount=!1}))}},countJurisdictions:function(){var e=this;if(this.FRDatasource){var t="/fhir/"+this.FRDatasource+"/Location?type=urn:ihe:iti:mcsd:2019:jurisdiction&_count=0&_total=accurate";this.loading.jurisdictionsCount=!0,u.a.get(t).then((function(t){e.totalJurisdictions=t.data.total,e.loading.jurisdictionsCount=!1}))}},countServices:function(){var e=this;if(this.FRDatasource){var t="/fhir/"+this.FRDatasource+"/HealthcareService?_count=0&_total=accurate";this.loading.servicesCount=!0,u.a.get(t).then((function(t){e.totalServices=t.data.total,e.loading.servicesCount=!1}))}}},components:{fhirPageSearch:y["default"],viewMap:S["default"]},created:function(){this.countFacilities(),this.countJurisdictions(),this.countServices()}},Z=X,Q=a("8336"),ee=Object(D["a"])(Z,Y,K,!1,null,null,null),te=ee.exports;T()(ee,{VBtn:Q["a"],VChip:V["a"],VContainer:B["a"],VFlex:N["a"],VLayout:M["a"],VSpacer:U["a"]});var ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("center",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}}),a("v-flex",{attrs:{xs6:""}},[a("v-alert",{attrs:{type:"error",value:e.authStatus}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Authentication Failed"))+" ")])],1)],1),a("v-card",{attrs:{width:"430px",hover:""}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{color:"white"},attrs:{color:"primary"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs2:"","text-xs-left":""}},[a("v-icon",{attrs:{"x-large":"",color:"white"}},[e._v("mdi-lock")])],1),a("v-flex",{attrs:{xs9:"","text-xs-right":""}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Login")))])])],1)],1)],1),a("v-card-text",[a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.usernameErrors,filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.User Name")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.authenticate()},blur:function(t){return e.$v.username.$touch()},change:function(t){return e.$v.username.$touch()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,filled:"",type:"password",color:"deep-purple",label:e.$t("App.hardcoded-texts.Password")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.authenticate()},blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-card-actions",[a("v-toolbar",[e.$store.state.config.generalConfig.selfRegistration.enabled?a("v-btn",{attrs:{color:"primary"},on:{click:e.displaySignup}},[e._v(e._s(e.$t("App.hardcoded-texts.Signup")))]):e._e(),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"primary",depressed:""},on:{click:function(t){return e.authenticate()}}},[e._v(e._s(e.$t("App.hardcoded-texts.Login")))])],1)],1)],1)],1)],1)},re=[],se=a("b5ae"),oe=a("9612"),ie={validations:{username:{required:se["required"]},password:{required:se["required"]}},data:function(){return{username:"",password:"",authStatus:!1,signupEnabled:!1}},methods:{authenticate:function(){var e=this;u.a.post("/auth/login",{username:this.username,password:this.password}).then((function(t){e.$store.state.auth.username=e.username,e.$store.state.auth.userObj=t.data.userObj,e.$store.state.auth.userID=t.data.userObj.resource.id,t.data.userObj?(e.$store.state.public_access=!1,e.$store.state.clientId=oe["a"].v4(),e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,Ws.$emit("getUserConfig"),e.$router.push({name:"Home"})):e.authStatus=!0})).catch((function(t){t.hasOwnProperty("response")&&console.log(t.response.data.error),e.authStatus=!0}))},displaySignup:function(){this.$router.push({name:"Signup"})}},computed:{usernameErrors:function(){var e=[];return this.$v.username.$dirty?(!this.$v.username.required&&e.push("Username is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e}},beforeCreate:function(){this.$store.state.config.generalConfig.authDisabled&&(this.$store.state.clientId=oe["a"].v4(),this.$store.state.initializingApp=!0,this.$store.state.denyAccess=!1,this.$router.push({name:"DHIS2Auth"}))}},ne=ie,ce=a("0798"),le=a("4bd4"),de=a("8654"),ue=Object(D["a"])(ne,ae,re,!1,null,null,null),pe=ue.exports;T()(ue,{VAlert:ce["a"],VBtn:Q["a"],VCard:I["a"],VCardActions:L["a"],VCardText:L["c"],VCardTitle:L["d"],VContainer:B["a"],VFlex:N["a"],VForm:le["a"],VIcon:G["a"],VLayout:M["a"],VSpacer:U["a"],VTextField:de["a"],VToolbar:E["a"]});var he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}})},ve=[],ge={mounted:function(){if(this.$store.state.auth.userID="","keycloak"===this.$store.state.idp){this.$cookies.remove("userObj"),this.$store.state.auth.username="",this.$store.state.auth.userObj={};var e=window.location.href.split("#")[0];this.$keycloak.logout({redirectUri:e})}else u()({method:"GET",url:"/auth/logout"}).catch((function(e){console.error(e)})),this.$store.state.auth.username="",this.$store.state.auth.userObj={},this.$store.state.config.generalConfig.public_access.enabled?(this.$router.push("HomePublic"),window.location.reload()):this.$router.push("login")}},fe=ge,me=Object(D["a"])(fe,he,ve,!1,null,null,null),$e=me.exports;T()(me,{VContainer:B["a"]});var xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}})},be=[],_e=a("2b27"),ye=a.n(_e),Se={mounted:function(){if(this.$store.state.auth.userID="",this.$store.state.public_access=!1,"keycloak"===this.$store.state.idp){ye.a.set("loggedout-public",!0);var e=window.location.href.split("#")[0];this.$keycloak.logout({redirectUri:e})}else u()({method:"GET",url:"/auth/logout"}).catch((function(e){console.error(e)})),this.$router.push("login");this.$store.state.auth.username="",this.$store.state.auth.userObj={}}},ke=Se,Pe=Object(D["a"])(ke,xe,be,!1,null,null,null),Ae=Pe.exports;T()(Pe,{VContainer:B["a"]});var we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-alert",{staticStyle:{width:"900px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-alert",{staticStyle:{width:"900px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"1500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",text:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Create Account"))+" ")])],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.firstnameErrors,filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.First Name")},on:{blur:function(t){return e.$v.firstname.$touch()},change:function(t){return e.$v.firstname.$touch()}},model:{value:e.firstname,callback:function(t){e.firstname=t},expression:"firstname"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.surnameErrors,filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.Surname")},on:{blur:function(t){return e.$v.surname.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}})],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.Middle Names")},model:{value:e.othername,callback:function(t){e.othername=t},expression:"othername"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.phoneErrors,filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.Phone")},on:{blur:e.validatePhone,change:e.validatePhone,input:e.validatePhone},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.emailErrors,filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.Email")+"*"},on:{blur:e.validateEmail,change:e.validateEmail,input:e.validateEmail},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.usernameErrors,filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.User Name")},on:{blur:function(t){return e.$v.username.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.Password")},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.retype_passwordErrors,type:"password",filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.Re-type Password")},on:{blur:function(t){return e.$v.retype_password.$touch()},change:function(t){return e.$v.retype_password.$touch()}},model:{value:e.retype_password,callback:function(t){e.retype_password=t},expression:"retype_password"}})],1)],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(t){return e.$refs.form.reset()}}},[a("v-icon",[e._v("mdi-close")]),e._v(e._s(e.$t("App.hardcoded-texts.Clear"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:e.displayLogin}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-lock")]),e._v(e._s(e.$t("App.hardcoded-texts.Back To Login"))+" ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.signup()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v(e._s(e.$t("App.hardcoded-texts.Add"))+" ")],1)],1)],1)],1),a("v-spacer")],1)],1)},De=[],Ce={validations:{username:{required:se["required"]},retype_password:{required:se["required"]},password:{required:se["required"]},firstname:{required:se["required"]},surname:{required:se["required"]},phone:{required:se["required"]},email:{required:se["required"]}},data:function(){return{firstname:"",othername:"",surname:"",phone:"",email:"",username:"",password:"",retype_password:"",customFields:[],phoneErrors:[],emailErrors:[],alertFail:!1,alertSuccess:!1,alertMsg:""}},methods:{validateEmail:function(){if(this.emailErrors=[],!this.email)return this.emailErrors.push("Email is required"),!1;var e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.test(this.email)?void 0:(this.emailErrors.push("Invalid Email"),!1)},validatePhone:function(){if(this.phoneErrors=[],!this.phone)return this.phoneErrors.push("Phone is required");var e=/^[+]?[\s./0-9]*[(]?[0-9]{1,4}[)]?[-\s./0-9]*$/g;return e.test(this.phone)?void 0:this.phoneErrors.push("Invalid phone number")},signup:function(){var e=this;this.password!==this.retype_password&&(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",this.$store.state.errorDescription="Password mismatch"),this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Creating Account";var t=new FormData;for(var a in t.append("firstName",this.firstname),t.append("otherName",this.othername),t.append("surname",this.surname),t.append("phone",this.phone),t.append("email",this.email),t.append("password",this.password),t.append("userName",this.username),this.$store.state.config.generalConfig.selfRegistration.requiresApproval&&t.append("status","Pending"),this.customFields)t.append(a,this.customFields[a]);u.a.post("/addUser/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var t=Object.keys(e.$v.$params),a=0,r=t;a<r.length;a++){var s=r[a];e.$v[s].$reset()}e.$refs.form.reset(),e.$store.state.dynamicProgress=!1,e.alertSuccess=!0,e.$store.state.config.generalConfig.selfRegistration.requiresApproval?e.alertMsg="Account created and waiting for approval, you will receive an email once approved":e.alertMsg="Account created successfully"})).catch((function(t){e.$store.state.dynamicProgress=!1,e.alertFail=!0,e.alertMsg="This account was not added, try different username",console.log(t.response.data.error)}))},displayLogin:function(){this.$router.push({name:"Login"})}},computed:{codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},firstnameErrors:function(){var e=[];return this.$v.firstname.$dirty?(!this.$v.firstname.required&&e.push("First Name is required"),e):e},surnameErrors:function(){var e=[];return this.$v.surname.$dirty?(!this.$v.surname.required&&e.push("Surname is required"),e):e},usernameErrors:function(){var e=[];return this.$v.username.$dirty?(!this.$v.username.required&&e.push("Username is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e},retype_passwordErrors:function(){var e=[];return this.$v.retype_password.$dirty?(!this.$v.retype_password.required&&e.push("Re-type Password"),e):e}}},Te=Ce,Ie=a("afd9"),Le=Object(D["a"])(Te,we,De,!1,null,null,null),Ve=Le.exports;T()(Le,{VAlert:ce["a"],VBtn:Q["a"],VCard:I["a"],VCardActions:L["a"],VCardTitle:L["d"],VContainer:B["a"],VDivider:O["a"],VFlex:N["a"],VForm:le["a"],VIcon:G["a"],VLayout:M["a"],VSpacer:U["a"],VSystemBar:Ie["a"],VTextField:de["a"],VToolbar:E["a"]});var Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.autoDisableSingleDatasourceDialog,callback:function(t){e.autoDisableSingleDatasourceDialog=t},expression:"autoDisableSingleDatasourceDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Disabling Single Data Source Limit"))+" ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.autoDisableSingleDatasource("cancel")}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Disabling limiting reconciliation to be done against one choosen data source will also disable the single data source limit, click OK to proceed"))+" ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){return e.autoDisableSingleDatasource("cancel")}}},[e._v(e._s(e.$t("App.hardcoded-texts.Cancel")))]),a("v-spacer"),a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){return e.autoDisableSingleDatasource("ok")}}},[e._v(e._s(e.$t("App.hardcoded-texts.Ok")))])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"620px"},model:{value:e.defineSuperuserRole,callback:function(t){e.defineSuperuserRole=t},expression:"defineSuperuserRole"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.DHIS2 superuser role that can be an administrator of GOFR"))+" ")])],1),a("v-card-text",[a("v-select",{attrs:{label:e.$t("App.hardcoded-texts.Superuser Role Name"),"item-text":"displayName","item-value":"id",loading:e.loadingDhis2Roles,required:"",items:e.dhis2Roles},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.adminRole,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"adminRole",t)},expression:"$store.state.config.generalConfig.externalAuth.adminRole"}})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",disabled:!e.$store.state.config.generalConfig.externalAuth.adminRole||0===e.dhis2Roles.length},on:{click:function(t){return e.saveConfiguration("generalConfig","authDisabled")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Save"))+" ")],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"800px"},model:{value:e.selectDatasourceDialog,callback:function(t){e.selectDatasourceDialog=t},expression:"selectDatasourceDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Select datasource to fix source 2"))+" ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchDatasource,callback:function(t){e.searchDatasource=t},expression:"searchDatasource"}}),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeDatasourceDialog.apply(null,arguments)}}},[a("v-icon",[e._v("mdi-close")])],1)],1),e._v(" "+e._s(e.$t("App.hardcoded-texts.This lists only those datasets that have been shared to all users"))+" "),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.dataSourceHeaders,items:e.sharedToAllDatasets,dark:"",search:e.searchDatasource},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.fixSource2To,callback:function(t){e.fixSource2To=t},expression:"fixSource2To"}},[a("td",[a("v-radio",{attrs:{value:r.id,color:"blue"}})],1)]),a("td",[e._v(e._s(r.name))]),a("td",[e._v(e._s(r.userID.userName))]),a("td",[e._v(" "+e._s(r.createdTime)+" ")])],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},on:{click:e.closeDatasourceDialog}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Cancel"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{color:"primary",disabled:!e.fixSource2To||0===e.sharedToAllDatasets.length},on:{click:e.savefixSource2To}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Save"))+" ")],1)],1)],1)],1),a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.System Configurations")))])]),a("v-card-text",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.User Configurations"))+" ")]),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-switch",{attrs:{color:"primary",label:e.$t("App.hardcoded-texts.Apply user defined headers when reconciling")},on:{change:function(t){return e.saveConfiguration("userConfig","useCSVHeader")}},model:{value:e.$store.state.config.userConfig.reconciliation.useCSVHeader,callback:function(t){e.$set(e.$store.state.config.userConfig.reconciliation,"useCSVHeader",t)},expression:"$store.state.config.userConfig.reconciliation.useCSVHeader"}})],1),a("v-flex",[a("v-autocomplete",{attrs:{items:e.$store.state.dataSources,"item-text":"display","item-value":"name",label:e.$t("App.hardcoded-texts.Facility Registry Datasource")},on:{change:function(t){return e.saveConfiguration("userConfig","activePartition")}},model:{value:e.$store.state.config.userConfig.FRDatasource,callback:function(t){e.$set(e.$store.state.config.userConfig,"FRDatasource",t)},expression:"$store.state.config.userConfig.FRDatasource"}})],1)],1)],1)],1),a("v-divider"),a("v-divider"),a("v-divider"),e.$tasksVerification.hasPermissionByName("special","custom","change-admin-config")?a("v-card",[a("v-card-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Admin Configurations"))+" ")]),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",{scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.$store.state.config.generalConfig.reconciliation.fixSource2?[e._v(" "+e._s(e.$t("App.hardcoded-texts.Source2 Limited To"))+": "),a("v-chip",[e._v(e._s(e.fixedSource2To))]),a("v-tooltip",{attrs:{top:""}},[a("v-btn",e._g({attrs:{fab:"",dark:"",color:"primary",small:""},on:{click:e.displayDatasourceDialog}},r),[a("v-icon",{attrs:{dark:""}},[e._v("mdi-format-list-bulleted")])],1),a("span",[e._v(e._s(e.$t("App.hardcoded-texts.Change dataset")))])],1)]:e._e()]}}],null,!1,2260335696)},[a("v-switch",{attrs:{color:"primary",label:e.$t("App.hardcoded-texts.Perform match based on parent constraint")},on:{change:function(t){return e.saveConfiguration("generalConfig","parentConstraint")}},model:{value:e.$store.state.config.generalConfig.reconciliation.parentConstraint.enabled,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation.parentConstraint,"enabled",t)},expression:"$store.state.config.generalConfig.reconciliation.parentConstraint.enabled"}}),e.$store.state.config.generalConfig.reconciliation.parentConstraint.enabled?e._e():a("v-card",{staticStyle:{"margin-left":"100px"},attrs:{color:"grey lighten-3"}},[a("v-checkbox",{attrs:{color:"primary",label:e.$t("App.hardcoded-texts.Automatch By ID"),disabled:""},on:{change:function(t){return e.saveConfiguration("generalConfig","parConstrIdAuto")}},model:{value:e.$store.state.config.generalConfig.reconciliation.parentConstraint.idAutoMatch,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation.parentConstraint,"idAutoMatch",t)},expression:"$store.state.config.generalConfig.reconciliation.parentConstraint.idAutoMatch"}}),a("v-checkbox",{attrs:{color:"primary",label:e.$t("App.hardcoded-texts.Automatch By Name (when parents differ)")},on:{change:function(t){return e.saveConfiguration("generalConfig","parConstrNameAuto")}},model:{value:e.$store.state.config.generalConfig.reconciliation.parentConstraint.nameAutoMatch,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation.parentConstraint,"nameAutoMatch",t)},expression:"$store.state.config.generalConfig.reconciliation.parentConstraint.nameAutoMatch"}})],1),a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Choose ways datasets can be added"))+" ")]),a("v-card-text",[a("v-checkbox",{attrs:{label:e.$t("App.hardcoded-texts.CSV Upload"),value:"CSV Upload"},on:{change:function(t){return e.checkDatasetsAdditionWays("upload")}},model:{value:e.$store.state.config.generalConfig.datasetsAdditionWays,callback:function(t){e.$set(e.$store.state.config.generalConfig,"datasetsAdditionWays",t)},expression:"$store.state.config.generalConfig.datasetsAdditionWays"}}),a("v-checkbox",{attrs:{label:e.$t("App.hardcoded-texts.Remote Servers Sync"),value:"Remote Servers Sync"},on:{change:function(t){return e.checkDatasetsAdditionWays("remote")}},model:{value:e.$store.state.config.generalConfig.datasetsAdditionWays,callback:function(t){e.$set(e.$store.state.config.generalConfig,"datasetsAdditionWays",t)},expression:"$store.state.config.generalConfig.datasetsAdditionWays"}}),a("v-checkbox",{attrs:{label:e.$t("App.hardcoded-texts.Blank Datasource"),value:"Blank Datasource"},on:{change:function(t){return e.checkDatasetsAdditionWays("blank")}},model:{value:e.$store.state.config.generalConfig.datasetsAdditionWays,callback:function(t){e.$set(e.$store.state.config.generalConfig,"datasetsAdditionWays",t)},expression:"$store.state.config.generalConfig.datasetsAdditionWays"}})],1)],1),a("v-switch",{attrs:{color:"primary",label:e.$t("App.hardcoded-texts.Allow non admin users to share datasets will all users")},on:{change:function(t){return e.saveConfiguration("generalConfig","allowShareToAllForNonAdmin")}},model:{value:e.$store.state.config.generalConfig.allowShareToAllForNonAdmin,callback:function(t){e.$set(e.$store.state.config.generalConfig,"allowShareToAllForNonAdmin",t)},expression:"$store.state.config.generalConfig.allowShareToAllForNonAdmin"}}),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-switch",e._g({attrs:{color:"primary",label:e.$t("App.hardcoded-texts.Select a data source to serve as Source 2 for all reconciliation")},on:{change:e.displayDatasourceDialog},model:{value:e.$store.state.config.generalConfig.reconciliation.fixSource2,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation,"fixSource2",t)},expression:"$store.state.config.generalConfig.reconciliation.fixSource2"}},r))]}}],null,!1,1475664158)},[a("span",[e._v(e._s(e.$t("App.hardcoded-texts.This will limit users to perform reconciliations against the chosen data source")))])]),a("v-switch",{attrs:{color:"primary",label:e.$t("App.hardcoded-texts.Single data source per user")},on:{change:e.singleDatasource},model:{value:e.$store.state.config.generalConfig.reconciliation.singleDataSource,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation,"singleDataSource",t)},expression:"$store.state.config.generalConfig.reconciliation.singleDataSource"}}),e.$store.state.dhis.user.orgId?a("v-switch",{attrs:{color:"primary",label:e.$t("App.hardcoded-texts.Single data source pair per org unit")},on:{change:function(t){return e.saveConfiguration("generalConfig","singlePair")}},model:{value:e.$store.state.config.generalConfig.reconciliation.singlePair,callback:function(t){e.$set(e.$store.state.config.generalConfig.reconciliation,"singlePair",t)},expression:"$store.state.config.generalConfig.reconciliation.singlePair"}}):e._e()],1),a("v-flex",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.GOFR Authentication"))+" ")]),a("v-card-text",[a("v-switch",{attrs:{color:"primary",label:e.$t("App.hardcoded-texts.Disable Authentication")},on:{change:e.disableGOFRAuth},model:{value:e.$store.state.config.generalConfig.authDisabled,callback:function(t){e.$set(e.$store.state.config.generalConfig,"authDisabled",t)},expression:"$store.state.config.generalConfig.authDisabled"}}),e.$store.state.config.generalConfig.authDisabled?a("v-card",{staticStyle:{"margin-left":"100px"},attrs:{color:"grey lighten-3"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.External Authentication Method"))+" "),a("v-radio-group",{on:{change:function(t){return e.saveConfiguration("generalConfig","useDhis2Auth")}},model:{value:e.$store.state.config.generalConfig.authMethod,callback:function(t){e.$set(e.$store.state.config.generalConfig,"authMethod",t)},expression:"$store.state.config.generalConfig.authMethod"}},[a("v-radio",{attrs:{label:"dhis2",value:"dhis2",disabled:""}}),a("v-radio",{attrs:{label:"iHRIS",value:"iHRIS",disabled:""}})],1),a("v-select",{staticStyle:{width:"350px"},attrs:{label:e.$t("App.hardcoded-texts.Superuser Role Name"),"item-text":"displayName","item-value":"id",loading:e.loadingDhis2Roles,required:"",items:e.dhis2Roles},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.adminRole,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"adminRole",t)},expression:"$store.state.config.generalConfig.externalAuth.adminRole"}}),e.$store.state.config.generalConfig.authMethod?a("v-checkbox",{attrs:{label:e.$t("App.hardcoded-texts.Pull org units")},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.pullOrgUnits,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"pullOrgUnits",t)},expression:"$store.state.config.generalConfig.externalAuth.pullOrgUnits"}}):e._e(),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-checkbox",{attrs:{label:e.$t("App.hardcoded-texts.Share orgs with other users")},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.shareOrgUnits,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"shareOrgUnits",t)},expression:"$store.state.config.generalConfig.externalAuth.shareOrgUnits"}}):e._e(),e.$store.state.config.generalConfig.externalAuth.shareOrgUnits&&e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-checkbox",{attrs:{label:e.$t("App.hardcoded-texts.Limit orgs sharing by user orgid")},on:{change:function(t){return e.saveConfiguration("generalConfig","externalAuth")}},model:{value:e.$store.state.config.generalConfig.externalAuth.shareByOrgId,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"shareByOrgId",t)},expression:"$store.state.config.generalConfig.externalAuth.shareByOrgId"}}):e._e(),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",label:e.$t("App.hardcoded-texts.Dataset Name"),"error-messages":e.datasetNameErrors,required:""},on:{blur:e.ensureNameUnique,input:e.ensureNameUnique},model:{value:e.$store.state.config.generalConfig.externalAuth.datasetName,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"datasetName",t)},expression:"$store.state.config.generalConfig.externalAuth.datasetName"}}):e._e(),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",label:e.$t("App.hardcoded-texts.User Name"),required:""},model:{value:e.$store.state.config.generalConfig.externalAuth.userName,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"userName",t)},expression:"$store.state.config.generalConfig.externalAuth.userName"}}):e._e(),e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",label:e.$t("App.hardcoded-texts.Password"),type:"password",required:""},model:{value:e.$store.state.config.generalConfig.externalAuth.password,callback:function(t){e.$set(e.$store.state.config.generalConfig.externalAuth,"password",t)},expression:"$store.state.config.generalConfig.externalAuth.password"}}):e._e(),a("v-flex",{attrs:{xs3:""}},[e.$store.state.config.generalConfig.externalAuth.pullOrgUnits?a("v-btn",{attrs:{color:"primary",disabled:e.datasetNameErrors.length>0||!e.$store.state.config.generalConfig.externalAuth.datasetName,small:"",round:""},on:{click:e.pullOrgUnits}},[e._v(e._s(e.$t("App.hardcoded-texts.start pulling")))]):e._e()],1)],1):e._e()],1)],1)],1),a("v-divider"),a("v-flex",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Self Registration"))+" ")]),a("v-card-text",[a("v-switch",{attrs:{color:"primary",label:e.$t("App.hardcoded-texts.Enable self registration")},on:{change:function(t){return e.saveConfiguration("generalConfig","selfRegistration")}},model:{value:e.$store.state.config.generalConfig.selfRegistration.enabled,callback:function(t){e.$set(e.$store.state.config.generalConfig.selfRegistration,"enabled",t)},expression:"$store.state.config.generalConfig.selfRegistration.enabled"}}),a("v-switch",{attrs:{color:"primary",label:e.$t("App.hardcoded-texts.Requires Admin Approval Of Self Registration")},on:{change:function(t){return e.saveConfiguration("generalConfig","selfRegistration")}},model:{value:e.$store.state.config.generalConfig.selfRegistration.requiresApproval,callback:function(t){e.$set(e.$store.state.config.generalConfig.selfRegistration,"requiresApproval",t)},expression:"$store.state.config.generalConfig.selfRegistration.requiresApproval"}})],1)],1)],1),a("v-divider"),a("v-flex",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Public Access"))+" ")]),a("v-card-text",[a("v-switch",{attrs:{color:"primary",label:e.$t("App.hardcoded-texts.Enable public access")},on:{change:function(t){return e.saveConfiguration("generalConfig","enablePublicAccess")}},model:{value:e.$store.state.config.generalConfig.public_access.enabled,callback:function(t){e.$set(e.$store.state.config.generalConfig.public_access,"enabled",t)},expression:"$store.state.config.generalConfig.public_access.enabled"}}),e.$store.state.config.generalConfig.public_access.enabled?a("v-autocomplete",{attrs:{items:e.$store.state.dataSources,"item-text":"display","item-value":"name",label:e.$t("App.hardcoded-texts.Public Datasource")},on:{change:function(t){return e.saveConfiguration("generalConfig","publicPartition")}},model:{value:e.$store.state.config.generalConfig.public_access.partition,callback:function(t){e.$set(e.$store.state.config.generalConfig.public_access,"partition",t)},expression:"$store.state.config.generalConfig.public_access.partition"}}):e._e(),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.$router.push("/Resource/view/facility-public-filter/facility-public-filter")}}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Filter Access"))+" ")])],1)],1)],1),a("v-divider"),a("v-flex",{attrs:{xs1:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Cron Jobs"))+" ")]),a("v-card-text",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Autosync Below Remote Datasets"))+" "),a("v-text-field",{staticStyle:{width:"350px"},attrs:{outline:"",name:"cron_time",label:e.$t("App.hardcoded-texts.Cron Time")},on:{blur:function(t){return e.saveConfiguration("generalConfig","datasetsAutosyncTime")}},model:{value:e.$store.state.config.generalConfig.datasetsAutosyncTime,callback:function(t){e.$set(e.$store.state.config.generalConfig,"datasetsAutosyncTime",t)},expression:"$store.state.config.generalConfig.datasetsAutosyncTime"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.cronDataSourceHeaders,items:e.remoteDatasets,"hide-default-footer":"","pagination.sync":"pagination"},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.display))]),a("td",[e._v(e._s(r.owner))]),a("td",[e._v(" "+e._s(r.createdTime)+" ")]),a("td",[e._v(" "+e._s(r.lastUpdate)+" ")]),a("td",[a("v-switch",{attrs:{color:"primary"},on:{change:function(t){return e.controlDatasetsCronjobs(r)}},model:{value:e.datasetsAutosyncState[r.id],callback:function(t){e.$set(e.datasetsAutosyncState,r.id,t)},expression:"datasetsAutosyncState[item.id]"}})],1)])]}}],null,!1,946053802)})],1)],1)],1),a("v-flex",{attrs:{xs1:""}},[a("v-card",{attrs:{color:"grey lighten-3"}},[a("v-card-text",[e._v(" "+e._s(e.$t("App.hardcoded-texts.SMTP Configuration For Email Notifications"))+" ")]),a("v-card-actions",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-text-field",{attrs:{label:e.$t("App.hardcoded-texts.SMTP Host"),filled:""},model:{value:e.smtp.host,callback:function(t){e.$set(e.smtp,"host",t)},expression:"smtp.host"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:e.$t("App.hardcoded-texts.SMTP Port"),filled:""},model:{value:e.smtp.port,callback:function(t){e.$set(e.smtp,"port",t)},expression:"smtp.port"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:e.$t("App.hardcoded-texts.SMTP Username"),filled:""},model:{value:e.smtp.username,callback:function(t){e.$set(e.smtp,"username",t)},expression:"smtp.username"}})],1),a("v-flex",[a("v-text-field",{attrs:{type:"password",label:e.$t("App.hardcoded-texts.SMTP Password"),autocomplete:"new-password",filled:""},model:{value:e.smtp.password,callback:function(t){e.$set(e.smtp,"password",t)},expression:"smtp.password"}})],1),a("v-flex",[a("v-switch",{attrs:{color:"primary",label:e.$t("App.hardcoded-texts.SMTP Secured")},model:{value:e.smtp.secured,callback:function(t){e.$set(e.smtp,"secured",t)},expression:"smtp.secured"}})],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs1:""}},[a("v-btn",{attrs:{color:"primary"},on:{click:e.saveSMTP}},[a("v-icon",[e._v("mdi-content-save")]),e._v(e._s(e.$t("App.hardcoded-texts.Save"))+" ")],1)],1)],1)],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs1:""}},[a("v-switch",{attrs:{color:"primary",label:e.$t("App.hardcoded-texts.Enable Endpoint Notification when reconciliation is done")},on:{change:function(t){return e.saveConfiguration("generalConfig","recoProgressNotification")}},model:{value:e.$store.state.config.generalConfig.recoProgressNotification.enabled,callback:function(t){e.$set(e.$store.state.config.generalConfig.recoProgressNotification,"enabled",t)},expression:"$store.state.config.generalConfig.recoProgressNotification.enabled"}}),e.$store.state.config.generalConfig.recoProgressNotification.enabled?a("v-card",{staticStyle:{"margin-left":"100px"},attrs:{color:"grey lighten-3"}},[a("v-card-text",[e._v(" "+e._s(e.$t("App.hardcoded-texts.End point to send notification when reconciliation is done"))+" ")]),a("v-card-actions",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-text-field",{attrs:{label:e.$t("App.hardcoded-texts.End point URL"),filled:""},model:{value:e.notification_endpoint,callback:function(t){e.notification_endpoint=t},expression:"notification_endpoint"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:e.$t("App.hardcoded-texts.End point Username"),filled:""},model:{value:e.notification_username,callback:function(t){e.notification_username=t},expression:"notification_username"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:e.$t("App.hardcoded-texts.End point Password"),filled:""},model:{value:e.notification_password,callback:function(t){e.notification_password=t},expression:"notification_password"}})],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs1:""}},[a("v-btn",{attrs:{color:"primary",small:""},on:{click:e.recoProgressNotificationChanged}},[a("v-icon",[e._v("mdi-content-save")]),e._v(e._s(e.$t("App.hardcoded-texts.Save"))+" ")],1)],1)],1)],1)],1)],1)],1):e._e()],1)],1)],1)],1):e._e()],1)],1),a("appRemoteSync",{attrs:{syncType:"dhisSync",serverName:e.$store.state.config.generalConfig.externalAuth.datasetName,userID:e.$store.state.auth.userID,sourceOwner:e.$store.state.auth.userID,mode:"full"}})],1)},Ne=[],Me=a("2909"),Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("app-syncProgress",{attrs:{syncProgrIndeter:e.syncProgrIndeter,syncStatus:e.syncStatus,syncProgrPercent:e.syncProgrPercent,syncPercent:e.syncPercent}})],1)},Ue=[],Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.syncProgrIndeter,callback:function(t){e.syncProgrIndeter=t},expression:"syncProgrIndeter"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" "+e._s(e.syncStatus)+" "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"270"},model:{value:e.syncProgrPercent,callback:function(t){e.syncProgrPercent=t},expression:"syncProgrPercent"}},[a("v-card",{attrs:{color:"white",dark:""}},[a("v-card-text",[a("center",[a("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.syncStatus))]),a("br"),a("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.syncPercent,color:"primary"}},[a("v-avatar",{attrs:{color:"indigo",size:"50px"}},[a("span",{staticClass:"white--text"},[a("b",[e._v(e._s(e.syncPercent)+"%")])])])],1)],1)],1)],1)],1)],1)},Fe=[],qe={props:["syncProgrIndeter","syncStatus","syncProgrPercent","syncPercent"]},je=qe,He=a("8212"),Be=a("169a"),Ge=a("490a"),We=Object(D["a"])(je,Ee,Fe,!1,null,null,null),ze=We.exports;T()(We,{VAvatar:He["a"],VCard:I["a"],VCardText:L["c"],VContainer:B["a"],VDialog:Be["a"],VProgressCircular:Ge["a"],VProgressLinear:R["a"]});var Je={props:["id","syncType","serverName","host","username","password","userID","mode"],data:function(){return{syncProgrIndeter:!1,syncStatus:"Waiting for sync status",syncPercent:null,syncProgrPercent:!1,syncProgressTimer:"",syncRunning:!1}},methods:{sync:function(){var e=this,t=this.mode;t||(t="full");var a=new FormData,r=this.$store.state.clientId;a.append("id",this.id),a.append("name",this.serverName),a.append("host",this.host),a.append("username",this.username),a.append("password",this.password),a.append("userID",this.userID),a.append("clientId",r),a.append("mode",t),this.syncRunning=!0,this.syncProgrIndeter=!0,u.a.post("/"+this.syncType+"/",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.syncProgressTimer=setInterval(e.checkSyncProgress,1e3)})).catch((function(t){e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.response.data.error+". cross check host,user and password",clearInterval(e.syncProgressTimer),console.log(t.response.data.error)}))},checkSyncProgress:function(){var e,t=this,a=this.$store.state.clientId;"dhisSync"===this.syncType?e="dhisSyncRequest":"fhirSync"===this.syncType&&(e="fhirSyncRequest"),u.a.get("/progress/"+e+"/"+a).then((function(e){return null===e.data||void 0===e.data||!1===e.data?(t.$store.state.uploadRunning=!1,t.syncProgrIndeter=!1,t.syncProgrPercent=!1,void clearInterval(t.syncProgressTimer)):null!==e.data.error?(t.$store.state.uploadRunning=!1,t.syncProgrIndeter=!1,t.syncProgrPercent=!1,t.$store.state.dialogError=!0,t.$store.state.errorTitle="Error",t.$store.state.errorDescription=e.data.error,clearInterval(t.syncProgressTimer),void console.log(e.data.error)):null===e.data.status?(t.$store.state.uploadRunning=!1,t.syncProgrIndeter=!1,t.syncProgrPercent=!1,void clearInterval(t.syncProgressTimer)):(t.syncStatus=e.data.status,e.data.percent&&(t.syncProgrPercent||(t.syncProgrIndeter=!1,t.syncProgrPercent=!0),t.syncPercent=e.data.percent),void("Done"===e.data.status&&(t.syncStatus="Waiting for sync status",clearInterval(t.syncProgressTimer),t.syncProgrPercent=!1,t.$store.state.uploadRunning=!1,Ws.$emit("getDataSources"))))})).catch((function(e){t.$store.state.dialogError=!0,t.$store.state.errorTitle="Error",console.log(e.response.data.error+". cross check host,user and password"),t.$store.state.errorDescription=e.response.data.error+". cross check host,user and password",clearInterval(t.syncProgressTimer)}))}},created:function(){Ws.$on("runRemoteSync",this.sync)},beforeDestroy:function(){Ws.$off("runRemoteSync",this.sync)},components:{appSyncProgress:ze}},Ye=Je,Ke=Object(D["a"])(Ye,Re,Ue,!1,null,null,null),Xe=Ke.exports;T()(Ke,{VContainer:B["a"]});var Ze={mixins:[_],validations:{facility:{required:se["required"]},code:{required:se["required"]},uploadName:{required:se["required"]}},data:function(){return{smtp:{host:"",port:"",username:"",password:"",secured:!0},autoDisableSingleDatasourceDialog:!1,selectDatasourceDialog:!1,fixSource2To:"",searchDatasource:"",datasetsAutosyncState:{},useCSVHeader:!1,moreFields:!1,fieldLabel:"",fieldName:"",required:"No",requiredText:["Yes","No"],notification_endpoint:"",notification_username:"",notification_password:"",dhis2Roles:[],loadingDhis2Roles:!1,datasetNameErrors:[],defineSuperuserRole:!1}},methods:{controlDatasetsCronjobs:function(e){var t=new FormData;t.append("id",e.id),t.append("enabled",this.datasetsAutosyncState[e.id]),u.a.post("/datasource/updateDatasetAutosync",t)},checkDatasetsAdditionWays:function(e){var t;0===this.$store.state.config.generalConfig.datasetsAdditionWays.length?(this.$store.state.errorTitle="Cant disable both ways",this.$store.state.errorDescription="There must be atleast one way of adding a dataset",this.$store.state.dialogError=!0,"remote"===e?t="Remote Servers Sync":"upload"===e?t="CSV Upload":"blank"===e&&(t="Blank Datasource"),this.$store.state.config.generalConfig.datasetsAdditionWays.push(t)):this.saveConfiguration("generalConfig","datasetsAdditionWays")},autoDisableSingleDatasource:function(e){"ok"===e?(this.$store.state.config.generalConfig.reconciliation.singleDataSource=!1,this.saveConfiguration("generalConfig","fixSource2"),this.saveConfiguration("generalConfig","singleDataSource")):"cancel"===e&&(this.$store.state.config.generalConfig.reconciliation.fixSource2=!0),this.autoDisableSingleDatasourceDialog=!1},singleDatasource:function(){var e=this;this.$store.state.config.generalConfig.reconciliation.singleDataSource?this.$store.state.config.generalConfig.reconciliation.fixSource2To&&this.$store.state.config.generalConfig.reconciliation.fixSource2?this.saveConfiguration("generalConfig","singleDataSource"):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",this.$store.state.errorColor="error",this.$store.state.errorDescription="This feature can only be enabled if there is a defined datasource to serve as Source 2 for all reconciliation",setTimeout((function(){e.$store.state.config.generalConfig.reconciliation.singleDataSource=!1}))):this.saveConfiguration("generalConfig","singleDataSource")},displayDatasourceDialog:function(){!0===this.$store.state.config.generalConfig.reconciliation.fixSource2?(this.fixSource2To=this.$store.state.config.generalConfig.reconciliation.fixSource2To,this.selectDatasourceDialog=!0,this.saveConfiguration("generalConfig","fixSource2")):this.$store.state.config.generalConfig.reconciliation.singleDataSource?this.autoDisableSingleDatasourceDialog=!0:this.saveConfiguration("generalConfig","fixSource2")},closeDatasourceDialog:function(){this.selectDatasourceDialog=!1,this.$store.state.config.generalConfig.reconciliation.fixSource2To||(this.$store.state.config.generalConfig.reconciliation.fixSource2=!1,this.saveConfiguration("generalConfig","fixSource2"))},savefixSource2To:function(){this.$store.state.config.generalConfig.reconciliation.fixSource2To=this.fixSource2To,this.saveConfiguration("generalConfig","fixSource2To"),this.selectDatasourceDialog=!1},disableGOFRAuth:function(){var e=this;if(this.$store.state.config.generalConfig.authDisabled){if(this.$store.state.config.generalConfig.authDisabled){var t=this.setDHIS2Credentials();if(!t)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",this.$store.state.errorColor="error",this.$store.state.errorDescription="App doesnt appear to be running inside DHIS2, cant disable authentication",void setTimeout((function(){e.$store.state.config.generalConfig.authDisabled=!1}));this.loadingDhis2Roles=!0,this.getDHIS2Roles((function(t){e.loadingDhis2Roles=!1,e.dhis2Roles=Object(Me["a"])(t.data.userRoles)})),this.defineSuperuserRole=!0}}else this.saveConfiguration("generalConfig","authDisabled")},recoProgressNotificationChanged:function(){this.$store.state.config.generalConfig.hasOwnProperty("recoProgressNotification")||(this.$store.state.config.generalConfig.recoProgressNotification={}),this.$store.state.config.generalConfig.recoProgressNotification.url=this.notification_endpoint,this.$store.state.config.generalConfig.recoProgressNotification.username=this.notification_username,this.$store.state.config.generalConfig.recoProgressNotification.password=this.notification_password,this.saveConfiguration("generalConfig")},saveSMTP:function(){this.$store.state.config.generalConfig.smtp.host=this.smtp.host,this.$store.state.config.generalConfig.smtp.port=this.smtp.port,this.$store.state.config.generalConfig.smtp.username=this.smtp.username,this.$store.state.config.generalConfig.smtp.password=this.smtp.password,this.$store.state.config.generalConfig.smtp.secured=this.smtp.secured,this.saveConfiguration("generalConfig","smtp"),this.$store.state.dialogError=!0,this.$store.state.errorColor="primary",this.$store.state.errorTitle="Info",this.$store.state.errorDescription="SMTP saved"},pullOrgUnits:function(){this.saveConfiguration("generalConfig","externalAuth");var e=new FormData;e.append("host",this.$store.state.dhis.host),e.append("sourceType","DHIS2"),e.append("source","remoteServer"),e.append("shareToAll",this.$store.state.config.generalConfig.externalAuth.shareOrgUnits),e.append("limitByUserLocation",this.$store.state.config.generalConfig.externalAuth.shareByOrgId),e.append("username",this.$store.state.config.generalConfig.externalAuth.userName),e.append("password",this.$store.state.config.generalConfig.externalAuth.password),e.append("name",this.$store.state.config.generalConfig.externalAuth.datasetName),e.append("userID",this.$store.state.auth.userID),u.a.post("/addDataSource",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){Ws.$emit("runRemoteSync")}))},getDHIS2Roles:function(e){var t=this.$store.state.dhis.dev.auth;""===t.username&&(t=""),u.a.get(this.$store.state.dhis.host+"api/userRoles",{auth:t}).then((function(t){e(t)}))},ensureNameUnique:function(){if(this.datasetNameErrors=[],""===this.$store.state.config.generalConfig.externalAuth.datasetName)return this.datasetNameErrors.push("Dataset name is required");var e,t=Object(c["a"])(this.$store.state.dataSources);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a.name===this.uploadName)return this.datasetNameErrors.push("This Name Exists"),!1}}catch(r){t.e(r)}finally{t.f()}}},created:function(){var e=this;this.smtp.host=this.$store.state.config.generalConfig.smtp.host,this.smtp.port=this.$store.state.config.generalConfig.smtp.port,this.smtp.username=this.$store.state.config.generalConfig.smtp.username,this.smtp.password=this.$store.state.config.generalConfig.smtp.password,this.smtp.secured=this.$store.state.config.generalConfig.smtp.secured,this.$store.state.config.generalConfig.authDisabled&&"dhis2"===this.$store.state.config.generalConfig.authMethod&&(this.loadingDhis2Roles=!0,this.getDHIS2Roles((function(t){e.loadingDhis2Roles=!1,e.dhis2Roles=Object(Me["a"])(t.data.userRoles)}))),this.$store.state.config.generalConfig.hasOwnProperty("recoProgressNotification")&&(this.notification_endpoint=this.$store.state.config.generalConfig.recoProgressNotification.url,this.notification_username=this.$store.state.config.generalConfig.recoProgressNotification.username,this.notification_password=this.$store.state.config.generalConfig.recoProgressNotification.password);var t,a=Object(c["a"])(this.$store.state.dataSources);try{for(a.s();!(t=a.n()).done;){var r=t.value;"remoteServer"===r.source&&(r.autoSync?this.datasetsAutosyncState[r.id]=!0:this.datasetsAutosyncState[r.id]=!1)}}catch(s){a.e(s)}finally{a.f()}},computed:{dataSourceHeaders:function(){return[{sortable:!1},{text:this.$t("App.hardcoded-texts.Source Name"),align:"left",value:"name"},{text:this.$t("App.hardcoded-texts.Owner"),value:"owner",sortable:!1},{text:this.$t("App.hardcoded-texts.Created Time"),value:"createdTime"}]},cronDataSourceHeaders:function(){return[{text:this.$t("App.hardcoded-texts.Source Name"),align:"left",value:"name"},{text:this.$t("App.hardcoded-texts.Owner"),value:"owner",sortable:!1},{text:this.$t("App.hardcoded-texts.Created Time"),value:"createdTime"},{text:this.$t("App.hardcoded-texts.Last Updated Time"),value:"createdTime"},{text:this.$t("App.hardcoded-texts.Enabled"),value:"enabled"}]},fixedSource2To:function(){var e,t="",a=Object(c["a"])(this.$store.state.dataSources);try{for(a.s();!(e=a.n()).done;){var r=e.value;r.id===this.$store.state.config.generalConfig.reconciliation.fixSource2To&&(t=r)}}catch(s){a.e(s)}finally{a.f()}return t.name},sharedToAllDatasets:function(){var e,t=[],a=Object(c["a"])(this.$store.state.dataSources);try{for(a.s();!(e=a.n()).done;){var r=e.value;r.shareToAll&&r.shareToAll.activated,t.push(r)}}catch(s){a.e(s)}finally{a.f()}return t},remoteDatasets:function(){var e,t=[],a=Object(c["a"])(this.$store.state.dataSources);try{for(a.s();!(e=a.n()).done;){var r=e.value;"remoteServer"===r.source&&t.push(r)}}catch(s){a.e(s)}finally{a.f()}return t}},beforeCreate:function(){if(this.$store.state.config.generalConfig.hasOwnProperty("authMethod")||this.$set(this.$store.state.config.generalConfig,"authMethod","dhis2"),!this.$store.state.config.generalConfig.hasOwnProperty("externalAuth")){var e={pullOrgUnits:!0,shareOrgUnits:!1,shareByOrgId:!1,datasetName:"",adminRole:""};this.$set(this.$store.state.config.generalConfig,"externalAuth",e)}},components:{appRemoteSync:Xe}},Qe=Ze,et=a("c6a6"),tt=a("ac7c"),at=a("8fea"),rt=a("67b6"),st=a("43a6"),ot=a("b73d"),it=a("2a7f"),nt=a("3a2f"),ct=Object(D["a"])(Qe,Oe,Ne,!1,null,null,null),lt=ct.exports;T()(ct,{VAutocomplete:et["a"],VBtn:Q["a"],VCard:I["a"],VCardActions:L["a"],VCardText:L["c"],VCardTitle:L["d"],VCheckbox:tt["a"],VChip:V["a"],VContainer:B["a"],VDataTable:at["a"],VDialog:Be["a"],VDivider:O["a"],VFlex:N["a"],VIcon:G["a"],VLayout:M["a"],VProgressLinear:R["a"],VRadio:rt["a"],VRadioGroup:st["a"],VSelect:W["a"],VSpacer:U["a"],VSwitch:ot["a"],VTextField:de["a"],VToolbar:E["a"],VToolbarTitle:it["b"],VTooltip:nt["a"]});var dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{persistent:"",overlay:!1,"max-width":"500px",transition:"dialog-transition"},model:{value:e.approveUserDialog,callback:function(t){e.approveUserDialog=t},expression:"approveUserDialog"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-spacer"),a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.approveUserDialog=!1}}},[e._v("mdi-close")])],1),a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.User"))+" "+e._s(e.user.userName)+" ")]),a("v-card-text",[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{x5:""}},[e._v(" "+e._s(e.user.firstName)+" ")]),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[e._v(" "+e._s(e.user.surname)+" ")])],1)],1),a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{x5:""}},[e._v(" "+e._s(e.user.phone)+" ")]),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[e._v(" "+e._s(e.user.email)+" ")])],1)],1),a("v-flex",[a("v-select",{attrs:{required:"",items:e.roles,"single-line":"",clearable:"","error-messages":e.roleErrors,filled:"",label:e.$t("App.hardcoded-texts.Role")},on:{blur:function(t){return e.$v.role.$touch()},change:function(t){return e.$v.role.$touch()}},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}})],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},on:{click:function(t){return e.changeStatus("Rejected")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v(e._s(e.$t("App.hardcoded-texts.Reject"))+" ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.changeStatus("Active")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-check-circle")]),e._v(e._s(e.$t("App.hardcoded-texts.Approve"))+" ")],1)],1)],1)],1),a("center",[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v(" "+e._s(e.alertMsg)+" ")])],1),a("v-card",{staticClass:"mx-auto",attrs:{color:"cyan lighten-5",width:"1500px"}},[a("v-card-title",{attrs:{"primary-title":"",width:"1000"}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Users List"))+" "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:e.$t("App.hardcoded-texts.Search"),"single-line":"","hide-details":""},model:{value:e.searchUsers,callback:function(t){e.searchUsers=t},expression:"searchUsers"}})],1)],1),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.usersHeader,items:e.users,search:e.searchUsers,dark:"",loading:e.$store.state.loadingusers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.firstName))]),a("td",[e._v(e._s(r.surname))]),a("td",[e._v(e._s(r.otherName))]),a("td",[e._v(e._s(r.phone))]),a("td",[e._v(e._s(r.email))]),a("td",[e._v(e._s(r.userName))]),r.role?a("td",[e._v(e._s(r.role.name))]):a("td"),a("td",[e._v(e._s(r.status))]),"Pending"===r.status||"Rejected"===r.status?a("td",[a("v-btn",{attrs:{color:"success",small:""},on:{click:function(t){return e.displayApprovalDialog(r)}}},[e._v(e._s(e.$t("App.hardcoded-texts.Approve/Reject")))])],1):a("td",["Active"===r.status?a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(t){return e.accountAction("Inactive",r)}}},[e._v(e._s(e.$t("App.hardcoded-texts.Deactivate")))]):a("v-btn",{attrs:{small:"",color:"success"},on:{click:function(t){return e.accountAction("Active",r)}}},[e._v(e._s(e.$t("App.hardcoded-texts.Activate")))]),e._v(" | "),a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(t){return e.accountAction("reset",r)}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-refresh")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Reset Password"))+" ")],1)],1)])]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)],1)],1)},ut=[],pt={mixins:[_],validations:{role:{required:se["required"]}},data:function(){return{users:[],user:{},role:"",approveUserDialog:!1,loadingUsers:!1,searchUsers:"",alertSuccess:!1,alertFail:!1,alertMsg:""}},methods:{displayApprovalDialog:function(e){this.user=e,this.approveUserDialog=!0},changeStatus:function(e){var t=this,a=new FormData;a.append("role",this.role),a.append("status",e),a.append("id",this.user.id),u.a.post("/processUserAccoutRequest/",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){t.approveUserDialog=!1,t.$store.state.errorTitle="Info",t.$store.state.errorDescription="This request was processed successfully",t.$store.state.dialogError=!0,t.getUsers()})).catch((function(e){t.approveUserDialog=!1,t.$store.state.errorTitle="Error",t.$store.state.errorDescription="An error occured while processing this request, please retry",t.$store.state.dialogError=!0,console.log(e.response.data.error)}))},getUsers:function(){var e=this,t=new FormData;t.append("username",this.username),t.append("password",this.password),this.users=[],this.loadingUsers=!0,u.a.get("/users/getUsers/").then((function(t){e.loadingUsers=!1,e.users=t.data})).catch((function(t){e.loadingUsers=!1,t.hasOwnProperty("response")&&console.log(t.response.data.error)}))},accountAction:function(e,t){var a=this,r=t.id,s=new FormData;s.append("id",r),"Active"===e||"Inactive"===e?(s.append("status",e),u.a.post("/changeAccountStatus",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){a.alertSuccess=!0,"Active"===e?a.alertMsg="Account activated successfully":"Inactive"===e&&(a.alertMsg="Account deactivated successfully"),a.getUsers()})).catch((function(e){console.log(JSON.stringify(e)),a.alertFail=!0,a.alertMsg="Action failed"}))):"reset"===e&&(s.append("surname",t.surname),u.a.post("/resetPassword",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){a.alertSuccess=!0,a.alertMsg="Password reseted successfully",a.getUsers()})).catch((function(e){console.log(JSON.stringify(e)),a.alertFail=!0,a.alertMsg="Action failed"})))}},computed:{usersHeader:function(){return[{text:this.$t("App.hardcoded-texts.First Name"),value:"firstName"},{text:this.$t("App.hardcoded-texts.Surname"),value:"surname"},{text:this.$t("App.hardcoded-texts.Other Name"),value:"otherName"},{text:this.$t("App.hardcoded-texts.Phone"),value:"phone"},{text:this.$t("App.hardcoded-texts.Email"),value:"email"},{text:this.$t("App.hardcoded-texts.User Name"),value:"username"},{text:this.$t("App.hardcoded-texts.Role"),value:"role"},{text:this.$t("App.hardcoded-texts.Status"),value:"status"}]},roleErrors:function(){var e=[];return this.$v.role.$dirty?(!this.$v.role.required&&e.push("Role is required"),e):e}},created:function(){this.getUsers(),this.getRoles()}},ht=pt,vt=Object(D["a"])(ht,dt,ut,!1,null,null,null),gt=vt.exports;T()(vt,{VAlert:ce["a"],VBtn:Q["a"],VCard:I["a"],VCardActions:L["a"],VCardText:L["c"],VCardTitle:L["d"],VContainer:B["a"],VDataTable:at["a"],VDialog:Be["a"],VFlex:N["a"],VIcon:G["a"],VLayout:M["a"],VProgressLinear:R["a"],VSelect:W["a"],VSpacer:U["a"],VTextField:de["a"],VToolbar:E["a"]});var ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v(e._s(e.$t("App.hardcoded-texts.Add New User")))])],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.firstnameErrors,filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.First Name")+"*"},on:{blur:function(t){return e.$v.firstName.$touch()},change:function(t){return e.$v.firstName.$touch()}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.Middle Names")},model:{value:e.otherName,callback:function(t){e.otherName=t},expression:"otherName"}}),a("v-text-field",{attrs:{required:"","error-messages":e.surnameErrors,filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.Surname")+"*"},on:{blur:function(t){return e.$v.surname.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}}),a("v-text-field",{attrs:{required:"","error-messages":e.phoneErrors,filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.Phone")+"*"},on:{blur:e.validatePhone,change:e.validatePhone,input:e.validatePhone},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),a("v-text-field",{attrs:{required:"","error-messages":e.emailErrors,filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.Email")+"*"},on:{blur:e.validateEmail,change:e.validateEmail,input:e.validateEmail},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{required:"","error-messages":e.usernameErrors,filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.User Name")+"*"},on:{blur:function(t){return e.$v.userName.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.Password")+"*"},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{required:"","error-messages":e.retype_passwordErrors,type:"password",filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.Re-type Password")+"*"},on:{blur:function(t){return e.$v.retype_password.$touch()},change:function(t){return e.$v.retype_password.$touch()}},model:{value:e.retype_password,callback:function(t){e.retype_password=t},expression:"retype_password"}}),a("v-select",{attrs:{required:"",items:e.roles,"single-line":"",clearable:"","error-messages":e.roleErrors,filled:"",label:e.$t("App.hardcoded-texts.Role")+"*"},on:{blur:function(t){return e.$v.role.$touch()},change:function(t){return e.$v.role.$touch()}},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}})],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[a("v-icon",[e._v("mdi-close")]),e._v("Clear ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addUser()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-web")]),e._v(e._s(e.$t("App.hardcoded-texts.Add"))+" ")],1)],1)],1)],1),a("v-spacer")],1)],1)},mt=[],$t={mixins:[_],validations:{userName:{required:se["required"]},retype_password:{required:se["required"]},password:{required:se["required"]},role:{required:se["required"]},firstName:{required:se["required"]},surname:{required:se["required"]},phone:{required:se["required"]},email:{required:se["required"]}},data:function(){return{firstName:"",otherName:"",surname:"",phone:"",email:"",userName:"",password:"",retype_password:"",role:"",customFields:[],phoneErrors:[],emailErrors:[]}},methods:{validateEmail:function(){if(this.emailErrors=[],!this.email)return this.emailErrors.push("Email is required"),!1;var e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.test(this.email)?void 0:(this.emailErrors.push("Invalid Email"),!1)},validatePhone:function(){if(this.phoneErrors=[],!this.phone)return this.phoneErrors.push("Phone is required");var e=/^[+]?[\s./0-9]*[(]?[0-9]{1,4}[)]?[-\s./0-9]*$/g;return e.test(this.phone)?void 0:this.phoneErrors.push("Invalid phone number")},addUser:function(){var e=this;if(this.password!==this.retype_password)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",void(this.$store.state.errorDescription="Password mismatch");this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Saving User";var t=new FormData;t.append("firstName",this.firstName),t.append("otherName",this.otherName),t.append("password",this.password),t.append("userName",this.userName),t.append("surname",this.surname),t.append("phone",this.phone),t.append("email",this.email),t.append("role",this.role),u.a.post("/addUser/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="User added successfully",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1})).catch((function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="This user was not added, ensure userName is not used",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t.response.data.error)}))}},computed:{codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},firstnameErrors:function(){var e=[];return this.$v.firstName.$dirty?(!this.$v.firstName.required&&e.push("First Name is required"),e):e},surnameErrors:function(){var e=[];return this.$v.surname.$dirty?(!this.$v.surname.required&&e.push("Surname is required"),e):e},usernameErrors:function(){var e=[];return this.$v.userName.$dirty?(!this.$v.userName.required&&e.push("Username is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e},retype_passwordErrors:function(){var e=[];return this.$v.retype_password.$dirty?(!this.$v.retype_password.required&&e.push("Re-type Password"),e):e},roleErrors:function(){var e=[];return this.$v.role.$dirty?(!this.$v.role.required&&e.push("Role is required"),e):e}},created:function(){this.getRoles()}},xt=$t,bt=Object(D["a"])(xt,ft,mt,!1,null,null,null),_t=bt.exports;T()(bt,{VBtn:Q["a"],VCard:I["a"],VCardActions:L["a"],VCardTitle:L["d"],VContainer:B["a"],VDivider:O["a"],VFlex:N["a"],VForm:le["a"],VIcon:G["a"],VLayout:M["a"],VSelect:W["a"],VSpacer:U["a"],VSystemBar:Ie["a"],VTextField:de["a"],VToolbar:E["a"]});var yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Select role to edit tasks"))+" "),a("v-select",{attrs:{required:"",items:e.roles,"single-line":"",filled:"",label:e.$t("App.hardcoded-texts.Select Role")},on:{change:e.roleSelected}}),e.role.value?a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Tasks assigned to role"))+" "+e._s(e.role.text)+" ")]),a("v-card-text",[a("v-data-table",{attrs:{items:e.tasks,height:"10px","hide-default-footer":""},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[a("v-checkbox",{attrs:{value:r.id},model:{value:e.role.tasks,callback:function(t){e.$set(e.role,"tasks",t)},expression:"role.tasks"}})],1),a("td",[e._v(e._s(r.display))])])]}}],null,!1,1175055491)})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:e.saveRole}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Save"))+" ")],1)],1)],1):e._e()],1)},St=[],kt={mixins:[_],data:function(){return{role:{},task:""}},methods:{roleSelected:function(e){this.role=this.roles.find((function(t){return t.value===e}))},saveRole:function(){var e=this;this.$store.state.progressTitle="Updating role",this.$store.state.dynamicProgress=!0;var t=new FormData;t.append("role",JSON.stringify(this.role)),u.a.post("/updateRole",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Info",e.$store.state.errorColor="primary",e.$store.state.errorDescription="Role ".concat(e.role.text," updated successfully"),e.getRoles()})).catch((function(t){e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorColor="error",e.$store.state.errorDescription="An error has occured while updating role ".concat(e.role.text),console.log(t)}))}},created:function(){this.getRoles(),this.getTasks()}},Pt=kt,At=Object(D["a"])(Pt,yt,St,!1,null,null,null),wt=At.exports;T()(At,{VBtn:Q["a"],VCard:I["a"],VCardActions:L["a"],VCardText:L["c"],VCardTitle:L["d"],VCheckbox:tt["a"],VContainer:B["a"],VDataTable:at["a"],VIcon:G["a"],VSelect:W["a"],VSpacer:U["a"]});var Dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",filled:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Change Password"))+" ")])],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.oldPasswordErrors,type:"password",filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.Old Password")},on:{blur:function(t){return e.$v.oldPassword.$touch()},change:function(t){return e.$v.oldPassword.$touch()}},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}}),a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.Password")},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{required:"","error-messages":e.retype_passwordErrors,type:"password",filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.Re-type Password")},on:{blur:function(t){return e.$v.retype_password.$touch()},change:function(t){return e.$v.retype_password.$touch()}},model:{value:e.retype_password,callback:function(t){e.retype_password=t},expression:"retype_password"}})],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{filled:""},on:{click:function(t){e.$store.state.baseRouterViewKey++}}},[a("v-icon",[e._v("mdi-close")]),e._v(e._s(e.$t("App.hardcoded-texts.Clear"))+" ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.verifyPassword()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-find-replace")]),e._v(e._s(e.$t("App.hardcoded-texts.Change"))+" ")],1)],1)],1)],1),a("v-spacer")],1)],1)},Ct=[],Tt={validations:{retype_password:{required:se["required"]},password:{required:se["required"]},oldPassword:{required:se["required"]}},data:function(){return{oldPassword:"",password:"",retype_password:""}},methods:{changePassword:function(){var e=this;if(this.password!==this.retype_password)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",void(this.$store.state.errorDescription="Password mismatch");this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Changing Password";var t=new FormData;t.append("password",this.password),t.append("id",this.$store.state.auth.userID),u.a.post("/changePassword/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="Password changed successfully!",e.$store.state.alert.type="success",e.$store.state.baseRouterViewKey+=1})).catch((function(t){e.$store.state.alert.show=!0,e.$store.state.alert.width="500px",e.$store.state.alert.msg="Password change failed!",e.$store.state.alert.type="error",e.$store.state.baseRouterViewKey+=1,console.log(t.response.data.error)}))},verifyPassword:function(){var e=this,t=new FormData;t.append("username",this.$store.state.auth.username),t.append("password",this.oldPassword),u.a.post("/authenticate/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){t.data.userID?e.changePassword():(e.alertFail=!0,e.alertMsg="Wrong Old Password")})).catch((function(e){console.log(JSON.stringify(e))}))}},computed:{oldPasswordErrors:function(){var e=[];return this.$v.oldPassword.$dirty?(!this.$v.oldPassword.required&&e.push("Old Password is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e},retype_passwordErrors:function(){var e=[];return this.$v.retype_password.$dirty?(!this.$v.retype_password.required&&e.push("Re-type Password"),e):e}}},It=Tt,Lt=Object(D["a"])(It,Dt,Ct,!1,null,null,null),Vt=Lt.exports;T()(Lt,{VBtn:Q["a"],VCard:I["a"],VCardActions:L["a"],VCardTitle:L["d"],VContainer:B["a"],VDivider:O["a"],VFlex:N["a"],VForm:le["a"],VIcon:G["a"],VLayout:M["a"],VSpacer:U["a"],VSystemBar:Ie["a"],VTextField:de["a"],VToolbar:E["a"]});var Ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.About this page"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" "+e._s(e.$t("App.hardcoded-texts.This page let you load data from various sources into the app for reconciliation"))+" "),a("v-list",[e._v("1. "+e._s(e.$t("App.hardcoded-texts.Select to add remote source if you have a DHIS2 or FHIR server that you want to use its data on this app")))]),a("v-list",[e._v("2. "+e._s(e.$t("App.hardcoded-texts.Select Upload CSV if you have a CSV file and want to upload its data on the app")))]),a("v-list",[e._v("3. "+e._s(e.$t("App.hardcoded-texts.The system requires CSV data to have atleast 2 levels above facility")))]),a("v-list",[e._v("4. "+e._s(e.$t("App.hardcoded-texts.Level 1 is the highest level on the hierarchy i.e Country")))]),a("v-list",[e._v(" 5. "+e._s(e.$t("App.hardcoded-texts.Base URL under remote sources section refer to the URL i.e "))+"http://localhost:3447/fhir "+e._s(e.$t("App.hardcoded-texts.and not"))+" http://localhost:3447/fhir/Location. "+e._s(e.$t("App.hardcoded-texts.Same applies to DHIS2 base URL"))+" ")])],1)],1)],1),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Choose way to add data source"))+" ")]),a("v-spacer")],1),a("v-card-text",[a("v-radio-group",{attrs:{row:""},on:{change:e.sourceSelected},model:{value:e.dataSource,callback:function(t){e.dataSource=t},expression:"dataSource"}},[e.canUseUploadWay?a("v-radio",{attrs:{disabled:!e.canAddDataset,color:"primary",label:e.$t("App.hardcoded-texts.Upload CSV"),value:"upload"}}):e._e(),e.canUseRemoteWay?a("v-radio",{attrs:{disabled:!e.canAddDataset,color:"primary",label:e.$t("App.hardcoded-texts.Remote Source"),value:"remote"}}):e._e(),e.canUseBlankWay?a("v-radio",{attrs:{disabled:!e.canAddDataset,color:"primary",label:e.$t("App.hardcoded-texts.Blank Source"),value:"blank"}}):e._e()],1)],1)],1)],1),a("v-spacer"),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){e.helpDialog=!0}}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}])},[a("span",[e._v(e._s(e.$t("App.hardcoded-texts.Help")))])])],1),a("v-flex",{attrs:{xs12:""}},[e.addDataSource?a(e.selectedComponent,{tag:"component"}):e._e()],1)],1),a("appDialogs",{attrs:{datasetLimitWarn:e.datasetLimitWarn},on:{limitWarnStateChange:e.limitWarnStateChange}})],1)},Nt=[],Mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Information"))+" ")])],1),a("v-card-text",[e._v(" Data uploaded successfully ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.closeDialog("FacilityReconView")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-format-list-bulleted-square")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.View Data"))+" ")],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"1050px"},model:{value:e.invalidRows,callback:function(t){e.invalidRows=t},expression:"invalidRows"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-close-circle")]),e._v(e._s(e.$t("App.hardcoded-texts.Data Upload was not successful,review below invalid rows in your CSV"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeInvalidRows()}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.invalidRowsHeader,items:e.invalidRowsContent,light:""},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.invalidRowsHeader,(function(r){return a("td",{key:r.value},[e._v(e._s(t.item[r.value]))])}))}}])})],1)],1)],1),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.confirmUpload,callback:function(t){e.confirmUpload=t},expression:"confirmUpload"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Warning"))+" ")])],1),a("v-card-text",[e._v(" "+e._s(e.$t("App.hardcoded-texts.You are about to upload CSV data into the app, click proceed to upload"))+" ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.confirmUpload=!1}}},[e._v(e._s(e.$t("App.hardcoded-texts.Cancel")))]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.performExtraCheck.apply(null,arguments)}}},[e._v(e._s(e.$t("App.hardcoded-texts.Proceed")))])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.errorDialog,callback:function(t){e.errorDialog=t},expression:"errorDialog"}},[a("v-card",[a("v-card-title",[e._v(" "+e._s(e.errorTitle)+" ")]),a("v-card-text",[e._v(" "+e._s(e.errorContent)+" ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.errorDialog=!1}}},[e._v(e._s(e.$t("App.hardcoded-texts.Ok")))])],1)],1)],1),a("v-dialog",{attrs:{transition:"scale-transition",persistent:"",width:"300"},model:{value:e.uploadPrepaProgr,callback:function(t){e.uploadPrepaProgr=t},expression:"uploadPrepaProgr"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" "+e._s(e.uploadStatus)+" "),e.fileUploadPercentage?a("v-progress-linear",{staticClass:"mb-0",attrs:{color:"white"},model:{value:e.fileUploadPercentage,callback:function(t){e.fileUploadPercentage=t},expression:"fileUploadPercentage"}}):a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("v-dialog",{attrs:{transition:"scale-transition",persistent:"",width:"270"},model:{value:e.percentDialog,callback:function(t){e.percentDialog=t},expression:"percentDialog"}},[a("v-card",{attrs:{color:"white",dark:""}},[a("v-card-text",[a("center",[a("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.uploadStatus))]),a("br"),a("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.uploadPercent,color:"primary"}},[a("v-avatar",{attrs:{color:"indigo",size:"50px"}},[a("span",{staticClass:"white--text"},[a("b",[e._v(e._s(e.uploadPercent)+"%")])])])],1)],1)],1)],1)],1),e.$store.state.denyAccess?e._e():a("v-slide-y-transition",{attrs:{mode:"out-in"}},[a("v-stepper",{model:{value:e.e1,callback:function(t){e.e1=t},expression:"e1"}},[a("v-stepper-header",[a("v-stepper-step",{attrs:{step:"1",complete:e.e1>1}},[e._v(e._s(e.$t("App.hardcoded-texts.Upload CSV")))]),a("v-divider"),a("v-stepper-step",{attrs:{step:"2",complete:e.e1>2}},[e._v(e._s(e.$t("App.hardcoded-texts.Map Headers")))]),a("v-btn",{attrs:{icon:""},nativeOn:{click:function(t){return e.closeUploadWindow()}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-stepper-items",[a("v-stepper-content",{attrs:{step:"1"}},[a("v-card",{staticClass:"mb-5"},[a("v-card-title",[e._v(e._s(e.$t("App.hardcoded-texts.Upload CSV (utf-8 only)"))+" - "),a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Select a CSV file and upload")))])]),a("v-card-text",[a("v-text-field",{attrs:{label:"Enter Unique Name For Your Data","error-messages":e.uploadNameErrors,required:""},on:{blur:e.ensureNameUnique,input:e.ensureNameUnique},model:{value:e.uploadName,callback:function(t){e.uploadName=t},expression:"uploadName"}}),a("input",{attrs:{type:"file"},on:{change:e.fileSelected}}),a("br"),a("br"),a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Advanced Options"))+" ")]),a("v-card-text",[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.$store.state.dhis.user.orgId?a("v-checkbox",e._g({attrs:{disabled:e.shareWithAll,color:"primary",label:"Share with other users of the same org unit as yours"},model:{value:e.shareToSameOrgid,callback:function(t){e.shareToSameOrgid=t},expression:"shareToSameOrgid"}},r)):e._e()]}}],null,!1,1162473824)},[a("span",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Share this dataset with all other users that are on the same org unit as you"))+" ")])]),e.$store.state.config.generalConfig.allowShareToAllForNonAdmin||"Admin"===e.$store.state.auth.role?a("v-checkbox",{attrs:{color:"primary",label:"Share with all other users"},on:{change:e.sharingOptions},model:{value:e.shareWithAll,callback:function(t){e.shareWithAll=t},expression:"shareWithAll"}}):e._e(),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.shareWithAll&&e.$store.state.dhis.user.orgId?a("v-checkbox",e._g({attrs:{color:"primary",label:e.$t("App.hardcoded-texts.Limit orgs sharing by user orgid")},model:{value:e.limitShareByOrgId,callback:function(t){e.limitShareByOrgId=t},expression:"limitShareByOrgId"}},r)):e._e()]}}],null,!1,249826954)},[a("span",[e._v(" "+e._s(e.$t("App.hardcoded-texts.if activated, other users will see locations (including location children) that has the same location id as their location id"))+" ")])])],1)],1)],1)],1),e.uploadedFileName&&e.uploadName&&0===e.uploadNameErrors.length?a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.e1=2}}},[e._v(e._s(e.$t("App.hardcoded-texts.Continue")))]):a("v-btn",{attrs:{color:"primary",disabled:""},nativeOn:{click:function(t){e.e1=2}}},[e._v(e._s(e.$t("App.hardcoded-texts.Continue")))])],1),a("v-stepper-content",{attrs:{step:"2"}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Map an appropriate CSV header against those on the app"))+".")]),a("v-layout",{ref:"form",attrs:{row:"",wrap:""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v(e._s(e.$t("App.hardcoded-texts.Facility"))+"*")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemFacility,"error-messages":e.facilityErrors,label:"Select",required:"","single-line":"",clearable:""},on:{blur:function(t){return e.$v.facility.$touch()},change:function(t){return e.$v.facility.$touch()}},model:{value:e.facility,callback:function(t){e.facility=t},expression:"facility"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v(e._s(e.$t("App.hardcoded-texts.Code"))+"*")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemCode,"error-messages":e.codeErrors,label:e.$t("App.hardcoded-texts.Select"),required:"","single-line":"",clearable:""},on:{blur:function(t){return e.$v.code.$touch()},change:function(t){return e.$v.code.$touch()}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v(e._s(e.$t("App.hardcoded-texts.Latitude")))])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLat,label:"Select","single-line":"",clearable:""},model:{value:e.lat,callback:function(t){e.lat=t},expression:"lat"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v(e._s(e.$t("App.hardcoded-texts.Longitude")))])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLong,label:"Select","single-line":"",clearable:""},model:{value:e.long,callback:function(t){e.long=t},expression:"long"}})],1),[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v(e._s(e.$t("App.hardcoded-texts.Level"))+" 1")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel1,label:"Select","single-line":"",clearable:""},model:{value:e.level1,callback:function(t){e.level1=t},expression:"level1"}})],1)],[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v(e._s(e.$t("App.hardcoded-texts.Level"))+" 2")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel2,label:"Select","single-line":"",clearable:""},model:{value:e.level2,callback:function(t){e.level2=t},expression:"level2"}})],1)],e.showLevel3?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v(e._s(e.$t("App.hardcoded-texts.Level"))+" 3")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel3,label:"Select","single-line":"",clearable:""},model:{value:e.level3,callback:function(t){e.level3=t},expression:"level3"}})],1)]:e._e(),e.showLevel4?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v(e._s(e.$t("App.hardcoded-texts.Level"))+" 4")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel4,label:"Select","single-line":"",clearable:""},model:{value:e.level4,callback:function(t){e.level4=t},expression:"level4"}})],1)]:e._e(),e.showLevel5?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v(e._s(e.$t("App.hardcoded-texts.Level"))+" 5")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel5,label:"Select","single-line":"",clearable:""},model:{value:e.level5,callback:function(t){e.level5=t},expression:"level5"}})],1)]:e._e(),e.showLevel6?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v(e._s(e.$t("App.hardcoded-texts.Level"))+" 6")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel6,label:"Select","single-line":"",clearable:""},model:{value:e.level6,callback:function(t){e.level6=t},expression:"level6"}})],1)]:e._e(),e.showLevel7?[a("v-flex",{attrs:{xs6:""}},[a("v-subheader",[e._v(e._s(e.$t("App.hardcoded-texts.Level"))+" 7")])],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{items:e.filteredItemLevel7,label:"Select","single-line":"",clearable:""},model:{value:e.level7,callback:function(t){e.level7=t},expression:"level7"}})],1)]:e._e()],2),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs1:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.showLevel7?e._e():a("v-btn",e._g({staticClass:"mx-14",attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:e.showMoreLevel}},r),[a("v-icon",{attrs:{dark:""}},[e._v(" mdi-plus ")])],1)]}}],null,!1,1697189859)},[a("span",[e._v(e._s(e.$t("App.hardcoded-texts.Add More Level")))])])],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.e1=1}}},[e._v("Go Back")])],1),a("v-spacer"),a("v-flex",{attrs:{xs1:""}},[a("v-btn",{attrs:{color:"primary",disabled:e.$v.$invalid},nativeOn:{click:function(t){e.confirmUpload=!0}}},[e._v(e._s(e.$t("App.hardcoded-texts.Upload")))])],1)],1)],1)],1)],1)],1)],1)},Rt=[],Ut=(a("fb6a"),a("07ac"),a("4de4"),{data:function(){return{name:"",host:"",username:"",password:"",sourceType:"",limitShareByOrgId:!1,shareWithAll:!1,shareToSameOrgid:!0,invalidCharacters:['"',"/","\\","."]}},methods:{sharingOptions:function(){this.shareWithAll&&(this.shareToSameOrgid=!1)},addDataSource:function(e,t,a){var r=this,s=new FormData,o=this.$store.state.clientId;s.append("host",this.host),s.append("sourceType",this.sourceType),s.append("source",e),s.append("orgId",this.$store.state.dhis.user.orgId),s.append("shareToSameOrgid",this.shareToSameOrgid),s.append("shareToAll",this.shareWithAll),s.append("limitByUserLocation",this.limitShareByOrgId),s.append("username",this.username),s.append("password",this.password),s.append("name",this.name),s.append("clientId",o),s.append("partitionID",t),s.append("levelData",a),s.append("userID",this.$store.state.auth.userID);var i=this.$store.state.dataSources.find((function(e){return e.host===r.host}));u.a.post("/datasource/addSource",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){Ws.$emit("refresh-login"),Ws.$emit("dataSourceSaved"),Ws.$emit("dataSourceAddedSuccessfully"),Ws.$emit("getDataSources"),i?(i.name=r.name,i.username=r.username,i.password=e.data.password,i.sourceType=r.sourceType):r.$store.state.dataSources.push({name:r.name,host:r.host,sourceType:r.sourceType,source:"remoteServer",username:r.username,password:e.data.password})})).catch((function(e){console.log(e),Ws.$emit("remoteServerFailedAdd")}))}}}),Et={mixins:[Ut,_],data:function(){return{partitionID:"",levelData:"",datasetLimitWarn:!1,errorDialog:!1,errorTitle:"",errorContent:"",dialog:!1,fileUploadPercentage:"",percentDialog:!1,uploadPrepaProgr:!1,UploadProgressTimer:"",uploadStatus:"1/3 Uploading CSV to the server",uploadPercent:null,uploadName:"",uploadNameErrors:[],confirmUpload:!1,confirmTitle:"",confirmMsg:"",file:"",uploadedFileName:"",e1:1,facility:null,code:null,lat:null,long:null,level1:null,level2:null,level3:null,level4:null,level5:null,level6:null,level7:null,showLevel3:!1,showLevel4:!1,showLevel5:!1,showLevel6:!1,showLevel7:!1,uploadedHeaders:[],mappedHeaders:[],invalidRowsHeader:[],invalidRowsContent:[],invalidRows:!1,valid:!1}},validations:{facility:{required:se["required"]},code:{required:se["required"]},uploadName:{required:se["required"]}},methods:{fileSelected:function(e){this.uploadedFileName=e.target.files[0]["name"],"text/csv"===e.target.files[0]["type"]||"application/vnd.ms-excel"===e.target.files[0]["type"]&&"csv"===e.target.files[0].name.slice(-3).toLowerCase()||(this.errorDialog=!0,this.errorTitle="Error",this.errorContent="Wrong file type uploaded,Only CSV format is supported",this.uploadedFileName=""),this.file=e.target.files[0];var t=new FileReader;t.addEventListener("load",function(){var e=t.result,a=e.split(/\r\n|\n/),r=a[0];this.uploadedHeaders=r.split(",")}.bind(this),!1),t.readAsText(e.target.files[0],"utf-8")},ensureNameUnique:function(){if(this.uploadNameErrors=[],""===this.uploadName)return this.uploadNameErrors.push("Upload name is required");if(this.uploadName.length>35)return this.uploadNameErrors.push("Name must not exceed 35 characters");var e,t=Object(c["a"])(this.invalidCharacters);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(-1!==this.uploadName.indexOf(a))return this.uploadNameErrors.push("Name is invalid")}}catch(i){t.e(i)}finally{t.f()}var r,s=Object(c["a"])(this.$store.state.dataSources);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(o.display.toLowerCase()===this.uploadName.toLowerCase())return this.uploadNameErrors.push("This Name Exists"),!1}}catch(i){s.e(i)}finally{s.f()}},confirmSubmit:function(){this.confirmUpload=!0},checkUploadProgress:function(){var e=this,t=this.$store.state.clientId;u.a.get("/progress/uploadProgress/"+t).then((function(t){return t.data&&(t.data.status||t.data.percent||t.data.error)?null!==t.data.error?(e.$store.state.uploadRunning=!1,e.uploadPrepaProgr=!1,e.percentDialog=!1,e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.data.error,void console.log(t.data.error)):(e.uploadStatus=t.data.status,t.data.percent&&(e.percentDialog||(e.uploadPrepaProgr=!1,e.percentDialog=!0),e.uploadPercent=t.data.percent),void("Done"===t.data.status||t.data.status>=100?(e.clearProgress("uploadProgress"),e.addDataSource("upload",e.partitionID,e.levelData),clearInterval(e.UploadProgressTimer),e.$store.state.recoLevel=2,e.percentDialog=!1,e.dialog=!0,e.$store.state.uploadRunning=!1):e.checkUploadProgress())):(e.$store.state.uploadRunning=!1,e.uploadPrepaProgr=!1,e.percentDialog=!1,e.$store.state.errorTitle="An error has occured",e.$store.state.errorDescription="You should delete this data source from view data source page then re-upload",e.$store.state.errorColor="error",void(e.$store.state.dialogError=!0))})).catch((function(t){console.log(t),e.checkUploadProgress()}))},performExtraCheck:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Performing extra validations",this.getGeneralConfig((function(){e.datasetLimitWarn=!1,e.$store.state.dynamicProgress=!1,e.canAddDataset?e.submitCSV():(e.confirmUpload=!1,e.datasetLimitWarn=!0)}))},submitCSV:function(){var e=this,t=new FormData;t.append("file",this.file),t.append("csvName",this.uploadName),t.append("facility",this.facility),t.append("code",this.code),t.append("lat",this.lat),t.append("long",this.long),t.append("level1",this.level1),t.append("level2",this.level2),t.append("level3",this.level3),t.append("level4",this.level4),t.append("level5",this.level5),t.append("level6",this.level6),t.append("level7",this.level7),t.append("clientId",this.$store.state.clientId),t.append("userID",this.$store.state.auth.userID),this.confirmUpload=!1,this.$store.state.uploadRunning=!0,this.uploadPrepaProgr=!0,this.host="",this.sourceType="upload",this.username="",this.password="",this.name=this.uploadName,u.a.post("/uploadCSV",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){this.fileUploadPercentage=parseInt(Math.round(100*e.loaded/e.total)),100===this.fileUploadPercentage&&(this.fileUploadPercentage="",this.uploadStatus="2/3 Validating CSV Data")}.bind(this)}).then((function(t){var a=t.data.partitionID,r=t.data.levelData;e.partitionID=a,e.levelData=r,e.checkUploadProgress()})).catch((function(t){if(Array.isArray(t.response.data.error)){e.invalidRows=!0;for(var a=0;a<t.response.data.error.length;a++){if(0===a){for(var r=Object.keys(t.response.data.error[a].data),s=0,o=r;s<o.length;s++){var i=o[s];e.invalidRowsHeader.push({text:i,value:i})}e.invalidRowsHeader.push({text:"Reason",value:"reason"})}var n=Object.values(t.response.data.error[a].data),c={};for(var l in n)c[e.invalidRowsHeader[l].value]=n[l];c["reason"]=t.response.data.error[a].reason,e.invalidRowsContent.push(c)}}else e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.response.data.error+". Reload page and retry";e.$store.state.uploadRunning=!1,e.uploadPrepaProgr=!1,e.percentDialog=!1,clearInterval(e.UploadProgressTimer)}))},closeInvalidRows:function(){this.invalidRows=!1,this.invalidRowsHeader=[],this.invalidRowsContent=[],this.e1=1},closeDialog:function(e){this.$router.push({name:e}),this.dialog=!1},closeUploadWindow:function(){Ws.$emit("dataSourceSaved")},showMoreLevel:function(){this.showLevel3?this.showLevel4?this.showLevel5?this.showLevel6?this.showLevel7||(this.showLevel7=!0):this.showLevel6=!0:this.showLevel5=!0:this.showLevel4=!0:this.showLevel3=!0}},computed:{facilityErrors:function(){var e=[];return this.$v.facility.$dirty?(!this.$v.facility.required&&e.push("Facility is required"),e):e},codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},filteredItemFacility:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemCode:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLat:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLong:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLevel1:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLevel2:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLevel3:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level4&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLevel4:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level5&&t!==e.level6&&t!==e.level7}))},filteredItemLevel5:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level6&&t!==e.level7}))},filteredItemLevel6:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level7}))},filteredItemLevel7:function(){var e=this,t=this.uploadedHeaders;return t.filter((function(t){return t!==e.facility&&t!==e.code&&t!==e.lat&&t!==e.long&&t!==e.level1&&t!==e.level2&&t!==e.level3&&t!==e.level4&&t!==e.level5&&t!==e.level6}))}},created:function(){this.$store.state.uploadProgressData.percentDialog&&(this.percentDialog=this.$store.state.uploadProgressData.percentDialog),this.$store.state.uploadProgressData.uploadPrepaProgr&&(this.uploadPrepaProgr=this.$store.state.uploadProgressData.uploadPrepaProgr),this.$store.state.uploadProgressData.UploadProgressTimer&&(this.UploadProgressTimer=this.$store.state.uploadProgressData.UploadProgressTimer),this.$store.state.uploadProgressData.uploadStatus&&(this.uploadStatus=this.$store.state.uploadProgressData.uploadStatus),this.$store.state.uploadProgressData.uploadPercent&&(this.uploadPercent=this.$store.state.uploadProgressData.uploadPercent)},destroyed:function(){this.$store.state.uploadProgressData.dialog=this.dialog,this.$store.state.uploadProgressData.percentDialog=this.percentDialog,this.$store.state.uploadProgressData.uploadPrepaProgr=this.uploadPrepaProgr,this.$store.state.uploadProgressData.UploadProgressTimer=this.UploadProgressTimer,this.$store.state.uploadProgressData.uploadStatus=this.uploadStatus,this.$store.state.uploadProgressData.uploadPercent=this.uploadPercent}},Ft=Et,qt=(a("586a"),a("0789")),jt=a("7e85"),Ht=a("e516"),Bt=a("9c54"),Gt=a("56a4"),Wt=a("e0c7"),zt=Object(D["a"])(Ft,Mt,Rt,!1,null,"f65ce1b8",null),Jt=zt.exports;T()(zt,{VAvatar:He["a"],VBtn:Q["a"],VCard:I["a"],VCardActions:L["a"],VCardText:L["c"],VCardTitle:L["d"],VCheckbox:tt["a"],VContainer:B["a"],VDataTable:at["a"],VDialog:Be["a"],VDivider:O["a"],VFlex:N["a"],VIcon:G["a"],VLayout:M["a"],VProgressCircular:Ge["a"],VProgressLinear:R["a"],VSelect:W["a"],VSlideYTransition:qt["f"],VSpacer:U["a"],VStepper:jt["a"],VStepperContent:Ht["a"],VStepperHeader:Bt["a"],VStepperItems:Bt["b"],VStepperStep:Gt["a"],VSubheader:Wt["a"],VTextField:de["a"],VToolbar:E["a"],VToolbarTitle:it["b"],VTooltip:nt["a"]});var Yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-toolbar",{attrs:{color:"#569fd3",cards:"",dark:"",text:""}},[a("v-card-title",{staticClass:"title font-weight-regular"}),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.close()}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-select",{attrs:{items:e.$store.state.remoteDataSources,required:"",label:e.$t("App.hardcoded-texts.Source Type")},model:{value:e.sourceType,callback:function(t){e.sourceType=t},expression:"sourceType"}}),a("v-text-field",{attrs:{filled:"",required:"","error-messages":e.nameErrors,color:"deep-purple",label:e.$t("App.hardcoded-texts.Source Name")},on:{blur:e.ensureNameUnique,input:e.ensureNameUnique},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-text-field",{attrs:{filled:"",required:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.Base URL")},model:{value:e.host,callback:function(t){e.host=t},expression:"host"}}),a("v-text-field",{attrs:{filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.User Name")},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{staticStyle:{"min-height":"96px"},attrs:{filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.Source Name"),type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),[a("v-tooltip",{attrs:{top:""}},[e.$store.state.dhis.user.orgId?a("v-checkbox",{attrs:{slot:"activator",disabled:e.shareWithAll,color:"primary",label:e.$t("App.hardcoded-texts.Share with other users of the same org unit as yours")},slot:"activator",model:{value:e.shareToSameOrgid,callback:function(t){e.shareToSameOrgid=t},expression:"shareToSameOrgid"}}):e._e(),a("span",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Share this dataset with all other users that are on the same org unit as you"))+" ")])],1),e.$store.state.config.generalConfig.allowShareToAllForNonAdmin||"Admin"===e.$store.state.auth.role?a("v-checkbox",{attrs:{color:"primary",label:e.$t("App.hardcoded-texts.Share with all other users")},on:{change:e.sharingOptions},model:{value:e.shareWithAll,callback:function(t){e.shareWithAll=t},expression:"shareWithAll"}}):e._e(),a("v-tooltip",{attrs:{top:""}},[e.shareWithAll&&e.$store.state.dhis.user.orgId?a("v-checkbox",{attrs:{slot:"activator",color:"primary",label:e.$t("App.hardcoded-texts.Limit orgs sharing by user orgid")},slot:"activator",model:{value:e.limitShareByOrgId,callback:function(t){e.limitShareByOrgId=t},expression:"limitShareByOrgId"}}):e._e(),a("span",[e._v(" "+e._s(e.$t("App.hardcoded-texts.if activated, other users will see locations (including location children) that has the same location id as their location id"))+" ")])],1)]],2),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"#569fd3",depressed:""},on:{click:e.performExtraCheck}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Add"))+" ")])],1)],1)],1),a("v-spacer")],1)],1)},Kt=[],Xt={mixins:[Ut,_],validations:{host:{required:se["required"]},name:{required:se["required"]},sourceType:{required:se["required"]}},data:function(){return{datasetLimitWarn:!1,nameErrors:[]}},methods:{close:function(){Ws.$emit("dataSourceSaved")},performExtraCheck:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Performing extra validations",this.getGeneralConfig((function(){e.datasetLimitWarn=!1,e.$store.state.dynamicProgress=!1,e.canAddDataset?e.addDataSource("remoteServer",""):e.datasetLimitWarn=!0}))},ensureNameUnique:function(){if(this.nameErrors=[],""===this.name)return this.nameErrors.push("Name is required");if(this.name.length>35)return this.nameErrors.push("Name must not exceed 35 characters");var e,t=Object(c["a"])(this.invalidCharacters);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(-1!==this.name.indexOf(a))return this.nameErrors.push("Name is invalid")}}catch(i){t.e(i)}finally{t.f()}var r,s=Object(c["a"])(this.$store.state.dataSources);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(o.display===this.name)return this.nameErrors.push("This Name Exists"),!1}}catch(i){s.e(i)}finally{s.f()}}}},Zt=Xt,Qt=Object(D["a"])(Zt,Yt,Kt,!1,null,null,null),ea=Qt.exports;T()(Qt,{VBtn:Q["a"],VCard:I["a"],VCardActions:L["a"],VCardTitle:L["d"],VCheckbox:tt["a"],VContainer:B["a"],VDivider:O["a"],VFlex:N["a"],VForm:le["a"],VIcon:G["a"],VLayout:M["a"],VSelect:W["a"],VSpacer:U["a"],VTextField:de["a"],VToolbar:E["a"],VTooltip:nt["a"]});var ta=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-toolbar",{attrs:{color:"#569fd3",cards:"",dark:"",text:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v(e._s(e.$t("App.hardcoded-texts.Add Blank Source")))]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.close()}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-layout",{attrs:{column:"",wrap:""}},[a("v-flex",[a("v-text-field",{attrs:{filled:"",required:"","error-messages":e.nameErrors,color:"deep-purple",label:e.$t("App.hardcoded-texts.Source Name")},on:{blur:e.ensureNameUnique,input:e.ensureNameUnique},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("v-flex",[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.$store.state.dhis.user.orgId?a("v-checkbox",e._g({attrs:{disabled:e.shareWithAll,color:"primary",label:e.$t("App.hardcoded-texts.Share with other users of the same org unit as yours")},model:{value:e.shareToSameOrgid,callback:function(t){e.shareToSameOrgid=t},expression:"shareToSameOrgid"}},r)):e._e()]}}])},[a("span",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Share this dataset with all other users that are on the same org unit as you"))+" ")])])],1),a("v-flex",[e.$store.state.config.generalConfig.allowShareToAllForNonAdmin||"Admin"===e.$store.state.auth.role?a("v-checkbox",{attrs:{color:"primary",label:e.$t("App.hardcoded-texts.Share with all other users")},on:{change:e.sharingOptions},model:{value:e.shareWithAll,callback:function(t){e.shareWithAll=t},expression:"shareWithAll"}}):e._e()],1),a("v-flex",[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.shareWithAll&&e.$store.state.dhis.user.orgId?a("v-checkbox",e._g({attrs:{color:"primary",label:e.$t("App.hardcoded-texts.Limit orgs sharing by user orgid")},model:{value:e.limitShareByOrgId,callback:function(t){e.limitShareByOrgId=t},expression:"limitShareByOrgId"}},r)):e._e()]}}])},[a("span",[e._v(" "+e._s(e.$t("App.hardcoded-texts.if activated, other users will see locations (including location children) that has the same location id as their location id"))+" ")])])],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"#569fd3",depressed:""},on:{click:e.performExtraCheck}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Add"))+" ")])],1)],1)],1),a("v-spacer")],1)],1)},aa=[],ra={mixins:[Ut,_],validations:{name:{required:se["required"]}},data:function(){return{datasetLimitWarn:!1,nameErrors:[]}},methods:{close:function(){Ws.$emit("dataSourceSaved")},performExtraCheck:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Performing extra validations",this.getGeneralConfig((function(){e.datasetLimitWarn=!1,e.$store.state.dynamicProgress=!1,e.canAddDataset?(e.sourceType="blank",e.addDataSource("blank","")):e.datasetLimitWarn=!0}))},ensureNameUnique:function(){if(this.nameErrors=[],""===this.name)return this.nameErrors.push("Name is required");if(this.name.length>35)return this.nameErrors.push("Name must not exceed 35 characters");var e,t=Object(c["a"])(this.invalidCharacters);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(-1!==this.name.indexOf(a))return this.nameErrors.push("Name is invalid")}}catch(i){t.e(i)}finally{t.f()}var r,s=Object(c["a"])(this.$store.state.dataSources);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(o.display===this.name)return this.nameErrors.push("This Name Exists"),!1}}catch(i){s.e(i)}finally{s.f()}}}},sa=ra,oa=Object(D["a"])(sa,ta,aa,!1,null,null,null),ia=oa.exports;T()(oa,{VBtn:Q["a"],VCard:I["a"],VCardActions:L["a"],VCardTitle:L["d"],VCheckbox:tt["a"],VContainer:B["a"],VDivider:O["a"],VFlex:N["a"],VForm:le["a"],VIcon:G["a"],VLayout:M["a"],VSpacer:U["a"],VTextField:de["a"],VToolbar:E["a"],VTooltip:nt["a"]});var na=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}},[a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"770px",transition:"dialog-transition"},model:{value:e.datasetLimit,callback:function(t){e.datasetLimit=t},expression:"datasetLimit"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-info")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Datasets limit Warning"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.datasetLimit=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" "+e._s(e.$t("App.hardcoded-texts.You cant add more datasets as you have reached the datasets limit, contact system administrator for help"))+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.datasetLimit=!1}}},[e._v(e._s(e.$t("App.hardcoded-texts.Ok")))])],1)],1)],1)],1)},ca=[],la={props:["datasetLimitWarn"],computed:{datasetLimit:{get:function(){return this.datasetLimitWarn},set:function(e){this.$emit("limitWarnStateChange",e)}}}},da=la,ua=Object(D["a"])(da,na,ca,!1,null,null,null),pa=ua.exports;T()(ua,{VBtn:Q["a"],VCard:I["a"],VCardActions:L["a"],VCardText:L["c"],VContainer:B["a"],VDialog:Be["a"],VIcon:G["a"],VSpacer:U["a"],VToolbar:E["a"],VToolbarTitle:it["b"]});var ha={mixins:[_],data:function(){return{helpDialog:!1,datasetLimitWarn:!1,selectedComponent:"",dataSources:[{text:"Upload CSV",value:"upload"},{text:"Remote Source",value:"remote"}],dataSource:"",addDataSource:!0,alertSuccess:!1,alertError:!1,alertMsg:"",blankName:""}},methods:{limitWarnStateChange:function(e){this.datasetLimitWarn=e},sourceSelected:function(e){this.addDataSource=!0,"upload"===e?this.selectedComponent="FacilityReconUpload":"remote"===e?this.selectedComponent="FacilityReconRemoteSources":"blank"===e&&(this.selectedComponent="AddBlankSource")}},computed:{canUseUploadWay:function(){return-1!==this.$store.state.config.generalConfig.datasetsAdditionWays.indexOf("CSV Upload")},canUseRemoteWay:function(){return-1!==this.$store.state.config.generalConfig.datasetsAdditionWays.indexOf("Remote Servers Sync")},canUseBlankWay:function(){return-1!==this.$store.state.config.generalConfig.datasetsAdditionWays.indexOf("Blank Datasource")}},components:{FacilityReconUpload:Jt,FacilityReconRemoteSources:ea,AddBlankSource:ia,appDialogs:pa},created:function(){var e=this;Ws.$on("dataSourceSaved",(function(){e.addDataSource=!1,e.dataSource=""})),Ws.$on("dataSourceAddedSuccessfully",(function(){e.alertSuccess=!0,e.alertMsg="Data Source Added Successfully",setTimeout((function(){e.alertSuccess=!1}),3e3)})),Ws.$on("remoteServerFailedAdd",(function(){e.alertError=!0,e.alertMsg="Data Source Failed To Be Added"}))}},va=ha,ga=a("8860"),fa=Object(D["a"])(va,Ot,Nt,!1,null,null,null),ma=fa.exports;T()(fa,{VAlert:ce["a"],VBtn:Q["a"],VCard:I["a"],VCardText:L["c"],VCardTitle:L["d"],VContainer:B["a"],VDialog:Be["a"],VFlex:N["a"],VIcon:G["a"],VLayout:M["a"],VList:ga["a"],VRadio:rt["a"],VRadioGroup:st["a"],VSpacer:U["a"],VToolbar:E["a"],VToolbarTitle:it["b"],VTooltip:nt["a"]});var $a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{width:"630px"},model:{value:e.deleteConfirm,callback:function(t){e.deleteConfirm=t},expression:"deleteConfirm"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.This will delete the datasource"))+" "+e._s(e.server.display)+" "+e._s(e.$t("App.hardcoded-texts.from the database"))+" ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.deleteConfirm=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e.loadingPairs||e.pairs.length>0?a("label",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Below data source pairs (mapping) will also be deleted"))+" "),a("v-data-table",{attrs:{headers:e.pairsHeaders,items:e.pairs,"hide-default-footer":"",loading:e.loadingPairs},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("td",[e._v(e._s(r.source1Name)+" - "+e._s(r.source2Name))]),a("td",[r.owner.name?a("label",[e._v(" "+e._s(r.owner.name)+" ")]):e._e()])]}}],null,!1,376974654)})],1):a("label",[e._v(" "+e._s(e.$t("App.hardcoded-texts.no_src_pair_for_src"))),a("br")]),a("br"),a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Do you want to proceed and delete"))+"?")])]),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.deleteConfirm=!1}}},[e._v(e._s(e.$t("App.hardcoded-texts.Cancel")))]),a("v-spacer"),a("v-btn",{attrs:{color:"success"},on:{click:e.deleteDataSource}},[e._v(e._s(e.$t("App.hardcoded-texts.Yes")))])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",{attrs:{width:"530px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Editing"))+" "+e._s(e.server.host)+" ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.editDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:e.$t("App.hardcoded-texts.Name"),disabled:""},model:{value:e.server.display,callback:function(t){e.$set(e.server,"display",t)},expression:"server.display"}})],1),a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:e.$t("App.hardcoded-texts.Host")},model:{value:e.server.host,callback:function(t){e.$set(e.server,"host",t)},expression:"server.host"}})],1),a("v-flex",{attrs:{xs1:""}},[a("v-select",{attrs:{items:e.$store.state.remoteDataSources,label:e.$t("App.hardcoded-texts.Source Type")},model:{value:e.server.sourceType,callback:function(t){e.$set(e.server,"sourceType",t)},expression:"server.sourceType"}})],1),a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:e.$t("App.hardcoded-texts.User Name")},model:{value:e.server.username,callback:function(t){e.$set(e.server,"username",t)},expression:"server.username"}})],1),a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:e.$t("App.hardcoded-texts.Password"),type:"password"},model:{value:e.server.password,callback:function(t){e.$set(e.server,"password",t)},expression:"server.password"}})],1)],1)],1),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"error"},nativeOn:{click:function(t){e.editDialog=!1}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("mdi-cancel")]),e._v(e._s(e.$t("App.hardcoded-texts.Cancel"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.saveEdit("match")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-save")]),e._v(e._s(e.$t("App.hardcoded-texts.Save"))+" ")],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"550px"},model:{value:e.shareDialog,callback:function(t){e.shareDialog=t},expression:"shareDialog"}},[a("v-card",{attrs:{width:"550px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Sharing"))+" "+e._s(e.shareSource.display)+" ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.shareDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e.loadingLocationTree?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("p",[a("liquor-tree",{ref:"locationTree",attrs:{data:e.locationTree,options:{}},on:{"node:selected":e.locationSelected}})],1)])],a("v-icon",{attrs:{small:""}},[e._v("mdi-lock")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.limit_share"))+": "),a("b",[e._v(e._s(e.limitLocationName))]),a("br"),a("permissions",{on:{grantedPermissions:e.receivedPermissions}}),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUsers,callback:function(t){e.searchUsers=t},expression:"searchUsers"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.usersHeader,items:e.users,search:e.searchUsers,"item-key":"id"},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[r.userName!==e.$store.state.auth.username?a("tr",[a("td",[a("v-checkbox",{attrs:{value:r.id},model:{value:e.sharedUsers,callback:function(t){e.sharedUsers=t},expression:"sharedUsers"}})],1),a("td",[e._v(e._s(r.userName))]),a("td",[e._v(e._s(r.fullName))])]):e._e()]}}])})],2),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"error",disabled:e.loadingLocationTree},nativeOn:{click:function(t){e.shareDialog=!1}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("mdi-cancel")]),e._v(e._s(e.$t("App.hardcoded-texts.Cancel"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{color:"primary",disabled:e.loadingLocationTree||0===e.permissions.length||0===e.sharedUsers.length},nativeOn:{click:function(t){return e.share("","saveShare")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-share")]),e._v(e._s(e.$t("App.hardcoded-texts.Share"))+" ")],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.About this page"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" "+e._s(e.$t("App.hardcoded-texts.This page let you visualize various data sets you have added into the app as well as synchronize remote servers with the app"))+" "),a("v-list",[e._v("1. "+e._s(e.$t("App.hardcoded-texts.Use Force Full Sync to fetch all data from the remote server and update the app")))]),a("v-list",[e._v("2. "+e._s(e.$t("App.hardcoded-texts.Use Sync (Update) to pull updated records from the remote server and update the app")))]),a("v-list",[e._v("3. "+e._s(e.$t("App.hardcoded-texts.You may proceed to the 'Data Source Pair' page after you have added atleast two data sources")))]),a("v-list",[e._v("4. "+e._s(e.$t("App.hardcoded-texts.You may come back to this page and add more sources at any time")))])],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){e.helpDialog=!0}}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}])},[a("span",[e._v(e._s(e.$t("App.hardcoded-texts.Help")))])])],1)],1),a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v(" "+e._s(e.alertMsg)+" ")])],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Remote Sources"))+" ")])],1),a("v-card-actions",[e.remoteServers.length>0?a("v-btn",{attrs:{color:"primary",rounded:""},on:{click:function(t){return e.sync("full")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-sync")]),e._v(e._s(e.$t("App.hardcoded-texts.Force Full Sync"))+" ")],1):a("v-btn",{attrs:{color:"primary",rounded:"",disabled:""},on:{click:function(t){return e.sync("full")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-sync")]),e._v(e._s(e.$t("App.hardcoded-texts.Force Full Sync"))+" ")],1),e.remoteServers.length>0?a("v-btn",{attrs:{color:"primary lighten-1",rounded:""},on:{click:function(t){return e.sync("update")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-sync")]),e._v(e._s(e.$t("App.hardcoded-texts.sync_update"))+" ")],1):a("v-btn",{attrs:{color:"primary lighten-1",rounded:"",disabled:""},on:{click:function(t){return e.sync("update")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-sync")]),e._v(e._s(e.$t("App.hardcoded-texts.sync_update"))+" ")],1),a("v-spacer"),e.remoteServers.length>0?a("v-btn",{attrs:{color:"success",rounded:""},on:{click:e.editDataSource}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-pencil")]),e._v(e._s(e.$t("App.hardcoded-texts.Edit"))+" ")],1):a("v-btn",{attrs:{color:"success",rounded:"",disabled:""},on:{click:e.editDataSource}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-pencil")]),e._v(e._s(e.$t("App.hardcoded-texts.Edit"))+" ")],1),e.remoteServers.length>0?a("v-btn",{attrs:{color:"error",rounded:""},on:{click:e.validateDelete}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v(e._s(e.$t("App.hardcoded-texts.Delete"))+" ")],1):a("v-btn",{attrs:{color:"error",rounded:"",disabled:""},on:{click:e.validateDelete}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v(e._s(e.$t("App.hardcoded-texts.Delete"))+" ")],1)],1),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.remoteServersHeader,items:e.remoteServers,dark:"",loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.server,callback:function(t){e.server=t},expression:"server"}},[a("td",[a("v-radio",{attrs:{value:r,color:"blue"}})],1)]),a("td",[e._v(e._s(r.display))]),a("td",[e._v(e._s(r.host))]),a("td",[e._v(e._s(r.sourceType))]),a("td",[e._v(e._s(r.username))]),r.username?a("td",[e._v("*****")]):a("td"),a("td",[e._v(e._s(r.lastUpdate))]),a("td",[e._v(e._s(r.owner))]),a("td",[e._v(" "+e._s(e._f("mergeUsers")(r.sharedUsers))+" ")]),a("td",[e._v(" "+e._s(r.createdTime)+" ")]),r.userID===e.$store.state.auth.userID?a("td",[a("v-btn",{attrs:{color:"success",text:""},on:{click:function(t){return e.share(r,"showDialog")}}},[a("v-icon",[e._v("mdi-share-variant-outline")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Share"))+" ")],1)],1):e._e()],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Uploaded Sources"))+" ")])],1),a("v-card-actions",[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.uploadedSources.length>0?a("v-btn",e._g({attrs:{color:"success",rounded:"",small:""},on:{click:e.exportCSV}},r),[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-document-multiple")]),e._v(e._s(e.$t("App.hardcoded-texts.Export"))+" ")],1):a("v-btn",e._g({attrs:{color:"success",rounded:"",small:"",disabled:""},on:{click:e.exportCSV}},r),[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-document-multiple")]),e._v(e._s(e.$t("App.hardcoded-texts.Export"))+" ")],1)]}}])},[a("span",[e._v(e._s(e.$t("App.hardcoded-texts.Export Original CSV")))])]),a("v-spacer"),e.uploadedSources.length>0?a("v-btn",{attrs:{color:"error",rounded:"",small:""},on:{click:e.validateDelete}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v(e._s(e.$t("App.hardcoded-texts.Delete"))+" ")],1):a("v-btn",{attrs:{color:"error",rounded:"",small:"",disabled:""},on:{click:e.validateDelete}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v(e._s(e.$t("App.hardcoded-texts.Delete"))+" ")],1)],1),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.uploadSourcesHeader,items:e.uploadedSources,dark:"",loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.server,callback:function(t){e.server=t},expression:"server"}},[a("td",[a("v-radio",{attrs:{disabled:"DEFAULT"===r.display,value:r,color:"blue"}})],1)]),a("td",[e._v(e._s(r.display))]),a("td",[e._v(e._s(r.owner))]),a("td",[e._v(" "+e._s(r.createdTime)+" ")]),r.userID===e.$store.state.auth.userID?a("td",[a("v-btn",{attrs:{color:"success",text:""},on:{click:function(t){return e.share(r,"showDialog")}}},[a("v-icon",[e._v("mdi-share-variant-outline")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Share"))+" ")],1),e._v(" | "),a("v-btn",{attrs:{color:"success",text:""},on:{click:function(t){return e.viewshare(r)}}},[a("v-icon",[e._v("mdi-monitor-share")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Detailed View"))+" ")],1)],1):e._e()],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)],1)],1),a("v-spacer")],1),e.server.name?a("appRemoteSync",{attrs:{syncType:e.syncType,id:e.server.id,host:e.server.host,username:e.server.username,password:e.server.password,serverName:e.server.name,userID:e.$store.state.auth.userID,sourceOwner:e.server.userID,mode:e.mode}}):e._e()],1)},xa=[],ba=(a("2b3d"),a("9861"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}},[a("v-card",{attrs:{height:"252",width:"550"}},[a("v-toolbar",{attrs:{color:"secondary",dark:"",height:"30"}},[a("v-toolbar-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Permissions"))+" ")]),a("v-spacer"),a("v-icon",[e._v("mdi-shield-lock-outline")])],1),a("v-card-actions",[a("v-row",[a("v-col",{attrs:{cols:"5"}},[a("v-card",{attrs:{height:"90"}},[a("v-toolbar",{attrs:{color:"secondary",dark:"",height:"20"}},[a("v-toolbar-title",{staticStyle:{"font-size":"12px"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Facilities"))+" ")]),a("v-spacer"),a("v-icon",{attrs:{small:""}},[e._v("mdi-hospital-marker")])],1),a("v-card-actions",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-checkbox",{attrs:{color:"red darken-3",value:"read_facility",height:"0","hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",{staticStyle:{"font-size":"12px"}},[e._v("View")])]},proxy:!0}]),model:{value:e.permissions,callback:function(t){e.permissions=t},expression:"permissions"}})],1),a("v-checkbox",{attrs:{color:"red darken-3",value:"write_facility",height:"14","hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(e.$t("App.hardcoded-texts.Add"))+"/"+e._s(e.$t("App.hardcoded-texts.Update")))])]},proxy:!0}]),model:{value:e.permissions,callback:function(t){e.permissions=t},expression:"permissions"}})],1)],1)],1)],1),a("v-spacer"),a("v-col",{attrs:{cols:"5"}},[a("v-card",[a("v-toolbar",{attrs:{color:"secondary",dark:"",height:"20"}},[a("v-toolbar-title",{staticStyle:{"font-size":"12px"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Jurisdictions"))+" ")]),a("v-spacer"),a("v-icon",{attrs:{small:""}},[e._v("mdi-home-group")])],1),a("v-card-actions",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-checkbox",{attrs:{color:"red darken-3",value:"read_jurisdiction",height:"0","hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(e.$t("App.hardcoded-texts.View")))])]},proxy:!0}]),model:{value:e.permissions,callback:function(t){e.permissions=t},expression:"permissions"}})],1),a("v-checkbox",{attrs:{color:"red darken-3",value:"write_jurisdiction",height:"14","hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(e.$t("App.hardcoded-texts.Add"))+"/"+e._s(e.$t("App.hardcoded-texts.Update")))])]},proxy:!0}]),model:{value:e.permissions,callback:function(t){e.permissions=t},expression:"permissions"}})],1)],1)],1)],1),a("v-col",{attrs:{cols:"5"}},[a("v-card",[a("v-toolbar",{attrs:{color:"secondary",dark:"",height:"20"}},[a("v-toolbar-title",{staticStyle:{"font-size":"12px"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Organizations"))+" ")]),a("v-spacer"),a("v-icon",{attrs:{small:""}},[e._v("mdi-hospital-marker")])],1),a("v-card-actions",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-checkbox",{attrs:{color:"red darken-3",value:"read_organization",height:"0","hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(e.$t("App.hardcoded-texts.View")))])]},proxy:!0}]),model:{value:e.permissions,callback:function(t){e.permissions=t},expression:"permissions"}})],1),a("v-checkbox",{attrs:{color:"red darken-3",value:"write_organization",height:"14","hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(e.$t("App.hardcoded-texts.Add"))+"/"+e._s(e.$t("App.hardcoded-texts.Update")))])]},proxy:!0}]),model:{value:e.permissions,callback:function(t){e.permissions=t},expression:"permissions"}})],1)],1)],1)],1),a("v-spacer"),a("v-col",{attrs:{cols:"5"}},[a("v-card",[a("v-toolbar",{attrs:{color:"secondary",dark:"",height:"20"}},[a("v-toolbar-title",{staticStyle:{"font-size":"12px"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Healthcare Services"))+" ")]),a("v-spacer"),a("v-icon",{attrs:{small:""}},[e._v("mdi-room-service")])],1),a("v-card-actions",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-checkbox",{attrs:{color:"red darken-3",value:"read_service",height:"0","hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(e.$t("App.hardcoded-texts.View")))])]},proxy:!0}]),model:{value:e.permissions,callback:function(t){e.permissions=t},expression:"permissions"}})],1),a("v-checkbox",{attrs:{color:"red darken-3",value:"write_service",height:"14","hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(e.$t("App.hardcoded-texts.Add"))+"/"+e._s(e.$t("App.hardcoded-texts.Update")))])]},proxy:!0}]),model:{value:e.permissions,callback:function(t){e.permissions=t},expression:"permissions"}})],1)],1)],1)],1)],1)],1)],1)],1)}),_a=[],ya={data:function(){return{permissions:[]}},watch:{permissions:function(){this.$emit("grantedPermissions",this.permissions)}}},Sa=ya,ka=a("62ad"),Pa=a("0fd9"),Aa=Object(D["a"])(Sa,ba,_a,!1,null,null,null),wa=Aa.exports;T()(Aa,{VCard:I["a"],VCardActions:L["a"],VCheckbox:tt["a"],VCol:ka["a"],VContainer:B["a"],VFlex:N["a"],VIcon:G["a"],VLayout:M["a"],VRow:Pa["a"],VSpacer:U["a"],VToolbar:E["a"],VToolbarTitle:it["b"]});var Da=a("25ea"),Ca={mixins:[_],data:function(){return{permissions:[],syncType:"",mode:"",loadingPairs:!1,pairs:[],pairsHeaders:[{text:this.$t("App.hardcoded-texts.Pair Name"),value:"name"},{text:this.$t("App.hardcoded-texts.Owner"),value:"owner"}],helpDialog:!1,deleteConfirm:!1,editDialog:!1,server:{name:"",userID:{}},shareDialog:!1,shareSource:{},users:[],sharedUsers:[],limitLocationId:"",limitLocationName:"No limit",locationTree:[],loadingLocationTree:!1,searchUsers:"",remoteServersHeader:[{sortable:!1},{text:this.$t("App.hardcoded-texts.Source Name"),value:"name"},{text:this.$t("App.hardcoded-texts.Base URL"),value:"host"},{text:this.$t("App.hardcoded-texts.Source Type"),value:"sourceType"},{text:this.$t("App.hardcoded-texts.User Name"),value:"username"},{text:this.$t("App.hardcoded-texts.Password"),value:"password"},{text:this.$t("App.hardcoded-texts.Last Sync"),value:"lastsync"},{text:this.$t("App.hardcoded-texts.Owner"),value:"owner",sortable:!1},{text:this.$t("App.hardcoded-texts.Shared To"),value:"shareStatus"},{text:this.$t("App.hardcoded-texts.Created Time"),value:"createdTime"}],uploadSourcesHeader:[{sortable:!1},{text:this.$t("App.hardcoded-texts.Source Name"),align:"left",value:"name"},{text:this.$t("App.hardcoded-texts.Owner"),value:"owner",sortable:!1},{text:this.$t("App.hardcoded-texts.Created Time"),value:"createdTime"},{text:this.$t("App.hardcoded-texts.Action"),value:"action"}],dataSources:[{text:this.$t("App.hardcoded-texts.Upload CSV"),value:"upload"},{text:this.$t("App.hardcoded-texts.Remote Source"),value:"remote"}],usersHeader:[{sortable:!1},{text:this.$t("App.hardcoded-texts.User Name"),value:"userName",sortable:!0},{text:this.$t("App.hardcoded-texts.Fullname"),value:"fullName",sortable:!0}],dataSource:"",addDataSource:!0,syncProgrIndeter:!1,syncProgrPercent:!1,syncStatus:"Waiting for sync status",syncPercent:null,syncProgressTimer:"",syncRunning:!1,alertSuccess:!1,alertError:!1,alertMsg:""}},filters:{mergeUsers:function(e){if(!e||0===e.length)return"";var t,a="",r=0,s=Object(c["a"])(e);try{for(s.s();!(t=s.n()).done;){var o=t.value;if(r++,r>5){a+="...";break}a?a+=","+o.name:a=o.name}}catch(i){s.e(i)}finally{s.f()}return a}},methods:{receivedPermissions:function(e){this.permissions=e},sourceSelected:function(e){this.addDataSource=!0,"upload"===e?this.selectedComponent="FacilityReconUpload":"remote"===e&&(this.selectedComponent="FacilityReconRemoteSources")},editDataSource:function(){return this.server.name?this.server.userID!==this.$store.state.auth.userID?(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="You are not the owner of this data source, ask the owner to edit any details")):void("upload"!==this.server.source&&(this.editDialog=!0)):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source"))},saveEdit:function(){var e=this,t=new FormData,a=this.$store.state.clientId;t.append("host",this.server.host),t.append("sourceType",this.server.sourceType),t.append("source",this.server.source),t.append("username",this.server.username),t.append("password",this.server.password),t.append("userID",this.server.userID),t.append("display",this.server.display),t.append("id","Basic/"+this.server.id),t.append("clientId",a),this.editDialog=!1,u.a.post("/datasource/editSource",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.server.password=t.data.password}))},validateDelete:function(){return this.server.name?this.server.userID!==this.$store.state.auth.userID&&"Admin"!==this.$store.state.auth.role?(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="You are not the owner of this data source, ask the owner to remove you from the share")):(this.getPairsToDelete(),void(this.deleteConfirm=!0)):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source"))},deleteDataSource:function(){var e=this;this.deleteConfirm=!1,u.a.delete("/datasource/deleteDataSource/".concat(this.server.id)).then((function(){e.server={},Ws.$emit("getDataSources")}))},getPairsToDelete:function(){var e=this;this.loadingPairs=!0,u.a.get("/datasource/getPairForSource/"+this.server.id).then((function(t){e.loadingPairs=!1,e.pairs=t.data})).catch((function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config)}))},viewshare:function(e){this.$router.push({name:"AdvanceDatasourceDetails",params:{sourceid:e.id,partitionid:e.name}})},share:function(e,t){var a=this;if("showDialog"===t)this.limitLocationId="",this.limitLocationName="No limit",this.sharedUsers=[],this.shareSource=e,this.getLocationTree(),e.hasOwnProperty("shared")&&e.shared.users.length>0&&e.shared.users.forEach((function(e){a.sharedUsers.push(e.id)})),this.shareDialog=!0;else if("saveShare"===t){if(0===this.sharedUsers.length)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select atleast one user");var r=new FormData;r.append("shareSource",this.shareSource.id),r.append("users",JSON.stringify(this.sharedUsers)),r.append("permissions",JSON.stringify(this.permissions)),r.append("userID",this.$store.state.auth.userID),r.append("role",this.$store.state.auth.role),r.append("orgId",this.$store.state.dhis.user.orgId),r.append("limitLocationId",this.limitLocationId),this.$store.state.loadingServers=!0,this.shareDialog=!1,u.a.post("/datasource/shareSource",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){a.$store.state.loadingServers=!1,Ws.$emit("getDataSources")})).catch((function(e){console.log(e),a.$store.state.loadingServers=!1}))}},locationSelected:function(e){this.limitLocationId=e.id,"parent"!==e.id?this.limitLocationName=e.data.text:(this.limitLocationName="No limit",this.limitLocationId="")},getLocationTree:function(){var e=this;this.loadingLocationTree=!0,u.a.get("/getTree/"+this.shareSource.name).then((function(t){t.data&&(e.locationTree=[{text:"Select location to limit sharing",id:"parent",children:t.data}]),e.loadingLocationTree=!1}))},getUsers:function(){var e=this;u.a.get("/users/getUsers").then((function(t){e.users=t.data}))},exportCSV:function(){var e=this;if(!this.server.name)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source");var t=this.server.userID;u.a.get("/getUploadedCSV/"+t+"/"+this.server.display).then((function(t){var a=new Blob([t.data]);if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(a,"".concat(e.server.display,".csv"));else{var r=window.document.createElement("a");r.href=window.URL.createObjectURL(a,{type:"text/plain"}),r.download="".concat(e.server.display,".csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}})).catch((function(t){e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription=t.response.data}))},sync:function(e){return this.server.name?this.server.userID!==this.$store.state.auth.userID?(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Only data source owner can run the sync")):void("upload"!==this.server.source&&(this.mode=e,"DHIS2"===this.server.sourceType?this.syncType="dhisSync":"FHIR"===this.server.sourceType&&(this.syncType="fhirSync"),setTimeout((function(){Ws.$emit("runRemoteSync")}),100))):(this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source"))}},computed:{remoteServers:function(){var e,t=[],a=Object(c["a"])(this.$store.state.dataSources);try{for(a.s();!(e=a.n()).done;){var r=e.value;"remoteServer"===r.source&&t.push(r)}}catch(s){a.e(s)}finally{a.f()}return t},uploadedSources:function(){var e,t=[],a=Object(c["a"])(this.$store.state.dataSources);try{for(a.s();!(e=a.n()).done;){var r=e.value;"upload"!==r.source&&"blank"!==r.source||t.push(r)}}catch(s){a.e(s)}finally{a.f()}return t}},components:{appRemoteSync:Xe,"liquor-tree":Da["a"],permissions:wa},created:function(){var e=this;this.getUsers(),Ws.$on("dataSourceSaved",(function(){e.addDataSource=!1,e.dataSource=""})),Ws.$on("dataSourceAddedSuccessfully",(function(){e.alertSuccess=!0,e.alertMsg="Data Source Added Successfully",setTimeout((function(){e.alertSuccess=!1}),3e3)})),Ws.$on("remoteServerFailedAdd",(function(){e.alertError=!0,e.alertMsg="Data Source Failed To Be Added"}))}},Ta=Ca,Ia=Object(D["a"])(Ta,$a,xa,!1,null,null,null),La=Ia.exports;T()(Ia,{VAlert:ce["a"],VBtn:Q["a"],VCard:I["a"],VCardActions:L["a"],VCardText:L["c"],VCardTitle:L["d"],VCheckbox:tt["a"],VContainer:B["a"],VDataTable:at["a"],VDialog:Be["a"],VFlex:N["a"],VIcon:G["a"],VLayout:M["a"],VList:ga["a"],VProgressLinear:R["a"],VRadio:rt["a"],VRadioGroup:st["a"],VSelect:W["a"],VSpacer:U["a"],VTextField:de["a"],VToolbar:E["a"],VToolbarTitle:it["b"],VTooltip:nt["a"]});var Va=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}},[a("v-alert",{attrs:{dense:"",type:"info"}},[a("v-row",[a("v-col",{attrs:{cols:"7"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Detailed View Of"))+" "+e._s(e.dataSource.display)+" "+e._s(e.$t("App.hardcoded-texts.Data Source"))+" ")]),a("v-spacer"),a("v-col",[a("v-btn",{attrs:{color:"primary",small:""},nativeOn:{click:function(t){return e.$router.push("/ViewDataSources")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-format-list-bulleted-square")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Back to Datasources"))+" ")],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"7"}},[a("ActivePartitionStats",{attrs:{partition:e.partitionid,title:"Datasource Statistics"}})],1),a("v-col",{attrs:{cols:"5"}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-size":"14px"},attrs:{color:"#385F73",dark:"",height:"40"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Datasources Contributing To This Data Source"))+" ")])],1),a("v-card-text",[a("v-row",e._l(e.sourceAdvanceDetails.generatedFrom,(function(t,r){return a("v-col",{key:t.name,attrs:{cols:"6"}},[e._v(" "+e._s(++r)+". "+e._s(t.name)+" ")])})),1)],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"5"}},[a("v-card",{attrs:{width:"730px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Shared Users"))+" ")])],1),a("v-card-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Select user to view permisions"))+" ")]),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.advDetailsHeader,items:e.sourceAdvanceDetails.sharedUsers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",{on:{click:function(t){return e.showPermissions(r)}}},[a("v-radio-group",{staticStyle:{height:"5px","margin-left":"40px"},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}},[a("td",[a("v-radio",{attrs:{value:r,color:"blue"}})],1)]),a("td",[e._v(e._s(r.name))]),a("td",[e._v(" "+e._s(r.permissions.length)+" ")])],1)]}}])})],1)],1)],1),a("v-spacer"),a("v-col",{attrs:{cols:"5"}},[a("v-card",{attrs:{height:"348"}},[a("v-toolbar",{attrs:{color:"red darken-4",dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Permissions for user"))+" "+e._s(e.user.name)+" ")]),a("v-spacer"),a("v-icon",{attrs:{large:""}},[e._v("mdi-shield-lock-outline")])],1),a("v-card-actions",[a("v-row",[a("v-col",{attrs:{cols:"5"}},[a("v-card",{attrs:{height:"100"}},[a("v-toolbar",{attrs:{color:"red darken-4",dark:"",height:"30"}},[a("v-toolbar-title",{staticStyle:{"font-size":"16px"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Facilities"))+" ")]),a("v-spacer"),a("v-icon",{attrs:{small:""}},[e._v("mdi-hospital-marker")])],1),a("v-card-actions",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-checkbox",{attrs:{color:"red darken-3",value:"read_facility",height:"0","hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",{staticStyle:{"font-size":"15px"}},[e._v(e._s(e.$t("App.hardcoded-texts.View")))])]},proxy:!0}]),model:{value:e.permissions,callback:function(t){e.permissions=t},expression:"permissions"}})],1),a("v-checkbox",{attrs:{color:"red darken-3",value:"write_facility",height:"14","hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",{staticStyle:{"font-size":"15px"}},[e._v(e._s(e.$t("App.hardcoded-texts.Add"))+"/"+e._s(e.$t("App.hardcoded-texts.Update")))])]},proxy:!0}]),model:{value:e.permissions,callback:function(t){e.permissions=t},expression:"permissions"}})],1)],1)],1)],1),a("v-spacer"),a("v-col",{attrs:{cols:"5"}},[a("v-card",[a("v-toolbar",{attrs:{color:"red darken-4",dark:"",height:"30"}},[a("v-toolbar-title",{staticStyle:{"font-size":"16px"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Jurisdictions"))+" ")]),a("v-spacer"),a("v-icon",{attrs:{small:""}},[e._v("mdi-home-group")])],1),a("v-card-actions",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-checkbox",{attrs:{color:"red darken-3",value:"read_jurisdiction",height:"0","hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",{staticStyle:{"font-size":"15px"}},[e._v(e._s(e.$t("App.hardcoded-texts.View")))])]},proxy:!0}]),model:{value:e.permissions,callback:function(t){e.permissions=t},expression:"permissions"}})],1),a("v-checkbox",{attrs:{color:"red darken-3",value:"write_jurisdiction",height:"14","hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",{staticStyle:{"font-size":"15px"}},[e._v(e._s(e.$t("App.hardcoded-texts.Add"))+"/"+e._s(e.$t("App.hardcoded-texts.Update")))])]},proxy:!0}]),model:{value:e.permissions,callback:function(t){e.permissions=t},expression:"permissions"}})],1)],1)],1)],1),a("v-col",{attrs:{cols:"5"}},[a("v-card",[a("v-toolbar",{attrs:{color:"red darken-4",dark:"",height:"30"}},[a("v-toolbar-title",{staticStyle:{"font-size":"16px"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Organizations"))+" ")]),a("v-spacer"),a("v-icon",{attrs:{small:""}},[e._v("mdi-hospital-marker")])],1),a("v-card-actions",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-checkbox",{attrs:{color:"red darken-3",value:"read_organization",height:"0","hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",{staticStyle:{"font-size":"15px"}},[e._v(e._s(e.$t("App.hardcoded-texts.View")))])]},proxy:!0}]),model:{value:e.permissions,callback:function(t){e.permissions=t},expression:"permissions"}})],1),a("v-checkbox",{attrs:{color:"red darken-3",value:"write_organization",height:"14","hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",{staticStyle:{"font-size":"15px"}},[e._v(e._s(e.$t("App.hardcoded-texts.Add"))+"/"+e._s(e.$t("App.hardcoded-texts.Update")))])]},proxy:!0}]),model:{value:e.permissions,callback:function(t){e.permissions=t},expression:"permissions"}})],1)],1)],1)],1),a("v-spacer"),a("v-col",{attrs:{cols:"5"}},[a("v-card",[a("v-toolbar",{attrs:{color:"red darken-4",dark:"",height:"30"}},[a("v-toolbar-title",{staticStyle:{"font-size":"16px"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Healthcare Services"))+" ")]),a("v-spacer"),a("v-icon",{attrs:{small:""}},[e._v("mdi-room-service")])],1),a("v-card-actions",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-checkbox",{attrs:{color:"red darken-3",value:"read_service",height:"0","hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",{staticStyle:{"font-size":"15px"}},[e._v(e._s(e.$t("App.hardcoded-texts.View")))])]},proxy:!0}]),model:{value:e.permissions,callback:function(t){e.permissions=t},expression:"permissions"}})],1),a("v-checkbox",{attrs:{color:"red darken-3",value:"write_service",height:"14","hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",{staticStyle:{"font-size":"15px"}},[e._v(e._s(e.$t("App.hardcoded-texts.Add"))+"/"+e._s(e.$t("App.hardcoded-texts.Update")))])]},proxy:!0}]),model:{value:e.permissions,callback:function(t){e.permissions=t},expression:"permissions"}})],1)],1)],1)],1)],1)],1),a("v-divider"),a("v-divider"),a("v-row",[a("v-spacer"),a("v-spacer"),a("v-spacer"),a("v-col",[a("v-btn",{attrs:{dark:"",small:"",color:"red darken-3"},on:{click:e.changePermissions}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cog-refresh-outline")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Update Permissions"))+" ")],1)],1)],1)],1)],1)],1)],1)},Oa=[],Na={props:["sourceid","partitionid"],data:function(){return{permissions:[],user:{},dataSource:{},sourceAdvanceDetails:[],advDetailsHeader:[{text:"Select",align:"center"},{text:"User",align:"left",value:"name"},{text:"Total Permission",value:"permissions"}]}},filters:{mergePermissions:function(e){var t,a="",r=Object(c["a"])(e);try{for(r.s();!(t=r.n()).done;){var s=t.value;a?a+=", "+s.text:a=s.text}}catch(o){r.e(o)}finally{r.f()}return a}},methods:{showPermissions:function(e){if(this.permissions=[],e.permissions&&0!==e.permissions.length){var t,a=Object(c["a"])(e.permissions);try{for(a.s();!(t=a.n()).done;){var r=t.value;this.permissions.push(r.id)}}catch(s){a.e(s)}finally{a.f()}}},changePermissions:function(){var e=this,t=new FormData;t.append("partition",this.dataSource.partitionID),t.append("user",this.user.id),t.append("permissions",JSON.stringify(this.permissions)),this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Updating permissions",u.a.post("/datasource/updatePermissions",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorColor="primary",e.$store.state.errorTitle="Information",e.$store.state.errorDescription="Permissions update successfully. Reload app to see changes"})).catch((function(t){console.log(t),e.$store.state.dynamicProgress=!1,e.$store.state.dialogError=!0,e.$store.state.errorColor="error",e.$store.state.errorTitle="Information",e.$store.state.errorDescription="An error has occured"}))}},components:{ActivePartitionStats:q},created:function(){var e=this;this.$store.state.dynamicProgress=!0,this.dataSource=this.$store.state.dataSources.find((function(t){return t.id===e.sourceid})),this.$store.state.progressTitle="Getting Datasource Details",u.a.get("/datasource/getSourceDetails/".concat(this.dataSource.partitionID)).then((function(t){e.sourceAdvanceDetails=t.data,e.sourceAdvanceDetails.sharedUsers.length>0&&(e.user=e.sourceAdvanceDetails.sharedUsers[0],e.showPermissions(e.user)),e.$store.state.dynamicProgress=!1})).catch((function(t){console.log(t),e.$store.state.dynamicProgress=!1}))}},Ma=Na,Ra=Object(D["a"])(Ma,Va,Oa,!1,null,null,null),Ua=Ra.exports;T()(Ra,{VAlert:ce["a"],VBtn:Q["a"],VCard:I["a"],VCardActions:L["a"],VCardText:L["c"],VCardTitle:L["d"],VCheckbox:tt["a"],VCol:ka["a"],VContainer:B["a"],VDataTable:at["a"],VDivider:O["a"],VFlex:N["a"],VIcon:G["a"],VLayout:M["a"],VRadio:rt["a"],VRadioGroup:st["a"],VRow:Pa["a"],VSpacer:U["a"],VToolbar:E["a"],VToolbarTitle:it["b"]});var Ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("center",[a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.confirmPairDeleteDialog,callback:function(t){e.confirmPairDeleteDialog=t},expression:"confirmPairDeleteDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v(" Confirm deleting ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.confirmPairDeleteDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Are you sure you want to delete this data source pair"))+" ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.confirmPairDeleteDialog=!1}}},[e._v(e._s(e.$t("App.hardcoded-texts.Cancel")))]),a("v-spacer"),a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){return e.deletePair.apply(null,arguments)}}},[e._v(e._s(e.$t("App.hardcoded-texts.Ok")))])],1)],1)],1),a("v-alert",{staticStyle:{width:"1000px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-alert",{staticStyle:{width:"1000px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v(" "+e._s(e.alertMsg)+" ")]),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"770px",transition:"dialog-transition"},model:{value:e.pairLimitWarn,callback:function(t){e.pairLimitWarn=t},expression:"pairLimitWarn"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Pair creation limit"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.pairLimitWarn=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" "+e._s(e.$t("App.hardcoded-texts.You cant create more pairs as this account is limited to one pair only at a time"))+". ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.pairLimitWarn=!1}}},[e._v(e._s(e.$t("App.hardcoded-texts.Ok")))])],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"770px",transition:"dialog-transition"},model:{value:e.mapSourcePairLevels,callback:function(t){e.mapSourcePairLevels=t},expression:"mapSourcePairLevels"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Data sources has different level counts, please map Levels to proceed"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeLevelMappingDialog.apply(null,arguments)}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-data-table",{attrs:{headers:e.pairLevelsMappingHeader,items:e.source1Levels},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.text))]),a("td",[e.pairLevelsMapping[r.value]?[e._v(" "+e._s(e.$store.state.levelMapping.source2[e.pairLevelsMapping[r.value]])+" "),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.clearMappingSelection(r.value)}}},[e._v("mdi-close")])]:a("v-select",{attrs:{items:e.source2Levels,clearable:""},on:{change:function(t){return e.mappingSelected(r.value)}},model:{value:e.pairLevelsMapping[r.value],callback:function(t){e.$set(e.pairLevelsMapping,r.value,t)},expression:"pairLevelsMapping[item.value]"}})],2)])]}}])})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"error",rounded:""},on:{click:e.closeLevelMappingDialog}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Cancel"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{color:"primary",rounded:""}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(e._s(e.$t("App.hardcoded-texts.Save"))+" "+e._s(e.$t("App.hardcoded-texts.Mapping"))+" ")],1)],1)],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.About this page"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" "+e._s(e.$t("App.hardcoded-texts.This page let you choose a pair of data sources to use for reconciliation"))+" "),a("v-list",[e._v("1. "+e._s(e.$t("App.hardcoded-texts.Source 1 is the source while source 2 is the target")))])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.shareDialog,callback:function(t){e.shareDialog=t},expression:"shareDialog"}},[a("v-card",{attrs:{width:"530px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Sharing Pair"))+" "+e._s(e.sharePair.display)+" ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.shareDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("permissions",{on:{grantedPermissions:e.receivedPermissions}}),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUsers,callback:function(t){e.searchUsers=t},expression:"searchUsers"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.usersHeader,items:e.users,search:e.searchUsers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[r.userName!==e.$store.state.auth.username?a("tr",[a("td",[a("v-checkbox",{attrs:{value:r.id},model:{value:e.sharedUsers,callback:function(t){e.sharedUsers=t},expression:"sharedUsers"}})],1),a("td",[e._v(e._s(r.userName))]),a("td",[e._v(e._s(r.fullName))])]):e._e()]}}])})],1),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"error"},nativeOn:{click:function(t){e.shareDialog=!1}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("mdi-cancel")]),e._v(e._s(e.$t("App.hardcoded-texts.Cancel"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:""},nativeOn:{click:function(t){return e.share("","saveShare")}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-share-variant-outline")]),e._v(e._s(e.$t("App.hardcoded-texts.Share"))+" ")],1)],1)],1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs11:""}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.create_choose_pair"))+" ")]),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){e.helpDialog=!0}}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}])},[a("span",[e._v(e._s(e.$t("App.hardcoded-texts.Help")))])])],1)],1),a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-card",{staticStyle:{width:"1000px"},attrs:{color:"cyan lighten-5"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white lighten-2"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Create Data Source Pair"))+" ")])],1),a("v-card-text",{staticStyle:{float:"center"}},[a("v-row",[a("v-text-field",{attrs:{label:e.$t("App.hardcoded-texts.Pair Name")+"*","error-messages":e.pairNameErrors},on:{blur:e.ensureNameUnique,input:e.ensureNameUnique},model:{value:e.pairName,callback:function(t){e.pairName=t},expression:"pairName"}})],1),a("v-row",[a("v-col",[a("v-data-table",{attrs:{headers:e.source1Headers,items:e.$store.state.dataSources,loading:e.$store.state.loadingServers,dark:""},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.source1,callback:function(t){e.source1=t},expression:"source1"}},[a("td",[a("v-radio",{attrs:{value:r,color:"blue"}})],1)]),a("td",[e._v(e._s(r.display))])],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),a("v-col",[a("v-data-table",{attrs:{headers:e.source2Headers,items:e.dataSources2,"item-key":"id",loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.source2,callback:function(t){e.source2=t},expression:"source2"}},[a("td",[a("v-radio",{attrs:{value:r,color:"blue"}})],1)]),a("td",[e._v(e._s(r.display))])],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{disabled:!e.pairSelected,color:"error",rounded:""},on:{click:e.reset}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-refresh")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Reset"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{disabled:!e.canCreatePair||!e.pairSelected,color:"primary",rounded:""},on:{click:e.checkLevels}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Save"))+" ")],1)],1)],1)],1),a("v-flex",[a("v-card",{staticStyle:{width:"1000px"},attrs:{color:"cyan lighten-4"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white lighten-2"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Existing Data Source Pairs"))+" "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:e.$t("App.hardcoded-texts.Search"),"single-line":"","hide-details":""},model:{value:e.searchPairs,callback:function(t){e.searchPairs=t},expression:"searchPairs"}})],1)],1),a("v-card-text",{staticStyle:{float:"center"}},[a("v-data-table",{attrs:{headers:e.sourcePairHeaders,items:e.$store.state.dataSourcePairs,search:e.searchPairs,loading:e.$store.state.loadingServers},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.display))]),a("td",[e._v(e._s(r.user.name))]),a("v-radio-group",{staticStyle:{height:"5px"},model:{value:e.activeDataSourcePair,callback:function(t){e.activeDataSourcePair=t},expression:"activeDataSourcePair"}},[a("td",[a("v-radio",{attrs:{value:r,color:"blue"}})],1)]),a("td",[e._v(" "+e._s(e._f("mergeUsers")(r.sharedUsers))+" ")]),r.user.id===e.$store.state.auth.userID?a("td",[a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.share(r,"showDialog")}}},[a("v-icon",[e._v("mdi-share-variant-outline")]),e._v(e._s(e.$t("App.hardcoded-texts.Share"))+" ")],1),e._v(" | "),a("v-btn",{attrs:{color:"success",text:""},on:{click:function(t){return e.viewshare(r)}}},[a("v-icon",[e._v("mdi-monitor-share")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Detailed View"))+" ")],1)],1):e._e()],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1),a("v-card-actions",[a("v-btn",{attrs:{disabled:!e.canDeletePair,color:"error",rounded:""},on:{click:e.confirmDeletePair}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-delete")]),e._v(e._s(e.$t("App.hardcoded-texts.Delete"))+" "+e._s(e.$t("App.hardcoded-texts.Pair"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{disabled:!e.canActivatePair,color:"primary",rounded:""},on:{click:e.activatePair}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(e._s(e.$t("App.hardcoded-texts.Activate Pair"))+" ")],1)],1)],1)],1)],1)],1)],1)},Fa=[],qa={methods:{createDatasourcePair:function(e,t,a){var r=this;if(0===Object.keys(e).length||0===Object.keys(t).length)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select data source");if(e.name===t.name&&e.source===t.source)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",void(this.$store.state.errorDescription="Data source pair of the same data source is not allowed, change one of the source");this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Creating Data Source Pair";var s=null;this.$store.state.activePair.hasOwnProperty("shared")&&-1!==this.$store.state.activePair.activeUsers.indexOf(this.$store.state.auth.userID)&&(s=this.$store.state.activePair.id);var o=!1;this.$store.state.dhis.user.orgId&&this.$store.state.config.generalConfig.reconciliation.singlePair&&(o=!0),s||(s=!1);var i=new FormData;i.append("source1",JSON.stringify(e)),i.append("source2",JSON.stringify(t)),i.append("name",a),i.append("userID",this.$store.state.auth.userID),i.append("orgId",this.$store.state.dhis.user.orgId),i.append("singlePair",o),i.append("activePairID",s),u.a.post("/datasource/createSourcePair",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){r.$store.state.levelMapping.source1=JSON.parse(e.data.levelMapping1),r.$store.state.levelMapping.source2=JSON.parse(e.data.levelMapping2),Ws.$emit("getDataSourcePair"),r.$store.state.dynamicProgress=!1})).catch((function(e){r.alertError=!0,r.$store.state.dialogError=!0,e.response&&e.response.data&&e.response.data.error?(r.$store.state.errorDescription=e.response.data.error,r.$store.state.errorTitle="Pair was not created",r.alertMsg=e.response.data.error):r.alertMsg="Something went wrong while saving data source pairs.",r.$store.state.dynamicProgress=!1,console.log(e)}))},activateSharedPair:function(e){var t=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Activating Data Source Pair";var a=new FormData;a.append("pairID",e),a.append("userID",this.$store.state.auth.userID),u.a.post("/datasource/activateSharedPair",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){Ws.$emit("getDataSourcePair"),t.$store.state.dynamicProgress=!1})).catch((function(e){t.alertError=!0,t.alertMsg="Something went wrong while activating data source pair",t.$store.state.dynamicProgress=!1,console.log(e.response.data)}))},activatePair:function(){var e=this;if(this.activeDataSourcePair.user.id!==this.$store.state.auth.userID)this.activateSharedPair(this.activeDataSourcePair.id);else{this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Activating Data Source Pair";var t=new FormData;t.append("id",this.activeDataSourcePair.id),t.append("userID",this.$store.state.auth.userID),u.a.post("/datasource/activatePair",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){Ws.$emit("getDataSourcePair"),e.$store.state.dynamicProgress=!1})).catch((function(t){e.alertError=!0,e.alertMsg="Something went wrong while activating data source pair",e.$store.state.dynamicProgress=!1,console.log(t.response.data)}))}}}},ja={mixins:[_,qa],data:function(){return{confirmPairDeleteDialog:!1,helpDialog:!1,alertSuccess:!1,alertError:!1,alertMsg:"",pairLimitWarn:!1,shareDialog:!1,permissions:[],mapSourcePairLevels:!1,pairLevelsMapping:{},pairNameErrors:[],invalidCharacters:['"',"/","\\","."],pairName:"",sharePair:{},source1:{},source2:{},searchPairs:"",searchSources:"",searchUsers:"",users:[],sharedUsers:[],activeDataSourcePair:{},pairLevelsMappingHeader:[{text:"Source 1 Levels",value:"headerSource1Levels",sortable:!1},{text:"Source 2 Levels",value:"headerSource1Levels",sortable:!1}],source1Headers:[{sortable:!1},{text:"Source 1",value:"headerSource1",sortable:!1}],source2Headers:[{sortable:!1},{text:"Source 2",value:"headerSource2",sortable:!1}],sourcePairHeaders:[{text:"Pair",value:"pair"},{text:"Owner",value:"owner",sortable:!1},{text:"Active",value:"active"},{text:"Shared To",value:"shareStatus"}],usersHeader:[{},{text:"Username",value:"username",sortable:!0},{text:"Full Name",value:"fname",sortable:!0}],source1Levels:[],source2Levels:[]}},filters:{mergeUsers:function(e){if(!e||0===e.length)return"";var t,a="",r=0,s=Object(c["a"])(e);try{for(s.s();!(t=s.n()).done;){var o=t.value;if(r++,r>5){a+="...";break}a?a+=","+o.name:a=o.name}}catch(i){s.e(i)}finally{s.f()}return a}},methods:{receivedPermissions:function(e){this.permissions=e},confirmDeletePair:function(){this.confirmPairDeleteDialog=!0},deletePair:function(){var e=this;this.confirmPairDeleteDialog=!1;var t="pairId=".concat(this.activeDataSourcePair.id,"&userID=").concat(this.$store.state.auth.userID,"&pairOwner=").concat(this.activeDataSourcePair.user.id,"&source1Name=").concat(this.activeDataSourcePair.source1.name,"&source2Name=").concat(this.activeDataSourcePair.source2.name);u.a.delete("/datasource/deleteSourcePair?"+t).then((function(){e.$store.state.errorTitle="Pair Deletion",e.$store.state.errorDescription="Pair deleted successfully",e.$store.state.dialogError=!0,setTimeout((function(){Ws.$emit("getDataSourcePair")}),500)})).catch((function(t){e.$store.state.errorTitle="Pair Deletion",e.$store.state.errorDescription="An error occured while deleting pair, please retry",e.$store.state.errorColor="error",e.$store.state.dialogError=!0,console.log(JSON.stringify(t))}))},ensureNameUnique:function(){if(this.pairNameErrors=[],""===this.pairName)return this.pairNameErrors.push("Upload name is required");if(this.pairName.length>35)return this.pairNameErrors.push("Name must not exceed 35 characters");var e,t=Object(c["a"])(this.invalidCharacters);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(-1!==this.pairName.indexOf(a))return this.pairNameErrors.push("Name is invalid")}}catch(i){t.e(i)}finally{t.f()}var r,s=Object(c["a"])(this.$store.state.dataSources);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(o.display.toLowerCase()===this.pairName.toLowerCase())return this.pairNameErrors.push("This Name Exists"),!1}}catch(i){s.e(i)}finally{s.f()}},viewshare:function(e){this.$router.push({name:"AdvanceDatasourceDetails",params:{sourceid:e.id,partitionid:e.name}})},reset:function(){var e=this;this.source1={},this.source2={},this.activeDataSourcePair={},this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Reseting Data Source Pairs";var t=this.$store.state.auth.userID;u.a.get("/datasource/resetDataSourcePair/"+t).then((function(){Ws.$emit("getDataSourcePair"),e.$store.state.dynamicProgress=!1,e.alertSuccess=!0,e.alertMsg="Data Source Pair Reseted Successfully"})).catch((function(t){e.alertError=!0,e.alertMsg="Something went wrong while reseting data source pairs",console.log(t)}))},checkLevels:function(){var e=this;if(!this.pairName)return this.pairNameErrors.push("Upload name is required"),this.$store.state.errorColor="error",this.$store.state.errorTitle="No pair name",this.$store.state.errorDescription="Please provide the name of the pair",void(this.$store.state.dialogError=!0);this.pairLevelsMapping={};var t=JSON.stringify({source1LimitOrgId:this.getLimitOrgIdOnDataSource(this.source1),source2LimitOrgId:this.getLimitOrgIdOnDataSource(this.source2)});u.a.get("/datasource/countLevels?source1Id=".concat(this.source1.id,"&source1DB=").concat(this.source1.name,"&source2Id=").concat(this.source2.id,"&source2DB=").concat(this.source2.name,"&sourcesLimitOrgId=").concat(t)).then((function(t){return 1===t.data.totalSource1Levels?(e.$store.state.errorTitle="No data for you",e.$store.state.errorDescription="Cant create this pair, "+e.source1.name+" has no data for you",void(e.$store.state.dialogError=!0)):1===t.data.totalSource2Levels?(e.$store.state.errorTitle="No data for you",e.$store.state.errorDescription="Cant create this pair, "+e.source2.name+" has no data for you",void(e.$store.state.dialogError=!0)):void(t.data.totalSource1Levels>t.data.totalSource2Levels?(e.$store.state.errorTitle="Levels mismatch",e.$store.state.errorDescription="Make sure source1 has the same or less levels as source2",e.$store.state.dialogError=!0):e.createDatasourcePair(e.source1,e.source2,e.pairName))}))},mappingSelected:function(e){var t=this;this.source2Levels=this.source2Levels.filter((function(a){return a.value!==t.pairLevelsMapping[e]}))},clearMappingSelection:function(e){this.source2Levels.push({text:this.$store.state.levelMapping.source2[this.pairLevelsMapping[e]],value:this.pairLevelsMapping[e]});var t,a=Object.keys(this.pairLevelsMapping),r=a.filter((function(t){return t!==e})),s={},o=Object(c["a"])(r);try{for(o.s();!(t=o.n()).done;){var i=t.value;s[i]=this.pairLevelsMapping[i]}}catch(n){o.e(n)}finally{o.f()}this.pairLevelsMapping=s},closeLevelMappingDialog:function(){for(var e in this.pairLevelsMapping)this.source2Levels.push({text:this.$store.state.levelMapping.source2[this.pairLevelsMapping[e]],value:this.pairLevelsMapping[e]});this.mapSourcePairLevels=!1},share:function(e,t){var a=this;if("showDialog"===t)this.sharedUsers=[],this.sharePair=e,e.hasOwnProperty("sharedUsers")&&e.sharedUsers.length>0&&e.sharedUsers.forEach((function(e){a.sharedUsers.push(e.id)})),this.shareDialog=!0;else if("saveShare"===t){if(0===this.sharedUsers.length)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Info",void(this.$store.state.errorDescription="Please select atleast one user");var r=new FormData;r.append("sharePair",this.sharePair.id),r.append("users",JSON.stringify(this.sharedUsers)),r.append("permissions",JSON.stringify(this.permissions)),r.append("userID",this.$store.state.auth.userID),r.append("orgId",this.$store.state.dhis.user.orgId),this.$store.state.loadingServers=!0,this.shareDialog=!1,u.a.post("/datasource/shareSourcePair",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){a.$store.state.loadingServers=!1,a.$store.state.dataSourcePairs=e.data})).catch((function(e){console.log(e),a.$store.state.loadingServers=!1}))}},getUsers:function(){var e=this;u.a.get("/users/getUsers").then((function(t){e.users=t.data}))}},computed:{dataSources2:function(){if(this.$store.state.config.generalConfig.reconciliation.fixSource2){var e,t="",a=Object(c["a"])(this.$store.state.dataSources);try{for(a.s();!(e=a.n()).done;){var r=e.value;r.id===this.$store.state.config.generalConfig.reconciliation.fixSource2To&&(t=r)}}catch(s){a.e(s)}finally{a.f()}return[t]}return this.$store.state.dataSources},canCreatePair:function(){return!this.$store.state.dhis.user.orgId||!this.$store.state.config.generalConfig.reconciliation.singlePair||0===this.$store.state.dataSourcePairs.length},pairSelected:function(){return!(!this.source1.id||!this.source2.id)},canDeletePair:function(){return!!this.activeDataSourcePair.id&&this.activeDataSourcePair.user.id===this.$store.state.auth.userID},canActivatePair:function(){return!(0===this.$store.state.dataSourcePairs.length||!this.activeDataSourcePair.id)}},components:{permissions:wa},created:function(){var e=this;for(var t in this.canCreatePair||(this.pairLimitWarn=!0),this.getUsers(),this.source1=this.$store.state.dataSources.find((function(t){return t.id===e.$store.state.activePair.source1.id})),this.source2=this.$store.state.dataSources.find((function(t){return t.id===e.$store.state.activePair.source2.id})),this.activeDataSourcePair=this.getActiveDataSourcePair(),this.source1||(this.source1={}),this.source2||(this.source2={}),this.$store.state.levelMapping.source2)"code"!==t&&this.source2Levels.push({text:this.$store.state.levelMapping.source2[t],value:t});for(var a in this.$store.state.levelMapping.source1)"code"!==a&&this.source1Levels.push({text:this.$store.state.levelMapping.source1[a],value:a})}},Ha=ja,Ba=Object(D["a"])(Ha,Ea,Fa,!1,null,null,null),Ga=Ba.exports;T()(Ba,{VAlert:ce["a"],VBtn:Q["a"],VCard:I["a"],VCardActions:L["a"],VCardText:L["c"],VCardTitle:L["d"],VCheckbox:tt["a"],VCol:ka["a"],VContainer:B["a"],VDataTable:at["a"],VDialog:Be["a"],VFlex:N["a"],VIcon:G["a"],VLayout:M["a"],VList:ga["a"],VProgressLinear:R["a"],VRadio:rt["a"],VRadioGroup:st["a"],VRow:Pa["a"],VSelect:W["a"],VSpacer:U["a"],VTextField:de["a"],VToolbar:E["a"],VToolbarTitle:it["b"],VTooltip:nt["a"]});var Wa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[e.$store.state.uploadRunning?[a("br"),a("br"),a("br"),a("v-alert",{attrs:{type:"info",value:!0}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Wait for upload to finish"))+" ...")]),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)]:e._e(),!e.$store.state.denyAccess&!e.$store.state.uploadRunning?[a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.About this page"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" "+e._s(e.$t("App.hardcoded-texts.This page let you view what you have uploaded or synchronized from a remote server"))+" "),a("v-list",[e._v("1. "+e._s(e.$t("App.hardcoded-texts.Use the tree to filter grid data")))])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition","max-width":"500px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",{attrs:{height:"500px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Edit Location"))+" ")]),a("v-spacer"),a("v-icon",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.editDialog=!1}}},[e._v("mdi-close")])],1),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-text-field",{attrs:{"error-messages":e.editLocationNameErrors,required:"",label:e.$t("App.hardcoded-texts.Facility")},on:{blur:function(t){return e.$v.editLocationName.$touch()},change:function(t){return e.$v.editLocationName.$touch()}},model:{value:e.editLocationName,callback:function(t){e.editLocationName=t},expression:"editLocationName"}})],1),a("v-flex",[a("v-select",{attrs:{items:e.editParents,filled:"",label:e.$t("App.hardcoded-texts.Parent")},model:{value:e.editLocationParent,callback:function(t){e.editLocationParent=t},expression:"editLocationParent"}})],1)],1)],1)],1),a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-toolbar",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:"","text-sm-left":""}},[a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){e.editDialog=!1}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-cancel")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Cancel"))+" ")],1)],1),a("v-flex",{attrs:{xs6:"","text-sm-right":""}},[a("v-btn",{attrs:{color:"primary",disabled:e.$v.$invalid,dark:""},on:{click:function(t){return e.saveEdit()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-save")]),e._v(e._s(e.$t("App.hardcoded-texts.Save"))+" ")],1)],1)],1)],1)],1)],1)],1),a("v-row",[a("v-spacer"),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){e.helpDialog=!0}}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}],null,!1,3148663098)},[a("span",[e._v(e._s(e.$t("App.hardcoded-texts.Help")))])])],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[e._v(e._s(e.$t("App.hardcoded-texts.Source 1 Data Tree")))])]),e.loadingSource1Tree?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("p",[a("liquor-tree",{ref:"source1Tree",attrs:{data:e.source1Tree,options:{}},on:{"node:selected":e.source1NodeSelected}})],1)])]],2)],1),a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[e._v(e._s(e.$t("App.hardcoded-texts.Source 2 Data Tree")))])]),e.loadingSource2Tree?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("p",[a("liquor-tree",{ref:"source2Tree",attrs:{data:e.source2Tree,options:{}},on:{"node:selected":e.source2NodeSelected}})],1)])]],2)],1),a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[e._v(e._s(e.$t("App.hardcoded-texts.Source 1 Data Grid")))])]),e.loadingSource1Grid?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source1GridHeader,items:e.source1Grid,search:e.searchSource1,options:e.source1Pagination,"server-items-length":e.totalSource1Records,loading:e.loadingSource1,"hide-default-footer":""}})],1),a("div",{staticClass:"text-xs-center pt-2"},[e._v(" "+e._s(e.source1Pagination)+" - "+e._s(e.source1Count)+" "),a("v-pagination",{attrs:{length:e.source1Pages},model:{value:e.source1Pagination.page,callback:function(t){e.$set(e.source1Pagination,"page",t)},expression:"source1Pagination.page"}})],1)]],2)],1),a("v-flex",{attrs:{xs6:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[e._v("Source 2 Data Grid")])]),e.loadingSource2Grid?[a("v-progress-linear",{attrs:{indeterminate:!0}})]:[a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source2GridHeader,items:e.source2Grid,search:e.searchSource2,options:e.source2Pagination,"server-items-length":e.totalSource2Records,loading:e.loadingSource2,"hide-default-footer":""}})],1),a("div",{staticClass:"text-xs-center pt-2"},[a("v-pagination",{attrs:{length:e.source2Pages},model:{value:e.source2Pagination.page,callback:function(t){e.$set(e.source2Pagination,"page",t)},expression:"source2Pagination.page"}})],1)]],2)],1)],1),a("br"),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs1:"",xl10:""}},[a("v-btn",{attrs:{color:"primary",dark:""},on:{click:function(t){return e.$router.push({name:"FacilityReconScores"})}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-find")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Reconcile"))+" ")],1)],1)],1)]:e._e()],2)},za=[],Ja=u.a.CancelToken,Ya={mixins:[_],data:function(){return{loadingSource2Unmatched:!1,loadingSource1Unmatched:!1,topTree:""}},methods:{scoreProgressCheckTimeout:function(){this.$store.state.scoresProgressData.scoreProgressTitle="Server is busy with automatching, please be patient",clearInterval(this.$store.state.scoresProgressData.progressReqTimer);var e=parseInt(this.$store.state.scoresProgressData.scoreProgressPercent);100!==e||100===e&&"last"!==this.$store.state.scoresProgressData.stage?(this.$store.state.scoresProgressData.requestCancelled=!0,this.$store.state.scoresProgressData.cancelTokenSource.cancel("Cancelling request."),this.checkScoreProgress()):this.$store.state.scoresProgressData.scoreProgressTitle="Please be patient, waiting for server response"},scoreSavingProgressCheckTimeout:function(){clearInterval(this.$store.state.scoreSavingProgressData.progressReqTimer),this.$store.state.scoreSavingProgressData.requestCancelled=!0,this.$store.state.scoreSavingProgressData.cancelTokenSource.cancel("Cancelling request."),this.checkScoreSavingStatus(),this.saveProgressTimedout=!0},checkScoreProgress:function(){var e,t=this;this.$store.state.scoresProgressData.cancelTokenSource=Ja.source();var a=parseInt(this.$store.state.scoresProgressData.scoreProgressPercent);e=a>96?402382:1e4,this.$store.state.scoresProgressData.progressReqTimer=setInterval(this.scoreProgressCheckTimeout,e);var r=this.$store.state.clientId;u.a.get("/progress/scoreResults/"+r,{cancelToken:this.$store.state.scoresProgressData.cancelTokenSource.token}).then((function(e){if(clearInterval(t.$store.state.scoresProgressData.progressReqTimer),!e.data||!(e.data.status||e.data.percent||e.data.error||0!==t.$store.state.scoreResults.length))return t.$store.state.scoresProgressData.scoreDialog=!1,t.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status",t.$store.state.errorTitle="An error has occured",t.$store.state.errorDescription="An error has occured while reaching out to server, please click recalculate scores to restart automatch",t.$store.state.errorColor="error",t.$store.state.dialogError=!0,void t.clearProgress("scoreResults");if(null===e.data.status&&null===e.data.percent&&null===e.data.error&&t.$store.state.scoreResults.length>0)return t.$store.state.scoresProgressData.scoreDialog=!1,t.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status",void t.clearProgress("scoreResults");if(t.$store.state.scoresProgressData.scoreProgressTitle=e.data.status,e.data.percent&&("percent"!==t.$store.state.scoresProgressData.progressType&&(t.$store.state.scoresProgressData.progressType="percent"),t.$store.state.scoresProgressData.scoreProgressPercent=e.data.percent,t.$store.state.scoresProgressData.stage=e.data.stage),"Done"===e.data.status&&0===t.$store.state.scoreResults.length){t.clearProgress("scoreResults"),t.loadingSource1Unmatched=!1,t.loadingSource2Unmatched=!1;var a=e.data.responseData;t.$store.state.source2UnMatched=a.source2Unmatched,t.$store.state.source1UnMatched=[],t.$store.state.matchedContent=[],t.$store.state.noMatchContent=[],t.$store.state.ignoreContent=[],t.$store.state.flagged=[],t.$store.state.scoreResults=a.scoreResults,t.$store.state.source2TotalRecords=a.source2TotalRecords,t.$store.state.source2TotalAllRecords=a.source2TotalAllRecords,t.$store.state.totalAllMapped=a.totalAllMapped,t.$store.state.totalAllFlagged=a.totalAllFlagged,t.$store.state.totalAllNoMatch=a.totalAllNoMatch,t.$store.state.totalAllIgnore=a.totalAllIgnore,t.$store.state.source1TotalAllNotMapped=a.source1TotalAllNotMapped,t.$store.state.source1TotalAllRecords=a.source1TotalAllRecords;var r,s=Object(c["a"])(t.$store.state.scoreResults);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(o.source1.hasOwnProperty("tag")&&"flagged"===o.source1.tag)t.$store.state.flagged.push({source1Name:o.source1.name,source1Id:o.source1.id,source1IdHierarchy:o.source1.source1IdHierarchy,source1Parents:o.source1.parents,source2Name:o.exactMatch.name,source2Id:o.exactMatch.id,source2IdHierarchy:o.exactMatch.source2IdHierarchy,mappedParentName:o.exactMatch.mappedParentName,source2Parents:o.exactMatch.parents,flagComment:o.source1.flagComment});else if(o.source1.hasOwnProperty("tag")&&"noMatch"===o.source1.tag){var i=o.source1.parents;t.$store.state.noMatchContent.push({source1Name:o.source1.name,source1Id:o.source1.id,parents:i})}else if(o.source1.hasOwnProperty("tag")&&"ignore"===o.source1.tag){var n=o.source1.parents;t.$store.state.ignoreContent.push({source1Name:o.source1.name,source1Id:o.source1.id,parents:n})}else if(Object.keys(o.exactMatch).length>0)t.$store.state.matchedContent.push({source1Name:o.source1.name,source1Id:o.source1.id,source1Parents:o.source1.parents,source2Name:o.exactMatch.name,source2Id:o.exactMatch.id,source2IdHierarchy:o.exactMatch.source2IdHierarchy,mappedParentName:o.exactMatch.mappedParentName,source2Parents:o.exactMatch.parents,matchComments:o.exactMatch.matchComments});else{for(var l=t.topTree,d=o.source1.parents.length-1;d>=0;d--)l[o.source1.parents[d]]||(l[o.source1.parents[d]]={}),l=l[o.source1.parents[d]];t.$store.state.source1UnMatched.push({name:o.source1.name,id:o.source1.id,parents:o.source1.parents})}}}catch(u){s.e(u)}finally{s.f()}t.$store.state.source1Parents=t.topTree,t.$store.state.scoresProgressData.scoreDialog=!1,t.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status"}else t.checkScoreProgress()})).catch((function(){t.$store.state.scoresProgressData.requestCancelled?t.$store.state.scoresProgressData.requestCancelled=!1:(clearInterval(t.$store.state.scoresProgressData.progressReqTimer),t.checkScoreProgress())}))},checkScoreSavingStatus:function(){var e=this;this.$store.state.scoreSavingProgressData.cancelTokenSource=Ja.source(),this.$store.state.scoreSavingProgressData.progressReqTimer=setInterval(this.scoreSavingProgressCheckTimeout,1e4);var t=this.$store.state.clientId;u.a.get("/progress/scoreSavingStatus/"+t,{cancelToken:this.$store.state.scoreSavingProgressData.cancelTokenSource.token}).then((function(t){return clearInterval(e.$store.state.scoreSavingProgressData.progressReqTimer),t.data&&(t.data.status||t.data.percent||t.data.error||!e.$store.state.scoreSavingProgressData.savingMatches)?t.data.status||t.data.percent||t.data.error||e.$store.state.scoreSavingProgressData.savingMatches?(t.data.percent&&(e.$store.state.scoreSavingProgressData.percent=t.data.percent),void(100===t.data.percent?(e.$store.state.scoreSavingProgressData.savingMatches=!1,e.$store.state.scoreSavingProgressData.percent=0,e.clearProgress("scoreSavingStatus")):e.checkScoreSavingStatus())):(e.$store.state.scoreSavingProgressData.savingMatches=!1,e.$store.state.scoreSavingProgressData.percent=0,void e.clearProgress("scoreSavingStatus")):(e.$store.state.errorTitle="An error has occured",e.$store.state.errorDescription="An error has occured while checking saving status",e.$store.state.errorColor="error",e.$store.state.dialogError=!0,e.$store.state.scoreSavingProgressData.savingMatches=!1,e.$store.state.scoreSavingProgressData.percent=0,void e.clearProgress("scoreSavingStatus"))})).catch((function(){e.$store.state.scoreSavingProgressData.requestCancelled?e.$store.state.scoreSavingProgressData.requestCancelled=!1:(clearInterval(e.$store.state.scoreSavingProgressData.progressReqTimer),e.checkScoreSavingStatus())}))},getScores:function(e){var t=this;e||(e=!1);var a=this.$store.state.activePair.source1.name,r=this.$store.state.activePair.source2.name,s=this.$store.state.activePair.name;if(this.$store.state.source1UnMatched=[],this.$store.state.source2UnMatched=[],this.$store.state.matchedContent=[],this.$store.state.noMatchContent=[],this.$store.state.ignoreContent=[],this.$store.state.flagged=[],this.$store.state.source1TotalAllRecords=0,this.$store.state.totalAllMapped=0,this.$store.state.totalAllFlagged=0,this.$store.state.totalAllNoMatch=0,this.$store.state.totalAllIgnore=0,this.$store.state.source2TotalRecords=0,this.$store.state.scoreResults=[],a&&r&&s){this.loadingSource1Unmatched=!0,this.loadingSource2Unmatched=!0,this.$store.state.scoresProgressData.scoreDialog=!0,this.$store.state.scoresProgressData.scoreProgressTitle="Waiting for progress status",this.$store.state.scoresProgressData.progressType="indeterminate";var o=this.$store.state.recoLevel,i=this.$store.state.totalSource1Levels,n=this.$store.state.totalSource2Levels,c=this.$store.state.clientId;this.topTree=this.$store.state.source1Parents.slice(0,this.$store.state.source1Parents.length),this.$store.state.levelArray=[];for(var l=1;l<this.$store.state.totalSource1Levels;l++){var d=void 0;l+1>this.$store.state.recoLevel||(d=this.translateDataHeader("source1",l),this.$store.state.levelArray.push({text:d,value:l+1}))}var p=this.getLimitOrgIdOnActivePair().source1LimitOrgId,h=this.getLimitOrgIdOnActivePair().source2LimitOrgId,v=JSON.stringify(this.$store.state.config.generalConfig.reconciliation.parentConstraint),g="partition1=".concat(a,"&partition2=").concat(r,"&mappingPartition=").concat(s,"&source1LimitOrgId=").concat(p);g+="&source2LimitOrgId=".concat(h,"&totalSource1Levels=").concat(i,"&totalSource2Levels=").concat(n),g+="&recoLevel=".concat(o,"&clientId=").concat(c,"&parentConstraint=").concat(v,"&getPotential=").concat(e),u.a.get("/match/reconcile/?"+g).then((function(){t.checkScoreProgress()}))}},getSource1:function(){var e=this.$store.state.activePair.source1.display;return e&&(e=this.toTitleCase(e)),e},getSource2:function(){var e=this.$store.state.activePair.source2.display;return e&&(e=this.toTitleCase(e)),e},getSource1Name:function(){return this.$store.state.activePair.source1.display},getSource2Name:function(){return this.$store.state.activePair.source2.display}},created:function(){var e=this;Ws.$on("changeCSVHeaderNames",(function(){e.$store.state.levelArray=[];for(var t=1;t<e.$store.state.totalSource1Levels;t++){var a=void 0;t+1>e.$store.state.recoLevel||(a=e.translateDataHeader("source1",t),e.$store.state.levelArray.push({text:a,value:t+1}))}}))}},Ka={validations:{editLocationName:{required:se["required"]}},mixins:[Ya,_],data:function(){return{deleteSource:{name:"",value:""},editDialog:!1,editLocationName:"",editLocationId:"",editParents:[],editLocationParent:"",editSource:"",helpDialog:!1,lastLevel:[],headerText:{level2:"Level 1",level3:"Level 2",level4:"Level 3",level5:"Level 4",level6:"Level 5",level7:"Level 6",level8:"Level 7",level9:"Level 8",level10:"Level 9",facility:"Facility",latitude:"Latitude",longitude:"Longitude"},headers:[{text:"Level 1",value:"level1"},{text:"Level 2",value:"level2"},{text:"Level 3",value:"level3"},{text:"Level 4",value:"level4"},{text:"Facility",value:"facility"},{text:"Latitude",value:"latitude"},{text:"Longitude",value:"longitude"}],searchSource1:"",searchSource2:"",filterSource1:{text:"",level:""},filterSource2:{text:"",level:""},source2Pagination:{rowsPerPage:10,totalItems:null},source1Pagination:{rowsPerPage:10,totalItems:null},loadingSource1:!1,loadingSource2:!1,totalSource1Records:0,totalSource2Records:0,source2Grid:[],source1Grid:[],source1Tree:[],source2Tree:[],source1Start:1,source2Start:1,source1Count:10,source2Count:10,loadingSource1Tree:!1,loadingSource2Tree:!1,loadingSource1Grid:!1,loadingSource2Grid:!1,currentSource2Pagination:{},currentSource1Pagination:{},source1SelNodeId:!1,source2SelNodeId:!1,sourceOwner:""}},methods:{edit:function(e,t){var a=this.getDatasourceOwner();"source1"===t?(this.sourceOwner=a.source1Owner,this.editSource=this.source1):"source2"===t&&(this.sourceOwner=a.source1Owner,this.editSource=this.source2),this.editLocationName=e.facility,this.editLocationId=e.id,this.editDialog=!0;var r=Object.keys(this.source2GridHeader).length,s=this.source2GridHeader[r-1].value;this.editLocationParent=e[s+"id"];var o=s.replace("level","");this.getLevelData(o)},saveEdit:function(){var e=this,t=new FormData;t.append("sourceOwner",this.sourceOwner),t.append("source",this.editSource),t.append("locationId",this.editLocationId),t.append("locationName",this.editLocationName),t.append("locationParent",this.editLocationParent),u.a.post("/editLocation",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.editDialog=!1,e.getSource1Grid(!1),e.getSource2Grid(!1),e.getTree()})).catch((function(e){console.log(JSON.stringify(e))}))},getLevelData:function(e){var t=this;u.a.get("/getLevelData/"+this.editSource+"/"+this.sourceOwner+"/"+e).then((function(e){t.editParents=e.data}))},getSource1Grid:function(e){var t=this;if(this.source1){this.loadingSource1=!0,e||(e=""),this.loadingSource1Grid=!0;var a=this.getLimitOrgIdOnActivePair().source1LimitOrgId,r=this.$store.state.activePair.userID,s=this.$store.state.activePair.source1.name,o="/hierarchy?partition=".concat(s,"&start=").concat(this.source1Start,"&count=").concat(this.source1Count,"&id=").concat(e,"&userID=").concat(r,"&sourceLimitOrgId=").concat(a);u.a.get(o).then((function(e){if(t.loadingSource1Grid=!1,e.data){var a=t.source1Pagination,r=a.sortBy,s=a.descending;t.source1Pagination.sortBy&&(e.data.tree=e.data.grid.sort((function(e,t){var a=e[r],o=t[r];return s?a<o?1:a>o?-1:0:a<o?-1:a>o?1:0}))),t.source1Grid=e.data.grid,t.totalSource1Records=e.data.total,t.source1Pagination.totalItems=e.data.total,t.currentSource1Pagination=Object.assign({},t.source1Pagination),t.currentSource1Pagination.hasOwnProperty("descending")||(t.currentSource1Pagination.descending=!1),t.currentSource1Pagination.hasOwnProperty("page")||(t.currentSource1Pagination.page=1),t.currentSource1Pagination.hasOwnProperty("sortBy")||(t.currentSource1Pagination.sortBy="facility"),t.currentSource1Pagination.hasOwnProperty("totalItems")||(t.currentSource1Pagination.totalItems=e.data.total)}t.loadingSource1=!1}))}},getSource2Grid:function(e){var t=this;if(this.source2){e||(e=""),this.loadingSource2=!0,this.loadingSource2Grid=!0;var a=this.getLimitOrgIdOnActivePair().source2LimitOrgId,r=this.$store.state.activePair.userID,s=this.$store.state.activePair.source2.name,o="/hierarchy?partition=".concat(s,"&start=").concat(this.source2Start,"&count=").concat(this.source2Count,"&id=").concat(e,"&userID=").concat(r,"&sourceLimitOrgId=").concat(a);u.a.get(o).then((function(e){if(t.loadingSource2Grid=!1,e.data){var a=t.source2Pagination,r=a.sortBy,s=a.descending;t.source2Pagination.sortBy&&(e.data.tree=e.data.grid.sort((function(e,t){var a=e[r],o=t[r];return s?a<o?1:a>o?-1:0:a<o?-1:a>o?1:0}))),t.source2Grid=e.data.grid,t.totalSource2Records=e.data.total,t.source2Pagination.totalItems=e.data.total,t.currentSource2Pagination=Object.assign({},t.source2Pagination),t.currentSource2Pagination.hasOwnProperty("descending")||(t.currentSource2Pagination.descending=!1),t.currentSource2Pagination.hasOwnProperty("page")||(t.currentSource2Pagination.page=1),t.currentSource2Pagination.hasOwnProperty("sortBy")||(t.currentSource2Pagination.sortBy="facility"),t.currentSource2Pagination.hasOwnProperty("totalItems")||(t.currentSource2Pagination.totalItems=e.data.total)}t.loadingSource2=!1}))}},getTree:function(){var e=this;if(this.source1&&this.source2){var t=this.$store.state.activePair.source1.name,a=this.$store.state.activePair.source2.name,r=this.getLimitOrgIdOnActivePair().source2LimitOrgId;this.loadingSource2Tree=!0,u.a.get("/getTree/"+a+"/"+r).then((function(t){e.loadingSource2Tree=!1,t.data&&(e.source2Tree=t.data)}));var s=this.getLimitOrgIdOnActivePair().source1LimitOrgId;this.loadingSource1Tree=!0,u.a.get("/getTree/"+t+"/"+s).then((function(t){e.loadingSource1Tree=!1,t.data&&(e.source1Tree=t.data)}))}},source1NodeSelected:function(e){this.source1SelNodeId=e.id,this.getSource1Grid(e.id)},source2NodeSelected:function(e){this.source2SelNodeId=e.id,this.getSource2Grid(e.id)}},computed:{isDataset1Owner:function(){var e=this.getDatasourceOwner().source1Owner,t=this.$store.state.auth.userID;return e===t},isDataset2Owner:function(){var e=this.getDatasourceOwner().source2Owner,t=this.$store.state.auth.userID;return e===t},source2GridHeader:function(){var e=[];this.isDataset2Owner&&e.push({text:"",value:"",sortable:!1});var t={};if(this.source2Grid&&this.source2Grid.length>0)for(var a in this.source2Grid)(t.length>0&&this.source2Grid[a].length>Object.keys(t).length||0===Object.keys(t).length)&&(t=this.source2Grid[a]);for(var r in t)this.headerText[r]&&e.push({text:this.headerText[r],value:r});return e},source1GridHeader:function(){var e=[];this.isDataset1Owner&&e.push({text:"",value:"",sortable:!1});var t={};if(this.source1Grid&&this.source1Grid.length>0)for(var a in this.source1Grid)(t.length>0&&this.source1Grid[a].length>Object.keys(t).length||0===Object.keys(t).length)&&(t=this.source1Grid[a]);if(this.source1Grid&&this.source1Grid.length>0)for(var r in this.source1Grid[0])this.headerText[r]&&e.push({text:this.headerText[r],value:r});return e},source2Pages:function(){return null==this.source2Pagination.rowsPerPage||null==this.source2Pagination.totalItems?0:Math.ceil(this.source2Pagination.totalItems/this.source2Count)},source1Pages:function(){return null==this.source1Pagination.rowsPerPage||null==this.source1Pagination.totalItems?0:Math.ceil(this.source1Pagination.totalItems/this.source1Count)},source1:function(){var e=this.$store.state.activePair.source1.name;return e&&(e=this.toTitleCase(e)),e},source2:function(){var e=this.$store.state.activePair.source2.name;return e&&(e=this.toTitleCase(e)),e},editLocationNameErrors:function(){var e=[];return this.$v.editLocationName.$dirty?(!this.$v.editLocationName.required&&e.push("Facility Name is required"),e):e}},watch:{source1Pagination:{handler:function(){if(this.currentSource1Pagination.sortBy!==this.source1Pagination.sortBy||this.currentSource1Pagination.descending!==this.source1Pagination.descending||this.currentSource1Pagination.page!==this.source1Pagination.page){var e=this.source1Pagination.page-1;this.source1Start=e*this.source1Count+1,this.getSource1Grid(this.source1SelNodeId)}},deep:!0},source2Pagination:{handler:function(){if(this.currentSource2Pagination.sortBy!==this.source2Pagination.sortBy||this.currentSource2Pagination.descending!==this.source2Pagination.descending||this.currentSource2Pagination.page!==this.source2Pagination.page){var e=this.source2Pagination.page-1;this.source2Start=e*this.source2Count+1,this.getSource2Grid(this.source2SelNodeId)}},deep:!0}},mounted:function(){this.getSource1Grid(!1),this.getSource2Grid(!1),this.getTree()},components:{"liquor-tree":Da["a"]}},Xa=Ka,Za=(a("8cb4"),a("891e")),Qa=Object(D["a"])(Xa,Wa,za,!1,null,"69307fa6",null),er=Qa.exports;T()(Qa,{VAlert:ce["a"],VBtn:Q["a"],VCard:I["a"],VCardText:L["c"],VCardTitle:L["d"],VContainer:B["a"],VDataTable:at["a"],VDialog:Be["a"],VFlex:N["a"],VIcon:G["a"],VLayout:M["a"],VList:ga["a"],VPagination:Za["a"],VProgressLinear:R["a"],VRow:Pa["a"],VSelect:W["a"],VSpacer:U["a"],VTextField:de["a"],VToolbar:E["a"],VToolbarTitle:it["b"],VTooltip:nt["a"]});var tr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[e.$store.state.uploadRunning?[a("br"),a("br"),a("br"),a("v-alert",{attrs:{type:"info",value:!0}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Wait for upload to finish"))+" ...")]),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)]:e._e(),!e.$store.state.denyAccess&!e.$store.state.uploadRunning?a("v-container",{attrs:{fluid:"","grid-list-lg":""}},[a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"350"},model:{value:e.$store.state.scoresProgressData.scoreDialog,callback:function(t){e.$set(e.$store.state.scoresProgressData,"scoreDialog",t)},expression:"$store.state.scoresProgressData.scoreDialog"}},[a("v-card",{attrs:{color:"white",dark:""}},[a("v-card-text",[a("center",[a("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.$store.state.scoresProgressData.scoreProgressTitle))]),a("br"),"percent"==e.$store.state.scoresProgressData.progressType?a("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.$store.state.scoresProgressData.scoreProgressPercent,color:"primary"}},[a("v-avatar",{attrs:{color:"indigo",size:"50px"}},[a("span",{staticClass:"white--text"},[a("b",[e._v(e._s(e.$store.state.scoresProgressData.scoreProgressPercent)+"%")])])])],1):e._e(),"indeterminate"==e.$store.state.scoresProgressData.progressType?a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"red"}}):e._e()],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"500px"},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.alertTitle)+" ")])],1),a("v-card-text",[e._v(" "+e._s(e.alertText)+" ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"success"},on:{click:function(t){e.alert=!1}}},[e._v(e._s(e.$t("App.hardcoded-texts.OK")))])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"500px"},model:{value:e.flagCommentDialog,callback:function(t){e.flagCommentDialog=t},expression:"flagCommentDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Add comment for this flag if any"))+" ")])],1),a("v-card-text",[a("v-textarea",{attrs:{"auto-grow":"",filled:"",color:"deep-purple",label:e.$t("App.hardcoded-texts.Flag Comment"),rows:"1"},model:{value:e.flagComment,callback:function(t){e.flagComment=t},expression:"flagComment"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"success"},on:{click:e.saveMatch}},[e._v(e._s(e.$t("App.hardcoded-texts.Continue")))])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",transition:"scale-transition",width:e.dialogWidth,height:"auto"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{attrs:{width:e.dialogWidth,height:"auto"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Matching"))+" "+e._s(e.selectedSource1Name)+" "+e._s(e.dialogWidth)+" ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",color:"yellow"},model:{value:e.searchPotential,callback:function(t){e.searchPotential=t},expression:"searchPotential"}}),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.back.apply(null,arguments)}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Parents"))+": "),a("b",[e._v(e._s(e._f("joinParentsAndReverse")(e.selectedSource1Parents)))]),a("v-spacer"),e.$store.state.recoLevel==e.$store.state.totalSource1Levels?[e._v(" "+e._s(e.$t("App.hardcoded-texts.Latitude"))+": "),a("b",[e._v(e._s(e.selectedSource1Lat))]),a("v-spacer"),e._v(" "+e._s(e.$t("App.hardcoded-texts.Longitude"))+": "),a("b",[e._v(e._s(e.selectedSource1Long))]),a("v-spacer")]:e._e()],2),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.potentialHeaders,items:e.allPotentialMatches,search:e.searchPotential},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[a("v-row",[a("v-col",{attrs:{md:"4"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{color:"error",small:""},nativeOn:{click:function(t){return e.match("flag",r.id,r.name,r.source2IdHierarchy,r.mappedParentName)}}},s),[a("v-icon",{attrs:{dark:"",left:""}},[e._v("mdi-bell")]),e._v(e._s(e.$t("App.hardcoded-texts.Flag"))+" ")],1)]}}],null,!0)},[a("span",[e._v(e._s(e.$t("App.hardcoded-texts.Mark the selected item as a match to be reviewed")))])])],1),a("v-col",{attrs:{md:"4"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{color:"primary",small:"",dark:""},nativeOn:{click:function(t){return e.match("match",r.id,r.name,r.source2IdHierarchy)}}},s),[a("v-icon",{attrs:{left:""}},[e._v("mdi-thumb-up")]),e._v(e._s(e.$t("App.hardcoded-texts.Save Match"))+" ")],1)]}}],null,!0)},[a("span",[e._v(e._s(e.$t("App.hardcoded-texts.Save the selected item as a match")))])])],1)],1)],1),a("td",[e._v(e._s(r.name))]),a("td",[e._v(e._s(r.id))]),a("td",[e._v(e._s(e._f("joinParentsAndReverse")(r.parents)))]),e.$store.state.recoLevel==e.$store.state.totalSource1Levels?a("td",[e._v(e._s(r.geoDistance))]):e._e(),a("td",[e._v(e._s(r.score))]),a("td",[e._v(e._s(e.potentialMatchComment(r)))])])]}}],null,!1,4213386967)},[a("template",{slot:"headers"},[a("tr",[e._l(e.potentialHeaders,(function(t){return["Score"==t.text?a("th",{key:t.text,staticClass:"column sortable active",attrs:{align:"left"},on:{click:function(a){return e.changeSort(t.value)}}},["up"==e.sort_arrow?a("v-icon",{attrs:{small:""}},[e._v("mdi-arrow-up")]):a("v-icon",{attrs:{small:""}},[e._v("mdi-arrow-down")]),e._v(" "+e._s(e.$t("App.hardcoded-texts."+t.text))+" "),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{icon:""}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}],null,!0)},[a("span",[e._v(e._s(e.$t("App.hardcoded-texts.The lower the score, the better the match")))])])],1):a("th",{key:t.text,attrs:{align:"left"}},[e._v(" "+e._s(e.$t("App.hardcoded-texts."+t.text))+" ")])]}))],2)])],2)],1),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-row",[a("v-col",{attrs:{justify:"1"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{color:"green",dark:""},nativeOn:{click:function(t){return e.noMatch("nomatch")}}},r),[a("v-icon",{attrs:{left:""}},[e._v("mdi-thumb-down")]),e._v(e._s(e.$t("App.hardcoded-texts.No Match"))+" ")],1)]}}],null,!1,4192140697)},[a("span",[e._v(e._s(e.$t("App.hardcoded-texts.Save this Source 1 location as having no match")))])])],1),a("v-col",{attrs:{justify:"1"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{color:"error",dark:""},nativeOn:{click:function(t){return e.noMatch("ignore")}}},r),[a("v-icon",{attrs:{left:""}},[e._v("mdi-thumb-down")]),e._v(e._s(e.$t("App.hardcoded-texts.Ignore"))+" ")],1)]}}],null,!1,4017255034)},[a("span",[e._v(e._s(e.$t("App.hardcoded-texts.Mark this source 1 location as being ignored")))])])],1),a("v-col",{attrs:{justify:"5"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.potentialAvailable?a("v-btn",e._g({staticStyle:{color:"white"},attrs:{color:"teal darken-6"},on:{click:function(t){e.showAllPotential=!e.showAllPotential}}},r),[e.showAllPotential?[e._v("Show Scored Suggestions")]:[a("v-icon",{attrs:{left:""}},[e._v("mdi-eye")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Show All Suggestions"))+" ")]],2):e._e()]}}],null,!1,1991447182)},[e.showAllPotential?a("span",[e._v(e._s(e.$t("App.hardcoded-texts.Limit to only scored suggestions")))]):a("span",[e._v(e._s(e.$t("App.hardcoded-texts.See all possible choices ignoring the score")))])])],1),a("v-col",{attrs:{justify:"7"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticStyle:{color:"white"},attrs:{color:"orange darken-2"},nativeOn:{click:function(t){return e.back.apply(null,arguments)}}},r),[a("v-icon",{attrs:{dark:"",left:""}},[e._v("mdi-arrow-left")]),e._v(e._s(e.$t("App.hardcoded-texts.Back"))+" ")],1)]}}],null,!1,2387511372)},[a("span",[e._v(e._s(e.$t("App.hardcoded-texts.Return without saving")))])])],1)],1)],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("appRecoExport")],1),a("v-spacer"),a("v-flex",{attrs:{xs2:""}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Reconciling"))+" "+e._s(e.currentLevelText))])]),a("v-spacer"),a("v-flex",{attrs:{xs1:"",sm2:"",md2:"",right:""}},[a("v-select",{attrs:{items:e.$store.state.levelArray,"item-value":e.$store.state.levelArray.value,"item-name":e.$store.state.levelArray.text,label:e.$t("App.hardcoded-texts.Level"),"single-line":""},on:{change:e.levelChanged},model:{value:e.$store.state.recoLevel,callback:function(t){e.$set(e.$store.state,"recoLevel",t)},expression:"$store.state.recoLevel"}})],1),a("v-flex",{attrs:{xs2:""}},[e.$store.state.scoreSavingProgressData.savingMatches?[e._v(" "+e._s(e.$t("App.hardcoded-texts.Saving matches for"))+" "+e._s(e.translateDataHeader("source1",e.$store.state.recoLevel-1))+" "),e.saveProgressTimedout?a("v-progress-linear",{attrs:{indeterminate:"",color:"red"}}):a("v-progress-linear",{attrs:{color:"error",width:"20",height:"20",value:e.$store.state.scoreSavingProgressData.percent}},[a("center",[a("span",{staticClass:"green--text"},[a("b",[e._v(e._s(e.$store.state.scoreSavingProgressData.percent)+"%")])])])],1)]:[[a("v-btn",{attrs:{color:"primary",dark:"",rounded:""},on:{click:function(t){return e.getScores(!1)}}},[a("v-icon",[e._v("mdi-repeat-once")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Recalculate Scores"))+" ")],1)]]],2),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){e.helpDialog=!0}}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}],null,!1,3148663098)},[a("span",[e._v(e._s(e.$t("App.hardcoded-texts.Help")))])])],1)],1),a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.About this page"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" "+e._s(e.$t("App.hardcoded-texts.This page let you map source 1 data with those in source2"))+" "),a("v-list",[e._v(" 1. "+e._s(e.$t("App.hardcoded-texts.Source 1 refer to the data source name selected as source 1 under data source pair section"))+" ")]),a("v-list",[e._v(" 2. "+e._s(e.$t("App.hardcoded-texts.Source 2 refer to the data source name selected as source 2 under data source pair section"))+" ")]),a("v-list",[e._v(" 3. "+e._s(e.$t("App.hardcoded-texts.After breaking a match, you will need to recalculate scores for the app to load potential matches of the broken location"))+" ")]),a("v-list",[e._v(" 4. "+e._s(e.$t("App.hardcoded-texts.FLAGGED Locations are the locations that will need to be reviewed before they are saved as matches"))+" ")]),a("v-list",[e._v(" 5. "+e._s(e.$t("App.hardcoded-texts.NO MATCHES - these are locations that do not matches anything from source 2"))+" ")])],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs2:"",right:""}},[a("div",{staticStyle:{"border-style":"solid","border-color":"green","text-align":"center"}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Source 1 Reconciliation Status")))]),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Matched")))])]),a("v-flex",{attrs:{"align-center":""}},[a("center",[a("b",[e._v(e._s(e.source1TotalMatched)+"/"+e._s(e.source1TotalRecords))])])],1),a("v-flex",[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentMatched,color:"green"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentMatched)+"%")])])],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Unmatched")))])]),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.source1TotalUnMatched)+"/"+e._s(e.source1TotalRecords))])])],1),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentUnMatched,color:"red"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentUnMatched)+"%")])])],1)],1)],1)],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Flagged")))])]),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.totalFlagged)+"/"+e._s(e.source1TotalRecords))])])],1),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentFlagged,color:"orange"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentFlagged)+"%")])])],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.No Match")))])]),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.source1TotalNoMatch)+"/"+e._s(e.source1TotalRecords))])])],1),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentNoMatch,color:"red"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentNoMatch)+"%")])])],1)],1)],1)],1)],1)],1)],1)]),a("v-flex",{attrs:{xs4:"","child-flex":""}},[a("v-card",{attrs:{color:"green lighten-2"}},[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Source 1 Unmatched"))+" "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUnmatchedSource1,callback:function(t){e.searchUnmatchedSource1=t},expression:"searchUnmatchedSource1"}})],1),e.loadingSource1Unmatched?[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]:[a("liquor-tree",{key:e.source1TreeUpdate,ref:"source1Tree",attrs:{data:e.source1Tree}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source1GridHeaders,items:e.source1Grid,search:e.searchUnmatchedSource1,light:""},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",["Done"===e.$store.state.recoStatus?a("td",{key:r.id},[e._v(e._s(r.name))]):a("td",{key:r.id,staticStyle:{cursor:"pointer"},on:{click:function(t){return e.getPotentialMatch(r.id)}}},[e._v(e._s(r.name))]),e._l(r.parents,(function(t,s){return a("td",{key:r.id+s},[s!=r.parents.length-1?[e._v(" "+e._s(t)+" ")]:e._e()],2)}))],2)]}}],null,!1,4039369149)})]],2)],1),a("v-flex",{attrs:{xs4:""}},[a("v-card",{attrs:{color:"blue lighten-2",dark:""}},[a("v-card-title",{attrs:{"primary-title":""}},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Source 2 Unmatched"))+" "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUnmatchedSource2,callback:function(t){e.searchUnmatchedSource2=t},expression:"searchUnmatchedSource2"}})],1),e.loadingSource2Unmatched?[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]:[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.source1UnmatchedHeaders,items:e.$store.state.source2UnMatched,search:e.searchUnmatchedSource2,light:""},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.name)+" "),a("br"),e._v(""+e._s(e._f("joinParentsAndReverse")(r.parents)))])])]}}],null,!1,3094039347)})]],2)],1),a("v-flex",{attrs:{xs2:"",right:""}},[a("div",{staticStyle:{"border-style":"solid","border-color":"green","text-align":"center"}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Source 2 Reconciliation Status")))]),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Matched")))])]),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.source2TotalMatched)+"/"+e._s(e.source2TotalRecords))])])],1),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentMatched,color:"green"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source2PercentMatched)+"%")])])],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Unmatched")))])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.source2TotalUnmatched)+"/"+e._s(e.source2TotalRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentUnmatched,color:"red"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source2PercentUnmatched)+"%")])])],1)],1)],1)],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Flagged")))])]),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.totalFlagged)+"/"+e._s(e.source2TotalRecords))])])],1),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentFlagged,color:"orange"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source2PercentFlagged)+"%")])])],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"align-center":""}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Not in Source 1")))])]),a("v-flex",{attrs:{xs1:""}},[a("center",[a("b",[e._v(e._s(e.source2NotInSource1))])])],1),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentNotInSource1,color:"red"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source2PercentNotInSource1)+"%")])])],1)],1)],1)],1)],1)],1)],1)])],1),a("v-layout",{attrs:{column:"",wrap:""}},[a("v-tabs",{attrs:{"icons-and-text":"",centered:"",grow:"",dark:"","background-color":"cyan"}},[a("v-tabs-slider",{attrs:{color:"red"}}),a("v-tab",{key:"match"},[e._v(" "+e._s(e.$t("App.hardcoded-texts.MATCHED"))+" ("+e._s(e.source1TotalMatched)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-up")])],1),a("v-tab",{key:"nomatch"},[e._v(" "+e._s(e.$t("App.hardcoded-texts.NO MATCH"))+" ("+e._s(e.source1TotalNoMatch)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-down")])],1),a("v-tab",{key:"ignore"},[e._v(" "+e._s(e.$t("App.hardcoded-texts.IGNORED"))+" ("+e._s(e.source1TotalIgnore)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-down")])],1),a("v-tab",{key:"flagged"},[e._v(" "+e._s(e.$t("App.hardcoded-texts.FLAGGED"))+" ("+e._s(e.totalFlagged)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-bell")])],1),a("v-tab-item",{key:"match"},[null!=e.$store.state.matchedContent?[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:e.$t("App.hardcoded-texts.Search"),"single-line":"","hide-details":""},model:{value:e.searchMatched,callback:function(t){e.searchMatched=t},expression:"searchMatched"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.matchedHeaders,items:e.$store.state.matchedContent,search:e.searchMatched},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.source1Name))]),a("td",[e._v(e._s(r.source1Id))]),a("td",[e._v(e._s(r.source2Name))]),a("td",[a("v-treeview",{attrs:{items:r.source2IdHierarchy}})],1),r.matchComments?a("td",[e._v(e._s(r.matchComments.join(", ")))]):a("td"),a("td",["Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(t){return e.breakMatch(r.source1Id)}}},[a("v-icon",[e._v("mdi-undo")]),e._v(e._s(e.$t("App.hardcoded-texts.Break Match"))+" ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(t){return e.breakMatch(r.source1Id)}}},[a("v-icon",[e._v("mdi-undo")]),e._v(e._s(e.$t("App.hardcoded-texts.Break Match"))+" ")],1)],1)])]}}],null,!1,1733902395)})]:[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2),a("v-tab-item",{key:"nomatch"},[null!=e.$store.state.noMatchContent?[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:e.$t("App.hardcoded-texts.Search"),"single-line":"","hide-details":""},model:{value:e.searchNotMatched,callback:function(t){e.searchNotMatched=t},expression:"searchNotMatched"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.noMatchHeaders,items:e.$store.state.noMatchContent,search:e.searchNotMatched},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.source1Name))]),a("td",[e._v(e._s(r.source1Id))]),a("td",[e._v(e._s(r.parents.join("->")))]),a("td",["Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(t){return e.breakNoMatch(r.source1Id,"nomatch")}}},[a("v-icon",[e._v("mdi-cached")]),e._v(e._s(e.$t("App.hardcoded-texts.Break No Match"))+" ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(t){return e.breakNoMatch(r.source1Id,"nomatch")}}},[a("v-icon",[e._v("mdi-cached")]),e._v(e._s(e.$t("App.hardcoded-texts.Break No Match"))+" ")],1)],1)])]}}],null,!1,3335824091)})]:[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2),a("v-tab-item",{key:"ignore"},[null!=e.$store.state.ignoreContent?[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:e.$t("App.hardcoded-texts.Search"),"single-line":"","hide-details":""},model:{value:e.searchIgnore,callback:function(t){e.searchIgnore=t},expression:"searchIgnore"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.noMatchHeaders,items:e.$store.state.ignoreContent,search:e.searchIgnore},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("td",[e._v(e._s(r.source1Name))]),a("td",[e._v(e._s(r.source1Id))]),a("td",[e._v(e._s(r.parents.join("->")))]),a("td",["Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(t){return e.breakNoMatch(r.source1Id,"ignore")}}},[a("v-icon",[e._v("mdi-cached")]),e._v(e._s(e.$t("App.hardcoded-texts.Break Ignore"))+" ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(t){return e.breakNoMatch(r.source1Id,"ignore")}}},[a("v-icon",[e._v("mdi-cached")]),e._v(e._s(e.$t("App.hardcoded-texts.Break Ignore"))+" ")],1)],1)]}}],null,!1,288742922)})]:[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2),a("v-tab-item",{key:"flagged"},[null!=e.$store.state.flagged?[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:e.$t("App.hardcoded-texts.Search"),"single-line":"","hide-details":""},model:{value:e.searchFlagged,callback:function(t){e.searchFlagged=t},expression:"searchFlagged"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.flaggedHeaders,items:e.$store.state.flagged,search:e.searchFlagged},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[a("tr",[a("td",[e._v(e._s(r.source1Name))]),a("td",[e._v(e._s(r.source1Id))]),a("td",[e._v(e._s(r.source2Name))]),a("td",[a("v-treeview",{attrs:{items:r.source2IdHierarchy}})],1),a("td",[e._v(e._s(r.flagComment))]),a("td",["Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"primary",small:""},on:{click:function(t){return e.acceptFlag(r.source1Id)}}},[a("v-icon",[e._v("mdi-thumb-up")]),e._v(e._s(e.$t("App.hardcoded-texts.Confirm Match"))+" ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"primary",small:""},on:{click:function(t){return e.acceptFlag(r.source1Id)}}},[a("v-icon",[e._v("mdi-thumb-up")]),e._v(e._s(e.$t("App.hardcoded-texts.Confirm Match"))+" ")],1),"Done"==e.$store.state.recoStatus?a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{disabled:"",color:"error",small:""},on:{click:function(t){return e.unFlag(r.source1Id)}}},[a("v-icon",[e._v("mdi-cached")]),e._v(e._s(e.$t("App.hardcoded-texts.Release"))+" ")],1):a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{color:"error",small:""},on:{click:function(t){return e.unFlag(r.source1Id)}}},[a("v-icon",[e._v("mdi-cached")]),e._v(e._s(e.$t("App.hardcoded-texts.Release"))+" ")],1)],1)])]}}],null,!1,1560261786)})]:[a("v-progress-linear",{attrs:{size:70,indeterminate:"",color:"amber"}})]],2)],1)],1),a("v-layout",["yes"!=e.goNextLevel||e.$store.state.scoreSavingProgressData.savingMatches?e._e():a("v-flex",{attrs:{xs1:"",sm4:"",md2:""}},[a("v-btn",{attrs:{color:"primary",rounded:""},on:{click:function(t){return e.levelChanged(e.$store.state.recoLevel+1)}}},[a("v-icon",[e._v("mdi-forward")]),e._v(e._s(e.$t("App.hardcoded-texts.Proceed to"))+" "+e._s(e.nextLevelText)+" ")],1)],1),"yes"==e.lastLevelDone?a("v-flex",{attrs:{xs1:"",sm4:"",md2:""}},[a("v-btn",{attrs:{color:"primary",rounded:""},on:{click:function(t){return e.$router.push({name:"FacilityRecoStatus"})}}},[a("v-icon",[e._v("mdi-view-dashboard")]),e._v(e._s(e.$t("App.hardcoded-texts.Reconciliation Status"))+" ")],1)],1):e._e()],1)],1):e._e()],2)},ar=[],rr=(a("a434"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}},[a("v-dialog",{attrs:{persistent:"",width:"620px"},model:{value:e.downloadDialog,callback:function(t){e.downloadDialog=t},expression:"downloadDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.$t("App.hardcoded-texts.Select file type to download"))+" ")]),a("v-spacer"),a("v-icon",{on:{click:e.closeDownloadDialog}},[e._v("mdi-close")])],1),a("v-card-text"),a("v-card-actions",[a("v-btn",{attrs:{rounded:"",color:"info"},on:{click:e.downloadMatched}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-multiple-outline")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Matched"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{rounded:"",color:"info"},on:{click:e.downloadSource1Unmatched}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-multiple-outline")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Source1 Unmatched"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{rounded:"",color:"info"},on:{click:e.downloadSource2Unmatched}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-multiple-outline")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.Source2 Unmatched"))+" ")],1)],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-btn",{attrs:{color:"success",rounded:"",small:""},on:{click:e.csvExport}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-multiple-outline")]),e.loadingCSV?a("v-progress-circular",{attrs:{indeterminate:"",color:"red"}}):e._e(),e._v(" "+e._s(e.$t("App.hardcoded-texts.CSV Export"))+" ")],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-btn",{attrs:{color:"success",rounded:"",small:""},on:{click:e.fhirExport}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-multiple-outline")]),e.loadingFHIR?a("v-progress-circular",{attrs:{indeterminate:"",color:"red"}}):e._e(),e._v(" "+e._s(e.$t("App.hardcoded-texts.FHIR Export"))+" ")],1)],1)],1)],1)}),sr=[],or={mixins:[Ya,_],data:function(){return{loadingCSV:!1,loadingFHIR:!1,downloadDialog:!1,matchedDownloadData:"",unmatchedSource1DownloadData:"",unmatchedSource2DownloadData:"",downloadType:""}},methods:{closeDownloadDialog:function(){this.downloadDialog=!1,this.matchedDownloadData="",this.unmatchedSource1DownloadData="",this.unmatchedSource2DownloadData=""},matchedLocations:function(e){var t=this.$store.state.activePair.source1.name,a=this.$store.state.activePair.source2.name,r=this.$store.state.activePair.name,s=JSON.stringify(this.$store.state.levelMapping.source1),o=JSON.stringify(this.$store.state.levelMapping.source2),i=this.getLimitOrgIdOnActivePair().source1LimitOrgId,n=this.getLimitOrgIdOnActivePair().source2LimitOrgId,c={partition1:t,partition2:a,mappingPartition:r,type:e,source1LimitOrgId:i,source2LimitOrgId:n,levelMapping1:s,levelMapping2:o};return u.a.get("/match/matchedLocations",{params:c})},unMatchedLocations:function(e){var t=this.$store.state.activePair.source1.name,a=this.$store.state.activePair.source2.name,r=this.$store.state.activePair.name,s=this.$store.state.levelMapping.source1,o=this.$store.state.levelMapping.source2,i=this.getLimitOrgIdOnActivePair().source1LimitOrgId,n=this.getLimitOrgIdOnActivePair().source2LimitOrgId,c={partition1:t,partition2:a,mappingPartition:r,type:e,source1LimitOrgId:i,source2LimitOrgId:n,levelMapping1:s,levelMapping2:o};return u.a.get("/match/unmatchedLocations",{params:c})},csvExport:function(){this.loadingCSV=!0;var e=this;u.a.all([this.matchedLocations("CSV"),this.unMatchedLocations("CSV")]).then(u.a.spread((function(t,a){e.loadingCSV=!1,e.downloadDialog=!0,e.downloadType="csv",e.matchedDownloadData=t.data,e.unmatchedSource1DownloadData=a.data.unmatchedSource1CSV,e.unmatchedSource2DownloadData=a.data.unmatchedSource2CSV})))},fhirExport:function(){this.loadingFHIR=!0;var e=this;u.a.all([this.matchedLocations("FHIR"),this.unMatchedLocations("FHIR")]).then(u.a.spread((function(t,a){e.loadingFHIR=!1,e.downloadDialog=!0,e.downloadType="fhir",e.matchedDownloadData=t.data,e.unmatchedSource1DownloadData=a.data.unmatchedSource1mCSD,e.unmatchedSource2DownloadData=a.data.unmatchedSource2mCSD})))},downloadMatched:function(){var e,t;"fhir"===this.downloadType?(e="json",t="data:text/json;charset=utf-8,",this.matchedDownloadData=JSON.stringify(this.matchedDownloadData)):(e="csv",t="data:text/csv;charset=utf-8,");var a=t+escape(this.matchedDownloadData),r=document.createElement("a");r.setAttribute("href",a),r.setAttribute("download","matched".concat(this.getSource1()).concat(this.getSource2(),".").concat(e)),r.click()},downloadSource1Unmatched:function(){var e,t;"fhir"===this.downloadType?(e="json",t="data:text/json;charset=utf-8,",this.unmatchedSource1DownloadData=JSON.stringify(this.unmatchedSource1DownloadData)):(e="csv",t="data:text/csv;charset=utf-8,");var a=t+escape(this.unmatchedSource1DownloadData),r=document.createElement("a");r.setAttribute("href",a),r.setAttribute("download","unmatched".concat(this.getSource1(),".").concat(e)),r.click()},downloadSource2Unmatched:function(){var e,t;"fhir"===this.downloadType?(e="json",t="data:text/json;charset=utf-8,",this.unmatchedSource2DownloadData=JSON.stringify(this.unmatchedSource2DownloadData)):(e="csv",t="data:text/csv;charset=utf-8,");var a=t+escape(this.unmatchedSource2DownloadData),r=document.createElement("a");r.setAttribute("href",a),r.setAttribute("download","unmatched".concat(this.getSource2(),".").concat(e)),r.click()}}},ir=or,nr=Object(D["a"])(ir,rr,sr,!1,null,null,null),cr=nr.exports;T()(nr,{VBtn:Q["a"],VCard:I["a"],VCardActions:L["a"],VCardText:L["c"],VContainer:B["a"],VDialog:Be["a"],VFlex:N["a"],VIcon:G["a"],VLayout:M["a"],VProgressCircular:Ge["a"],VSpacer:U["a"],VToolbar:E["a"],VToolbarTitle:it["b"]});var lr={mixins:[Ya,_],data:function(){return{clientId:"",flagCommentDialog:!1,flagComment:"",helpDialog:!1,type:"",source2Id:"",source2Name:"",sort_arrow:"up",pagination:{sortBy:"score"},recoLevel:0,searchUnmatchedSource2:"",searchUnmatchedSource1:"",searchPotential:"",searchMatched:"",searchNotMatched:"",searchIgnore:"",searchFlagged:"",potentialMatches:[],showAllPotential:!1,alertText:"",alertTitle:"",alert:!1,saveProgressTimedout:!1,source1Parents:{},source1Filter:{text:"",level:""},source1TreeUpdate:0,selectedSource1:{},selectedSource1Name:null,selectedSource1Id:null,selectedSource1Lat:null,selectedSource1Long:null,selectedSource1Parents:[],dialog:!1,dialogWidth:"",source1UnmatchedHeaders:[{text:this.$t("App.hardcoded-texts.Location"),value:"name"}],noMatchHeaders:[{text:this.$t("App.hardcoded-texts.Source1 Location"),value:"source1Name"},{text:this.$t("App.hardcoded-texts.Source1 ID"),value:"source1Id"},{text:this.$t("App.hardcoded-texts.Parents"),value:"parents"}],flaggedHeaders:[{text:this.$t("App.hardcoded-texts.Source1 Location"),value:"source1Name"},{text:this.$t("App.hardcoded-texts.Source1 ID"),value:"source1Id"},{text:this.$t("App.hardcoded-texts.Source2 Location"),value:"source2Name"},{text:this.$t("App.hardcoded-texts.Source2 ID"),value:"source2Id"},{text:this.$t("App.hardcoded-texts.Comment"),value:"flagComment"}]}},filters:{removeCountry:function(e){var t=e.slice(0);return t.splice(t.length-1,1),t},joinParents:function(e){return e.join("->")},joinParentsAndReverse:function(e){return Object(Me["a"])(e).reverse().join("->")}},methods:{changeSort:function(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1),this.pagination.descending?this.sort_arrow="mdi-down":this.sort_arrow="mdi-up"},addListener:function(){var e=this,t=function t(){e.$refs&&e.$refs.source1Tree?e.$refs.source1Tree.$on("node:selected",(function(t){e.source1Filter.text=t.data.text;var a=1;while(t.parent)t=t.parent,a++;e.source1Filter.level=a})):setTimeout((function(){t()}),500)};t()},levelChanged:function(e){this.$store.state.recoLevel!==e&&(this.$store.state.recoLevel=e,this.getScores(!1),this.$store.state.recoLevel===this.$store.state.totalSource1Levels?this.dialogWidth="1460px":this.dialogWidth="1190px")},getBuildingPotentialMatches:function(e){var t=this;this.potentialMatches=[];var a=this.$store.state.recoLevel,r=this.$store.state.totalSource1Levels,s=this.$store.state.totalSource2Levels;if(this.clientId){var o=this.clientId[this.clientId.length-1];o=parseInt(o),o+=1,this.clientId+=o}else{var i=this.$store.state.clientId[this.$store.state.clientId.length-1];i=parseInt(i),i+=1,this.clientId=this.$store.state.clientId+i}var n=this.$store.state.activePair.userID,c=this.getLimitOrgIdOnActivePair().source1LimitOrgId,l=this.getLimitOrgIdOnActivePair().source2LimitOrgId,d=JSON.stringify(this.$store.state.config.generalConfig.reconciliation.parentConstraint),p=this.$store.state.activePair.source1.name,h=this.$store.state.activePair.source2.name,v=this.$store.state.activePair.name,g="id=".concat(e,"&partition1=").concat(p,"&partition2=").concat(h,"&mappingPartition=").concat(v);g+="&source1LimitOrgId=".concat(c,"&source2LimitOrgId=").concat(l,"&totalSource1Levels=").concat(r,"&totalSource2Levels=").concat(s),g+="&recoLevel=".concat(a,"&clientId=").concat(this.clientId,"&userID=").concat(n,"&parentConstraint=").concat(d,"&getPotential=",!0),this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Getting potential matches from server",u.a.get("/match/reconcile/?"+g).then((function(e){if(t.$store.state.dynamicProgress=!1,e.data){var a=JSON.parse(e.data).responseData.scoreResults;if(a.length>0){var r=a[0],s=r.exactMatch;if(Object.keys(s).length>0)return t.$store.state.dialogError=!0,t.$store.state.errorDescription="This location is already mapped, please recalculate scores to get changes",t.$store.state.errorTitle="Info",void(t.$store.state.errorColor="error");for(var o in t.selectedSource1=r.source1,t.selectedSource1Name=r.source1.name,t.selectedSource1Parents=r.source1.parents,t.selectedSource1Lat=r.source1.lat,t.selectedSource1Long=r.source1.long,t.selectedSource1Id=r.source1.id,r.potentialMatches){var i=function(e){var a=r.potentialMatches[o][e];return c=t.$store.state.matchedContent.find((function(e){return e.source2Id===a.id})),l=t.$store.state.flagged.find((function(e){return e.source2Id===a.id})),c||l?"continue":void t.potentialMatches.push({score:o,name:a.name,id:a.id,source2IdHierarchy:a.source2IdHierarchy,lat:a.lat,long:a.long,geoDistance:a.geoDistance,parents:a.parents,mappedParentName:a.mappedParentName})};for(var n in r.potentialMatches[o]){var c,l;i(n)}}}t.dialog=!0}else t.dialog=!0})).catch((function(e){console.log(e)}))},getJurisdictionPotentialMatches:function(e){var t=this;this.potentialMatches=[],this.showAllPotential=!1;var a,r=Object(c["a"])(this.$store.state.scoreResults);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(s.source1.id===e)for(var o in this.selectedSource1=s.source1,this.selectedSource1Name=s.source1.name,this.selectedSource1Parents=s.source1.parents,this.selectedSource1Lat=s.source1.lat,this.selectedSource1Long=s.source1.long,this.selectedSource1Id=s.source1.id,s.potentialMatches){var i=function(e){var a=s.potentialMatches[o][e];return l=t.$store.state.matchedContent.find((function(e){return e.source2Id===a.id})),d=t.$store.state.flagged.find((function(e){return e.source2Id===a.id})),l||d?"continue":void t.potentialMatches.push({score:o,name:a.name,id:a.id,source2IdHierarchy:a.source2IdHierarchy,lat:a.lat,long:a.long,geoDistance:a.geoDistance,parents:a.parents,mappedParentName:a.mappedParentName})};for(var n in s.potentialMatches[o]){var l,d;i(n)}}}}catch(u){r.e(u)}finally{r.f()}this.dialog=!0},getPotentialMatch:function(e){this.getBuildingPotentialMatches(e)},potentialMatchComment:function(e){var t="";if(this.$store.state.recoLevel===this.$store.state.totalSource1Levels){var a=[],r=[];if(this.selectedSource1.source1IdHierarchy){a.push(this.selectedSource1.source1IdHierarchy[0].id);var s,o=Object(c["a"])(this.selectedSource1.source1IdHierarchy[0].children);try{for(o.s();!(s=o.n()).done;){var i=s.value;a.push(i.id)}}catch(v){o.e(v)}finally{o.f()}}if(e.source2IdHierarchy){r.push(e.source2IdHierarchy[0].id);var n,l=Object(c["a"])(e.source2IdHierarchy[0].children);try{for(l.s();!(n=l.n()).done;){var d=n.value;r.push(d.id)}}catch(v){l.e(v)}finally{l.f()}}var u=a.some((function(e){return r.indexOf(e)>=0}));u||(t&&(t+=", "),t+="ID differ")}e.name.toLowerCase()!==this.selectedSource1.name.toLowerCase()&&(t&&(t+=", "),t+="Names differ");var p=e.mappedParentName,h=this.selectedSource1.parents[0];return h!==p&&(t&&(t+=", "),t+="Parents differ"),t},match:function(e,t,a,r,s){if(this.matchType=e,this.source2Id=t,this.source2Name=a,this.source2IdHierarchy=r,this.mappedParentName=s,null===t)return this.alert=!0,this.alertTitle="Information",void(this.alertText="Select Source 2 Location to match against Source 1 Location");"flag"===e?this.flagCommentDialog=!0:this.saveMatch()},saveMatch:function(){var e=this;this.flagCommentDialog=!1,this.$store.state.progressTitle="Saving match",this.$store.state.dynamicProgress=!0;var t=this.$store.state.activePair.source1.name,a=this.$store.state.activePair.source2.name,r=this.$store.state.activePair.name,s=new FormData;s.append("source1Id",this.selectedSource1Id),s.append("source2Id",this.source2Id),s.append("flagComment",this.flagComment),s.append("partition1",t),s.append("partition2",a),s.append("mappingPartition",r),s.append("recoLevel",this.$store.state.recoLevel),s.append("totalLevels",this.$store.state.totalSource1Levels),s.append("pairId",this.$store.state.activePair.id),u.a.post("/match/performMatch/"+this.matchType,s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.$store.state.dynamicProgress=!1;var a=null;for(var r in e.$store.state.source2UnMatched)e.$store.state.source2UnMatched[r].id===e.source2Id&&(a=e.$store.state.source2UnMatched[r].parents,e.$store.state.source2UnMatched.splice(r,1));for(var s in e.$store.state.source1UnMatched)e.$store.state.source1UnMatched[s].id===e.selectedSource1Id&&("match"===e.matchType?(++e.$store.state.totalAllMapped,e.$store.state.matchedContent.push({source1Name:e.selectedSource1Name,source1Id:e.selectedSource1Id,source1Parents:e.$store.state.source1UnMatched[s].parents,source2Name:e.source2Name,source2Id:e.source2Id,source2IdHierarchy:e.source2IdHierarchy,mappedParentName:e.mappedParentName,source2Parents:a,matchComments:t.data.matchComments})):"flag"===e.matchType&&(++e.$store.state.totalAllFlagged,e.$store.state.flagged.push({source1Name:e.selectedSource1Name,source1Id:e.selectedSource1Id,source1Parents:e.$store.state.source1UnMatched[s].parents,source2Name:e.source2Name,source2Id:e.source2Id,source2IdHierarchy:e.source2IdHierarchy,mappedParentName:e.mappedParentName,source2Parents:a,flagComment:e.flagComment})),e.$store.state.source1UnMatched.splice(s,1));e.flagComment="",e.selectedSource1Id=null,e.selectedSource1Name=null,e.dialog=!1})).catch((function(t){e.flagComment="",e.$store.state.dynamicProgress=!1,e.alert=!0,e.alertTitle="Error",e.alertText=t.response.data.error,e.selectedSource1Id=null,e.selectedSource1Name=null,e.dialog=!1}))},acceptFlag:function(e){var t=this;this.$store.state.progressTitle="Accepting flag",this.$store.state.dynamicProgress=!0;var a=new FormData;a.append("source1Id",e),a.append("pairId",this.$store.state.activePair.id);var r=this.$store.state.activePair.name;u.a.post("/match/acceptFlag/"+r,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var a in t.$store.state.dynamicProgress=!1,t.$store.state.flagged)t.$store.state.flagged[a].source1Id===e&&(t.$store.state.matchedContent.push({source1Name:t.$store.state.flagged[a].source1Name,source1Id:t.$store.state.flagged[a].source1Id,source1Parents:t.$store.state.flagged[a].source1Parents,source2Name:t.$store.state.flagged[a].source2Name,source2Id:t.$store.state.flagged[a].source2Id,source2IdHierarchy:t.$store.state.flagged[a].source2IdHierarchy,mappedParentName:t.$store.state.flagged[a].mappedParentName,source2Parents:t.$store.state.flagged[a].source2Parents}),t.$store.state.flagged.splice(a,1),++t.$store.state.totalAllMapped,--t.$store.state.totalAllFlagged)})).catch((function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.selectedSource1Id=null,t.selectedSource1Name=null,t.dialog=!1,console.log(e)}))},breakMatch:function(e){var t=this;this.$store.state.progressTitle="Breaking match",this.$store.state.dynamicProgress=!0;var a=new FormData,r=this.$store.state.activePair.source1.name,s=this.$store.state.activePair.source2.name,o=this.$store.state.activePair.name;a.append("partition1",r),a.append("partition2",s),a.append("mappingPartition",o),a.append("source1Id",e),a.append("pairId",this.$store.state.activePair.id),u.a.post("/match/breakMatch",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var a in t.$store.state.dynamicProgress=!1,t.$store.state.matchedContent)t.$store.state.matchedContent[a].source1Id===e&&(t.$store.state.source1UnMatched.push({name:t.$store.state.matchedContent[a].source1Name,id:t.$store.state.matchedContent[a].source1Id,parents:t.$store.state.matchedContent[a].source1Parents}),t.$store.state.source2UnMatched.push({name:t.$store.state.matchedContent[a].source2Name,id:t.$store.state.matchedContent[a].source2Id,source2IdHierarchy:t.$store.state.matchedContent[a].source2IdHierarchy,mappedParentName:t.$store.state.matchedContent[a].mappedParentName,parents:t.$store.state.matchedContent[a].source2Parents}),t.$store.state.matchedContent.splice(a,1),--t.$store.state.totalAllMapped)})).catch((function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.selectedSource1Id=null,t.selectedSource1Name=null,t.dialog=!1,console.log(e)}))},unFlag:function(e){var t=this;this.$store.state.progressTitle="Unflagging match",this.$store.state.dynamicProgress=!0;var a=new FormData,r=this.$store.state.activePair.userID,s=this.getDatasourceOwner();a.append("source1Id",e),a.append("pairId",this.$store.state.activePair.id),u.a.post("/match/breakMatch/"+this.getSource1()+"/"+this.getSource2()+"/"+s.source1Owner+"/"+s.source2Owner+"/"+r,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var a in t.$store.state.dynamicProgress=!1,t.$store.state.flagged)t.$store.state.flagged[a].source1Id===e&&(t.$store.state.source1UnMatched.push({name:t.$store.state.flagged[a].source1Name,id:t.$store.state.flagged[a].source1Id,parents:t.$store.state.flagged[a].source1Parents}),t.$store.state.source2UnMatched.push({name:t.$store.state.flagged[a].source2Name,id:t.$store.state.flagged[a].source2Id,source2IdHierarchy:t.$store.state.flagged[a].source2IdHierarchy,mappedParentName:t.$store.state.flagged[a].mappedParentName,parents:t.$store.state.flagged[a].source2Parents}),t.$store.state.flagged.splice(a,1),--t.$store.state.totalAllFlagged)})).catch((function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.selectedSource1Id=null,t.selectedSource1Name=null,t.dialog=!1,console.log(e)}))},breakNoMatch:function(e,t){var a=this;this.$store.state.progressTitle="Breaking no match",this.$store.state.dynamicProgress=!0;var r=new FormData,s=this.$store.state.activePair.name;r.append("mappingPartition",s),r.append("source1Id",e),r.append("pairId",this.$store.state.activePair.id),u.a.post("/match/breakNoMatch/"+t,r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){if(a.$store.state.dynamicProgress=!1,"nomatch"===t)for(var r in a.$store.state.noMatchContent)a.$store.state.noMatchContent[r].source1Id===e&&(a.$store.state.source1UnMatched.push({name:a.$store.state.noMatchContent[r].source1Name,id:a.$store.state.noMatchContent[r].source1Id,parents:a.$store.state.noMatchContent[r].parents}),a.$store.state.noMatchContent.splice(r,1),--a.$store.state.totalAllNoMatch);else if("ignore"===t)for(var s in a.$store.state.ignoreContent)a.$store.state.ignoreContent[s].source1Id===e&&(a.$store.state.source1UnMatched.push({name:a.$store.state.ignoreContent[s].source1Name,id:a.$store.state.ignoreContent[s].source1Id,parents:a.$store.state.ignoreContent[s].parents}),a.$store.state.ignoreContent.splice(s,1),--a.$store.state.totalAllIgnore)})).catch((function(e){a.$store.state.dynamicProgress=!1,a.alert=!0,a.alertTitle="Error",a.alertText=e.response.data.error,a.selectedSource1Id=null,a.selectedSource1Name=null,a.dialog=!1,console.log(e)}))},noMatch:function(e){var t=this;this.$store.state.progressTitle="Saving as no match",this.$store.state.dynamicProgress=!0;var a=this.$store.state.activePair.source1.name,r=this.$store.state.activePair.source2.name,s=this.$store.state.activePair.name,o=new FormData;o.append("partition1",a),o.append("partition2",r),o.append("mappingPartition",s),o.append("source1Id",this.selectedSource1Id),o.append("recoLevel",this.$store.state.recoLevel),o.append("totalLevels",this.$store.state.totalSource1Levels),o.append("pairId",this.$store.state.activePair.id),u.a.post("/match/noMatch/".concat(e),o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){if(t.$store.state.dynamicProgress=!1,"nomatch"===e)for(var a in t.$store.state.source1UnMatched)t.$store.state.source1UnMatched[a].id===t.selectedSource1Id&&(t.$store.state.noMatchContent.push({source1Name:t.selectedSource1Name,source1Id:t.selectedSource1Id,parents:t.$store.state.source1UnMatched[a].parents}),++t.$store.state.totalAllNoMatch,t.$store.state.source1UnMatched.splice(a,1));else if("ignore"===e)for(var r in t.$store.state.source1UnMatched)t.$store.state.source1UnMatched[r].id===t.selectedSource1Id&&(t.$store.state.ignoreContent.push({source1Name:t.selectedSource1Name,source1Id:t.selectedSource1Id,parents:t.$store.state.source1UnMatched[r].parents}),++t.$store.state.totalAllIgnore,t.$store.state.source1UnMatched.splice(r,1));t.dialog=!1,t.selectedSource1Id=null,t.selectedSource1Name=null})).catch((function(e){t.$store.state.dynamicProgress=!1,t.alert=!0,t.alertTitle="Error",t.alertText=e.response.data.error,t.dialog=!1,t.selectedSource1Id=null,t.selectedSource1Name=null}))},back:function(){this.searchPotential="",this.dialog=!1}},computed:{nextLevelText:{get:function(){return this.translateDataHeader("source1",this.$store.state.recoLevel)},set:function(){}},currentLevelText:{get:function(){return this.translateDataHeader("source1",this.$store.state.recoLevel-1)},set:function(){}},matchedHeaders:function(){var e=[{text:this.$t("App.hardcoded-texts.Source1 Location"),value:"source1Name"},{text:this.$t("App.hardcoded-texts.Source1 ID"),value:"source1Id"},{text:this.$t("App.hardcoded-texts.Source2 Location"),value:"source2Name"},{text:this.$t("App.hardcoded-texts.Source2 ID"),value:"source2Id"},{text:this.$t("App.hardcoded-texts.Match Comment"),value:"matchComments"}];return e},source1GridHeaders:function(){var e=[{text:this.$t("App.hardcoded-texts.Location"),value:"name"}];if(this.$store.state.source1UnMatched.length>0)for(var t=this.$store.state.source1UnMatched[0].parents.length;t>0;t--)e.push({text:"Level "+t,value:"level"+(t+1)});return e.splice(1,1),e},potentialHeaders:function(){var e=[];return e.push({sortable:!1},{text:this.$t("App.hardcoded-texts.Source 2 Location"),value:"name",sortable:!1},{text:this.$t("App.hardcoded-texts.ID"),value:"id",sortable:!1},{text:this.$t("App.hardcoded-texts.Parent"),value:"source2Parent",sortable:!1}),this.$store.state.recoLevel===this.$store.state.totalSource1Levels&&e.push({text:this.$t("App.hardcoded-texts.Geo Dist (Miles)"),value:"geodist",sortable:!1}),e.push({text:this.$t("App.hardcoded-texts.Score"),value:"score"}),e.push({text:this.$t("App.hardcoded-texts.Comment"),value:"comment",sortable:!1}),e},potentialAvailable:function(){return null!==this.$store.state.source2UnMatched&&this.$store.state.source2UnMatched.length>this.potentialMatches.length},allPotentialMatches:function(){var e=this;if(null!==this.$store.state.source2UnMatched&&this.$store.state.source2UnMatched.length>this.potentialMatches.length&&this.showAllPotential){var t,a=[],r=Object(c["a"])(this.$store.state.source2UnMatched);try{var s=function(){var r=t.value,s=e.potentialMatches.find((function(e){return e.id===r.id}));s||(r.score="N/A",a.push(r))};for(r.s();!(t=r.n()).done;)s()}catch(o){r.e(o)}finally{r.f()}return this.potentialMatches.concat(a)}return this.potentialMatches},source1Tree:function(){this.addListener();var e=function e(t,a){for(var r in t){var s={text:r,children:[]};e(t[r],s.children),0===s.children.length&&delete s.children,a.push(s)}},t=[];return 1===Object.keys(this.$store.state.source1Parents).length&&"null"===Object.keys(this.$store.state.source1Parents)[0]||e(this.$store.state.source1Parents,t),t},source1Grid:function(){var e=this;if(this.$store.state.source1UnMatched.length>0&&""!==this.source1Filter.level){var t=this.$store.state.source1UnMatched[0].parents.length-this.source1Filter.level;return this.$store.state.source1UnMatched.filter((function(a){return a.parents[t]===e.source1Filter.text}))}return this.$store.state.source1UnMatched},goNextLevel:function(){return this.$store.state.recoLevel<this.$store.state.totalSource1Levels&&null!==this.$store.state.source1UnMatched&&0===this.$store.state.source1UnMatched.length&&null!==this.$store.state.flagged&&0===this.$store.state.flagged.length&&null!==this.$store.state.matchedContent&&0!==this.$store.state.matchedContent.length?"yes":"no"},lastLevelDone:function(){return this.$store.state.recoLevel===this.$store.state.totalSource1Levels&&null!==this.$store.state.source1UnMatched&&0===this.$store.state.source1UnMatched.length&&null!==this.$store.state.flagged&&0===this.$store.state.flagged.length?"yes":"no"},source1TotalRecords:function(){return this.$store.state.scoreResults?this.$store.state.scoreResults.length:0},source1TotalMatched:function(){return this.$store.state.matchedContent?this.$store.state.matchedContent.length:0},source1PercentMatched:function(){return 0===this.source1TotalRecords?0:parseFloat((100*this.source1TotalMatched/this.source1TotalRecords).toFixed(1))},source1TotalUnMatched:function(){return this.source1TotalRecords-this.source1TotalMatched},source1PercentUnMatched:function(){return 0===this.source1TotalRecords?0:parseFloat((100*this.source1TotalUnMatched/this.source1TotalRecords).toFixed(1))},totalFlagged:function(){return this.$store.state.flagged?this.$store.state.flagged.length:0},source1PercentFlagged:function(){return 0===this.$store.state.scoreResults.length?0:this.$store.state.flagged?parseFloat((100*this.$store.state.flagged.length/this.$store.state.scoreResults.length).toFixed(1)):0},source1TotalNoMatch:function(){return this.$store.state.noMatchContent?this.$store.state.noMatchContent.length:0},source1TotalIgnore:function(){return this.$store.state.ignoreContent?this.$store.state.ignoreContent.length:0},source1PercentNoMatch:function(){return 0===this.$store.state.scoreResults.length?0:this.$store.state.noMatchContent?parseFloat((100*this.$store.state.noMatchContent.length/this.$store.state.scoreResults.length).toFixed(1)):0},source1PercentIgnore:function(){return 0===this.$store.state.scoreResults.length?0:this.$store.state.ignoreContent?parseFloat((100*this.$store.state.ignoreContent.length/this.$store.state.scoreResults.length).toFixed(1)):0},source2TotalRecords:function(){return this.$store.state.source2TotalRecords?this.$store.state.source2TotalRecords:0},source2TotalUnmatched:function(){return this.source2TotalRecords>0&&this.$store.state.matchedContent?parseInt(this.source2TotalRecords)-parseInt(this.$store.state.matchedContent.length):0},source2PercentUnmatched:function(){return 0===this.$store.state.source2TotalRecords?0:parseFloat((100*this.source2TotalUnmatched/this.$store.state.source2TotalRecords).toFixed(1))},source2PercentFlagged:function(){return 0===this.$store.state.source2TotalRecords?0:this.$store.state.flagged?parseFloat((100*this.$store.state.flagged.length/this.$store.state.source2TotalRecords).toFixed(1)):0},source2TotalMatched:function(){return this.source1TotalMatched},source2PercentMatched:function(){return 0===this.$store.state.source2TotalRecords?0:parseFloat((100*this.source2TotalMatched/this.$store.state.source2TotalRecords).toFixed(1))},source2NotInSource1:function(){var e=this.source2TotalRecords-this.source1TotalRecords;return e<0?0:e},source2PercentNotInSource1:function(){if(0===this.source2NotInSource1)return 0;var e=parseFloat((100*this.source2NotInSource1/this.source2TotalRecords).toFixed(1));return parseFloat(e)}},created:function(){var e=this;this.$store.state.recalculateScores&&(this.$store.state.recalculateScores=!1,this.getScores(!1)),Ws.$on("changeCSVHeaderNames",(function(){var t=e.translateDataHeader("source1",e.$store.state.recoLevel);e.nextLevelText=t,e.currentLevelText=t})),this.addListener(),this.$store.state.recoLevel===this.$store.state.totalSource1Levels?this.dialogWidth="auto":this.dialogWidth="1500px",this.source1TreeUpdate++},components:{"liquor-tree":Da["a"],appRecoExport:cr}},dr=lr,ur=a("71a3"),pr=a("c671"),hr=a("fe57"),vr=a("9a96"),gr=a("a844"),fr=a("eb2a"),mr=Object(D["a"])(dr,tr,ar,!1,null,null,null),$r=mr.exports;T()(mr,{VAlert:ce["a"],VAvatar:He["a"],VBtn:Q["a"],VCard:I["a"],VCardActions:L["a"],VCardText:L["c"],VCardTitle:L["d"],VCol:ka["a"],VContainer:B["a"],VDataTable:at["a"],VDialog:Be["a"],VFlex:N["a"],VIcon:G["a"],VLayout:M["a"],VList:ga["a"],VProgressCircular:Ge["a"],VProgressLinear:R["a"],VRow:Pa["a"],VSelect:W["a"],VSpacer:U["a"],VTab:ur["a"],VTabItem:pr["a"],VTabs:hr["a"],VTabsSlider:vr["a"],VTextField:de["a"],VTextarea:gr["a"],VToolbar:E["a"],VToolbarTitle:it["b"],VTooltip:nt["a"],VTreeview:fr["a"]});var xr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-dialog",{attrs:{transition:"scale-transition","hide-overlay":"",persistent:"",width:"350"},model:{value:e.mappingStatusDialog,callback:function(t){e.mappingStatusDialog=t},expression:"mappingStatusDialog"}},[a("v-card",{attrs:{color:"white",dark:""}},[a("v-card-text",[a("center",[a("font",{staticStyle:{color:"blue"}},[e._v(e._s(e.mappingStatusProgressTitle))]),a("br"),"percent"==e.progressType?a("v-progress-circular",{attrs:{rotate:-90,size:100,width:15,value:e.mappingStatusProgressPercent,color:"primary"}},[a("v-avatar",{attrs:{color:"indigo",size:"50px"}},[a("span",{staticClass:"white--text"},[a("b",[e._v(e._s(e.mappingStatusProgressPercent)+"%")])])])],1):e._e(),"indeterminate"==e.progressType?a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"red"}}):e._e()],1)],1)],1)],1),a("v-layout",{attrs:{column:""}},[a("v-dialog",{attrs:{scrollable:"",persistent:"",overlay:!1,"max-width":"700px",transition:"dialog-transition"},model:{value:e.helpDialog,callback:function(t){e.helpDialog=t},expression:"helpDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[a("v-icon",[e._v("mdi-information")]),e._v(" "+e._s(e.$t("App.hardcoded-texts.About this page"))+" ")],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.helpDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[e._v(" "+e._s(e.$t("App.hardcoded-texts.This page let you visualize the mapping status for various levels"))+" "),a("v-list",[e._v(" 1. "+e._s(e.$t("App.hardcoded-texts.Right boxes shows reconciliation status for a selected level"))+" ")]),a("v-list",[e._v(" 2. "+e._s(e.$t("App.hardcoded-texts.Left boxes shows reconciliation status for a all levels"))+" ")]),a("v-list",[e._v(" 3. "+e._s(e.$t("App.hardcoded-texts.The search box let you search locations for a selected level only"))+" ")])],1)],1)],1),a("v-flex",{attrs:{xs1:"","text-xs-right":""}},[a("v-row",[a("v-col",{attrs:{cols:"3"}},[a("appRecoExport")],1),a("v-spacer"),a("v-col",{attrs:{cols:"1"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-1",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){e.helpDialog=!0}}},r),[a("v-icon",[e._v("mdi-help")])],1)]}}])},[a("span",[e._v(e._s(e.$t("App.hardcoded-texts.Help")))])])],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"1"}},[a("b",[e._v("All Levels")])]),a("v-spacer"),a("v-col",{attrs:{cols:"1"}},[a("b",[e._v(e._s(e.currentLevelText)+" "+e._s(e.$t("App.hardcoded-texts.Only")))])])],1),a("v-row",[a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Source 1 Matched")))])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllMapped)+"/"+e._s(e.$store.state.source1TotalAllRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentMapped,color:"yellow"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source1PercentMapped)+"%")])])],1)],1)],1)],1)],1)],1),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Source 1 No Match")))])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllNoMatch)+"/"+e._s(e.$store.state.source1TotalAllRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentNoMatch,color:"yellow"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source1PercentNoMatch)+"%")])])],1)],1)],1)],1)],1)],1),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Source 1 Flagged")))])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllFlagged)+"/"+e._s(e.$store.state.source1TotalAllRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentFlagged,color:"yellow"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source1PercentFlagged)+"%")])])],1)],1)],1)],1)],1)],1),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Source 2 Matched")))])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllMapped)+"/"+e._s(e.$store.state.source2TotalAllRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentMapped,color:"green"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source2PercentMapped)+"%")])])],1)],1)],1)],1)],1)],1),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"green","text-color":"white"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Source 2 Flagged")))])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.$store.state.totalAllFlagged)+"/"+e._s(e.$store.state.source2TotalAllRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source2PercentFlagged,color:"yellow"}},[a("font",{attrs:{color:"white"}},[a("b",[e._v(e._s(e.source2PercentFlagged)+"%")])])],1)],1)],1)],1)],1)],1),a("v-spacer"),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"cyan","text-color":"black"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Source 1 Matched")))])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.totalMapped)+"/"+e._s(e.totalRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentMappedLevel,color:"yellow"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentMappedLevel)+"%")])])],1)],1)],1)],1)],1)],1),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"cyan","text-color":"black"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Source 1 No Match")))])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.totalNoMatch)+"/"+e._s(e.totalRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentNoMatchLevel,color:"yellow"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentNoMatchLevel)+"%")])])],1)],1)],1)],1)],1)],1),a("v-col",[a("v-chip",{staticStyle:{height:"138px",width:"137px"},attrs:{color:"cyan","text-color":"black"}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("b",[e._v(e._s(e.$t("App.hardcoded-texts.Source 1 Flagged")))])]),a("v-flex",{attrs:{xs1:"","align-center":""}},[a("center",[a("b",[e._v(e._s(e.totalFlagged)+"/"+e._s(e.totalRecords))])])],1),a("v-flex",{attrs:{xs1:""}},[a("center",[a("v-progress-circular",{attrs:{rotate:-90,size:65,width:8,value:e.source1PercentFlagged,color:"yellow"}},[a("font",{attrs:{color:"black"}},[a("b",[e._v(e._s(e.source1PercentFlagged)+"%")])])],1)],1)],1)],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"3"}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:e.$t("App.hardcoded-texts.Search"),"single-line":"","hide-details":""},model:{value:e.searchMatched,callback:function(t){e.searchMatched=t},expression:"searchMatched"}})],1),a("v-spacer"),a("v-col",{attrs:{cols:"3"}},[["Done"===e.$store.state.recoStatus||e.$store.state.activePair.userID!==e.$store.state.auth.userID&&!e.$tasksVerification.hasPermissionByName("special","custom","close-matching")?e._e():a("v-btn",{attrs:{color:"success",rounded:""},on:{click:e.markRecoDone}},[a("v-icon",[e._v("mdi-lock")]),e._v(e._s(e.$t("App.hardcoded-texts.Mark Reconciliation As Done"))+" ")],1),"Done"!==e.$store.state.recoStatus||e.$store.state.activePair.userID!==e.$store.state.auth.userID&&!e.$tasksVerification.hasPermissionByName("special","custom","close-matching")?e._e():a("v-btn",{attrs:{color:"success",rounded:""},on:{click:e.markRecoUnDone}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-lock-open-variant")]),e._v(e._s(e.$t("App.hardcoded-texts.Mark Reconciliation As UnDone"))+" ")],1)]],2),a("v-spacer"),a("v-col",[a("v-select",{staticClass:"input-group--focused",attrs:{items:e.locationLevels,"item-value":e.locationLevels.value,"item-name":e.locationLevels.text,label:e.$t("App.hardcoded-texts.Level"),height:"1","full-width":"","single-line":""},on:{change:e.levelChanged},model:{value:e.recoLevel,callback:function(t){e.recoLevel=t},expression:"recoLevel"}})],1)],1),a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}}),a("v-spacer"),a("v-flex",{attrs:{xs2:""}}),a("v-spacer"),a("v-flex",{attrs:{xs1:"",sm2:"",md2:"",right:""}})],1)],1),a("v-flex",{attrs:{xs1:""}},[a("v-tabs",{attrs:{"icons-and-text":"",centered:"",grow:"",dark:"","background-color":"cyan"}},[a("v-tabs-slider",{attrs:{color:"red"}}),a("v-tab",{key:"match"},[e._v(" "+e._s(e.$t("App.hardcoded-texts.MATCHED"))+" ("+e._s(e.totalMapped)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-up")])],1),a("v-tab",{key:"notMapped"},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Source 1 Not Mapped"))+" ("+e._s(e.totalNotMapped)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-down")])],1),a("v-tab",{key:"nomatch"},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Source 1 NO MATCH"))+" ("+e._s(e.totalNoMatch)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-down")])],1),a("v-tab",{key:"ignore"},[e._v(" "+e._s(e.$t("App.hardcoded-texts.Source 1 IGNORED"))+" ("+e._s(e.totalIgnore)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-thumb-down")])],1),a("v-tab",{key:"flagged"},[e._v(" "+e._s(e.$t("App.hardcoded-texts.FLAGGED"))+" ("+e._s(e.totalFlagged)+") "),a("v-icon",{attrs:{color:"white",right:""}},[e._v("mdi-bell")])],1),a("v-tab-item",{key:"match"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.matchedHeaders,items:e.mappingData.mapped,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),a("td",[e._v(e._s(t.item.source1Id))]),a("td",[e._v(e._s(t.item.source2Name))]),a("td",[e._v(e._s(t.item.source2Id))])]}}])})],1),a("v-tab-item",{key:"notMapped"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.notMappedHeaders,items:e.mappingData.notMapped,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),a("td",[e._v(e._s(t.item.source1Id))])]}}])})],1),a("v-tab-item",{key:"nomatch"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.noMatchHeaders,items:e.mappingData.noMatch,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),a("td",[e._v(e._s(t.item.source1Id))])]}}])})],1),a("v-tab-item",{key:"ignore"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.noMatchHeaders,items:e.mappingData.ignore,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),a("td",[e._v(e._s(t.item.source1Id))])]}}])})],1),a("v-tab-item",{key:"flagged"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.flaggedHeaders,items:e.mappingData.flagged,search:e.searchMatched},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.source1Name))]),a("td",[e._v(e._s(t.item.source1Id))]),a("td",[e._v(e._s(t.item.source2Name))]),a("td",[e._v(e._s(t.item.source2Id))])]}}])})],1)],1)],1)],1)],1)},br=[],_r={mixins:[Ya],data:function(){return{helpDialog:!1,matchedHeaders:[{text:this.$t("App.hardcoded-texts.Source1 Location"),value:"source1Name"},{text:this.$t("App.hardcoded-texts.Source1 ID"),value:"source1Id"},{text:this.$t("App.hardcoded-texts.Source2 Location"),value:"source2Name"},{text:this.$t("App.hardcoded-texts.Source2 ID"),value:"source2Id"}],noMatchHeaders:[{text:this.$t("App.hardcoded-texts.Source1 Location"),value:"source1Name"},{text:this.$t("App.hardcoded-texts.Source1 ID"),value:"source1Id"}],notMappedHeaders:[{text:this.$t("App.hardcoded-texts.Source1 Location"),value:"source1Name"},{text:this.$t("App.hardcoded-texts.Source1 ID"),value:"source1Id"}],flaggedHeaders:[{text:this.$t("App.hardcoded-texts.Source1 Location"),value:"source1Name"},{text:this.$t("App.hardcoded-texts.Source1 ID"),value:"source1Id"},{text:this.$t("App.hardcoded-texts.Source2 Location"),value:"source2Name"},{text:this.$t("App.hardcoded-texts.Source2 ID"),value:"source2Id"}],searchMatched:"",mappingData:{},recoLevel:2,mappingStatusDialog:!1,mappingStatusProgressTitle:"Waiting for progress status",mappingStatusProgressPercent:0,locationLevels:[]}},methods:{checkMappingStatusProgress:function(){var e=this,t=this.$store.state.clientId;u.a.get("/progress/mappingStatus/"+t).then((function(t){return null===t.data||void 0===t.data||!1===t.data?(e.mappingStatusDialog=!1,e.mappingStatusProgressTitle="Waiting for progress status",void clearInterval(e.mappingStatusProgressTimer)):null===t.data.status&&null===t.data.error&&null===t.data.percent?(e.mappingStatusDialog=!1,clearInterval(e.mappingStatusProgressTimer),void(e.mappingStatusProgressTitle="Waiting for progress status")):(e.mappingStatusProgressTitle=t.data.status,t.data.percent&&("percent"!==e.progressType&&(e.progressType="percent"),e.mappingStatusProgressPercent=t.data.percent),void("Done"===t.data.status&&(e.clearProgress("mappingStatus"),clearInterval(e.mappingStatusProgressTimer),e.mappingStatusDialog=!1,e.mappingStatusProgressTitle="Waiting for progress status")))})).catch((function(e){console.log(e)}))},mappingStatus:function(){var e=this;if(this.source1&&this.source2){this.mappingData={};var t=this.$store.state.clientId,a=this.$store.state.totalSource2Levels,r=this.$store.state.totalSource1Levels,s=this.$store.state.activePair.userID,o=this.getDatasourceOwner(),i=o.source1Owner,n=o.source2Owner,c=this.getLimitOrgIdOnActivePair().source1LimitOrgId,l=this.getLimitOrgIdOnActivePair().source2LimitOrgId;this.mappingStatusDialog=!0,this.progressType="indeterminate";var d="/mappingStatus/".concat(this.source1,"/").concat(this.source2,"/").concat(i,"/").concat(n,"/").concat(this.recoLevel,"/").concat(a,"/").concat(r,"/").concat(t,"/").concat(s,"?source1LimitOrgId=").concat(c,"&source2LimitOrgId=").concat(l);u.a.get(d).then((function(t){e.mappingData=t.data})),this.mappingStatusProgressTimer=setInterval(this.checkMappingStatusProgress,500)}},levelChanged:function(e){this.recoLevel=e,this.mappingStatus()},markRecoDone:function(){var e=this;this.$store.state.progressTitle="Marking reconciliation as Done",this.$store.state.dynamicProgress=!0,u.a.get("/match/markRecoDone/"+this.$store.state.activePair.id).then((function(t){e.$store.state.dynamicProgress=!1,t.data.status&&(e.$store.state.recoStatus=t.data.status),e.$store.state.errorTitle="Reconciliation Done",e.$store.state.errorDescription="Reconciliation is complete, no more changes can be done",e.$store.state.errorColor="primary",e.$store.state.dialogError=!0})).catch((function(t){e.$store.state.dynamicProgress=!1,console.log(t.response.data.error)}))},markRecoUnDone:function(){var e=this;this.$store.state.progressTitle="Marking reconciliation as Un Done",this.$store.state.dynamicProgress=!0,u.a.get("/match/markRecoUnDone/"+this.$store.state.activePair.id).then((function(t){e.$store.state.dynamicProgress=!1,t.data.status&&(e.$store.state.recoStatus=t.data.status),e.$store.state.errorTitle="Reconciliation on progress",e.$store.state.errorDescription="You may continue doing reconciliation now",e.$store.state.errorColor="primary",e.$store.state.dialogError=!0})).catch((function(t){e.$store.state.dynamicProgress=!1,console.log(t.response.data.error)}))}},computed:{currentLevelText:function(){return this.translateDataHeader("source1",this.recoLevel-1)},source1:function(){var e=this.$store.state.activePair.source1.name;return e&&(e=this.toTitleCase(e)),e},source2:function(){var e=this.$store.state.activePair.source2.name;return e&&(e=this.toTitleCase(e)),e},source1PercentMapped:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllMapped/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentMappedLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalMapped/this.totalRecords).toFixed(2))},source1PercentNoMatch:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllNoMatch/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentIgnore:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllIgnore/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentNoMatchLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalNoMatch/this.totalRecords).toFixed(2))},source1PercentIgnoreLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalIgnore/this.totalRecords).toFixed(2))},source1PercentFlagged:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllFlagged/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentFlaggedLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalFlagged/this.totalRecords).toFixed(2))},source1PercentNotMapped:function(){return 0===this.$store.state.source1TotalAllRecords?0:parseFloat((100*this.$store.state.source1TotalAllNotMapped/this.$store.state.source1TotalAllRecords).toFixed(2))},source1PercentNotMappedLevel:function(){return 0===this.totalRecords?0:parseFloat((100*this.totalNotMapped/this.totalRecords).toFixed(2))},source2PercentFlagged:function(){return 0===this.$store.state.source2TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllFlagged/this.$store.state.source2TotalAllRecords).toFixed(2))},source2PercentMapped:function(){return 0===this.$store.state.source2TotalAllRecords?0:parseFloat((100*this.$store.state.totalAllMapped/this.$store.state.source2TotalAllRecords).toFixed(2))},totalMapped:function(){return this.mappingData&&this.mappingData.hasOwnProperty("mapped")?this.mappingData.mapped.length:0},totalNotMapped:function(){return this.mappingData&&this.mappingData.hasOwnProperty("notMapped")?this.mappingData.notMapped.length:0},totalNoMatch:function(){return this.mappingData&&this.mappingData.hasOwnProperty("noMatch")?this.mappingData.noMatch.length:0},totalIgnore:function(){return this.mappingData&&this.mappingData.hasOwnProperty("ignore")?this.mappingData.ignore.length:0},totalFlagged:function(){return this.mappingData&&this.mappingData.hasOwnProperty("flagged")?this.mappingData.flagged.length:0},totalRecords:function(){return this.totalMapped+this.totalNotMapped+this.totalNoMatch+this.totalIgnore+this.totalFlagged}},components:{appRecoExport:cr},created:function(){this.mappingStatus();for(var e=1;e<this.$store.state.totalSource1Levels;e++){var t=this.translateDataHeader("source1",e);this.locationLevels.push({text:t,value:e+1})}}},yr=_r,Sr=Object(D["a"])(yr,xr,br,!1,null,null,null),kr=Sr.exports;T()(Sr,{VAvatar:He["a"],VBtn:Q["a"],VCard:I["a"],VCardText:L["c"],VChip:V["a"],VCol:ka["a"],VContainer:B["a"],VDataTable:at["a"],VDialog:Be["a"],VFlex:N["a"],VIcon:G["a"],VLayout:M["a"],VList:ga["a"],VProgressCircular:Ge["a"],VProgressLinear:R["a"],VRow:Pa["a"],VSelect:W["a"],VSpacer:U["a"],VTab:ur["a"],VTabItem:pr["a"],VTabs:hr["a"],VTabsSlider:vr["a"],VTextField:de["a"],VToolbar:E["a"],VToolbarTitle:it["b"],VTooltip:nt["a"]});var Pr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}})},Ar=[],wr={mixins:[_],methods:{getDHIS2UserData:function(e){var t=this,a=this.$store.state.dhis.dev.auth;""===a.username&&(a=""),u.a.get(this.$store.state.dhis.host+"api/me",{auth:a}).then((function(r){var s=r.data.organisationUnits;s.length>0&&(t.$store.state.dhis.user.orgId=s.shift().id,u.a.get(t.$store.state.dhis.host+"api/organisationUnits/"+t.$store.state.dhis.user.orgId,{auth:a}).then((function(a){return t.$store.state.dhis.user.orgName=a.data.displayName,e(r)})))})).catch((function(e){t.$store.state.dialogError=!0,t.$store.state.errorTitle="Error",e.response&&e.response.data&&401===e.response.data.httpStatusCode?(t.$store.state.errorDescription="Unauthorized, ensure that your DHIS2 login is active",t.$router.push({name:"Logout"})):t.$store.state.errorDescription="Unauthorized, please reload the app"}))}},created:function(){var e=this;this.setDHIS2Credentials(),this.getRoles(),this.getDHIS2UserData((function(t){var a,r,s=t.data.userCredentials.userRoles.find((function(t){return t.id===e.$store.state.config.generalConfig.externalAuth.adminRole}));if(s){var o=e.roles.find((function(e){return"Admin"===e.text}));a=o.value,r=o.text}else{var i=e.roles.find((function(e){return"Data Manager"===e.text}));a=i.value,r=i.text}u.a.get("/getUser/"+t.data.userCredentials.username).then((function(s){if(s.data.userID)e.$store.state.auth.username=t.data.userCredentials.username,e.$store.state.auth.userID=s.data.userID,e.$store.state.auth.role=r,e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,Ws.$emit("getUserConfig");else{var o=new FormData;o.append("firstName",t.data.firstName),o.append("otherName",""),o.append("password",t.data.surname),o.append("userName",t.data.userCredentials.username),o.append("surname",t.data.surname),o.append("role",a),u.a.post("/addUser",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){u.a.get("/getUser/"+t.data.userCredentials.username).then((function(a){a.data.userID&&(e.$store.state.auth.username=t.data.userCredentials.username,e.$store.state.auth.userID=a.data.userID,e.$store.state.auth.role=a.data.role,e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,Ws.$emit("getUserConfig"))}))}))}}))}))}},Dr=wr,Cr=Object(D["a"])(Dr,Pr,Ar,!1,null,null,null),Tr=Cr.exports;T()(Cr,{VContainer:B["a"]});var Ir,Lr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("gofr-template",{key:e.$route.path},[e._v(" Loading... ")])},Vr=[],Or={name:"fhir-page-view",props:["page","pageId"],data:function(){return{}},created:function(){this.getTemplate(),Ir=this.pageId},methods:{getTemplate:function(){var e=this;u.a.get("/config/page/"+this.page).then((function(t){var r=t.data;"OperationOutcome"===r.resourceType?s["a"].component("gofr-template",{name:"gofr-template",data:function(){return{issues:r.issue}},components:{"gofr-outcome":function(){return Promise.resolve().then(a.bind(null,"5a61"))}},template:'<div><gofr-outcome :issues="issues"></gofr-outcome></div>'}):s["a"].component("gofr-template",{name:"gofr-template",data:function(){return{fhirId:Ir,isEdit:!1,sectionMenu:r.data.sectionMenu,subFields:r.data.subFields,columns:r.data.columns,actions:r.data.actions,links:r.data.links,constraints:r.data.constraints}},components:{"gofr-page-title":function(){return a.e("chunk-2d21a3c6").then(a.bind(null,"bb3c"))},"gofr-resource":function(){return a.e("chunk-2d21a437").then(a.bind(null,"bb89"))},"gofr-codesystem":function(){return a.e("chunk-2d0d34f6").then(a.bind(null,"5be8"))},"gofr-section":function(){return a.e("chunk-2d210a08").then(a.bind(null,"b961"))},"gofr-secondary":function(){return a.e("chunk-2d2174d7").then(a.bind(null,"c5c2"))},"gofr-array":function(){return a.e("chunk-2d0af298").then(a.bind(null,"0cc2"))},"fhir-extension":function(){return a.e("chunk-2d0da301").then(a.bind(null,"6b10"))},"fhir-reference":function(){return a.e("chunk-58ec08a2").then(a.bind(null,"99fa"))},"fhir-backbone-element":function(){return a.e("chunk-08a9b5b7").then(a.bind(null,"8142"))},"fhir-string":function(){return a.e("chunk-1b3d2af8").then(a.bind(null,"b78c"))},"fhir-attachment":function(){return a.e("chunk-3d07554a").then(a.bind(null,"ca33"))},"fhir-human-name":function(){return a.e("chunk-0779b602").then(a.bind(null,"89c1"))},"fhir-code":function(){return a.e("chunk-77a0b274").then(a.bind(null,"1131"))},"fhir-date":function(){return Promise.all([a.e("chunk-72162224"),a.e("chunk-2d0e2c53")]).then(a.bind(null,"7fb0"))},"fhir-time":function(){return a.e("chunk-32294727").then(a.bind(null,"1286"))},"fhir-date-time":function(){return Promise.all([a.e("chunk-72162224"),a.e("chunk-2d0c17b7")]).then(a.bind(null,"45dd"))},"fhir-period":function(){return a.e("chunk-78a0fc3a").then(a.bind(null,"4807"))},"fhir-identifier":function(){return a.e("chunk-5e700835").then(a.bind(null,"c408"))},"fhir-contact-point":function(){return a.e("chunk-69e0cc28").then(a.bind(null,"4b80"))},"fhir-address":function(){return a.e("chunk-63fba70c").then(a.bind(null,"b248"))},"fhir-codeable-concept":function(){return a.e("chunk-2d0b8b5d").then(a.bind(null,"309c"))},"fhir-uri":function(){return a.e("chunk-69088730").then(a.bind(null,"6d39"))},"fhir-boolean":function(){return a.e("chunk-5cafeba1").then(a.bind(null,"ff03"))},"fhir-positive-int":function(){return a.e("chunk-19a7ffa0").then(a.bind(null,"b750"))},"fhir-unsigned-int":function(){return a.e("chunk-53797504").then(a.bind(null,"4c52"))},"fhir-integer":function(){return a.e("chunk-5369b150").then(a.bind(null,"eaae"))},"fhir-coding":function(){return a.e("chunk-5e71a7f0").then(a.bind(null,"eee9"))},"fhir-money":function(){return a.e("chunk-1f83e9dc").then(a.bind(null,"a6ba"))},"fhir-decimal":function(){return a.e("chunk-2f5db3ea").then(a.bind(null,"8892"))}},template:r.template,methods:{setEdit:function(e){this.isEdit=e}}}),e.$forceUpdate()})).catch((function(t){console.log(t),s["a"].component("gofr-template",{template:"<div><h1>Error</h1><p>An error occurred trying to load this page</p>.</div>"}),e.$forceUpdate()}))}},components:{},beforeCreate:function(){s["a"].component("gofr-template",{template:"<div>Loading...</div>"})}},Nr=Or,Mr=Object(D["a"])(Nr,Lr,Vr,!1,null,null,null),Rr=Mr.exports,Ur=a("5a61");s["a"].use($["a"]);var Er=new $["a"]({mode:"history",routes:[{path:"/Home",name:"Home",component:J},{path:"/",name:"Home",component:J},{path:"/HomePublic",name:"HomePublic",component:te},{path:"/UsersList",name:"UsersList",component:gt},{path:"/RolesManagement",name:"RolesManagement",component:wt},{path:"/ChangePassword",name:"ChangePassword",component:Vt},{path:"/login",name:"Login",component:pe},{path:"/logout",name:"Logout",component:$e},{path:"/logout-public",name:"LogoutPublic",component:Ae},{path:"/Signup",name:"Signup",component:Ve},{path:"/dhis2Auth",name:"DHIS2Auth",component:Tr},{path:"/Configure",name:"Configure",component:lt,beforeEnter:function(e,t,a){var r=s["a"].$tasksVerification.hasPermissionByName("special","custom","view-config-page");if(r)return a();a({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}})}},{path:"/addUser",name:"AddUser",component:_t,beforeEnter:function(e,t,a){var r=s["a"].$tasksVerification.hasPermissionByName("special","custom","add-users");if(r)return a();a({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}})}},{path:"/ViewDataSources",name:"ViewDataSources",component:La,beforeEnter:function(e,t,a){var r=s["a"].$tasksVerification.hasPermissionByName("special","custom","view-data-source");if(r)return a();a({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}})}},{path:"/AdvanceDatasourceDetails/:sourceid/:partitionid",name:"AdvanceDatasourceDetails",component:Ua,props:function(e){return{sourceid:e.params.sourceid,partitionid:e.params.partitionid}},beforeEnter:function(e,t,a){if(!e.params.sourceid||!e.params.partitionid||0===qr.state.dataSources.length)return a({name:"Home"});var r=s["a"].$tasksVerification.hasPermissionByName("special","custom","view-data-source");if(r)return a();a({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}})}},{path:"/AddDataSources",name:"AddDataSources",component:ma,beforeEnter:function(e,t,a){var r=s["a"].$tasksVerification.hasPermissionByName("special","custom","add-data-source");if(r)return a();a({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}})}},{path:"/dataSourcesPair",name:"DataSourcesPair",component:Ga,beforeEnter:function(e,t,a){var r=s["a"].$tasksVerification.hasPermissionByName("special","custom","view-source-pair");if(r)return a();a({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}})}},{path:"/view",name:"FacilityReconView",component:er,beforeEnter:function(e,t,a){var r=s["a"].$tasksVerification.hasPermissionByName("special","custom","data-source-reconciliation");if(r)return a();a({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}})}},{path:"/scores",name:"FacilityReconScores",component:$r,beforeEnter:function(e,t,a){var r=s["a"].$tasksVerification.hasPermissionByName("special","custom","data-source-reconciliation");if(r)return a();a({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}})}},{path:"/recoStatus",name:"FacilityRecoStatus",component:kr,beforeEnter:function(e,t,a){var r=s["a"].$tasksVerification.hasPermissionByName("special","custom","view-matching-status");if(r)return a();a({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}})}},{path:"/questionnaire/:questionnaire/:page",name:"questionnaire",component:function(){return a.e("chunk-2d0afa68").then(a.bind(null,"0eda"))}},{path:"/custom/:path/:component",name:"custom_components",component:function(){return a.e("custom").then(a.bind(null,"1037"))}},{path:"/apps",name:"apps",component:function(){return a.e("apps").then(a.bind(null,"45b4"))}},{path:"/install-app",name:"install-app",component:function(){return a.e("install-app").then(a.bind(null,"d29c"))}},{path:"/uninstall-app",name:"uninstall-app",component:function(){return a.e("uninstall-app").then(a.bind(null,"37b0"))}},{path:"/ViewMap",name:"ViewMap",component:function(){return Promise.resolve().then(a.bind(null,"afb4"))}},{path:"/Resource/View/:page/:id",name:"ResourceView",component:Rr,props:function(e){return{page:e.params.page,pageId:e.params.id}}},{path:"/Resource/Add/:page",name:"ResourceAdd",component:function(){return a.e("chunk-2d216051").then(a.bind(null,"c14a"))},props:function(e){return{page:e.params.page}}},{path:"/Resource/Search/:page/:requestAction?",name:"ResourceSearch",component:function(){return Promise.resolve().then(a.bind(null,"9d64"))},props:function(e){return{page:e.params.page,requestAction:e.params.requestAction}}},{path:"/GofrOutcome",name:"GofrOutcome",component:Ur["default"],props:!0}]});Er.beforeEach((function(e,t,a){if(qr.state.alert.show=!1,"keycloak"===qr.state.idp){if(s["a"].$keycloak.authenticated)return a();if("/Login"===e.path||"/Signup"===e.path||qr.state.config.generalConfig.authDisabled)return a();s["a"].$keycloak.logout()}else if(qr.state.auth.userObj.resource)a();else{if("/Login"===e.path||"/Signup"===e.path||qr.state.config.generalConfig.authDisabled)return a();a({path:"/Login"})}}));var Fr=Er;s["a"].use(m["a"]);var qr=new m["a"].Store({state:{version:"",baseRouterViewKey:0,idp:"",keycloak:{},public_access:!1,alert:{width:"800px",show:!1,msg:"",type:"success",dismisible:!0,transition:"scale-transition"},auth:{username:"",userID:"",userObj:{},role:""},levelMapping:{source1:{},source2:{}},config:{userConfig:{reconciliation:{useCSVHeader:!0},FRDatasource:""},generalConfig:{public_access:{enabled:!1,partition:""},reconciliation:{parentConstraint:{enabled:!0,idAutoMatch:!0,nameAutoMatch:!1},singlePair:!1,singleDataSource:!1,fixSource2To:null,fixSource2:!1},smtp:{host:"",port:"",username:"",password:"",secured:""},recoProgressNotification:{enabled:!1},allowShareToAllForNonAdmin:!1,selfRegistration:{enabled:!1,requiresApproval:!1},datasetsAdditionWays:["CSV Upload","Remote Servers Sync"],datasetsAutosyncTime:"*/15 * * * *",authDisabled:!1,authMethod:"dhis2",externalAuth:{pullOrgUnits:!0,shareOrgUnits:!0,shareByOrgId:!0,datasetName:null,adminRole:null}}},recoStatus:{status:"in-progress"},recalculateScores:!1,dialogError:!1,errorTitle:"",errorDescription:"",errorColor:"primary",clientId:null,denyAccess:!0,source2Hierarchy:"",source1Hierarchy:"",uploadRunning:!1,dhis:{user:{orgId:"",orgName:""},host:"",dev:{auth:{username:"",password:""}}},dataSourcePairs:[],activePair:{source1:{},source2:{}},source1TotalAllRecords:0,source2TotalAllRecords:0,totalAllMapped:0,totalAllFlagged:0,totalAllNoMatch:0,totalAllIgnore:0,source1TotalAllNotMapped:0,source2TotalRecords:0,recoLevel:2,totalSource1Levels:"",totalSource2Levels:"",matchedContent:[],noMatchContent:[],ignoreContent:[],flagged:[],source1Parents:[],source2UnMatched:[],source1UnMatched:[],scoreResults:[],levelArray:[],scoresProgressData:{scoreDialog:!1,scoreProgressTitle:"Waiting for progress status",stage:"not final",scoreProgressPercent:null,progressType:"",scoreProgressTimer:!1,progressReqTimer:"",requestCancelled:!1,cancelTokenSource:""},scoreSavingProgressData:{percent:null,savingMatches:!1,savingProgressTimer:!1,progressReqTimer:"",requestCancelled:!1,cancelTokenSource:""},uploadProgressData:{},dataSources:[],remoteDataSources:["DHIS2","FHIR"],loadingServers:!1,dynamicProgress:!1,initializingApp:!1,cols:{header:4,content:8},searchAction:"",requestResourceUpdateData:{requestAction:"",requestType:"",requestUpdatingResource:""},message:{type:"info",text:null,timeout:5e3,active:!1}},mutations:{setMessage:function(e,t){"string"===typeof t?(e.message.type="info",e.message.timeout=5e3,e.message.text=t,e.message.active=!0):(e.message.type=t.type||"info",e.message.timeout=t.timeout||5e3,e.message.text=t.text,e.message.active=!0)},closeMessage:function(e){e.message.active=!1}}});u.a.interceptors.response.use((function(e){return e}),(function(e){var t=e.response.status;return 403===t?(Fr.push({name:"GofrOutcome",params:{issues:[{diagnostics:"Access Denied"}]}}),qr.state.initializingApp=!1):401===t&&(Fr.push("logout"),qr.state.initializingApp=!1),Promise.reject(e)})),s["a"].use(f["a"]);var jr=new f["a"]({locale:"en",fallbackLocale:"en",messages:{}});function Hr(e){qr.state.initializingApp=!0,u.a.get("/translator/getLocale/".concat(e)).then((function(t){qr.state.initializingApp=!1,jr.setLocaleMessage(e,t.data),jr.locale=e}))}var Br={data:function(){return{languages:[],activeLang:"English",activeFlag:"en",dialog:!1,languageMenu:!1}},created:function(){this.getLanguageList()},methods:{handleMenuItemClick:function(e){Hr(e.locale),localStorage.setItem("activeLang",e.language),localStorage.setItem("activeFlag",e.flag),localStorage.setItem("activeLocale",e.locale),this.activeLang=e.language,this.activeFlag=e.flag},getLanguageList:function(){var e=this;u.a.get("/translator/getTranslatedLanguages").then((function(t){e.languages=t.data,e.languages.sort((function(e,t){return e.language<t.language?-1:e.language>t.language?1:0}));var a=localStorage.getItem("activeLocale")||e.$i18n.locale||"en",r=e.languages.find((function(e){return e.locale===a}));e.$i18n.locale=r.locale,e.activeLang=r.language,Hr(r.locale||"en")}))}}},Gr=Br,Wr=a("adda"),zr=a("da13"),Jr=a("8270"),Yr=a("5d23"),Kr=a("e449"),Xr=Object(D["a"])(Gr,v,g,!1,null,null,null),Zr=Xr.exports;T()(Xr,{VBtn:Q["a"],VIcon:G["a"],VImg:Wr["a"],VList:ga["a"],VListItem:zr["a"],VListItemAvatar:Jr["a"],VListItemTitle:Yr["c"],VMenu:Kr["a"]});var Qr={computed:{dhisLink:function(){return!!this.$store.state.dhis.user.orgId&&window.location.protocol+"//"+window.location.hostname}},components:{LanguageSwitcher:Zr}},es=Qr,ts=a("40dc"),as=Object(D["a"])(es,p,h,!1,null,null,null),rs=as.exports;T()(as,{VAppBar:ts["a"],VBtn:Q["a"],VIcon:G["a"],VSpacer:U["a"],VToolbarItems:it["a"]});var ss=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-navigation-drawer",{staticClass:"primary darken-1 white--text font-weight-bold",staticStyle:{"z-index":"3"},attrs:{"mini-variant":e.mini,app:"",clipped:"",permanent:"",width:"358"},on:{"update:miniVariant":function(t){e.mini=t},"update:mini-variant":function(t){e.mini=t}},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list-item",{staticClass:"px-2 white--text"},[a("v-list-item-avatar",{staticStyle:{cursor:"pointer"},on:{click:function(t){t.stopPropagation(),e.mini=!e.mini}}},[a("v-icon",{staticClass:"white--text"},[e._v("mdi-menu")]),e.mini?a("v-icon",{staticClass:"white--text"},[e._v("mdi-menu-right-outline")]):a("v-icon",{staticClass:"white--text"},[e._v("mdi-menu-left-outline")])],1),a("v-list-item-title",{staticClass:"white--text"},[e._v(e._s(e.$t("App.menu.menuTitle")))])],1),a("v-divider",{attrs:{color:"white"}}),a("v-list",{attrs:{nav:"",dark:"",dense:""}},[e._l(e.menu,(function(t){return[t.menu?[a("v-list-group",{key:t.id,class:t.active?"primary darken-2":"",attrs:{"prepend-icon":t.icon,color:"white--text",value:t.active,"no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-title",{staticClass:"subtitle-1 font-weight-bold text-uppercase"},[e._v(" "+e._s(e.$t("App.menu."+t.text))+" ")])]},proxy:!0}],null,!0),model:{value:t.active,callback:function(a){e.$set(t,"active",a)},expression:"item.active"}},[e._l(t.menu,(function(t){return[t.menu?[a("v-list-group",{key:t.id,class:t.active?"primary darken-2":"",attrs:{"append-icon":t.icon,color:"white--text",value:t.active,"sub-group":"","no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-title",{staticClass:"subtitle-1 font-weight-bold text-uppercase"},[e._v(e._s(e.$t("App.menu."+t.text)))])]},proxy:!0}],null,!0),model:{value:t.active,callback:function(a){e.$set(t,"active",a)},expression:"sub.active"}},[e._l(t.menu,(function(t){return[1!=t.external?a("v-list-item",{key:t.id,attrs:{to:t.url,"active-class":"primary darken-2",dense:""}},[t.icon?a("v-icon",{attrs:{left:""}},[e._v(e._s(t.icon))]):e._e(),a("v-list-item-title",[e._v(e._s(e.$t("App.menu."+t.text)))]),a("v-icon",[e._v("mdi-chevron-right")])],1):a("v-list-item",{key:t.id,attrs:{href:t.url,target:"_blank","active-class":"primary darken-2",dense:""}},[t.icon?a("v-icon",{attrs:{left:""}},[e._v(e._s(t.icon))]):e._e(),a("v-list-item-title",[e._v(e._s(e.$t("App.menu."+t.text)))]),a("v-icon",[e._v("mdi-chevron-right")])],1)]}))],2)]:[1!=t.external?a("v-list-item",{key:t.id,attrs:{to:t.url,"active-class":"primary darken-2",dense:""}},[t.icon?a("v-icon",{attrs:{left:""}},[e._v(e._s(t.icon))]):e._e(),a("v-list-item-title",[e._v(e._s(e.$t("App.menu."+t.text)))]),a("v-icon",[e._v("mdi-chevron-right")])],1):a("v-list-item",{key:t.id,attrs:{href:t.url,target:"_blank","active-class":"primary darken-2",dense:""}},[t.icon?a("v-icon",{attrs:{left:""}},[e._v(e._s(t.icon))]):e._e(),a("v-list-item-title",[e._v(e._s(e.$t("App.menu."+t.text)))]),a("v-icon",[e._v("mdi-chevron-right")])],1)]]}))],2)]:[1!=t.external?a("v-list-item",{key:t.id,attrs:{to:t.url}},[a("v-list-item-icon",[a("v-icon",[e._v(e._s(t.icon))])],1),a("v-list-item-title",{staticClass:"subtitle-1 font-weight-bold text-uppercase"},[e._v(e._s(e.$t("App.menu."+t.text)))])],1):a("v-list-item",{key:t.id,attrs:{href:t.url,target:"_blank"}},[a("v-list-item-icon",[a("v-icon",[e._v(e._s(t.icon))])],1),a("v-list-item-title",{staticClass:"subtitle-1 font-weight-bold text-uppercase"},[e._v(e._s(e.$t("App.menu."+t.text)))])],1)]]}))],2)],1)},os=[],is={name:"the-navigation",props:["nav"],mounted:function(){this.updateMenu()},watch:{nav:{handler:function(){this.updateMenu()},deep:!0}},data:function(){return{drawer:!0,mini:!0,menu:[]}},methods:{updateMenu:function(){this.menu=[];for(var e=0,t=Object.keys(this.nav.menu);e<t.length;e++){var a=t[e];if(this.nav.menu[a].access){var r=this.nav.menu[a].access["permission"],s=this.nav.menu[a].access["resource"],o=this.nav.menu[a].access["id"];if(!this.$tasksVerification.hasPermissionByName(r,s,o))continue}var i={id:a,text:this.nav.menu[a].text,tooltip:this.nav.menu[a].tooltip,icon:this.nav.menu[a].icon,order:this.nav.menu[a].order};if(this.nav.active===a?i.active=!0:i.active=!1,this.nav.menu[a].menu){i.menu=[];for(var n=0,c=Object.keys(this.nav.menu[a].menu);n<c.length;n++){var l=c[n];if(this.nav.menu[a].menu[l].access){var d=this.nav.menu[a].menu[l].access["permission"],u=this.nav.menu[a].menu[l].access["resource"],p=this.nav.menu[a].menu[l].access["id"];if(!this.$tasksVerification.hasPermissionByName(d,u,p))continue}var h={id:l,text:this.nav.menu[a].menu[l].text,tooltip:this.nav.menu[a].menu[l].tooltip,icon:this.nav.menu[a].menu[l].icon,order:this.nav.menu[a].menu[l].order};if(this.nav.menu[a].menu[l].menu){this.nav.active===l?h.active=!0:h.active=!1,h.menu=[];for(var v=0,g=Object.keys(this.nav.menu[a].menu[l].menu);v<g.length;v++){var f=g[v];if(this.nav.menu[a].menu[l].menu[f].access){var m=this.nav.menu[a].menu[l].menu[f].access["permission"],$=this.nav.menu[a].menu[l].menu[f].access["resource"],x=this.nav.menu[a].menu[l].menu[f].access["id"];if(!this.$tasksVerification.hasPermissionByName(m,$,x))continue}var b={id:f,text:this.nav.menu[a].menu[l].menu[f].text,tooltip:this.nav.menu[a].menu[l].menu[f].tooltip,icon:this.nav.menu[a].menu[l].menu[f].icon,url:this.nav.menu[a].menu[l].menu[f].url,order:this.nav.menu[a].menu[l].menu[f].order,external:this.nav.menu[a].menu[l].menu[f].external};h.menu.push(b),h.menu.sort((function(e,t){return e.order===t.order?0:e.order<t.order?-1:1}))}}else this.nav.menu[a].menu[l].url&&(h.url=this.nav.menu[a].menu[l].url,h.external=this.nav.menu[a].menu[l].external);i.menu.push(h),i.menu.sort((function(e,t){return e.order===t.order?0:e.order<t.order?-1:1}))}}else this.nav.menu[a].url&&(i.url=this.nav.menu[a].url,i.external=this.nav.menu[a].external);this.menu.push(i)}this.menu.sort((function(e,t){return e.order===t.order?0:e.order<t.order?-1:1}))}},computed:{keycloak_account:function(){return this.$store.state.keycloak.baseURL+"/realms/"+this.$store.state.keycloak.realm+"/account"}}},ns=is,cs=a("56b0"),ls=a("34c3"),ds=a("f774"),us=Object(D["a"])(ns,ss,os,!1,null,null,null),ps=us.exports;T()(us,{VDivider:O["a"],VIcon:G["a"],VList:ga["a"],VListGroup:cs["a"],VListItem:zr["a"],VListItemAvatar:Jr["a"],VListItemIcon:ls["a"],VListItemTitle:Yr["c"],VNavigationDrawer:ds["a"]});a("c740");var hs={hasPermissionByName_deprecated:function(e,t,a){var r=qr.state.auth.userObj;return!(!r||!r.permissions||0===Object.keys(r.permissions).length)&&(!(!r.permissions["*"]||!r.permissions["*"]["*"])||!!(r.permissions[e][t]||r.permissions["*"]&&r.permissions["*"][t])&&(!a||!!(r.permissions[e][t]["id"]||r.permissions["*"]&&r.permissions["*"][t]&&r.permissions["*"][t]["id"])&&(r.permissions[e][t]["id"][a]?r.permissions[e][t]["id"][a]:!!(r.permissions["*"]&&r.permissions["*"][t]&&r.permissions["*"][t]["id"]&&r.permissions["*"][t]["id"][a])&&r.permissions["*"][t]["id"][a])))},__hasPermissionByName:function(e,t,a){var r=qr.state.auth.userObj;try{if(a){var s=r.permissions.partitions&&r.permissions.partitions.findIndex((function(e){return e.name===a}));return-1!==s&&r.permissions.partitions[s][e][t]}return r.permissions[e][t]}catch(o){return!1}},hasPermissionByName:function(e,t,a,r){var s=["*"];"*"!==e&&s.push(e);var o=["*"];"*"!==t&&o.push(t);for(var i={},l=0,d=s;l<d.length;l++){var u,p=d[l],h=Object(c["a"])(o);try{for(h.s();!(u=h.n()).done;){var v=u.value,g=hs.__hasPermissionByName(p,v,r);if(!0===g)return!0;!1!==g&&void 0!==g&&(i=g)}}catch(f){h.e(f)}finally{h.f()}}if("object"==!Object(n["a"])(i)||0===Object.keys(i).length)return!1;if(a){if(i.hasOwnProperty("id"))return!!i.id.hasOwnProperty(a)&&i.id[a];if(i.hasOwnProperty("*"))return i["*"]}return i}},vs={mixins:[qa,Ya,_],props:["generalConfig"],data:function(){return{fixed:!1,activeDataSourcePair:{},tasksVerification:hs,nav:{active:null,menu:{}}}},methods:{closeDialogError:function(){this.$store.state.errorColor="primary",this.$store.state.dialogError=!1},renderInitialPage:function(){var e=this;this.$store.state.config.userConfig.FRDatasource||("public@gofr.org"===this.$store.state.auth.username?this.$store.state.config.userConfig.FRDatasource=this.$store.state.config.generalConfig.public_access.partition:this.$store.state.dataSources.length>0&&(this.$store.state.config.userConfig.FRDatasource=this.$store.state.dataSources[0].name));var t=this.$store.state.activePair.source1.name,a=this.$store.state.activePair.source2.name;(t&&a||!(this.$store.state.dataSources.length>1||this.$store.state.dataSourcePairs.length>0))&&t&&a?u.a.get("/uploadAvailable/"+t+"/"+a).then((function(t){e.$store.state.initializingApp=!1,t.data.dataUploaded?(e.$store.state.recalculateScores=!0,"public@gofr.org"===e.$store.state.auth.username&&e.$router.push({name:"HomePublic"})):"public@gofr.org"===e.$store.state.auth.username&&e.$router.push({name:"HomePublic"})})).catch((function(t){console.log(t),"public@gofr.org"===e.$store.state.auth.username&&e.$router.push({name:"HomePublic"})})):"public@gofr.org"===this.$store.state.auth.username&&this.$router.push({name:"HomePublic"})},getTotalLevels:function(){var e=this,t=this.$store.state.activePair.source1.name,a=this.$store.state.activePair.source2.name,r=this.$store.state.activePair.source1.id,s=this.$store.state.activePair.source2.id;if(!t||!a)return this.$store.state.totalSource1Levels=5,this.$store.state.totalSource2Levels=5,this.$store.state.initializingApp=!1,this.renderInitialPage(),this.$store.state.recoLevel=2,void this.getRecoStatus();var o=JSON.stringify(this.getLimitOrgIdOnActivePair());u.a.get("/datasource/countLevels?source1Id=".concat(r,"&source1DB=").concat(t,"&source2Id=").concat(s,"&source2DB=").concat(a,"&sourcesLimitOrgId=").concat(o)).then((function(t){e.$store.state.levelMapping.source1=t.data.levelMapping.levelMapping1,e.$store.state.levelMapping.source2=t.data.levelMapping.levelMapping2,e.$store.state.totalSource1Levels=t.data.totalSource1Levels,e.$store.state.totalSource2Levels=t.data.totalSource2Levels,e.$store.state.recoLevel=2,e.renderInitialPage(),e.getRecoStatus()})).catch((function(t){console.log(t),e.$store.state.recoLevel=2,e.renderInitialPage(),e.getRecoStatus()}))},getRecoStatus:function(){var e=this;if(0!==Object.keys(this.$store.state.activePair.source1).length&&0!==Object.keys(this.$store.state.activePair.source2).length){var t=this.toTitleCase(this.$store.state.activePair.source1.name),a=this.toTitleCase(this.$store.state.activePair.source2.name),r=this.$store.state.activePair.userID;u.a.get("/match/recoStatus/"+this.$store.state.activePair.id).then((function(s){s.data.status?e.$store.state.recoStatus=s.data.status:u.a.get("/match/markRecoUnDone/"+t+"/"+a+"/"+r).then((function(t){t.data.status&&(e.$store.state.recoStatus=t.data.status)})).catch((function(e){console.log(e.response.data.error)}))})).catch((function(e){console.log(e.response.data.error)}))}},getDataSources:function(){var e=this;this.$store.state.loadingServers=!0,this.$store.state.dataSources=[];var t=this.$store.state.auth.userID,a=this.$store.state.dhis.user.orgId;u.a.get("/datasource/getSource/"+t+"/"+a).then((function(t){e.$store.state.loadingServers=!1,e.$store.state.dataSources=t.data.sources,e.getDataSourcePair()})).catch((function(t){e.$store.state.loadingServers=!1,console.log(t),e.getDataSourcePair()}))},getUserConfig:function(){var e=this,t=this.$store.state.auth.userID;u.a.get("/config/getUserConfig/"+t).then((function(t){t.data.config&&(e.$store.state.config.userConfig=Object(l["a"])(Object(l["a"])({},e.$store.state.config.userConfig),t.data.config)),t.data.site&&t.data.site.nav&&(t.data.site.nav.hasOwnProperty("active")&&(e.nav.active=t.data.site.nav.active),t.data.site.nav.hasOwnProperty("menu")&&(e.nav.menu=t.data.site.nav.menu),t.data.site.nav.hasOwnProperty("home")&&(e.nav.home=t.data.site.nav.home)),"public@gofr.org"===e.$store.state.auth.username&&(t.data.site.nav.menu.home.url="/HomePublic"),"keycloak"===e.$store.state.idp&&(t.data.site.nav.menu.account={text:e.$t("App.menu.account.msg"),tooltip:e.$t("App.menu.account.tooltip"),order:6,icon:"mdi-account-outline",url:e.$store.state.keycloak.baseURL+"/realms/"+e.$store.state.keycloak.realm+"/account",external:!0,access:{permission:"special",resource:"custom",id:"manage-account"}}),e.getDataSources()})).catch((function(t){console.log(t),e.getDataSources()}))},getDataSourcePair:function(){var e=this;this.$store.state.activePair.source1={},this.$store.state.activePair.source2={};var t=this.$store.state.auth.userID;this.$store.state.initializingApp||(this.$store.state.initializingApp=!0),u.a.get("/datasource/getSourcePair/"+t+"/"+this.$store.state.dhis.user.orgId).then((function(t){e.$store.state.dataSourcePairs=t.data;var a=e.getActiveDataSourcePair();Object.keys(a).length>0&&(e.$store.state.activePair.source1.id=a.source1.id,e.$store.state.activePair.source1.name=a.source1.name,e.$store.state.activePair.source1.display=a.source1.display,e.$store.state.activePair.source1.userID=a.source1.user.id,e.$store.state.activePair.source2.id=a.source2.id,e.$store.state.activePair.source2.name=a.source2.name,e.$store.state.activePair.source2.display=a.source2.display,e.$store.state.activePair.source2.userID=a.source2.user.id,e.$store.state.activePair.id=a.id,e.$store.state.activePair.name=a.name,e.$store.state.activePair.display=a.display,e.$store.state.activePair.shared=a.sharedUsers,e.$store.state.activePair.activeUsers=a.activeUsers,e.$store.state.activePair.userID=a.user.id),e.autoActivateDatasourcePair((function(t){t||e.autoCreateDatasourcePair()})),e.getTotalLevels()})).catch((function(t){console.log(JSON.stringify(t)),e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription="An error occured while getting data source pairs, reload the app to retry",e.getTotalLevels()}))},autoCreateDatasourcePair:function(){var e=this;if(this.$store.state.config.generalConfig.reconciliation.singleDataSource){var t=function(){if(Object.keys(e.$store.state.activePair.source1).length>0)return{v:!1};var t,a=e.$store.state.config.generalConfig.reconciliation.fixSource2To,r={},s={},o=e.$store.state.auth.userID,i=e.$store.state.dhis.user.orgId,n=[],l=Object(c["a"])(e.$store.state.dataSources);try{for(l.s();!(t=l.n()).done;){var d=t.value,u=d.shared.users.find((function(e){return e.id===o})),p=d.owner.id===o,h=!0===d.shareToAll.activated,v=!1;d.owner.orgId&&d.owner.orgId===i&&(v=!0),(p||u||h||v)&&(d.id===a?s=d:r=d,n.push(d))}}catch(g){l.e(g)}finally{l.f()}if(n.length>2||0===Object.keys(r).length||0===Object.keys(s).length)return{v:!1};e.createDatasourcePair(r,s)}();if("object"===Object(n["a"])(t))return t.v}},autoActivateDatasourcePair:function(e){if(Object.keys(this.$store.state.activePair.source1).length>0){var t=!1;return e(t)}if(this.$store.state.dataSourcePairs.length>1||0===this.$store.state.dataSourcePairs.length){var a=!1;return e(a)}if(this.$store.state.dhis.user.orgId&&this.$store.state.config.generalConfig.reconciliation.singlePair){this.$store.state.dataSourcePairs.status="active",this.activeDataSourcePair=this.$store.state.dataSourcePairs[0];var r=!0;e(r),this.activatePair()}else{var s=!1;e(s)}}},components:{appToolbar:rs,appSideMenu:ps},created:function(){var e=this;this.$store.state.config.generalConfig=this.generalConfig,"keycloak"===this.$store.state.idp?(this.$store.state.clientId=oe["a"].v4(),this.$store.state.initializingApp=!0,this.$store.state.denyAccess=!1,this.getUserConfig()):this.$store.state.auth.userObj.resource&&(this.$store.state.config.generalConfig.authDisabled?this.$router.push("login"):u.a.get("/isSessionActive/").then((function(){e.$store.state.clientId=oe["a"].v4(),e.$store.state.initializingApp=!0,e.$store.state.denyAccess=!1,e.getUserConfig()}))),Ws.$on("refreshApp",(function(){e.getDataSources()})),Ws.$on("recalculateScores",(function(){e.$store.state.recalculateScores=!0,e.$router.push({name:"FacilityReconScores"})})),Ws.$on("getDataSources",(function(){e.getDataSources()})),Ws.$on("getUserConfig",(function(){e.getUserConfig()})),Ws.$on("getGeneralConfig",(function(){e.getGeneralConfig()})),Ws.$on("getDataSourcePair",(function(){e.getDataSourcePair()})),Ws.$on("refresh-login",(function(){var t="GET";"keycloak"===e.$store.state.idp&&(t="POST"),u()({method:t,url:"/auth"}).then((function(t){"keycloak"===e.$store.state.idp&&t.data.resource?(e.$store.state.auth.userObj=t.data,e.$cookies.set("userObj",JSON.stringify(t.data),"infinity")):t.data.userObj&&t.data.userObj.resource&&(e.$store.state.auth.userObj=t.data.userObj)}))}))},mounted:function(){var e=document.getElementsByTagName("html")[0];e.style.overflowY="auto"},destroyed:function(){var e=document.getElementsByTagName("html")[0];e.style.overflowY=null},name:"App"},gs=vs,fs=a("7496"),ms=a("553a"),$s=a("f6c4"),xs=a("2db4"),bs=Object(D["a"])(gs,o,i,!1,null,null,null),_s=bs.exports;T()(bs,{VAlert:ce["a"],VApp:fs["a"],VBtn:Q["a"],VCard:I["a"],VCardActions:L["a"],VCardText:L["c"],VDialog:Be["a"],VDivider:O["a"],VFlex:N["a"],VFooter:ms["a"],VIcon:G["a"],VLayout:M["a"],VMain:$s["a"],VProgressLinear:R["a"],VSnackbar:xs["a"],VSpacer:U["a"],VToolbar:E["a"],VToolbarTitle:it["b"]});var ys=a("f309");s["a"].use(ys["a"],{theme:{primary:"#3F51B5",secondary:"#7986CB",accent:"#9c27b0",error:"#f44336",warning:"#ffeb3b",info:"#2196f3",success:"#4caf50"}});var Ss=new ys["a"]({}),ks=a("1dce"),Ps=a.n(ks),As=a("130e"),ws=a("0628"),Ds=a.n(ws),Cs=a("48ac"),Ts=a.n(Cs),Is=a("68ad"),Ls=(a("6d93"),a("0551")),Vs=a.n(Ls),Os=(a("2ca0"),a("caad"),a("2532"),a("0551")),Ns=a("bc3a"),Ms={_code_cache:{},_code_loading:{},_setCache:function(e,t){return Ms._code_cache[e]=t,Ms._code_loading[e]=!1,t},checkConstraints:function(e,t,a,r,s){return new Promise((function(o,i){var n,l=e.split(","),d=[],u=Object(c["a"])(l);try{var p=function(){var e=n.value;if(t[e]){var o=Os.evaluate(a,t[e].expression);if(e.startsWith("gofr-search")){var i=o.shift(),c=["_elements=id"];while(o.length)c.push(o.shift()+"="+encodeURI(o.shift()));d.push(new Promise((function(a,o){Ns.get("/fhir/"+qr.state.config.userConfig.FRDatasource+"/"+i+"?"+c.join("&")).then((function(o){var i=o.data;if(0===i.total)a(!0);else if(s){var n=Os.evaluate(i.entry,"resource.id");n.includes(s)?a(!0):(r.push(t[e].human),a(!1))}else r.push(t[e].human),a(!1)})).catch((function(e){o(e)}))})))}else o.every(Boolean)?d.push(!0):(r.push(t[e].human),d.push(!1))}};for(u.s();!(n=u.n()).done;)p()}catch(h){u.e(h)}finally{u.f()}Promise.all(d).then((function(e){e.every(Boolean)?o(!0):o(!1)})).catch((function(e){i(e)}))}))},lookup:function(e,t){return e?t?Ms.codeLookup(t,e):e.system&&e.code?Ms.codeLookup(e.system,e.code):e.reference?Ms.resourceLookup(e.reference):/([A-Z]\w*)\/([A-Za-z0-9\-.]{1,64})/.test(e)?Ms.resourceLookup(e):new Promise((function(t){return t(e)})):new Promise((function(t){return t(e)}))},resourceLookup:function(e){return new Promise((function(t){var a=e;Ms._code_loading[a]?setTimeout((function(){t(Ms.resourceLookup(e))}),200):Ms._code_cache[a]?t(Ms._code_cache[a]):(Ms._code_loading[a]=!0,Ns.get("/fhir/"+qr.state.config.userConfig.FRDatasource+"/$short-name?reference="+e).then((function(r){var s=r.data;s.display?t(Ms._setCache(a,s.display)):(console.log("No display data from reference found ",a,s),t(Ms._setCache(a,e)))})).catch((function(r){console.log(r),t(Ms._setCache(a,e))})))}))},codeLookup:function(e,t,a){return new Promise((function(r){var s=e+"#"+t;Ms._code_loading[s]?setTimeout((function(){r(Ms.codeLookup(e,t,a))}),200):Ms._code_cache[s]?r(Ms._code_cache[s]):(Ms._code_loading[s]=!0,Ns.get("/fhir/DEFAULT/$short-name?system="+e+"&code="+t+"&valuset="+a).then((function(e){var a=e.data;a.display?r(Ms._setCache(s,a.display)):(console.log("No display data from codesystem found ",s,a),r(Ms._setCache(s,t)))})).catch((function(e){console.log(e),r(Ms._setCache(s,t))})))}))},pathFieldExpression:function(e){var t=e.substring(e.indexOf(":")+1);return t.includes("-")||t.includes(".")?"`"+t+"`":t},expand:function(e){var t=function(e,t){return e.display===t.display?e.code===t.code?0:e.code<t.code?-1:1:e.display<t.display?-1:1},a=function(e,t){if(e.compose.include){var a,r=Object(c["a"])(e.compose.include);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(s.concept){var o,i=Object(c["a"])(s.concept);try{for(i.s();!(o=i.n()).done;){var n=o.value;n.system=s.system,t.push(n)}}catch(l){i.e(l)}finally{i.f()}}}}catch(l){r.e(l)}finally{r.f()}}};return new Promise((function(r,s){var o=e.lastIndexOf("/"),i=e.lastIndexOf("|"),n=e.slice(o+1,-1!==i?i:e.length),c=[];Ns.get("/fhir/DEFAULT/ValueSet/"+n+"/$expand").then((function(e){var o=e.data;try{o.expansion&&0!==o.expansion.total||!o.compose.include?c=o.expansion.contains:a(o,c),c.sort(t),r(c)}catch(i){console.log(i),s(new Error("Invalid response from server."))}})).catch((function(){Ns.get("/fhir/DEFAULT/ValueSet/"+n).then((function(e){var s=e.data;a(s,c),c.sort(t),r(c)})).catch((function(e){s(e)}))}))}))}},Rs=Ms,Us=a("be6f"),Es=a("432f"),Fs=document.createElement("div");Fs.setAttribute("id","progressBarContainer"),document.body.appendChild(Fs);var qs=new Es.Line("#progressBarContainer",{strokeWidth:2,easing:"easeInOut",duration:1e3,color:"black",trailColor:"#eee",trailWidth:1,svgStyle:{width:"100%",height:"100%"},from:{color:"#569fd3"},to:{color:"#d06f1a"},step:function(e,t){t.path.setAttribute("stroke",e.color),t.setText("Loading...")}}),js=0,Hs="increment",Bs=setInterval((function(){js>=1?Hs="decrement":js<=0&&(Hs="increment"),js="increment"===Hs?(parseFloat(js)+.1).toFixed(1):(parseFloat(js)-.1).toFixed(1),qs.animate(js)}),1100);Object.defineProperty(s["a"].prototype,"$fhirpath",{value:Vs.a}),Object.defineProperty(s["a"].prototype,"$fhirutils",{value:Rs});var Gs={install:function(e){e.$tasksVerification=hs}};Gs.install=function(e){e.$tasksVerification=hs,Object.defineProperties(e.prototype,{$tasksVerification:{get:function(){return hs}}})},s["a"].use(Gs),u.a.defaults.withCredentials=!0,s["a"].use(ye.a),s["a"].use(Ps.a),s["a"].use(As["a"],u.a),s["a"].use(Ds.a),s["a"].config.productionTip=!1;var Ws=new s["a"];function zs(e){var t=location.href.split("api");if(!(t.length>=2)){var a=!1;return e(a)}var r=location.href.split("api").shift();u.a.get(r+"api/dataStore/GOFR/config").then((function(t){if(e(t.data),!t.data.BACKEND_SERVER){var a=".",r={BACKEND_SERVER:a};Js(r)}})).catch((function(t){console.log(JSON.stringify(t));var a=!1,r=".",s={BACKEND_SERVER:r};return Js(s),e(a)}))}function Js(e){var t=location.href.split("api").shift();u.a.post(t+"api/dataStore/GOFR/config",e)}function Ys(){return new Promise((function(e){u.a.post("/auth/login/",{username:"public@gofr.org",password:"public"}).then((function(t){qr.state.auth.username="public@gofr.org",qr.state.auth.userObj=t.data.userObj,qr.state.auth.userID=t.data.userObj.resource.id,t.data.userObj?(qr.state.public_access=!0,qr.state.clientId=oe["a"].v4(),qr.state.initializingApp=!0,qr.state.denyAccess=!1,e()):(qr.state.public_access=!1,e())})).catch((function(){qr.state.public_access=!1,e()}))}))}function Ks(e){return new Promise((function(t){if(!1===e.public_access.enabled)return t(!1);s["a"].$keycloak.init({onLoad:"check-sso",checkLoginIframe:!1}).then((function(){if(s["a"].$keycloak.token||"true"==ye.a.get("loggedout-public"))return ye.a.set("loggedout-public",!1),t(!1);var a=qr.state.keycloak.baseURL+"/realms/"+qr.state.keycloak.realm+"/protocol/openid-connect/token",r="client_id=".concat(qr.state.keycloak.UIClientId,"&grant_type=password&username=public@gofr.org&password=public");u.a.post(a,r).then((function(a){var r=Ts.a.decode(a.data.access_token),o=a.data.access_token,i=a.data.refresh_token;s["a"].$keycloak.init({onLoad:"login-required",checkLoginIframe:!1,token:o,refreshToken:i}).then((function(){qr.state.public_access=!0,setInterval((function(){s["a"].$keycloak.updateToken(70)}),6e4),u.a.interceptors.request.use((function(e){return e.headers["Authorization"]="Bearer ".concat(a.data.access_token),e}),(function(e){return Promise.reject(e)}));var o={resourceType:"Person",id:r.sub,meta:{profile:["http://gofr.org/fhir/StructureDefinition/gofr-person-user"]},name:[{use:"official",text:"Public User"}],active:!0,telecom:[{system:"email",value:"public@gofr.org"}]};u()({method:"POST",url:"/auth",data:o}).then((function(a){ye.a.set("userObj",JSON.stringify(a.data),"infinity"),qr.state.auth.userObj=a.data,qr.state.auth.userID=r.sub,qr.state.auth.username="public@gofr.org",Xs(e),t(!0)})).catch((function(e){console.error(e)}))}))})).catch((function(e){console.error(e)}))}))}))}function Xs(e){clearInterval(Bs),document.getElementById("progressBarContainer").remove(),new s["a"]({router:Fr,store:qr,i18n:jr,vuetify:Ss,data:function(){return{config:e}},render:function(e){return e(_s,{props:{generalConfig:this.config}})}}).$mount("#app")}"."===Us.BACKEND_HOST&&(Us.BACKEND_HOST=window.location.hostname,Us.BACKEND_PROTOCOL=window.location.protocol.replace(":","")),Us.BACKEND_SERVER=Us.BACKEND_PROTOCOL+"://"+Us.BACKEND_HOST+":"+Us.BACKEND_PORT,zs((function(e){e&&e.BACKEND_SERVER,u.a.defaults.baseURL=".";var t=JSON.stringify(qr.state.config.generalConfig);u.a.get("/config/getGeneralConfig?defaultGenerConfig="+t).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,o,i,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.data.generalConfig,qr.state.idp=t.data.otherConfig.idp,qr.state.keycloak=t.data.otherConfig.keycloak,qr.state.version=t.data.version,a||(a={}),t.data.generalConfig.authDisabled||"keycloak"!==qr.state.idp){e.next=23;break}return o={realm:t.data.otherConfig.keycloak.realm,clientId:t.data.otherConfig.keycloak.UIClientId,url:t.data.otherConfig.keycloak.baseURL,onLoad:"login-required"},i=Is(o),n={install:function(e){e.$keycloak=i}},n.install=function(e){e.$keycloak=i,Object.defineProperties(e.prototype,{$keycloak:{get:function(){return i}}})},s["a"].use(n),e.next=13,Ks(a);case 13:if(c=e.sent,c){e.next=21;break}if(i.token){e.next=18;break}return e.next=18,i.init({onLoad:o.onLoad}).then((function(e){e||window.location.reload()})).catch((function(){alert("Keycloak access failed")}));case 18:u.a.interceptors.request.use((function(e){return e.headers["Authorization"]="Bearer ".concat(i.token),e}),(function(e){return Promise.reject(e)})),i.loadUserInfo().then((function(e){"public@gofr.org"===e.preferred_username?qr.state.public_access=!0:qr.state.public_access=!1;var t={resourceType:"Person",id:e.sub,meta:{profile:["http://gofr.org/fhir/StructureDefinition/gofr-person-user"]},name:[{use:"official",text:e.name}],active:!0};e.email&&(t.telecom=[{system:"email",value:e.email}]),u()({method:"POST",url:"/auth",data:t}).then((function(t){ye.a.set("userObj",JSON.stringify(t.data),"infinity"),qr.state.auth.userObj=t.data,qr.state.auth.userID=e.sub,qr.state.auth.username=e.preferred_username,Xs(a)})).catch((function(e){console.error(e)}))})),setInterval((function(){i.updateToken(70)}),6e4);case 21:e.next=24;break;case 23:u()({method:"GET",url:"/auth"}).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.data.userObj||!t.data.userObj.resource){e.next=8;break}r=t.data.userObj.resource.telecom.find((function(e){return"email"===e.system})),r&&(qr.state.auth.username=r.value),"public@gofr.org"===qr.state.auth.username?qr.state.public_access=!0:qr.state.public_access=!1,qr.state.auth.userObj=t.data.userObj,qr.state.auth.userID=t.data.userObj.resource.id,e.next=11;break;case 8:if(!0!==a.public_access.enabled){e.next=11;break}return e.next=11,Ys();case 11:s["a"].prototype.$keycloak=null,Xs(a);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==a.public_access.enabled){e.next=3;break}return e.next=3,Ys();case 3:s["a"].prototype.$keycloak=null,Xs(a);case 5:case"end":return e.stop()}}),e)}))));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},"586a":function(e,t,a){"use strict";a("2824")},"5a61":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",e._l(e.issues,(function(t,r){return a("v-col",{key:r,attrs:{sm:"4"}},[a("v-card",[a("v-card-subtitle",{staticClass:"error white--text text-uppercase font-weight-bold"},[e._v("Error")]),a("v-spacer"),a("v-card-text",{staticClass:"primary--text font-weight-bold"},[e._v(e._s(t.diagnostics))])],1)],1)})),1)],1)},s=[],o={name:"gofr-outcome",props:["issues"],data:function(){return{}}},i=o,n=a("2877"),c=a("6544"),l=a.n(c),d=a("b0af"),u=a("99d9"),p=a("62ad"),h=a("a523"),v=a("0fd9"),g=a("2fa4"),f=Object(n["a"])(i,r,s,!1,null,null,null);t["default"]=f.exports;l()(f,{VCard:d["a"],VCardSubtitle:u["b"],VCardText:u["c"],VCol:p["a"],VContainer:h["a"],VRow:v["a"],VSpacer:g["a"]})},"6ff6":function(e,t,a){"use strict";a("41c2")},7063:function(e,t,a){},"754f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEMAAAAbCAYAAAAnFzLpAAAGGklEQVRYR+1YaVCTVxQ9BBLWEBYRGhAjFPetVRRoQVnFZRQtYq1Tl6kzij/q2k7dZtTSxW3sVGeqVtHOuLXQYnFBFscNFwqIYikKRRkpq2GRGJCEJJ37RV6SJhBQ63Qs59/7ct9795137vJi4bNktwa94Biw6CVDp4ReMvSiopeMXjJMJ8leZTyPMoQ2AhxePoNNzbx9H3vP5bPxByHD8V7gEDb++MA5VNbLelSnlkaPgf+bYtyrrMfe9Hw0t7T1aP6LGndbGc72NsjbuZjt92N2EdYducDGa2ICER89ho2jNh1FWU1jt/0LGOiJo6tmMvsvk7NxMOtWt+ebMrQSCOAt8YWnxAcOIhFsbe2gULShqaEeTVIp7v1+G0qFjvD/DBmerkJcTJgPnoUFd66l350Fqe954SXxwdtBwbC2sel0CfkTGa5lZaCpQdqzPuPfVgZ5493HEWO4MJHijwqtg88De6EQkTFx4POt2HSNRoMnzY9hLxSBx9MSTmh72obUYz8A0Jhuuuhy+rs5QWRnzcXvU2U7BFaWKN4T3+0wCV57GFWNT7ib9vVwhoOtAA8fPUa9rNXk+cjO3oavc1LZDkW72sjWVmAFD2cHuDnaQdGuwqPmFtQ2ytGuNrR18xAjZNJUtLbIUZh3AzUVFWhvV4LPFyAwLBLunl5s7Utpp1FXXWlMBsX9ssljYWetdUyl1iCnpBKrEjNwZuNcuAptue/mcsa4Tw6C8siMcYNgzbdkG9/9S4otP13h1tSHv58YJ1bPYp8SkrJx6LwuZ0j6irByegCiRvtwF6MPeZsSV4oeYn/GTdwur2U/iVxcIWtqglqtMrAXe0vwTsQk9u1WznWUFhUakrF1QThi9SqC/gq1TXLwrSzh4qCNQXNkFJbXYaSkr0kV0I1OSzhhkGC7IoMuIHX9+/Bwsu80ajQaYMrnx1BS1WA2siR+A+EfHMrsLpxNhbSmWkfGiP59cXJtHDMg2R2/XISymgYM8eqD2KChsNSLNXNk0EJ0S2fySiGys0Hcu0M5aXfgdF4plh9IZ+OuyKALoovqwL70m0i7+SccbARcCIaPHIBWhRLL9qWZJYJnyUPE9FiInJ052xa5HGnJx6FWqXRk7FwUiZjxg9hiaw5nIeXGXTaODRqCrfN1DpkjI7+sGnN3/sKFGYGcztg0j61HZZfKbwe6ImNR2ChsiAtmtt9nFmBHynWjPGGWCVhg/IRQePv6aU01wKX006ir0oYsK60pn8UxWVOSC/g0EWrS3jNY8Xi48+0SFq/myFh9KBMnc+4Z+Hf5iwWgEkqQPVVg9Ir93SKDVEv+Pau63BxpcwuSrhXjyMVC1DTJzfJgYUFEhKOfjy+zvZP3G+4WFrAxIyN3x2KWD0jes75OMtpA/zDmyIjb/jNIHfo4sjIGgYO0WbwnZJD9/NCR2DA72CBU6btSpcap3BJ8cyqn046Xx+MhYGIEPCUDtILQaJB/9TIelOiUb6AM6i6plyAU3K9B7LZkIzLOb/kQlNUJ5siI3nwMpdWGyexFyKA9vVwdsTjyLVDIUonVR1WDDLO3JRuphM/nIzA8Gu5iMWeuUqlw40IWqh6WG52PKSN1/RwM6+fGGVDtpjDRByXPot3x4FvyukWGqXb8Rcno8EdoK+CqXvzksazU02+7UnOw52wuc9va1g4hUVPg5OrKfWtrbUV25jk0SOuMiDBQxq6PojDdfyAzWnEwHadyS9l4ZsBg7FgYwcbmlPEyyXC0szb5aHN3skf2VwtZC085inIVwcHRESGTpoG6UQK9R65mpnHVozMwZQz3dsOv6+YwOyqtSVeL8aC2EX5vuCAmYDBTRXfC5GWSsXpGALd/RkEZiiukqGzQvoYnDu/PhU0HtqVcA5VdepSFTY0xeJfIZTIolYpOicg8mWzYdCXMC8Xc4GEmJ+SVVUPsIoTY2eGVhwmRQV1xVyive4y47clcu0+JMigsqkv7f/6YlLjPuB2nmq4fi7JWBahB2nziEuZNGIGNz+r9qwyT0BESjoxREnejakKHp34o8fwtUJdMeGlk9IjO18y42/9nvGbn7rqa/B8Oa+6MvcrQY+hvaNExIn99uskAAAAASUVORK5CYII="},"8cb4":function(e,t,a){"use strict";a("7063")},"9d64":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("gofr-template",{key:e.$route.path},[e._v(" Loading... ")])},s=[],o=(a("d3b7"),a("3ca3"),a("ddb0"),a("a026")),i=a("bc3a"),n=a.n(i),c={name:"fhir-page-search",props:["page","requestAction"],data:function(){return{}},created:function(){this.getTemplate()},methods:{getTemplate:function(){var e=this;n.a.get("/config/page/"+this.page+"/search").then((function(t){var r=t.data;"OperationOutcome"===r.resourceType?o["a"].component("gofr-template",{name:"gofr-template",data:function(){return{issues:r.issue}},components:{"gofr-outcome":function(){return Promise.resolve().then(a.bind(null,"5a61"))}},template:'<div><gofr-outcome :issues="issues"></gofr-outcome></div>'}):o["a"].component("gofr-template",{name:"gofr-template",data:function(){return{fields:r.data.fields,addLink:r.data.addLink,terms:{},requestAction:this.$route.params.requestAction,searchAction:this.$route.query.searchAction}},components:{"gofr-search":function(){return a.e("chunk-2d0a4639").then(a.bind(null,"05db"))},"gofr-search-code":function(){return a.e("chunk-2d0aa9e6").then(a.bind(null,"127f"))},"gofr-search-string-term":function(){return a.e("chunk-2d2106b9").then(a.bind(null,"b88e"))},"gofr-search-reference-term":function(){return a.e("chunk-0a6b076a").then(a.bind(null,"ed40"))}},template:r.template,methods:{searchData:function(e,t){this.$set(this.terms,e,t)}}}),e.$forceUpdate()})).catch((function(t){console.log(t),o["a"].component("gofr-template",{template:"<div><h1>Error</h1><p>An error occurred trying to load this page</p>.</div>"}),e.$forceUpdate()}))}},beforeCreate:function(){o["a"].component("gofr-template",{template:"<div>Loading...</div>"})}},l=c,d=a("2877"),u=Object(d["a"])(l,r,s,!1,null,null,null);t["default"]=u.exports},afb4:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}},[a("FhirMap",{attrs:{accessToken:e.accessToken,fhirServerUrl:e.fhirServerUrl,options:e.options}})],1)},s=[],o=a("9e02"),i={name:"App",data:function(){return{accessToken:"pk.eyJ1IjoiYWxseXNoYWJhbjUiLCJhIjoiY2twbzFpODRtMDFkMTJwbWFvNXUza3hodCJ9.mhcv_KlLLtvR0x73E90WAw",options:{center:[8.521441,-11.84389],zoom:3,isFacility:!0,searchOnLoad:!0,hierarchyExtension:{parameter:"ihe-mcsd-hierarchy-partof"},root:"cf12e355-a553-5875-b271-2dfb97b22355",includeRoot:!1,contextServices:[],searchParameters:[{key:"physicalType",system:!1,label:"Physical Type",placeholder:"Physical Type..",options:[]}],filters:[],attributes:[{name:"identifier",label:"Identifiers",expression:"Location.identifier.value"},{name:"description",label:"Description",expression:"Location.description.single()"},{name:"status",label:"Status",expression:"Location.status.single()"}],locationStyles:{fill:{"fill-color":"#B22222","fill-opacity":.8,"fill-outline-color":"black"}},selectedStyles:{circle:{"circle-radius":10,"circle-color":"#d3d3d3","circle-stroke-width":2,"circle-stroke-color":"#FFFFFF"}}}}},components:{FhirMap:o["a"]},computed:{fhirServerUrl:function(){return"/fhir/"+this.$store.state.config.userConfig.FRDatasource}}},n=i,c=(a("6ff6"),a("2877")),l=a("6544"),d=a.n(l),u=a("a523"),p=Object(c["a"])(n,r,s,!1,null,null,null);t["default"]=p.exports;d()(p,{VContainer:u["a"]})},be6f:function(e){e.exports=JSON.parse('{"BACKEND_HOST":".","BACKEND_PORT":"4000","BACKEND_PROTOCOL":"http"}')}});
//# sourceMappingURL=app.2ba94170.js.map